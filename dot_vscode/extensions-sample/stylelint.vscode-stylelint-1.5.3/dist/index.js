"use strict";var $g=Object.defineProperty;var TN=Object.getOwnPropertyDescriptor;var qN=Object.getOwnPropertyNames;var ON=Object.prototype.hasOwnProperty;var MN=(t,e)=>()=>(t&&(e=t(t=0)),e);var _=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),xN=(t,e)=>{for(var r in e)$g(t,r,{get:e[r],enumerable:!0})},kN=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of qN(e))!ON.call(t,i)&&i!==r&&$g(t,i,{get:()=>e[i],enumerable:!(n=TN(e,i))||n.enumerable});return t};var FN=t=>kN($g({},"__esModule",{value:!0}),t);var gn=_(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.asPromise=Ct.thenable=Ct.typedArray=Ct.stringArray=Ct.array=Ct.func=Ct.error=Ct.number=Ct.string=Ct.boolean=void 0;function IN(t){return t===!0||t===!1}Ct.boolean=IN;function yS(t){return typeof t=="string"||t instanceof String}Ct.string=yS;function AN(t){return typeof t=="number"||t instanceof Number}Ct.number=AN;function NN(t){return t instanceof Error}Ct.error=NN;function vS(t){return typeof t=="function"}Ct.func=vS;function _S(t){return Array.isArray(t)}Ct.array=_S;function LN(t){return _S(t)&&t.every(e=>yS(e))}Ct.stringArray=LN;function jN(t,e){return Array.isArray(t)&&t.every(e)}Ct.typedArray=jN;function bS(t){return t&&vS(t.then)}Ct.thenable=bS;function $N(t){return t instanceof Promise?t:bS(t)?new Promise((e,r)=>{t.then(n=>e(n),n=>r(n))}):Promise.resolve(t)}Ct.asPromise=$N});var qo=_(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.stringArray=ir.array=ir.func=ir.error=ir.number=ir.string=ir.boolean=void 0;function WN(t){return t===!0||t===!1}ir.boolean=WN;function wS(t){return typeof t=="string"||t instanceof String}ir.string=wS;function HN(t){return typeof t=="number"||t instanceof Number}ir.number=HN;function UN(t){return t instanceof Error}ir.error=UN;function zN(t){return typeof t=="function"}ir.func=zN;function SS(t){return Array.isArray(t)}ir.array=SS;function KN(t){return SS(t)&&t.every(e=>wS(e))}ir.stringArray=KN});var dp=_(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.Message=fe.NotificationType9=fe.NotificationType8=fe.NotificationType7=fe.NotificationType6=fe.NotificationType5=fe.NotificationType4=fe.NotificationType3=fe.NotificationType2=fe.NotificationType1=fe.NotificationType0=fe.NotificationType=fe.RequestType9=fe.RequestType8=fe.RequestType7=fe.RequestType6=fe.RequestType5=fe.RequestType4=fe.RequestType3=fe.RequestType2=fe.RequestType1=fe.RequestType=fe.RequestType0=fe.AbstractMessageSignature=fe.ParameterStructures=fe.ResponseError=fe.ErrorCodes=void 0;var Us=qo(),Wg;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(Wg||(fe.ErrorCodes=Wg={}));var Hg=class t extends Error{constructor(e,r,n){super(r),this.code=Us.number(e)?e:Wg.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};fe.ResponseError=Hg;var Ar=class t{constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};fe.ParameterStructures=Ar;Ar.auto=new Ar("auto");Ar.byPosition=new Ar("byPosition");Ar.byName=new Ar("byName");var ct=class{constructor(e,r){this.method=e,this.numberOfParams=r}get parameterStructures(){return Ar.auto}};fe.AbstractMessageSignature=ct;var Ug=class extends ct{constructor(e){super(e,0)}};fe.RequestType0=Ug;var zg=class extends ct{constructor(e,r=Ar.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};fe.RequestType=zg;var Kg=class extends ct{constructor(e,r=Ar.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};fe.RequestType1=Kg;var Bg=class extends ct{constructor(e){super(e,2)}};fe.RequestType2=Bg;var Vg=class extends ct{constructor(e){super(e,3)}};fe.RequestType3=Vg;var Gg=class extends ct{constructor(e){super(e,4)}};fe.RequestType4=Gg;var Yg=class extends ct{constructor(e){super(e,5)}};fe.RequestType5=Yg;var Xg=class extends ct{constructor(e){super(e,6)}};fe.RequestType6=Xg;var Jg=class extends ct{constructor(e){super(e,7)}};fe.RequestType7=Jg;var Qg=class extends ct{constructor(e){super(e,8)}};fe.RequestType8=Qg;var Zg=class extends ct{constructor(e){super(e,9)}};fe.RequestType9=Zg;var ep=class extends ct{constructor(e,r=Ar.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};fe.NotificationType=ep;var tp=class extends ct{constructor(e){super(e,0)}};fe.NotificationType0=tp;var rp=class extends ct{constructor(e,r=Ar.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};fe.NotificationType1=rp;var np=class extends ct{constructor(e){super(e,2)}};fe.NotificationType2=np;var ip=class extends ct{constructor(e){super(e,3)}};fe.NotificationType3=ip;var sp=class extends ct{constructor(e){super(e,4)}};fe.NotificationType4=sp;var op=class extends ct{constructor(e){super(e,5)}};fe.NotificationType5=op;var ap=class extends ct{constructor(e){super(e,6)}};fe.NotificationType6=ap;var up=class extends ct{constructor(e){super(e,7)}};fe.NotificationType7=up;var cp=class extends ct{constructor(e){super(e,8)}};fe.NotificationType8=cp;var lp=class extends ct{constructor(e){super(e,9)}};fe.NotificationType9=lp;var RS;(function(t){function e(i){let s=i;return s&&Us.string(s.method)&&(Us.string(s.id)||Us.number(s.id))}t.isRequest=e;function r(i){let s=i;return s&&Us.string(s.method)&&i.id===void 0}t.isNotification=r;function n(i){let s=i;return s&&(s.result!==void 0||!!s.error)&&(Us.string(s.id)||Us.number(s.id)||s.id===null)}t.isResponse=n})(RS||(fe.Message=RS={}))});var hp=_(Gi=>{"use strict";var CS;Object.defineProperty(Gi,"__esModule",{value:!0});Gi.LRUCache=Gi.LinkedMap=Gi.Touch=void 0;var sr;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(sr||(Gi.Touch=sr={}));var il=class{constructor(){this[CS]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=sr.None){let n=this._map.get(e);if(n)return r!==sr.None&&this.touch(n,r),n.value}set(e,r,n=sr.None){let i=this._map.get(e);if(i)i.value=r,n!==sr.None&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case sr.None:this.addItemLast(i);break;case sr.First:this.addItemFirst(i);break;case sr.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.key,done:!1};return r=r.next,i}else return{value:void 0,done:!0}}};return n}values(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.value,done:!1};return r=r.next,i}else return{value:void 0,done:!0}}};return n}entries(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:[r.key,r.value],done:!1};return r=r.next,i}else return{value:void 0,done:!0}}};return n}[(CS=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==sr.First&&r!==sr.Last)){if(r===sr.First){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===sr.Last){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}};Gi.LinkedMap=il;var fp=class extends il{constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=sr.AsNew){return super.get(e,r)}peek(e){return super.get(e,sr.None)}set(e,r){return super.set(e,r,sr.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Gi.LRUCache=fp});var ES=_(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});sl.Disposable=void 0;var DS;(function(t){function e(r){return{dispose:r}}t.create=e})(DS||(sl.Disposable=DS={}))});var Yi=_(mp=>{"use strict";Object.defineProperty(mp,"__esModule",{value:!0});var gp;function pp(){if(gp===void 0)throw new Error("No runtime abstraction layer installed");return gp}(function(t){function e(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");gp=r}t.install=e})(pp||(pp={}));mp.default=pp});var Mo=_(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.Emitter=Oo.Event=void 0;var BN=Yi(),PS;(function(t){let e={dispose(){}};t.None=function(){return e}})(PS||(Oo.Event=PS={}));var yp=class{add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,r)})}remove(e,r=null){if(!this._callbacks)return;let n=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,o=n.length;s<o;s++)try{r.push(n[s].apply(i[s],e))}catch(a){(0,BN.default)().console.error(a)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},ol=class t{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new yp),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,r),i.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Oo.Emitter=ol;ol._noop=function(){}});var cl=_(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});xo.CancellationTokenSource=xo.CancellationToken=void 0;var VN=Yi(),GN=qo(),vp=Mo(),al;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:vp.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:vp.Event.None});function e(r){let n=r;return n&&(n===t.None||n===t.Cancelled||GN.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}t.is=e})(al||(xo.CancellationToken=al={}));var YN=Object.freeze(function(t,e){let r=(0,VN.default)().timer.setTimeout(t.bind(e),0);return{dispose(){r.dispose()}}}),ul=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?YN:(this._emitter||(this._emitter=new vp.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},_p=class{get token(){return this._token||(this._token=new ul),this._token}cancel(){this._token?this._token.cancel():this._token=al.Cancelled}dispose(){this._token?this._token instanceof ul&&this._token.dispose():this._token=al.None}};xo.CancellationTokenSource=_p});var TS=_(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});ko.SharedArrayReceiverStrategy=ko.SharedArraySenderStrategy=void 0;var XN=cl(),tu;(function(t){t.Continue=0,t.Cancelled=1})(tu||(tu={}));var bp=class{constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let r=new SharedArrayBuffer(4),n=new Int32Array(r,0,1);n[0]=tu.Continue,this.buffers.set(e.id,r),e.$cancellationData=r}async sendCancellation(e,r){let n=this.buffers.get(r);if(n===void 0)return;let i=new Int32Array(n,0,1);Atomics.store(i,0,tu.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};ko.SharedArraySenderStrategy=bp;var wp=class{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===tu.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},Sp=class{constructor(e){this.token=new wp(e)}cancel(){}dispose(){}},Rp=class{constructor(){this.kind="request"}createCancellationTokenSource(e){let r=e.$cancellationData;return r===void 0?new XN.CancellationTokenSource:new Sp(r)}};ko.SharedArrayReceiverStrategy=Rp});var Dp=_(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});ll.Semaphore=void 0;var JN=Yi(),Cp=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,JN.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}};ll.Semaphore=Cp});var OS=_(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});Xi.ReadableStreamMessageReader=Xi.AbstractMessageReader=Xi.MessageReader=void 0;var Pp=Yi(),Fo=qo(),Ep=Mo(),QN=Dp(),qS;(function(t){function e(r){let n=r;return n&&Fo.func(n.listen)&&Fo.func(n.dispose)&&Fo.func(n.onError)&&Fo.func(n.onClose)&&Fo.func(n.onPartialMessage)}t.is=e})(qS||(Xi.MessageReader=qS={}));var dl=class{constructor(){this.errorEmitter=new Ep.Emitter,this.closeEmitter=new Ep.Emitter,this.partialMessageEmitter=new Ep.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Fo.string(e.message)?e.message:"unknown"}`)}};Xi.AbstractMessageReader=dl;var Tp;(function(t){function e(r){let n,i,s,o=new Map,a,u=new Map;if(r===void 0||typeof r=="string")n=r??"utf-8";else{if(n=r.charset??"utf-8",r.contentDecoder!==void 0&&(s=r.contentDecoder,o.set(s.name,s)),r.contentDecoders!==void 0)for(let c of r.contentDecoders)o.set(c.name,c);if(r.contentTypeDecoder!==void 0&&(a=r.contentTypeDecoder,u.set(a.name,a)),r.contentTypeDecoders!==void 0)for(let c of r.contentTypeDecoders)u.set(c.name,c)}return a===void 0&&(a=(0,Pp.default)().applicationJson.decoder,u.set(a.name,a)),{charset:n,contentDecoder:s,contentDecoders:o,contentTypeDecoder:a,contentTypeDecoders:u}}t.fromOptions=e})(Tp||(Tp={}));var qp=class extends dl{constructor(e,r){super(),this.readable=e,this.options=Tp.fromOptions(r),this.buffer=(0,Pp.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new QN.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let n=this.buffer.tryReadHeaders(!0);if(!n)return;let i=n.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(n))}`));return}let s=parseInt(i);if(isNaN(s)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=s}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let n=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(r):r,i=await this.options.contentTypeDecoder.decode(n,this.options);this.callback(i)}).catch(n=>{this.fireError(n)})}}catch(r){this.fireError(r)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,Pp.default)().timer.setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Xi.ReadableStreamMessageReader=qp});var IS=_(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});Ji.WriteableStreamMessageWriter=Ji.AbstractMessageWriter=Ji.MessageWriter=void 0;var MS=Yi(),ru=qo(),ZN=Dp(),xS=Mo(),eL="Content-Length: ",kS=`\r
`,FS;(function(t){function e(r){let n=r;return n&&ru.func(n.dispose)&&ru.func(n.onClose)&&ru.func(n.onError)&&ru.func(n.write)}t.is=e})(FS||(Ji.MessageWriter=FS={}));var fl=class{constructor(){this.errorEmitter=new xS.Emitter,this.closeEmitter=new xS.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${ru.string(e.message)?e.message:"unknown"}`)}};Ji.AbstractMessageWriter=fl;var Op;(function(t){function e(r){return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:(0,MS.default)().applicationJson.encoder}:{charset:r.charset??"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:r.contentTypeEncoder??(0,MS.default)().applicationJson.encoder}}t.fromOptions=e})(Op||(Op={}));var Mp=class extends fl{constructor(e,r){super(),this.writable=e,this.options=Op.fromOptions(r),this.errorCount=0,this.writeSemaphore=new ZN.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(eL,n.byteLength.toString(),kS),i.push(kS),this.doWrite(e,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){this.writable.end()}};Ji.WriteableStreamMessageWriter=Mp});var AS=_(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.AbstractMessageBuffer=void 0;var tL=13,rL=10,nL=`\r
`,xp=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let r=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let r=0,n=0,i=0,s=0;e:for(;n<this._chunks.length;){let c=this._chunks[n];for(i=0;i<c.length;){switch(c[i]){case tL:switch(r){case 0:r=1;break;case 2:r=3;break;default:r=0}break;case rL:switch(r){case 1:r=2;break;case 3:r=4,i++;break e;default:r=0}break;default:r=0}i++}s+=c.byteLength,n++}if(r!==4)return;let o=this._read(s+i),a=new Map,u=this.toString(o,"ascii").split(nL);if(u.length<2)return a;for(let c=0;c<u.length-2;c++){let l=u[c],f=l.indexOf(":");if(f===-1)throw new Error(`Message header must separate key and value using ':'
${l}`);let d=l.substr(0,f),p=l.substr(f+1).trim();a.set(e?d.toLowerCase():d,p)}return a}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],o=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,o}let r=this.allocNative(e),n=0,i=0;for(;e>0;){let s=this._chunks[i];if(s.byteLength>e){let o=s.slice(0,e);r.set(o,n),n+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else r.set(s,n),n+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return r}};hl.AbstractMessageBuffer=xp});var WS=_(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.createMessageConnection=Se.ConnectionOptions=Se.MessageStrategy=Se.CancellationStrategy=Se.CancellationSenderStrategy=Se.CancellationReceiverStrategy=Se.RequestCancellationReceiverStrategy=Se.IdCancellationReceiverStrategy=Se.ConnectionStrategy=Se.ConnectionError=Se.ConnectionErrors=Se.LogTraceNotification=Se.SetTraceNotification=Se.TraceFormat=Se.TraceValues=Se.Trace=Se.NullLogger=Se.ProgressType=Se.ProgressToken=void 0;var NS=Yi(),vt=qo(),me=dp(),LS=hp(),nu=Mo(),kp=cl(),ou;(function(t){t.type=new me.NotificationType("$/cancelRequest")})(ou||(ou={}));var Fp;(function(t){function e(r){return typeof r=="string"||typeof r=="number"}t.is=e})(Fp||(Se.ProgressToken=Fp={}));var iu;(function(t){t.type=new me.NotificationType("$/progress")})(iu||(iu={}));var Ip=class{constructor(){}};Se.ProgressType=Ip;var Ap;(function(t){function e(r){return vt.func(r)}t.is=e})(Ap||(Ap={}));Se.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var Be;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(Be||(Se.Trace=Be={}));var jS;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(jS||(Se.TraceValues=jS={}));(function(t){function e(n){if(!vt.string(n))return t.Off;switch(n=n.toLowerCase(),n){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function r(n){switch(n){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}t.toString=r})(Be||(Se.Trace=Be={}));var sn;(function(t){t.Text="text",t.JSON="json"})(sn||(Se.TraceFormat=sn={}));(function(t){function e(r){return vt.string(r)?(r=r.toLowerCase(),r==="json"?t.JSON:t.Text):t.Text}t.fromString=e})(sn||(Se.TraceFormat=sn={}));var Np;(function(t){t.type=new me.NotificationType("$/setTrace")})(Np||(Se.SetTraceNotification=Np={}));var gl;(function(t){t.type=new me.NotificationType("$/logTrace")})(gl||(Se.LogTraceNotification=gl={}));var su;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(su||(Se.ConnectionErrors=su={}));var Io=class t extends Error{constructor(e,r){super(r),this.code=e,Object.setPrototypeOf(this,t.prototype)}};Se.ConnectionError=Io;var Lp;(function(t){function e(r){let n=r;return n&&vt.func(n.cancelUndispatched)}t.is=e})(Lp||(Se.ConnectionStrategy=Lp={}));var pl;(function(t){function e(r){let n=r;return n&&(n.kind===void 0||n.kind==="id")&&vt.func(n.createCancellationTokenSource)&&(n.dispose===void 0||vt.func(n.dispose))}t.is=e})(pl||(Se.IdCancellationReceiverStrategy=pl={}));var jp;(function(t){function e(r){let n=r;return n&&n.kind==="request"&&vt.func(n.createCancellationTokenSource)&&(n.dispose===void 0||vt.func(n.dispose))}t.is=e})(jp||(Se.RequestCancellationReceiverStrategy=jp={}));var ml;(function(t){t.Message=Object.freeze({createCancellationTokenSource(r){return new kp.CancellationTokenSource}});function e(r){return pl.is(r)||jp.is(r)}t.is=e})(ml||(Se.CancellationReceiverStrategy=ml={}));var yl;(function(t){t.Message=Object.freeze({sendCancellation(r,n){return r.sendNotification(ou.type,{id:n})},cleanup(r){}});function e(r){let n=r;return n&&vt.func(n.sendCancellation)&&vt.func(n.cleanup)}t.is=e})(yl||(Se.CancellationSenderStrategy=yl={}));var vl;(function(t){t.Message=Object.freeze({receiver:ml.Message,sender:yl.Message});function e(r){let n=r;return n&&ml.is(n.receiver)&&yl.is(n.sender)}t.is=e})(vl||(Se.CancellationStrategy=vl={}));var _l;(function(t){function e(r){let n=r;return n&&vt.func(n.handleMessage)}t.is=e})(_l||(Se.MessageStrategy=_l={}));var $S;(function(t){function e(r){let n=r;return n&&(vl.is(n.cancellationStrategy)||Lp.is(n.connectionStrategy)||_l.is(n.messageStrategy))}t.is=e})($S||(Se.ConnectionOptions=$S={}));var An;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(An||(An={}));function iL(t,e,r,n){let i=r!==void 0?r:Se.NullLogger,s=0,o=0,a=0,u="2.0",c,l=new Map,f,d=new Map,p=new Map,g,b=new LS.LinkedMap,C=new Map,D=new Set,S=new Map,w=Be.Off,O=sn.Text,j,z=An.New,W=new nu.Emitter,G=new nu.Emitter,Z=new nu.Emitter,K=new nu.Emitter,N=new nu.Emitter,J=n&&n.cancellationStrategy?n.cancellationStrategy:vl.Message;function Q(P){if(P===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+P.toString()}function ge(P){return P===null?"res-unknown-"+(++a).toString():"res-"+P.toString()}function he(){return"not-"+(++o).toString()}function k(P,$){me.Message.isRequest($)?P.set(Q($.id),$):me.Message.isResponse($)?P.set(ge($.id),$):P.set(he(),$)}function X(P){}function pe(){return z===An.Listening}function le(){return z===An.Closed}function ae(){return z===An.Disposed}function ot(){(z===An.New||z===An.Listening)&&(z=An.Closed,G.fire(void 0))}function ut(P){W.fire([P,void 0,void 0])}function Pr(P){W.fire(P)}t.onClose(ot),t.onError(ut),e.onClose(ot),e.onError(Pr);function hr(){g||b.size===0||(g=(0,NS.default)().timer.setImmediate(()=>{g=void 0,Tr()}))}function Zr(P){me.Message.isRequest(P)?St(P):me.Message.isNotification(P)?en(P):me.Message.isResponse(P)?qr(P):tn(P)}function Tr(){if(b.size===0)return;let P=b.shift();try{let $=n?.messageStrategy;_l.is($)?$.handleMessage(P,Zr):Zr(P)}finally{hr()}}let ri=P=>{try{if(me.Message.isNotification(P)&&P.method===ou.type.method){let $=P.params.id,Y=Q($),re=b.get(Y);if(me.Message.isRequest(re)){let Ne=n?.connectionStrategy,Ge=Ne&&Ne.cancelUndispatched?Ne.cancelUndispatched(re,X):void 0;if(Ge&&(Ge.error!==void 0||Ge.result!==void 0)){b.delete(Y),S.delete($),Ge.id=re.id,Mr(Ge,P.method,Date.now()),e.write(Ge).catch(()=>i.error("Sending response for canceled message failed."));return}}let je=S.get($);if(je!==void 0){je.cancel(),Nt(P);return}else D.add($)}k(b,P)}finally{hr()}};function St(P){if(ae())return;function $(De,Ue,ke){let et={jsonrpc:u,id:P.id};De instanceof me.ResponseError?et.error=De.toJson():et.result=De===void 0?null:De,Mr(et,Ue,ke),e.write(et).catch(()=>i.error("Sending response failed."))}function Y(De,Ue,ke){let et={jsonrpc:u,id:P.id,error:De.toJson()};Mr(et,Ue,ke),e.write(et).catch(()=>i.error("Sending response failed."))}function re(De,Ue,ke){De===void 0&&(De=null);let et={jsonrpc:u,id:P.id,result:De};Mr(et,Ue,ke),e.write(et).catch(()=>i.error("Sending response failed."))}xr(P);let je=l.get(P.method),Ne,Ge;je&&(Ne=je.type,Ge=je.handler);let Ze=Date.now();if(Ge||c){let De=P.id??String(Date.now()),Ue=pl.is(J.receiver)?J.receiver.createCancellationTokenSource(De):J.receiver.createCancellationTokenSource(P);P.id!==null&&D.has(P.id)&&Ue.cancel(),P.id!==null&&S.set(De,Ue);try{let ke;if(Ge)if(P.params===void 0){if(Ne!==void 0&&Ne.numberOfParams!==0){Y(new me.ResponseError(me.ErrorCodes.InvalidParams,`Request ${P.method} defines ${Ne.numberOfParams} params but received none.`),P.method,Ze);return}ke=Ge(Ue.token)}else if(Array.isArray(P.params)){if(Ne!==void 0&&Ne.parameterStructures===me.ParameterStructures.byName){Y(new me.ResponseError(me.ErrorCodes.InvalidParams,`Request ${P.method} defines parameters by name but received parameters by position`),P.method,Ze);return}ke=Ge(...P.params,Ue.token)}else{if(Ne!==void 0&&Ne.parameterStructures===me.ParameterStructures.byPosition){Y(new me.ResponseError(me.ErrorCodes.InvalidParams,`Request ${P.method} defines parameters by position but received parameters by name`),P.method,Ze);return}ke=Ge(P.params,Ue.token)}else c&&(ke=c(P.method,P.params,Ue.token));let et=ke;ke?et.then?et.then(Rt=>{S.delete(De),$(Rt,P.method,Ze)},Rt=>{S.delete(De),Rt instanceof me.ResponseError?Y(Rt,P.method,Ze):Rt&&vt.string(Rt.message)?Y(new me.ResponseError(me.ErrorCodes.InternalError,`Request ${P.method} failed with message: ${Rt.message}`),P.method,Ze):Y(new me.ResponseError(me.ErrorCodes.InternalError,`Request ${P.method} failed unexpectedly without providing any details.`),P.method,Ze)}):(S.delete(De),$(ke,P.method,Ze)):(S.delete(De),re(ke,P.method,Ze))}catch(ke){S.delete(De),ke instanceof me.ResponseError?$(ke,P.method,Ze):ke&&vt.string(ke.message)?Y(new me.ResponseError(me.ErrorCodes.InternalError,`Request ${P.method} failed with message: ${ke.message}`),P.method,Ze):Y(new me.ResponseError(me.ErrorCodes.InternalError,`Request ${P.method} failed unexpectedly without providing any details.`),P.method,Ze)}}else Y(new me.ResponseError(me.ErrorCodes.MethodNotFound,`Unhandled method ${P.method}`),P.method,Ze)}function qr(P){if(!ae())if(P.id===null)P.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(P.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let $=P.id,Y=C.get($);if(kr(P,Y),Y!==void 0){C.delete($);try{if(P.error){let re=P.error;Y.reject(new me.ResponseError(re.code,re.message,re.data))}else if(P.result!==void 0)Y.resolve(P.result);else throw new Error("Should never happen.")}catch(re){re.message?i.error(`Response handler '${Y.method}' failed with message: ${re.message}`):i.error(`Response handler '${Y.method}' failed unexpectedly.`)}}}}function en(P){if(ae())return;let $,Y;if(P.method===ou.type.method){let re=P.params.id;D.delete(re),Nt(P);return}else{let re=d.get(P.method);re&&(Y=re.handler,$=re.type)}if(Y||f)try{if(Nt(P),Y)if(P.params===void 0)$!==void 0&&$.numberOfParams!==0&&$.parameterStructures!==me.ParameterStructures.byName&&i.error(`Notification ${P.method} defines ${$.numberOfParams} params but received none.`),Y();else if(Array.isArray(P.params)){let re=P.params;P.method===iu.type.method&&re.length===2&&Fp.is(re[0])?Y({token:re[0],value:re[1]}):($!==void 0&&($.parameterStructures===me.ParameterStructures.byName&&i.error(`Notification ${P.method} defines parameters by name but received parameters by position`),$.numberOfParams!==P.params.length&&i.error(`Notification ${P.method} defines ${$.numberOfParams} params but received ${re.length} arguments`)),Y(...re))}else $!==void 0&&$.parameterStructures===me.ParameterStructures.byPosition&&i.error(`Notification ${P.method} defines parameters by position but received parameters by name`),Y(P.params);else f&&f(P.method,P.params)}catch(re){re.message?i.error(`Notification handler '${P.method}' failed with message: ${re.message}`):i.error(`Notification handler '${P.method}' failed unexpectedly.`)}else Z.fire(P)}function tn(P){if(!P){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(P,null,4)}`);let $=P;if(vt.string($.id)||vt.number($.id)){let Y=$.id,re=C.get(Y);re&&re.reject(new Error("The received response has neither a result nor an error property."))}}function mt(P){if(P!=null)switch(w){case Be.Verbose:return JSON.stringify(P,null,4);case Be.Compact:return JSON.stringify(P);default:return}}function Or(P){if(!(w===Be.Off||!j))if(O===sn.Text){let $;(w===Be.Verbose||w===Be.Compact)&&P.params&&($=`Params: ${mt(P.params)}

`),j.log(`Sending request '${P.method} - (${P.id})'.`,$)}else yt("send-request",P)}function nr(P){if(!(w===Be.Off||!j))if(O===sn.Text){let $;(w===Be.Verbose||w===Be.Compact)&&(P.params?$=`Params: ${mt(P.params)}

`:$=`No parameters provided.

`),j.log(`Sending notification '${P.method}'.`,$)}else yt("send-notification",P)}function Mr(P,$,Y){if(!(w===Be.Off||!j))if(O===sn.Text){let re;(w===Be.Verbose||w===Be.Compact)&&(P.error&&P.error.data?re=`Error data: ${mt(P.error.data)}

`:P.result?re=`Result: ${mt(P.result)}

`:P.error===void 0&&(re=`No result returned.

`)),j.log(`Sending response '${$} - (${P.id})'. Processing request took ${Date.now()-Y}ms`,re)}else yt("send-response",P)}function xr(P){if(!(w===Be.Off||!j))if(O===sn.Text){let $;(w===Be.Verbose||w===Be.Compact)&&P.params&&($=`Params: ${mt(P.params)}

`),j.log(`Received request '${P.method} - (${P.id})'.`,$)}else yt("receive-request",P)}function Nt(P){if(!(w===Be.Off||!j||P.method===gl.type.method))if(O===sn.Text){let $;(w===Be.Verbose||w===Be.Compact)&&(P.params?$=`Params: ${mt(P.params)}

`:$=`No parameters provided.

`),j.log(`Received notification '${P.method}'.`,$)}else yt("receive-notification",P)}function kr(P,$){if(!(w===Be.Off||!j))if(O===sn.Text){let Y;if((w===Be.Verbose||w===Be.Compact)&&(P.error&&P.error.data?Y=`Error data: ${mt(P.error.data)}

`:P.result?Y=`Result: ${mt(P.result)}

`:P.error===void 0&&(Y=`No result returned.

`)),$){let re=P.error?` Request failed: ${P.error.message} (${P.error.code}).`:"";j.log(`Received response '${$.method} - (${P.id})' in ${Date.now()-$.timerStart}ms.${re}`,Y)}else j.log(`Received response ${P.id} without active response promise.`,Y)}else yt("receive-response",P)}function yt(P,$){if(!j||w===Be.Off)return;let Y={isLSPMessage:!0,type:P,message:$,timestamp:Date.now()};j.log(Y)}function Lt(){if(le())throw new Io(su.Closed,"Connection is closed.");if(ae())throw new Io(su.Disposed,"Connection is disposed.")}function Yt(){if(pe())throw new Io(su.AlreadyListening,"Connection is already listening")}function rn(){if(!pe())throw new Error("Call listen() first.")}function Fr(P){return P===void 0?null:P}function ni(P){if(P!==null)return P}function Ei(P){return P!=null&&!Array.isArray(P)&&typeof P=="object"}function Fn(P,$){switch(P){case me.ParameterStructures.auto:return Ei($)?ni($):[Fr($)];case me.ParameterStructures.byName:if(!Ei($))throw new Error("Received parameters by name but param is not an object literal.");return ni($);case me.ParameterStructures.byPosition:return[Fr($)];default:throw new Error(`Unknown parameter structure ${P.toString()}`)}}function Pi(P,$){let Y,re=P.numberOfParams;switch(re){case 0:Y=void 0;break;case 1:Y=Fn(P.parameterStructures,$[0]);break;default:Y=[];for(let je=0;je<$.length&&je<re;je++)Y.push(Fr($[je]));if($.length<re)for(let je=$.length;je<re;je++)Y.push(null);break}return Y}let gr={sendNotification:(P,...$)=>{Lt();let Y,re;if(vt.string(P)){Y=P;let Ne=$[0],Ge=0,Ze=me.ParameterStructures.auto;me.ParameterStructures.is(Ne)&&(Ge=1,Ze=Ne);let De=$.length,Ue=De-Ge;switch(Ue){case 0:re=void 0;break;case 1:re=Fn(Ze,$[Ge]);break;default:if(Ze===me.ParameterStructures.byName)throw new Error(`Received ${Ue} parameters for 'by Name' notification parameter structure.`);re=$.slice(Ge,De).map(ke=>Fr(ke));break}}else{let Ne=$;Y=P.method,re=Pi(P,Ne)}let je={jsonrpc:u,method:Y,params:re};return nr(je),e.write(je).catch(Ne=>{throw i.error("Sending notification failed."),Ne})},onNotification:(P,$)=>{Lt();let Y;return vt.func(P)?f=P:$&&(vt.string(P)?(Y=P,d.set(P,{type:void 0,handler:$})):(Y=P.method,d.set(P.method,{type:P,handler:$}))),{dispose:()=>{Y!==void 0?d.delete(Y):f=void 0}}},onProgress:(P,$,Y)=>{if(p.has($))throw new Error(`Progress handler for token ${$} already registered`);return p.set($,Y),{dispose:()=>{p.delete($)}}},sendProgress:(P,$,Y)=>gr.sendNotification(iu.type,{token:$,value:Y}),onUnhandledProgress:K.event,sendRequest:(P,...$)=>{Lt(),rn();let Y,re,je;if(vt.string(P)){Y=P;let De=$[0],Ue=$[$.length-1],ke=0,et=me.ParameterStructures.auto;me.ParameterStructures.is(De)&&(ke=1,et=De);let Rt=$.length;kp.CancellationToken.is(Ue)&&(Rt=Rt-1,je=Ue);let Ht=Rt-ke;switch(Ht){case 0:re=void 0;break;case 1:re=Fn(et,$[ke]);break;default:if(et===me.ParameterStructures.byName)throw new Error(`Received ${Ht} parameters for 'by Name' request parameter structure.`);re=$.slice(ke,Rt).map(Bi=>Fr(Bi));break}}else{let De=$;Y=P.method,re=Pi(P,De);let Ue=P.numberOfParams;je=kp.CancellationToken.is(De[Ue])?De[Ue]:void 0}let Ne=s++,Ge;je&&(Ge=je.onCancellationRequested(()=>{let De=J.sender.sendCancellation(gr,Ne);return De===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${Ne}`),Promise.resolve()):De.catch(()=>{i.log(`Sending cancellation messages for id ${Ne} failed`)})}));let Ze={jsonrpc:u,id:Ne,method:Y,params:re};return Or(Ze),typeof J.sender.enableCancellation=="function"&&J.sender.enableCancellation(Ze),new Promise(async(De,Ue)=>{let ke=Ht=>{De(Ht),J.sender.cleanup(Ne),Ge?.dispose()},et=Ht=>{Ue(Ht),J.sender.cleanup(Ne),Ge?.dispose()},Rt={method:Y,timerStart:Date.now(),resolve:ke,reject:et};try{await e.write(Ze),C.set(Ne,Rt)}catch(Ht){throw i.error("Sending request failed."),Rt.reject(new me.ResponseError(me.ErrorCodes.MessageWriteError,Ht.message?Ht.message:"Unknown reason")),Ht}})},onRequest:(P,$)=>{Lt();let Y=null;return Ap.is(P)?(Y=void 0,c=P):vt.string(P)?(Y=null,$!==void 0&&(Y=P,l.set(P,{handler:$,type:void 0}))):$!==void 0&&(Y=P.method,l.set(P.method,{type:P,handler:$})),{dispose:()=>{Y!==null&&(Y!==void 0?l.delete(Y):c=void 0)}}},hasPendingResponse:()=>C.size>0,trace:async(P,$,Y)=>{let re=!1,je=sn.Text;Y!==void 0&&(vt.boolean(Y)?re=Y:(re=Y.sendNotification||!1,je=Y.traceFormat||sn.Text)),w=P,O=je,w===Be.Off?j=void 0:j=$,re&&!le()&&!ae()&&await gr.sendNotification(Np.type,{value:Be.toString(P)})},onError:W.event,onClose:G.event,onUnhandledNotification:Z.event,onDispose:N.event,end:()=>{e.end()},dispose:()=>{if(ae())return;z=An.Disposed,N.fire(void 0);let P=new me.ResponseError(me.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let $ of C.values())$.reject(P);C=new Map,S=new Map,D=new Set,b=new LS.LinkedMap,vt.func(e.dispose)&&e.dispose(),vt.func(t.dispose)&&t.dispose()},listen:()=>{Lt(),Yt(),z=An.Listening,t.listen(ri)},inspect:()=>{(0,NS.default)().console.log("inspect")}};return gr.onNotification(gl.type,P=>{if(w===Be.Off||!j)return;let $=w===Be.Verbose||w===Be.Compact;j.log(P.message,$?P.verbose:void 0)}),gr.onNotification(iu.type,P=>{let $=p.get(P.token);$?$(P.value):K.fire(P)}),gr}Se.createMessageConnection=iL});var bl=_(A=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});A.ProgressType=A.ProgressToken=A.createMessageConnection=A.NullLogger=A.ConnectionOptions=A.ConnectionStrategy=A.AbstractMessageBuffer=A.WriteableStreamMessageWriter=A.AbstractMessageWriter=A.MessageWriter=A.ReadableStreamMessageReader=A.AbstractMessageReader=A.MessageReader=A.SharedArrayReceiverStrategy=A.SharedArraySenderStrategy=A.CancellationToken=A.CancellationTokenSource=A.Emitter=A.Event=A.Disposable=A.LRUCache=A.Touch=A.LinkedMap=A.ParameterStructures=A.NotificationType9=A.NotificationType8=A.NotificationType7=A.NotificationType6=A.NotificationType5=A.NotificationType4=A.NotificationType3=A.NotificationType2=A.NotificationType1=A.NotificationType0=A.NotificationType=A.ErrorCodes=A.ResponseError=A.RequestType9=A.RequestType8=A.RequestType7=A.RequestType6=A.RequestType5=A.RequestType4=A.RequestType3=A.RequestType2=A.RequestType1=A.RequestType0=A.RequestType=A.Message=A.RAL=void 0;A.MessageStrategy=A.CancellationStrategy=A.CancellationSenderStrategy=A.CancellationReceiverStrategy=A.ConnectionError=A.ConnectionErrors=A.LogTraceNotification=A.SetTraceNotification=A.TraceFormat=A.TraceValues=A.Trace=void 0;var at=dp();Object.defineProperty(A,"Message",{enumerable:!0,get:function(){return at.Message}});Object.defineProperty(A,"RequestType",{enumerable:!0,get:function(){return at.RequestType}});Object.defineProperty(A,"RequestType0",{enumerable:!0,get:function(){return at.RequestType0}});Object.defineProperty(A,"RequestType1",{enumerable:!0,get:function(){return at.RequestType1}});Object.defineProperty(A,"RequestType2",{enumerable:!0,get:function(){return at.RequestType2}});Object.defineProperty(A,"RequestType3",{enumerable:!0,get:function(){return at.RequestType3}});Object.defineProperty(A,"RequestType4",{enumerable:!0,get:function(){return at.RequestType4}});Object.defineProperty(A,"RequestType5",{enumerable:!0,get:function(){return at.RequestType5}});Object.defineProperty(A,"RequestType6",{enumerable:!0,get:function(){return at.RequestType6}});Object.defineProperty(A,"RequestType7",{enumerable:!0,get:function(){return at.RequestType7}});Object.defineProperty(A,"RequestType8",{enumerable:!0,get:function(){return at.RequestType8}});Object.defineProperty(A,"RequestType9",{enumerable:!0,get:function(){return at.RequestType9}});Object.defineProperty(A,"ResponseError",{enumerable:!0,get:function(){return at.ResponseError}});Object.defineProperty(A,"ErrorCodes",{enumerable:!0,get:function(){return at.ErrorCodes}});Object.defineProperty(A,"NotificationType",{enumerable:!0,get:function(){return at.NotificationType}});Object.defineProperty(A,"NotificationType0",{enumerable:!0,get:function(){return at.NotificationType0}});Object.defineProperty(A,"NotificationType1",{enumerable:!0,get:function(){return at.NotificationType1}});Object.defineProperty(A,"NotificationType2",{enumerable:!0,get:function(){return at.NotificationType2}});Object.defineProperty(A,"NotificationType3",{enumerable:!0,get:function(){return at.NotificationType3}});Object.defineProperty(A,"NotificationType4",{enumerable:!0,get:function(){return at.NotificationType4}});Object.defineProperty(A,"NotificationType5",{enumerable:!0,get:function(){return at.NotificationType5}});Object.defineProperty(A,"NotificationType6",{enumerable:!0,get:function(){return at.NotificationType6}});Object.defineProperty(A,"NotificationType7",{enumerable:!0,get:function(){return at.NotificationType7}});Object.defineProperty(A,"NotificationType8",{enumerable:!0,get:function(){return at.NotificationType8}});Object.defineProperty(A,"NotificationType9",{enumerable:!0,get:function(){return at.NotificationType9}});Object.defineProperty(A,"ParameterStructures",{enumerable:!0,get:function(){return at.ParameterStructures}});var $p=hp();Object.defineProperty(A,"LinkedMap",{enumerable:!0,get:function(){return $p.LinkedMap}});Object.defineProperty(A,"LRUCache",{enumerable:!0,get:function(){return $p.LRUCache}});Object.defineProperty(A,"Touch",{enumerable:!0,get:function(){return $p.Touch}});var sL=ES();Object.defineProperty(A,"Disposable",{enumerable:!0,get:function(){return sL.Disposable}});var HS=Mo();Object.defineProperty(A,"Event",{enumerable:!0,get:function(){return HS.Event}});Object.defineProperty(A,"Emitter",{enumerable:!0,get:function(){return HS.Emitter}});var US=cl();Object.defineProperty(A,"CancellationTokenSource",{enumerable:!0,get:function(){return US.CancellationTokenSource}});Object.defineProperty(A,"CancellationToken",{enumerable:!0,get:function(){return US.CancellationToken}});var zS=TS();Object.defineProperty(A,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return zS.SharedArraySenderStrategy}});Object.defineProperty(A,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return zS.SharedArrayReceiverStrategy}});var Wp=OS();Object.defineProperty(A,"MessageReader",{enumerable:!0,get:function(){return Wp.MessageReader}});Object.defineProperty(A,"AbstractMessageReader",{enumerable:!0,get:function(){return Wp.AbstractMessageReader}});Object.defineProperty(A,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return Wp.ReadableStreamMessageReader}});var Hp=IS();Object.defineProperty(A,"MessageWriter",{enumerable:!0,get:function(){return Hp.MessageWriter}});Object.defineProperty(A,"AbstractMessageWriter",{enumerable:!0,get:function(){return Hp.AbstractMessageWriter}});Object.defineProperty(A,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Hp.WriteableStreamMessageWriter}});var oL=AS();Object.defineProperty(A,"AbstractMessageBuffer",{enumerable:!0,get:function(){return oL.AbstractMessageBuffer}});var Jt=WS();Object.defineProperty(A,"ConnectionStrategy",{enumerable:!0,get:function(){return Jt.ConnectionStrategy}});Object.defineProperty(A,"ConnectionOptions",{enumerable:!0,get:function(){return Jt.ConnectionOptions}});Object.defineProperty(A,"NullLogger",{enumerable:!0,get:function(){return Jt.NullLogger}});Object.defineProperty(A,"createMessageConnection",{enumerable:!0,get:function(){return Jt.createMessageConnection}});Object.defineProperty(A,"ProgressToken",{enumerable:!0,get:function(){return Jt.ProgressToken}});Object.defineProperty(A,"ProgressType",{enumerable:!0,get:function(){return Jt.ProgressType}});Object.defineProperty(A,"Trace",{enumerable:!0,get:function(){return Jt.Trace}});Object.defineProperty(A,"TraceValues",{enumerable:!0,get:function(){return Jt.TraceValues}});Object.defineProperty(A,"TraceFormat",{enumerable:!0,get:function(){return Jt.TraceFormat}});Object.defineProperty(A,"SetTraceNotification",{enumerable:!0,get:function(){return Jt.SetTraceNotification}});Object.defineProperty(A,"LogTraceNotification",{enumerable:!0,get:function(){return Jt.LogTraceNotification}});Object.defineProperty(A,"ConnectionErrors",{enumerable:!0,get:function(){return Jt.ConnectionErrors}});Object.defineProperty(A,"ConnectionError",{enumerable:!0,get:function(){return Jt.ConnectionError}});Object.defineProperty(A,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Jt.CancellationReceiverStrategy}});Object.defineProperty(A,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Jt.CancellationSenderStrategy}});Object.defineProperty(A,"CancellationStrategy",{enumerable:!0,get:function(){return Jt.CancellationStrategy}});Object.defineProperty(A,"MessageStrategy",{enumerable:!0,get:function(){return Jt.MessageStrategy}});var aL=Yi();A.RAL=aL.default});var VS=_(Bp=>{"use strict";Object.defineProperty(Bp,"__esModule",{value:!0});var KS=require("util"),Ti=bl(),wl=class t extends Ti.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,r){return Buffer.from(e,r)}toString(e,r){return e instanceof Buffer?e.toString(r):new KS.TextDecoder(r).decode(e)}asNative(e,r){return r===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,r):Buffer.from(e,0,r)}allocNative(e){return Buffer.allocUnsafe(e)}};wl.emptyBuffer=Buffer.allocUnsafe(0);var Up=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Ti.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Ti.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Ti.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),Ti.Disposable.create(()=>this.stream.off("data",e))}},zp=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Ti.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Ti.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Ti.Disposable.create(()=>this.stream.off("end",e))}write(e,r){return new Promise((n,i)=>{let s=o=>{o==null?n():i(o)};typeof e=="string"?this.stream.write(e,r,s):this.stream.write(e,s)})}end(){this.stream.end()}},BS=Object.freeze({messageBuffer:Object.freeze({create:t=>new wl(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(r){return Promise.reject(r)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new KS.TextDecoder(e.charset).decode(t)))}catch(r){return Promise.reject(r)}}})}),stream:Object.freeze({asReadableStream:t=>new Up(t),asWritableStream:t=>new zp(t)}),console,timer:Object.freeze({setTimeout(t,e,...r){let n=setTimeout(t,e,...r);return{dispose:()=>clearTimeout(n)}},setImmediate(t,...e){let r=setImmediate(t,...e);return{dispose:()=>clearImmediate(r)}},setInterval(t,e,...r){let n=setInterval(t,e,...r);return{dispose:()=>clearInterval(n)}}})});function Kp(){return BS}(function(t){function e(){Ti.RAL.install(BS)}t.install=e})(Kp||(Kp={}));Bp.default=Kp});var Bs=_(Ae=>{"use strict";var uL=Ae&&Ae.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cL=Ae&&Ae.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&uL(e,t,r)};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.createMessageConnection=Ae.createServerSocketTransport=Ae.createClientSocketTransport=Ae.createServerPipeTransport=Ae.createClientPipeTransport=Ae.generateRandomPipeName=Ae.StreamMessageWriter=Ae.StreamMessageReader=Ae.SocketMessageWriter=Ae.SocketMessageReader=Ae.PortMessageWriter=Ae.PortMessageReader=Ae.IPCMessageWriter=Ae.IPCMessageReader=void 0;var Ao=VS();Ao.default.install();var GS=require("path"),lL=require("os"),dL=require("crypto"),Cl=require("net"),on=bl();cL(bl(),Ae);var Vp=class extends on.AbstractMessageReader{constructor(e){super(),this.process=e;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),on.Disposable.create(()=>this.process.off("message",e))}};Ae.IPCMessageReader=Vp;var Gp=class extends on.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,e)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};Ae.IPCMessageWriter=Gp;var Yp=class extends on.AbstractMessageReader{constructor(e){super(),this.onData=new on.Emitter,e.on("close",()=>this.fireClose),e.on("error",r=>this.fireError(r)),e.on("message",r=>{this.onData.fire(r)})}listen(e){return this.onData.event(e)}};Ae.PortMessageReader=Yp;var Xp=class extends on.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",r=>this.fireError(r))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};Ae.PortMessageWriter=Xp;var zs=class extends on.ReadableStreamMessageReader{constructor(e,r="utf-8"){super((0,Ao.default)().stream.asReadableStream(e),r)}};Ae.SocketMessageReader=zs;var Ks=class extends on.WriteableStreamMessageWriter{constructor(e,r){super((0,Ao.default)().stream.asWritableStream(e),r),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};Ae.SocketMessageWriter=Ks;var Sl=class extends on.ReadableStreamMessageReader{constructor(e,r){super((0,Ao.default)().stream.asReadableStream(e),r)}};Ae.StreamMessageReader=Sl;var Rl=class extends on.WriteableStreamMessageWriter{constructor(e,r){super((0,Ao.default)().stream.asWritableStream(e),r)}};Ae.StreamMessageWriter=Rl;var YS=process.env.XDG_RUNTIME_DIR,fL=new Map([["linux",107],["darwin",103]]);function hL(){let t=(0,dL.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;YS?e=GS.join(YS,`vscode-ipc-${t}.sock`):e=GS.join(lL.tmpdir(),`vscode-${t}.sock`);let r=fL.get(process.platform);return r!==void 0&&e.length>r&&(0,Ao.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${r} characters.`),e}Ae.generateRandomPipeName=hL;function gL(t,e="utf-8"){let r,n=new Promise((i,s)=>{r=i});return new Promise((i,s)=>{let o=(0,Cl.createServer)(a=>{o.close(),r([new zs(a,e),new Ks(a,e)])});o.on("error",s),o.listen(t,()=>{o.removeListener("error",s),i({onConnected:()=>n})})})}Ae.createClientPipeTransport=gL;function pL(t,e="utf-8"){let r=(0,Cl.createConnection)(t);return[new zs(r,e),new Ks(r,e)]}Ae.createServerPipeTransport=pL;function mL(t,e="utf-8"){let r,n=new Promise((i,s)=>{r=i});return new Promise((i,s)=>{let o=(0,Cl.createServer)(a=>{o.close(),r([new zs(a,e),new Ks(a,e)])});o.on("error",s),o.listen(t,"127.0.0.1",()=>{o.removeListener("error",s),i({onConnected:()=>n})})})}Ae.createClientSocketTransport=mL;function yL(t,e="utf-8"){let r=(0,Cl.createConnection)(t,"127.0.0.1");return[new zs(r,e),new Ks(r,e)]}Ae.createServerSocketTransport=yL;function vL(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function _L(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function bL(t,e,r,n){r||(r=on.NullLogger);let i=vL(t)?new Sl(t):t,s=_L(e)?new Rl(e):e;return on.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,on.createMessageConnection)(i,s,r,n)}Ae.createMessageConnection=bL});var Jp=_((C7,XS)=>{"use strict";XS.exports=Bs()});var oi=_((JS,Dl)=>{(function(t){if(typeof Dl=="object"&&typeof Dl.exports=="object"){var e=t(require,JS);e!==void 0&&(Dl.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var r;(function(v){function T(q){return typeof q=="string"}v.is=T})(r||(e.DocumentUri=r={}));var n;(function(v){function T(q){return typeof q=="string"}v.is=T})(n||(e.URI=n={}));var i;(function(v){v.MIN_VALUE=-2147483648,v.MAX_VALUE=2147483647;function T(q){return typeof q=="number"&&v.MIN_VALUE<=q&&q<=v.MAX_VALUE}v.is=T})(i||(e.integer=i={}));var s;(function(v){v.MIN_VALUE=0,v.MAX_VALUE=2147483647;function T(q){return typeof q=="number"&&v.MIN_VALUE<=q&&q<=v.MAX_VALUE}v.is=T})(s||(e.uinteger=s={}));var o;(function(v){function T(R,m){return R===Number.MAX_VALUE&&(R=s.MAX_VALUE),m===Number.MAX_VALUE&&(m=s.MAX_VALUE),{line:R,character:m}}v.create=T;function q(R){var m=R;return x.objectLiteral(m)&&x.uinteger(m.line)&&x.uinteger(m.character)}v.is=q})(o||(e.Position=o={}));var a;(function(v){function T(R,m,F,H){if(x.uinteger(R)&&x.uinteger(m)&&x.uinteger(F)&&x.uinteger(H))return{start:o.create(R,m),end:o.create(F,H)};if(o.is(R)&&o.is(m))return{start:R,end:m};throw new Error("Range#create called with invalid arguments[".concat(R,", ").concat(m,", ").concat(F,", ").concat(H,"]"))}v.create=T;function q(R){var m=R;return x.objectLiteral(m)&&o.is(m.start)&&o.is(m.end)}v.is=q})(a||(e.Range=a={}));var u;(function(v){function T(R,m){return{uri:R,range:m}}v.create=T;function q(R){var m=R;return x.objectLiteral(m)&&a.is(m.range)&&(x.string(m.uri)||x.undefined(m.uri))}v.is=q})(u||(e.Location=u={}));var c;(function(v){function T(R,m,F,H){return{targetUri:R,targetRange:m,targetSelectionRange:F,originSelectionRange:H}}v.create=T;function q(R){var m=R;return x.objectLiteral(m)&&a.is(m.targetRange)&&x.string(m.targetUri)&&a.is(m.targetSelectionRange)&&(a.is(m.originSelectionRange)||x.undefined(m.originSelectionRange))}v.is=q})(c||(e.LocationLink=c={}));var l;(function(v){function T(R,m,F,H){return{red:R,green:m,blue:F,alpha:H}}v.create=T;function q(R){var m=R;return x.objectLiteral(m)&&x.numberRange(m.red,0,1)&&x.numberRange(m.green,0,1)&&x.numberRange(m.blue,0,1)&&x.numberRange(m.alpha,0,1)}v.is=q})(l||(e.Color=l={}));var f;(function(v){function T(R,m){return{range:R,color:m}}v.create=T;function q(R){var m=R;return x.objectLiteral(m)&&a.is(m.range)&&l.is(m.color)}v.is=q})(f||(e.ColorInformation=f={}));var d;(function(v){function T(R,m,F){return{label:R,textEdit:m,additionalTextEdits:F}}v.create=T;function q(R){var m=R;return x.objectLiteral(m)&&x.string(m.label)&&(x.undefined(m.textEdit)||j.is(m))&&(x.undefined(m.additionalTextEdits)||x.typedArray(m.additionalTextEdits,j.is))}v.is=q})(d||(e.ColorPresentation=d={}));var p;(function(v){v.Comment="comment",v.Imports="imports",v.Region="region"})(p||(e.FoldingRangeKind=p={}));var g;(function(v){function T(R,m,F,H,ve,ft){var tt={startLine:R,endLine:m};return x.defined(F)&&(tt.startCharacter=F),x.defined(H)&&(tt.endCharacter=H),x.defined(ve)&&(tt.kind=ve),x.defined(ft)&&(tt.collapsedText=ft),tt}v.create=T;function q(R){var m=R;return x.objectLiteral(m)&&x.uinteger(m.startLine)&&x.uinteger(m.startLine)&&(x.undefined(m.startCharacter)||x.uinteger(m.startCharacter))&&(x.undefined(m.endCharacter)||x.uinteger(m.endCharacter))&&(x.undefined(m.kind)||x.string(m.kind))}v.is=q})(g||(e.FoldingRange=g={}));var b;(function(v){function T(R,m){return{location:R,message:m}}v.create=T;function q(R){var m=R;return x.defined(m)&&u.is(m.location)&&x.string(m.message)}v.is=q})(b||(e.DiagnosticRelatedInformation=b={}));var C;(function(v){v.Error=1,v.Warning=2,v.Information=3,v.Hint=4})(C||(e.DiagnosticSeverity=C={}));var D;(function(v){v.Unnecessary=1,v.Deprecated=2})(D||(e.DiagnosticTag=D={}));var S;(function(v){function T(q){var R=q;return x.objectLiteral(R)&&x.string(R.href)}v.is=T})(S||(e.CodeDescription=S={}));var w;(function(v){function T(R,m,F,H,ve,ft){var tt={range:R,message:m};return x.defined(F)&&(tt.severity=F),x.defined(H)&&(tt.code=H),x.defined(ve)&&(tt.source=ve),x.defined(ft)&&(tt.relatedInformation=ft),tt}v.create=T;function q(R){var m,F=R;return x.defined(F)&&a.is(F.range)&&x.string(F.message)&&(x.number(F.severity)||x.undefined(F.severity))&&(x.integer(F.code)||x.string(F.code)||x.undefined(F.code))&&(x.undefined(F.codeDescription)||x.string((m=F.codeDescription)===null||m===void 0?void 0:m.href))&&(x.string(F.source)||x.undefined(F.source))&&(x.undefined(F.relatedInformation)||x.typedArray(F.relatedInformation,b.is))}v.is=q})(w||(e.Diagnostic=w={}));var O;(function(v){function T(R,m){for(var F=[],H=2;H<arguments.length;H++)F[H-2]=arguments[H];var ve={title:R,command:m};return x.defined(F)&&F.length>0&&(ve.arguments=F),ve}v.create=T;function q(R){var m=R;return x.defined(m)&&x.string(m.title)&&x.string(m.command)}v.is=q})(O||(e.Command=O={}));var j;(function(v){function T(F,H){return{range:F,newText:H}}v.replace=T;function q(F,H){return{range:{start:F,end:F},newText:H}}v.insert=q;function R(F){return{range:F,newText:""}}v.del=R;function m(F){var H=F;return x.objectLiteral(H)&&x.string(H.newText)&&a.is(H.range)}v.is=m})(j||(e.TextEdit=j={}));var z;(function(v){function T(R,m,F){var H={label:R};return m!==void 0&&(H.needsConfirmation=m),F!==void 0&&(H.description=F),H}v.create=T;function q(R){var m=R;return x.objectLiteral(m)&&x.string(m.label)&&(x.boolean(m.needsConfirmation)||m.needsConfirmation===void 0)&&(x.string(m.description)||m.description===void 0)}v.is=q})(z||(e.ChangeAnnotation=z={}));var W;(function(v){function T(q){var R=q;return x.string(R)}v.is=T})(W||(e.ChangeAnnotationIdentifier=W={}));var G;(function(v){function T(F,H,ve){return{range:F,newText:H,annotationId:ve}}v.replace=T;function q(F,H,ve){return{range:{start:F,end:F},newText:H,annotationId:ve}}v.insert=q;function R(F,H){return{range:F,newText:"",annotationId:H}}v.del=R;function m(F){var H=F;return j.is(H)&&(z.is(H.annotationId)||W.is(H.annotationId))}v.is=m})(G||(e.AnnotatedTextEdit=G={}));var Z;(function(v){function T(R,m){return{textDocument:R,edits:m}}v.create=T;function q(R){var m=R;return x.defined(m)&&le.is(m.textDocument)&&Array.isArray(m.edits)}v.is=q})(Z||(e.TextDocumentEdit=Z={}));var K;(function(v){function T(R,m,F){var H={kind:"create",uri:R};return m!==void 0&&(m.overwrite!==void 0||m.ignoreIfExists!==void 0)&&(H.options=m),F!==void 0&&(H.annotationId=F),H}v.create=T;function q(R){var m=R;return m&&m.kind==="create"&&x.string(m.uri)&&(m.options===void 0||(m.options.overwrite===void 0||x.boolean(m.options.overwrite))&&(m.options.ignoreIfExists===void 0||x.boolean(m.options.ignoreIfExists)))&&(m.annotationId===void 0||W.is(m.annotationId))}v.is=q})(K||(e.CreateFile=K={}));var N;(function(v){function T(R,m,F,H){var ve={kind:"rename",oldUri:R,newUri:m};return F!==void 0&&(F.overwrite!==void 0||F.ignoreIfExists!==void 0)&&(ve.options=F),H!==void 0&&(ve.annotationId=H),ve}v.create=T;function q(R){var m=R;return m&&m.kind==="rename"&&x.string(m.oldUri)&&x.string(m.newUri)&&(m.options===void 0||(m.options.overwrite===void 0||x.boolean(m.options.overwrite))&&(m.options.ignoreIfExists===void 0||x.boolean(m.options.ignoreIfExists)))&&(m.annotationId===void 0||W.is(m.annotationId))}v.is=q})(N||(e.RenameFile=N={}));var J;(function(v){function T(R,m,F){var H={kind:"delete",uri:R};return m!==void 0&&(m.recursive!==void 0||m.ignoreIfNotExists!==void 0)&&(H.options=m),F!==void 0&&(H.annotationId=F),H}v.create=T;function q(R){var m=R;return m&&m.kind==="delete"&&x.string(m.uri)&&(m.options===void 0||(m.options.recursive===void 0||x.boolean(m.options.recursive))&&(m.options.ignoreIfNotExists===void 0||x.boolean(m.options.ignoreIfNotExists)))&&(m.annotationId===void 0||W.is(m.annotationId))}v.is=q})(J||(e.DeleteFile=J={}));var Q;(function(v){function T(q){var R=q;return R&&(R.changes!==void 0||R.documentChanges!==void 0)&&(R.documentChanges===void 0||R.documentChanges.every(function(m){return x.string(m.kind)?K.is(m)||N.is(m)||J.is(m):Z.is(m)}))}v.is=T})(Q||(e.WorkspaceEdit=Q={}));var ge=function(){function v(T,q){this.edits=T,this.changeAnnotations=q}return v.prototype.insert=function(T,q,R){var m,F;if(R===void 0?m=j.insert(T,q):W.is(R)?(F=R,m=G.insert(T,q,R)):(this.assertChangeAnnotations(this.changeAnnotations),F=this.changeAnnotations.manage(R),m=G.insert(T,q,F)),this.edits.push(m),F!==void 0)return F},v.prototype.replace=function(T,q,R){var m,F;if(R===void 0?m=j.replace(T,q):W.is(R)?(F=R,m=G.replace(T,q,R)):(this.assertChangeAnnotations(this.changeAnnotations),F=this.changeAnnotations.manage(R),m=G.replace(T,q,F)),this.edits.push(m),F!==void 0)return F},v.prototype.delete=function(T,q){var R,m;if(q===void 0?R=j.del(T):W.is(q)?(m=q,R=G.del(T,q)):(this.assertChangeAnnotations(this.changeAnnotations),m=this.changeAnnotations.manage(q),R=G.del(T,m)),this.edits.push(R),m!==void 0)return m},v.prototype.add=function(T){this.edits.push(T)},v.prototype.all=function(){return this.edits},v.prototype.clear=function(){this.edits.splice(0,this.edits.length)},v.prototype.assertChangeAnnotations=function(T){if(T===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},v}(),he=function(){function v(T){this._annotations=T===void 0?Object.create(null):T,this._counter=0,this._size=0}return v.prototype.all=function(){return this._annotations},Object.defineProperty(v.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),v.prototype.manage=function(T,q){var R;if(W.is(T)?R=T:(R=this.nextId(),q=T),this._annotations[R]!==void 0)throw new Error("Id ".concat(R," is already in use."));if(q===void 0)throw new Error("No annotation provided for id ".concat(R));return this._annotations[R]=q,this._size++,R},v.prototype.nextId=function(){return this._counter++,this._counter.toString()},v}(),k=function(){function v(T){var q=this;this._textEditChanges=Object.create(null),T!==void 0?(this._workspaceEdit=T,T.documentChanges?(this._changeAnnotations=new he(T.changeAnnotations),T.changeAnnotations=this._changeAnnotations.all(),T.documentChanges.forEach(function(R){if(Z.is(R)){var m=new ge(R.edits,q._changeAnnotations);q._textEditChanges[R.textDocument.uri]=m}})):T.changes&&Object.keys(T.changes).forEach(function(R){var m=new ge(T.changes[R]);q._textEditChanges[R]=m})):this._workspaceEdit={}}return Object.defineProperty(v.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),v.prototype.getTextEditChange=function(T){if(le.is(T)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var q={uri:T.uri,version:T.version},R=this._textEditChanges[q.uri];if(!R){var m=[],F={textDocument:q,edits:m};this._workspaceEdit.documentChanges.push(F),R=new ge(m,this._changeAnnotations),this._textEditChanges[q.uri]=R}return R}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var R=this._textEditChanges[T];if(!R){var m=[];this._workspaceEdit.changes[T]=m,R=new ge(m),this._textEditChanges[T]=R}return R}},v.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new he,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},v.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},v.prototype.createFile=function(T,q,R){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var m;z.is(q)||W.is(q)?m=q:R=q;var F,H;if(m===void 0?F=K.create(T,R):(H=W.is(m)?m:this._changeAnnotations.manage(m),F=K.create(T,R,H)),this._workspaceEdit.documentChanges.push(F),H!==void 0)return H},v.prototype.renameFile=function(T,q,R,m){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var F;z.is(R)||W.is(R)?F=R:m=R;var H,ve;if(F===void 0?H=N.create(T,q,m):(ve=W.is(F)?F:this._changeAnnotations.manage(F),H=N.create(T,q,m,ve)),this._workspaceEdit.documentChanges.push(H),ve!==void 0)return ve},v.prototype.deleteFile=function(T,q,R){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var m;z.is(q)||W.is(q)?m=q:R=q;var F,H;if(m===void 0?F=J.create(T,R):(H=W.is(m)?m:this._changeAnnotations.manage(m),F=J.create(T,R,H)),this._workspaceEdit.documentChanges.push(F),H!==void 0)return H},v}();e.WorkspaceChange=k;var X;(function(v){function T(R){return{uri:R}}v.create=T;function q(R){var m=R;return x.defined(m)&&x.string(m.uri)}v.is=q})(X||(e.TextDocumentIdentifier=X={}));var pe;(function(v){function T(R,m){return{uri:R,version:m}}v.create=T;function q(R){var m=R;return x.defined(m)&&x.string(m.uri)&&x.integer(m.version)}v.is=q})(pe||(e.VersionedTextDocumentIdentifier=pe={}));var le;(function(v){function T(R,m){return{uri:R,version:m}}v.create=T;function q(R){var m=R;return x.defined(m)&&x.string(m.uri)&&(m.version===null||x.integer(m.version))}v.is=q})(le||(e.OptionalVersionedTextDocumentIdentifier=le={}));var ae;(function(v){function T(R,m,F,H){return{uri:R,languageId:m,version:F,text:H}}v.create=T;function q(R){var m=R;return x.defined(m)&&x.string(m.uri)&&x.string(m.languageId)&&x.integer(m.version)&&x.string(m.text)}v.is=q})(ae||(e.TextDocumentItem=ae={}));var ot;(function(v){v.PlainText="plaintext",v.Markdown="markdown";function T(q){var R=q;return R===v.PlainText||R===v.Markdown}v.is=T})(ot||(e.MarkupKind=ot={}));var ut;(function(v){function T(q){var R=q;return x.objectLiteral(q)&&ot.is(R.kind)&&x.string(R.value)}v.is=T})(ut||(e.MarkupContent=ut={}));var Pr;(function(v){v.Text=1,v.Method=2,v.Function=3,v.Constructor=4,v.Field=5,v.Variable=6,v.Class=7,v.Interface=8,v.Module=9,v.Property=10,v.Unit=11,v.Value=12,v.Enum=13,v.Keyword=14,v.Snippet=15,v.Color=16,v.File=17,v.Reference=18,v.Folder=19,v.EnumMember=20,v.Constant=21,v.Struct=22,v.Event=23,v.Operator=24,v.TypeParameter=25})(Pr||(e.CompletionItemKind=Pr={}));var hr;(function(v){v.PlainText=1,v.Snippet=2})(hr||(e.InsertTextFormat=hr={}));var Zr;(function(v){v.Deprecated=1})(Zr||(e.CompletionItemTag=Zr={}));var Tr;(function(v){function T(R,m,F){return{newText:R,insert:m,replace:F}}v.create=T;function q(R){var m=R;return m&&x.string(m.newText)&&a.is(m.insert)&&a.is(m.replace)}v.is=q})(Tr||(e.InsertReplaceEdit=Tr={}));var ri;(function(v){v.asIs=1,v.adjustIndentation=2})(ri||(e.InsertTextMode=ri={}));var St;(function(v){function T(q){var R=q;return R&&(x.string(R.detail)||R.detail===void 0)&&(x.string(R.description)||R.description===void 0)}v.is=T})(St||(e.CompletionItemLabelDetails=St={}));var qr;(function(v){function T(q){return{label:q}}v.create=T})(qr||(e.CompletionItem=qr={}));var en;(function(v){function T(q,R){return{items:q||[],isIncomplete:!!R}}v.create=T})(en||(e.CompletionList=en={}));var tn;(function(v){function T(R){return R.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}v.fromPlainText=T;function q(R){var m=R;return x.string(m)||x.objectLiteral(m)&&x.string(m.language)&&x.string(m.value)}v.is=q})(tn||(e.MarkedString=tn={}));var mt;(function(v){function T(q){var R=q;return!!R&&x.objectLiteral(R)&&(ut.is(R.contents)||tn.is(R.contents)||x.typedArray(R.contents,tn.is))&&(q.range===void 0||a.is(q.range))}v.is=T})(mt||(e.Hover=mt={}));var Or;(function(v){function T(q,R){return R?{label:q,documentation:R}:{label:q}}v.create=T})(Or||(e.ParameterInformation=Or={}));var nr;(function(v){function T(q,R){for(var m=[],F=2;F<arguments.length;F++)m[F-2]=arguments[F];var H={label:q};return x.defined(R)&&(H.documentation=R),x.defined(m)?H.parameters=m:H.parameters=[],H}v.create=T})(nr||(e.SignatureInformation=nr={}));var Mr;(function(v){v.Text=1,v.Read=2,v.Write=3})(Mr||(e.DocumentHighlightKind=Mr={}));var xr;(function(v){function T(q,R){var m={range:q};return x.number(R)&&(m.kind=R),m}v.create=T})(xr||(e.DocumentHighlight=xr={}));var Nt;(function(v){v.File=1,v.Module=2,v.Namespace=3,v.Package=4,v.Class=5,v.Method=6,v.Property=7,v.Field=8,v.Constructor=9,v.Enum=10,v.Interface=11,v.Function=12,v.Variable=13,v.Constant=14,v.String=15,v.Number=16,v.Boolean=17,v.Array=18,v.Object=19,v.Key=20,v.Null=21,v.EnumMember=22,v.Struct=23,v.Event=24,v.Operator=25,v.TypeParameter=26})(Nt||(e.SymbolKind=Nt={}));var kr;(function(v){v.Deprecated=1})(kr||(e.SymbolTag=kr={}));var yt;(function(v){function T(q,R,m,F,H){var ve={name:q,kind:R,location:{uri:F,range:m}};return H&&(ve.containerName=H),ve}v.create=T})(yt||(e.SymbolInformation=yt={}));var Lt;(function(v){function T(q,R,m,F){return F!==void 0?{name:q,kind:R,location:{uri:m,range:F}}:{name:q,kind:R,location:{uri:m}}}v.create=T})(Lt||(e.WorkspaceSymbol=Lt={}));var Yt;(function(v){function T(R,m,F,H,ve,ft){var tt={name:R,detail:m,kind:F,range:H,selectionRange:ve};return ft!==void 0&&(tt.children=ft),tt}v.create=T;function q(R){var m=R;return m&&x.string(m.name)&&x.number(m.kind)&&a.is(m.range)&&a.is(m.selectionRange)&&(m.detail===void 0||x.string(m.detail))&&(m.deprecated===void 0||x.boolean(m.deprecated))&&(m.children===void 0||Array.isArray(m.children))&&(m.tags===void 0||Array.isArray(m.tags))}v.is=q})(Yt||(e.DocumentSymbol=Yt={}));var rn;(function(v){v.Empty="",v.QuickFix="quickfix",v.Refactor="refactor",v.RefactorExtract="refactor.extract",v.RefactorInline="refactor.inline",v.RefactorRewrite="refactor.rewrite",v.Source="source",v.SourceOrganizeImports="source.organizeImports",v.SourceFixAll="source.fixAll"})(rn||(e.CodeActionKind=rn={}));var Fr;(function(v){v.Invoked=1,v.Automatic=2})(Fr||(e.CodeActionTriggerKind=Fr={}));var ni;(function(v){function T(R,m,F){var H={diagnostics:R};return m!=null&&(H.only=m),F!=null&&(H.triggerKind=F),H}v.create=T;function q(R){var m=R;return x.defined(m)&&x.typedArray(m.diagnostics,w.is)&&(m.only===void 0||x.typedArray(m.only,x.string))&&(m.triggerKind===void 0||m.triggerKind===Fr.Invoked||m.triggerKind===Fr.Automatic)}v.is=q})(ni||(e.CodeActionContext=ni={}));var Ei;(function(v){function T(R,m,F){var H={title:R},ve=!0;return typeof m=="string"?(ve=!1,H.kind=m):O.is(m)?H.command=m:H.edit=m,ve&&F!==void 0&&(H.kind=F),H}v.create=T;function q(R){var m=R;return m&&x.string(m.title)&&(m.diagnostics===void 0||x.typedArray(m.diagnostics,w.is))&&(m.kind===void 0||x.string(m.kind))&&(m.edit!==void 0||m.command!==void 0)&&(m.command===void 0||O.is(m.command))&&(m.isPreferred===void 0||x.boolean(m.isPreferred))&&(m.edit===void 0||Q.is(m.edit))}v.is=q})(Ei||(e.CodeAction=Ei={}));var Fn;(function(v){function T(R,m){var F={range:R};return x.defined(m)&&(F.data=m),F}v.create=T;function q(R){var m=R;return x.defined(m)&&a.is(m.range)&&(x.undefined(m.command)||O.is(m.command))}v.is=q})(Fn||(e.CodeLens=Fn={}));var Pi;(function(v){function T(R,m){return{tabSize:R,insertSpaces:m}}v.create=T;function q(R){var m=R;return x.defined(m)&&x.uinteger(m.tabSize)&&x.boolean(m.insertSpaces)}v.is=q})(Pi||(e.FormattingOptions=Pi={}));var gr;(function(v){function T(R,m,F){return{range:R,target:m,data:F}}v.create=T;function q(R){var m=R;return x.defined(m)&&a.is(m.range)&&(x.undefined(m.target)||x.string(m.target))}v.is=q})(gr||(e.DocumentLink=gr={}));var P;(function(v){function T(R,m){return{range:R,parent:m}}v.create=T;function q(R){var m=R;return x.objectLiteral(m)&&a.is(m.range)&&(m.parent===void 0||v.is(m.parent))}v.is=q})(P||(e.SelectionRange=P={}));var $;(function(v){v.namespace="namespace",v.type="type",v.class="class",v.enum="enum",v.interface="interface",v.struct="struct",v.typeParameter="typeParameter",v.parameter="parameter",v.variable="variable",v.property="property",v.enumMember="enumMember",v.event="event",v.function="function",v.method="method",v.macro="macro",v.keyword="keyword",v.modifier="modifier",v.comment="comment",v.string="string",v.number="number",v.regexp="regexp",v.operator="operator",v.decorator="decorator"})($||(e.SemanticTokenTypes=$={}));var Y;(function(v){v.declaration="declaration",v.definition="definition",v.readonly="readonly",v.static="static",v.deprecated="deprecated",v.abstract="abstract",v.async="async",v.modification="modification",v.documentation="documentation",v.defaultLibrary="defaultLibrary"})(Y||(e.SemanticTokenModifiers=Y={}));var re;(function(v){function T(q){var R=q;return x.objectLiteral(R)&&(R.resultId===void 0||typeof R.resultId=="string")&&Array.isArray(R.data)&&(R.data.length===0||typeof R.data[0]=="number")}v.is=T})(re||(e.SemanticTokens=re={}));var je;(function(v){function T(R,m){return{range:R,text:m}}v.create=T;function q(R){var m=R;return m!=null&&a.is(m.range)&&x.string(m.text)}v.is=q})(je||(e.InlineValueText=je={}));var Ne;(function(v){function T(R,m,F){return{range:R,variableName:m,caseSensitiveLookup:F}}v.create=T;function q(R){var m=R;return m!=null&&a.is(m.range)&&x.boolean(m.caseSensitiveLookup)&&(x.string(m.variableName)||m.variableName===void 0)}v.is=q})(Ne||(e.InlineValueVariableLookup=Ne={}));var Ge;(function(v){function T(R,m){return{range:R,expression:m}}v.create=T;function q(R){var m=R;return m!=null&&a.is(m.range)&&(x.string(m.expression)||m.expression===void 0)}v.is=q})(Ge||(e.InlineValueEvaluatableExpression=Ge={}));var Ze;(function(v){function T(R,m){return{frameId:R,stoppedLocation:m}}v.create=T;function q(R){var m=R;return x.defined(m)&&a.is(R.stoppedLocation)}v.is=q})(Ze||(e.InlineValueContext=Ze={}));var De;(function(v){v.Type=1,v.Parameter=2;function T(q){return q===1||q===2}v.is=T})(De||(e.InlayHintKind=De={}));var Ue;(function(v){function T(R){return{value:R}}v.create=T;function q(R){var m=R;return x.objectLiteral(m)&&(m.tooltip===void 0||x.string(m.tooltip)||ut.is(m.tooltip))&&(m.location===void 0||u.is(m.location))&&(m.command===void 0||O.is(m.command))}v.is=q})(Ue||(e.InlayHintLabelPart=Ue={}));var ke;(function(v){function T(R,m,F){var H={position:R,label:m};return F!==void 0&&(H.kind=F),H}v.create=T;function q(R){var m=R;return x.objectLiteral(m)&&o.is(m.position)&&(x.string(m.label)||x.typedArray(m.label,Ue.is))&&(m.kind===void 0||De.is(m.kind))&&m.textEdits===void 0||x.typedArray(m.textEdits,j.is)&&(m.tooltip===void 0||x.string(m.tooltip)||ut.is(m.tooltip))&&(m.paddingLeft===void 0||x.boolean(m.paddingLeft))&&(m.paddingRight===void 0||x.boolean(m.paddingRight))}v.is=q})(ke||(e.InlayHint=ke={}));var et;(function(v){function T(q){return{kind:"snippet",value:q}}v.createSnippet=T})(et||(e.StringValue=et={}));var Rt;(function(v){function T(q,R,m,F){return{insertText:q,filterText:R,range:m,command:F}}v.create=T})(Rt||(e.InlineCompletionItem=Rt={}));var Ht;(function(v){function T(q){return{items:q}}v.create=T})(Ht||(e.InlineCompletionList=Ht={}));var Bi;(function(v){v.Invoked=0,v.Automatic=1})(Bi||(e.InlineCompletionTriggerKind=Bi={}));var Vi;(function(v){function T(q,R){return{range:q,text:R}}v.create=T})(Vi||(e.SelectedCompletionInfo=Vi={}));var y;(function(v){function T(q,R){return{triggerKind:q,selectedCompletionInfo:R}}v.create=T})(y||(e.InlineCompletionContext=y={}));var I;(function(v){function T(q){var R=q;return x.objectLiteral(R)&&n.is(R.uri)&&x.string(R.name)}v.is=T})(I||(e.WorkspaceFolder=I={})),e.EOL=[`
`,`\r
`,"\r"];var oe;(function(v){function T(F,H,ve,ft){return new ze(F,H,ve,ft)}v.create=T;function q(F){var H=F;return!!(x.defined(H)&&x.string(H.uri)&&(x.undefined(H.languageId)||x.string(H.languageId))&&x.uinteger(H.lineCount)&&x.func(H.getText)&&x.func(H.positionAt)&&x.func(H.offsetAt))}v.is=q;function R(F,H){for(var ve=F.getText(),ft=m(H,function(ii,h){var M=ii.range.start.line-h.range.start.line;return M===0?ii.range.start.character-h.range.start.character:M}),tt=ve.length,Ir=ft.length-1;Ir>=0;Ir--){var nn=ft[Ir],In=F.offsetAt(nn.range.start),Me=F.offsetAt(nn.range.end);if(Me<=tt)ve=ve.substring(0,In)+nn.newText+ve.substring(Me,ve.length);else throw new Error("Overlapping edit");tt=In}return ve}v.applyEdits=R;function m(F,H){if(F.length<=1)return F;var ve=F.length/2|0,ft=F.slice(0,ve),tt=F.slice(ve);m(ft,H),m(tt,H);for(var Ir=0,nn=0,In=0;Ir<ft.length&&nn<tt.length;){var Me=H(ft[Ir],tt[nn]);Me<=0?F[In++]=ft[Ir++]:F[In++]=tt[nn++]}for(;Ir<ft.length;)F[In++]=ft[Ir++];for(;nn<tt.length;)F[In++]=tt[nn++];return F}})(oe||(e.TextDocument=oe={}));var ze=function(){function v(T,q,R,m){this._uri=T,this._languageId=q,this._version=R,this._content=m,this._lineOffsets=void 0}return Object.defineProperty(v.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),v.prototype.getText=function(T){if(T){var q=this.offsetAt(T.start),R=this.offsetAt(T.end);return this._content.substring(q,R)}return this._content},v.prototype.update=function(T,q){this._content=T.text,this._version=q,this._lineOffsets=void 0},v.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var T=[],q=this._content,R=!0,m=0;m<q.length;m++){R&&(T.push(m),R=!1);var F=q.charAt(m);R=F==="\r"||F===`
`,F==="\r"&&m+1<q.length&&q.charAt(m+1)===`
`&&m++}R&&q.length>0&&T.push(q.length),this._lineOffsets=T}return this._lineOffsets},v.prototype.positionAt=function(T){T=Math.max(Math.min(T,this._content.length),0);var q=this.getLineOffsets(),R=0,m=q.length;if(m===0)return o.create(0,T);for(;R<m;){var F=Math.floor((R+m)/2);q[F]>T?m=F:R=F+1}var H=R-1;return o.create(H,T-q[H])},v.prototype.offsetAt=function(T){var q=this.getLineOffsets();if(T.line>=q.length)return this._content.length;if(T.line<0)return 0;var R=q[T.line],m=T.line+1<q.length?q[T.line+1]:this._content.length;return Math.max(Math.min(R+T.character,m),R)},Object.defineProperty(v.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),v}(),x;(function(v){var T=Object.prototype.toString;function q(Me){return typeof Me<"u"}v.defined=q;function R(Me){return typeof Me>"u"}v.undefined=R;function m(Me){return Me===!0||Me===!1}v.boolean=m;function F(Me){return T.call(Me)==="[object String]"}v.string=F;function H(Me){return T.call(Me)==="[object Number]"}v.number=H;function ve(Me,ii,h){return T.call(Me)==="[object Number]"&&ii<=Me&&Me<=h}v.numberRange=ve;function ft(Me){return T.call(Me)==="[object Number]"&&-2147483648<=Me&&Me<=2147483647}v.integer=ft;function tt(Me){return T.call(Me)==="[object Number]"&&0<=Me&&Me<=2147483647}v.uinteger=tt;function Ir(Me){return T.call(Me)==="[object Function]"}v.func=Ir;function nn(Me){return Me!==null&&typeof Me=="object"}v.objectLiteral=nn;function In(Me,ii){return Array.isArray(Me)&&Me.every(ii)}v.typedArray=In})(x||(x={}))})});var ht=_(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.ProtocolNotificationType=Nr.ProtocolNotificationType0=Nr.ProtocolRequestType=Nr.ProtocolRequestType0=Nr.RegistrationType=Nr.MessageDirection=void 0;var No=Bs(),QS;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(QS||(Nr.MessageDirection=QS={}));var Qp=class{constructor(e){this.method=e}};Nr.RegistrationType=Qp;var Zp=class extends No.RequestType0{constructor(e){super(e)}};Nr.ProtocolRequestType0=Zp;var em=class extends No.RequestType{constructor(e){super(e,No.ParameterStructures.byName)}};Nr.ProtocolRequestType=em;var tm=class extends No.NotificationType0{constructor(e){super(e)}};Nr.ProtocolNotificationType0=tm;var rm=class extends No.NotificationType{constructor(e){super(e,No.ParameterStructures.byName)}};Nr.ProtocolNotificationType=rm});var El=_(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.objectLiteral=xt.typedArray=xt.stringArray=xt.array=xt.func=xt.error=xt.number=xt.string=xt.boolean=void 0;function wL(t){return t===!0||t===!1}xt.boolean=wL;function ZS(t){return typeof t=="string"||t instanceof String}xt.string=ZS;function SL(t){return typeof t=="number"||t instanceof Number}xt.number=SL;function RL(t){return t instanceof Error}xt.error=RL;function CL(t){return typeof t=="function"}xt.func=CL;function eR(t){return Array.isArray(t)}xt.array=eR;function DL(t){return eR(t)&&t.every(e=>ZS(e))}xt.stringArray=DL;function EL(t,e){return Array.isArray(t)&&t.every(e)}xt.typedArray=EL;function PL(t){return t!==null&&typeof t=="object"}xt.objectLiteral=PL});var nR=_(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});Pl.ImplementationRequest=void 0;var tR=ht(),rR;(function(t){t.method="textDocument/implementation",t.messageDirection=tR.MessageDirection.clientToServer,t.type=new tR.ProtocolRequestType(t.method)})(rR||(Pl.ImplementationRequest=rR={}))});var oR=_(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});Tl.TypeDefinitionRequest=void 0;var iR=ht(),sR;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=iR.MessageDirection.clientToServer,t.type=new iR.ProtocolRequestType(t.method)})(sR||(Tl.TypeDefinitionRequest=sR={}))});var cR=_(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});Lo.DidChangeWorkspaceFoldersNotification=Lo.WorkspaceFoldersRequest=void 0;var ql=ht(),aR;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=ql.MessageDirection.serverToClient,t.type=new ql.ProtocolRequestType0(t.method)})(aR||(Lo.WorkspaceFoldersRequest=aR={}));var uR;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=ql.MessageDirection.clientToServer,t.type=new ql.ProtocolNotificationType(t.method)})(uR||(Lo.DidChangeWorkspaceFoldersNotification=uR={}))});var fR=_(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});Ol.ConfigurationRequest=void 0;var lR=ht(),dR;(function(t){t.method="workspace/configuration",t.messageDirection=lR.MessageDirection.serverToClient,t.type=new lR.ProtocolRequestType(t.method)})(dR||(Ol.ConfigurationRequest=dR={}))});var pR=_(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.ColorPresentationRequest=jo.DocumentColorRequest=void 0;var Ml=ht(),hR;(function(t){t.method="textDocument/documentColor",t.messageDirection=Ml.MessageDirection.clientToServer,t.type=new Ml.ProtocolRequestType(t.method)})(hR||(jo.DocumentColorRequest=hR={}));var gR;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=Ml.MessageDirection.clientToServer,t.type=new Ml.ProtocolRequestType(t.method)})(gR||(jo.ColorPresentationRequest=gR={}))});var vR=_($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.FoldingRangeRefreshRequest=$o.FoldingRangeRequest=void 0;var xl=ht(),mR;(function(t){t.method="textDocument/foldingRange",t.messageDirection=xl.MessageDirection.clientToServer,t.type=new xl.ProtocolRequestType(t.method)})(mR||($o.FoldingRangeRequest=mR={}));var yR;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=xl.MessageDirection.serverToClient,t.type=new xl.ProtocolRequestType0(t.method)})(yR||($o.FoldingRangeRefreshRequest=yR={}))});var wR=_(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});kl.DeclarationRequest=void 0;var _R=ht(),bR;(function(t){t.method="textDocument/declaration",t.messageDirection=_R.MessageDirection.clientToServer,t.type=new _R.ProtocolRequestType(t.method)})(bR||(kl.DeclarationRequest=bR={}))});var CR=_(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});Fl.SelectionRangeRequest=void 0;var SR=ht(),RR;(function(t){t.method="textDocument/selectionRange",t.messageDirection=SR.MessageDirection.clientToServer,t.type=new SR.ProtocolRequestType(t.method)})(RR||(Fl.SelectionRangeRequest=RR={}))});var TR=_(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.WorkDoneProgressCancelNotification=Qi.WorkDoneProgressCreateRequest=Qi.WorkDoneProgress=void 0;var TL=Bs(),Il=ht(),DR;(function(t){t.type=new TL.ProgressType;function e(r){return r===t.type}t.is=e})(DR||(Qi.WorkDoneProgress=DR={}));var ER;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=Il.MessageDirection.serverToClient,t.type=new Il.ProtocolRequestType(t.method)})(ER||(Qi.WorkDoneProgressCreateRequest=ER={}));var PR;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=Il.MessageDirection.clientToServer,t.type=new Il.ProtocolNotificationType(t.method)})(PR||(Qi.WorkDoneProgressCancelNotification=PR={}))});var xR=_(Zi=>{"use strict";Object.defineProperty(Zi,"__esModule",{value:!0});Zi.CallHierarchyOutgoingCallsRequest=Zi.CallHierarchyIncomingCallsRequest=Zi.CallHierarchyPrepareRequest=void 0;var Wo=ht(),qR;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=Wo.MessageDirection.clientToServer,t.type=new Wo.ProtocolRequestType(t.method)})(qR||(Zi.CallHierarchyPrepareRequest=qR={}));var OR;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=Wo.MessageDirection.clientToServer,t.type=new Wo.ProtocolRequestType(t.method)})(OR||(Zi.CallHierarchyIncomingCallsRequest=OR={}));var MR;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=Wo.MessageDirection.clientToServer,t.type=new Wo.ProtocolRequestType(t.method)})(MR||(Zi.CallHierarchyOutgoingCallsRequest=MR={}))});var LR=_(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.SemanticTokensRefreshRequest=Lr.SemanticTokensRangeRequest=Lr.SemanticTokensDeltaRequest=Lr.SemanticTokensRequest=Lr.SemanticTokensRegistrationType=Lr.TokenFormat=void 0;var qi=ht(),kR;(function(t){t.Relative="relative"})(kR||(Lr.TokenFormat=kR={}));var au;(function(t){t.method="textDocument/semanticTokens",t.type=new qi.RegistrationType(t.method)})(au||(Lr.SemanticTokensRegistrationType=au={}));var FR;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=qi.MessageDirection.clientToServer,t.type=new qi.ProtocolRequestType(t.method),t.registrationMethod=au.method})(FR||(Lr.SemanticTokensRequest=FR={}));var IR;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=qi.MessageDirection.clientToServer,t.type=new qi.ProtocolRequestType(t.method),t.registrationMethod=au.method})(IR||(Lr.SemanticTokensDeltaRequest=IR={}));var AR;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=qi.MessageDirection.clientToServer,t.type=new qi.ProtocolRequestType(t.method),t.registrationMethod=au.method})(AR||(Lr.SemanticTokensRangeRequest=AR={}));var NR;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=qi.MessageDirection.serverToClient,t.type=new qi.ProtocolRequestType0(t.method)})(NR||(Lr.SemanticTokensRefreshRequest=NR={}))});var WR=_(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});Al.ShowDocumentRequest=void 0;var jR=ht(),$R;(function(t){t.method="window/showDocument",t.messageDirection=jR.MessageDirection.serverToClient,t.type=new jR.ProtocolRequestType(t.method)})($R||(Al.ShowDocumentRequest=$R={}))});var zR=_(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});Nl.LinkedEditingRangeRequest=void 0;var HR=ht(),UR;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=HR.MessageDirection.clientToServer,t.type=new HR.ProtocolRequestType(t.method)})(UR||(Nl.LinkedEditingRangeRequest=UR={}))});var QR=_(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.WillDeleteFilesRequest=or.DidDeleteFilesNotification=or.DidRenameFilesNotification=or.WillRenameFilesRequest=or.DidCreateFilesNotification=or.WillCreateFilesRequest=or.FileOperationPatternKind=void 0;var pn=ht(),KR;(function(t){t.file="file",t.folder="folder"})(KR||(or.FileOperationPatternKind=KR={}));var BR;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=pn.MessageDirection.clientToServer,t.type=new pn.ProtocolRequestType(t.method)})(BR||(or.WillCreateFilesRequest=BR={}));var VR;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=pn.MessageDirection.clientToServer,t.type=new pn.ProtocolNotificationType(t.method)})(VR||(or.DidCreateFilesNotification=VR={}));var GR;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=pn.MessageDirection.clientToServer,t.type=new pn.ProtocolRequestType(t.method)})(GR||(or.WillRenameFilesRequest=GR={}));var YR;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=pn.MessageDirection.clientToServer,t.type=new pn.ProtocolNotificationType(t.method)})(YR||(or.DidRenameFilesNotification=YR={}));var XR;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=pn.MessageDirection.clientToServer,t.type=new pn.ProtocolNotificationType(t.method)})(XR||(or.DidDeleteFilesNotification=XR={}));var JR;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=pn.MessageDirection.clientToServer,t.type=new pn.ProtocolRequestType(t.method)})(JR||(or.WillDeleteFilesRequest=JR={}))});var nC=_(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.MonikerRequest=es.MonikerKind=es.UniquenessLevel=void 0;var ZR=ht(),eC;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(eC||(es.UniquenessLevel=eC={}));var tC;(function(t){t.$import="import",t.$export="export",t.local="local"})(tC||(es.MonikerKind=tC={}));var rC;(function(t){t.method="textDocument/moniker",t.messageDirection=ZR.MessageDirection.clientToServer,t.type=new ZR.ProtocolRequestType(t.method)})(rC||(es.MonikerRequest=rC={}))});var aC=_(ts=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});ts.TypeHierarchySubtypesRequest=ts.TypeHierarchySupertypesRequest=ts.TypeHierarchyPrepareRequest=void 0;var Ho=ht(),iC;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=Ho.MessageDirection.clientToServer,t.type=new Ho.ProtocolRequestType(t.method)})(iC||(ts.TypeHierarchyPrepareRequest=iC={}));var sC;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=Ho.MessageDirection.clientToServer,t.type=new Ho.ProtocolRequestType(t.method)})(sC||(ts.TypeHierarchySupertypesRequest=sC={}));var oC;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=Ho.MessageDirection.clientToServer,t.type=new Ho.ProtocolRequestType(t.method)})(oC||(ts.TypeHierarchySubtypesRequest=oC={}))});var lC=_(Uo=>{"use strict";Object.defineProperty(Uo,"__esModule",{value:!0});Uo.InlineValueRefreshRequest=Uo.InlineValueRequest=void 0;var Ll=ht(),uC;(function(t){t.method="textDocument/inlineValue",t.messageDirection=Ll.MessageDirection.clientToServer,t.type=new Ll.ProtocolRequestType(t.method)})(uC||(Uo.InlineValueRequest=uC={}));var cC;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=Ll.MessageDirection.serverToClient,t.type=new Ll.ProtocolRequestType0(t.method)})(cC||(Uo.InlineValueRefreshRequest=cC={}))});var gC=_(rs=>{"use strict";Object.defineProperty(rs,"__esModule",{value:!0});rs.InlayHintRefreshRequest=rs.InlayHintResolveRequest=rs.InlayHintRequest=void 0;var zo=ht(),dC;(function(t){t.method="textDocument/inlayHint",t.messageDirection=zo.MessageDirection.clientToServer,t.type=new zo.ProtocolRequestType(t.method)})(dC||(rs.InlayHintRequest=dC={}));var fC;(function(t){t.method="inlayHint/resolve",t.messageDirection=zo.MessageDirection.clientToServer,t.type=new zo.ProtocolRequestType(t.method)})(fC||(rs.InlayHintResolveRequest=fC={}));var hC;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=zo.MessageDirection.serverToClient,t.type=new zo.ProtocolRequestType0(t.method)})(hC||(rs.InlayHintRefreshRequest=hC={}))});var wC=_(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});mn.DiagnosticRefreshRequest=mn.WorkspaceDiagnosticRequest=mn.DocumentDiagnosticRequest=mn.DocumentDiagnosticReportKind=mn.DiagnosticServerCancellationData=void 0;var bC=Bs(),qL=El(),Ko=ht(),pC;(function(t){function e(r){let n=r;return n&&qL.boolean(n.retriggerRequest)}t.is=e})(pC||(mn.DiagnosticServerCancellationData=pC={}));var mC;(function(t){t.Full="full",t.Unchanged="unchanged"})(mC||(mn.DocumentDiagnosticReportKind=mC={}));var yC;(function(t){t.method="textDocument/diagnostic",t.messageDirection=Ko.MessageDirection.clientToServer,t.type=new Ko.ProtocolRequestType(t.method),t.partialResult=new bC.ProgressType})(yC||(mn.DocumentDiagnosticRequest=yC={}));var vC;(function(t){t.method="workspace/diagnostic",t.messageDirection=Ko.MessageDirection.clientToServer,t.type=new Ko.ProtocolRequestType(t.method),t.partialResult=new bC.ProgressType})(vC||(mn.WorkspaceDiagnosticRequest=vC={}));var _C;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=Ko.MessageDirection.serverToClient,t.type=new Ko.ProtocolRequestType0(t.method)})(_C||(mn.DiagnosticRefreshRequest=_C={}))});var TC=_(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.DidCloseNotebookDocumentNotification=Dt.DidSaveNotebookDocumentNotification=Dt.DidChangeNotebookDocumentNotification=Dt.NotebookCellArrayChange=Dt.DidOpenNotebookDocumentNotification=Dt.NotebookDocumentSyncRegistrationType=Dt.NotebookDocument=Dt.NotebookCell=Dt.ExecutionSummary=Dt.NotebookCellKind=void 0;var uu=oi(),Nn=El(),ai=ht(),nm;(function(t){t.Markup=1,t.Code=2;function e(r){return r===1||r===2}t.is=e})(nm||(Dt.NotebookCellKind=nm={}));var im;(function(t){function e(i,s){let o={executionOrder:i};return(s===!0||s===!1)&&(o.success=s),o}t.create=e;function r(i){let s=i;return Nn.objectLiteral(s)&&uu.uinteger.is(s.executionOrder)&&(s.success===void 0||Nn.boolean(s.success))}t.is=r;function n(i,s){return i===s?!0:i==null||s===null||s===void 0?!1:i.executionOrder===s.executionOrder&&i.success===s.success}t.equals=n})(im||(Dt.ExecutionSummary=im={}));var jl;(function(t){function e(s,o){return{kind:s,document:o}}t.create=e;function r(s){let o=s;return Nn.objectLiteral(o)&&nm.is(o.kind)&&uu.DocumentUri.is(o.document)&&(o.metadata===void 0||Nn.objectLiteral(o.metadata))}t.is=r;function n(s,o){let a=new Set;return s.document!==o.document&&a.add("document"),s.kind!==o.kind&&a.add("kind"),s.executionSummary!==o.executionSummary&&a.add("executionSummary"),(s.metadata!==void 0||o.metadata!==void 0)&&!i(s.metadata,o.metadata)&&a.add("metadata"),(s.executionSummary!==void 0||o.executionSummary!==void 0)&&!im.equals(s.executionSummary,o.executionSummary)&&a.add("executionSummary"),a}t.diff=n;function i(s,o){if(s===o)return!0;if(s==null||o===null||o===void 0||typeof s!=typeof o||typeof s!="object")return!1;let a=Array.isArray(s),u=Array.isArray(o);if(a!==u)return!1;if(a&&u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++)if(!i(s[c],o[c]))return!1}if(Nn.objectLiteral(s)&&Nn.objectLiteral(o)){let c=Object.keys(s),l=Object.keys(o);if(c.length!==l.length||(c.sort(),l.sort(),!i(c,l)))return!1;for(let f=0;f<c.length;f++){let d=c[f];if(!i(s[d],o[d]))return!1}}return!0}})(jl||(Dt.NotebookCell=jl={}));var SC;(function(t){function e(n,i,s,o){return{uri:n,notebookType:i,version:s,cells:o}}t.create=e;function r(n){let i=n;return Nn.objectLiteral(i)&&Nn.string(i.uri)&&uu.integer.is(i.version)&&Nn.typedArray(i.cells,jl.is)}t.is=r})(SC||(Dt.NotebookDocument=SC={}));var Bo;(function(t){t.method="notebookDocument/sync",t.messageDirection=ai.MessageDirection.clientToServer,t.type=new ai.RegistrationType(t.method)})(Bo||(Dt.NotebookDocumentSyncRegistrationType=Bo={}));var RC;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=ai.MessageDirection.clientToServer,t.type=new ai.ProtocolNotificationType(t.method),t.registrationMethod=Bo.method})(RC||(Dt.DidOpenNotebookDocumentNotification=RC={}));var CC;(function(t){function e(n){let i=n;return Nn.objectLiteral(i)&&uu.uinteger.is(i.start)&&uu.uinteger.is(i.deleteCount)&&(i.cells===void 0||Nn.typedArray(i.cells,jl.is))}t.is=e;function r(n,i,s){let o={start:n,deleteCount:i};return s!==void 0&&(o.cells=s),o}t.create=r})(CC||(Dt.NotebookCellArrayChange=CC={}));var DC;(function(t){t.method="notebookDocument/didChange",t.messageDirection=ai.MessageDirection.clientToServer,t.type=new ai.ProtocolNotificationType(t.method),t.registrationMethod=Bo.method})(DC||(Dt.DidChangeNotebookDocumentNotification=DC={}));var EC;(function(t){t.method="notebookDocument/didSave",t.messageDirection=ai.MessageDirection.clientToServer,t.type=new ai.ProtocolNotificationType(t.method),t.registrationMethod=Bo.method})(EC||(Dt.DidSaveNotebookDocumentNotification=EC={}));var PC;(function(t){t.method="notebookDocument/didClose",t.messageDirection=ai.MessageDirection.clientToServer,t.type=new ai.ProtocolNotificationType(t.method),t.registrationMethod=Bo.method})(PC||(Dt.DidCloseNotebookDocumentNotification=PC={}))});var MC=_($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});$l.InlineCompletionRequest=void 0;var qC=ht(),OC;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=qC.MessageDirection.clientToServer,t.type=new qC.ProtocolRequestType(t.method)})(OC||($l.InlineCompletionRequest=OC={}))});var zD=_(E=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});E.WorkspaceSymbolRequest=E.CodeActionResolveRequest=E.CodeActionRequest=E.DocumentSymbolRequest=E.DocumentHighlightRequest=E.ReferencesRequest=E.DefinitionRequest=E.SignatureHelpRequest=E.SignatureHelpTriggerKind=E.HoverRequest=E.CompletionResolveRequest=E.CompletionRequest=E.CompletionTriggerKind=E.PublishDiagnosticsNotification=E.WatchKind=E.RelativePattern=E.FileChangeType=E.DidChangeWatchedFilesNotification=E.WillSaveTextDocumentWaitUntilRequest=E.WillSaveTextDocumentNotification=E.TextDocumentSaveReason=E.DidSaveTextDocumentNotification=E.DidCloseTextDocumentNotification=E.DidChangeTextDocumentNotification=E.TextDocumentContentChangeEvent=E.DidOpenTextDocumentNotification=E.TextDocumentSyncKind=E.TelemetryEventNotification=E.LogMessageNotification=E.ShowMessageRequest=E.ShowMessageNotification=E.MessageType=E.DidChangeConfigurationNotification=E.ExitNotification=E.ShutdownRequest=E.InitializedNotification=E.InitializeErrorCodes=E.InitializeRequest=E.WorkDoneProgressOptions=E.TextDocumentRegistrationOptions=E.StaticRegistrationOptions=E.PositionEncodingKind=E.FailureHandlingKind=E.ResourceOperationKind=E.UnregistrationRequest=E.RegistrationRequest=E.DocumentSelector=E.NotebookCellTextDocumentFilter=E.NotebookDocumentFilter=E.TextDocumentFilter=void 0;E.MonikerRequest=E.MonikerKind=E.UniquenessLevel=E.WillDeleteFilesRequest=E.DidDeleteFilesNotification=E.WillRenameFilesRequest=E.DidRenameFilesNotification=E.WillCreateFilesRequest=E.DidCreateFilesNotification=E.FileOperationPatternKind=E.LinkedEditingRangeRequest=E.ShowDocumentRequest=E.SemanticTokensRegistrationType=E.SemanticTokensRefreshRequest=E.SemanticTokensRangeRequest=E.SemanticTokensDeltaRequest=E.SemanticTokensRequest=E.TokenFormat=E.CallHierarchyPrepareRequest=E.CallHierarchyOutgoingCallsRequest=E.CallHierarchyIncomingCallsRequest=E.WorkDoneProgressCancelNotification=E.WorkDoneProgressCreateRequest=E.WorkDoneProgress=E.SelectionRangeRequest=E.DeclarationRequest=E.FoldingRangeRefreshRequest=E.FoldingRangeRequest=E.ColorPresentationRequest=E.DocumentColorRequest=E.ConfigurationRequest=E.DidChangeWorkspaceFoldersNotification=E.WorkspaceFoldersRequest=E.TypeDefinitionRequest=E.ImplementationRequest=E.ApplyWorkspaceEditRequest=E.ExecuteCommandRequest=E.PrepareRenameRequest=E.RenameRequest=E.PrepareSupportDefaultBehavior=E.DocumentOnTypeFormattingRequest=E.DocumentRangesFormattingRequest=E.DocumentRangeFormattingRequest=E.DocumentFormattingRequest=E.DocumentLinkResolveRequest=E.DocumentLinkRequest=E.CodeLensRefreshRequest=E.CodeLensResolveRequest=E.CodeLensRequest=E.WorkspaceSymbolResolveRequest=void 0;E.InlineCompletionRequest=E.DidCloseNotebookDocumentNotification=E.DidSaveNotebookDocumentNotification=E.DidChangeNotebookDocumentNotification=E.NotebookCellArrayChange=E.DidOpenNotebookDocumentNotification=E.NotebookDocumentSyncRegistrationType=E.NotebookDocument=E.NotebookCell=E.ExecutionSummary=E.NotebookCellKind=E.DiagnosticRefreshRequest=E.WorkspaceDiagnosticRequest=E.DocumentDiagnosticRequest=E.DocumentDiagnosticReportKind=E.DiagnosticServerCancellationData=E.InlayHintRefreshRequest=E.InlayHintResolveRequest=E.InlayHintRequest=E.InlineValueRefreshRequest=E.InlineValueRequest=E.TypeHierarchySupertypesRequest=E.TypeHierarchySubtypesRequest=E.TypeHierarchyPrepareRequest=void 0;var V=ht(),xC=oi(),zt=El(),OL=nR();Object.defineProperty(E,"ImplementationRequest",{enumerable:!0,get:function(){return OL.ImplementationRequest}});var ML=oR();Object.defineProperty(E,"TypeDefinitionRequest",{enumerable:!0,get:function(){return ML.TypeDefinitionRequest}});var $D=cR();Object.defineProperty(E,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return $D.WorkspaceFoldersRequest}});Object.defineProperty(E,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return $D.DidChangeWorkspaceFoldersNotification}});var xL=fR();Object.defineProperty(E,"ConfigurationRequest",{enumerable:!0,get:function(){return xL.ConfigurationRequest}});var WD=pR();Object.defineProperty(E,"DocumentColorRequest",{enumerable:!0,get:function(){return WD.DocumentColorRequest}});Object.defineProperty(E,"ColorPresentationRequest",{enumerable:!0,get:function(){return WD.ColorPresentationRequest}});var HD=vR();Object.defineProperty(E,"FoldingRangeRequest",{enumerable:!0,get:function(){return HD.FoldingRangeRequest}});Object.defineProperty(E,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return HD.FoldingRangeRefreshRequest}});var kL=wR();Object.defineProperty(E,"DeclarationRequest",{enumerable:!0,get:function(){return kL.DeclarationRequest}});var FL=CR();Object.defineProperty(E,"SelectionRangeRequest",{enumerable:!0,get:function(){return FL.SelectionRangeRequest}});var cm=TR();Object.defineProperty(E,"WorkDoneProgress",{enumerable:!0,get:function(){return cm.WorkDoneProgress}});Object.defineProperty(E,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return cm.WorkDoneProgressCreateRequest}});Object.defineProperty(E,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return cm.WorkDoneProgressCancelNotification}});var lm=xR();Object.defineProperty(E,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return lm.CallHierarchyIncomingCallsRequest}});Object.defineProperty(E,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return lm.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(E,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return lm.CallHierarchyPrepareRequest}});var Vo=LR();Object.defineProperty(E,"TokenFormat",{enumerable:!0,get:function(){return Vo.TokenFormat}});Object.defineProperty(E,"SemanticTokensRequest",{enumerable:!0,get:function(){return Vo.SemanticTokensRequest}});Object.defineProperty(E,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return Vo.SemanticTokensDeltaRequest}});Object.defineProperty(E,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return Vo.SemanticTokensRangeRequest}});Object.defineProperty(E,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return Vo.SemanticTokensRefreshRequest}});Object.defineProperty(E,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return Vo.SemanticTokensRegistrationType}});var IL=WR();Object.defineProperty(E,"ShowDocumentRequest",{enumerable:!0,get:function(){return IL.ShowDocumentRequest}});var AL=zR();Object.defineProperty(E,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return AL.LinkedEditingRangeRequest}});var Vs=QR();Object.defineProperty(E,"FileOperationPatternKind",{enumerable:!0,get:function(){return Vs.FileOperationPatternKind}});Object.defineProperty(E,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Vs.DidCreateFilesNotification}});Object.defineProperty(E,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Vs.WillCreateFilesRequest}});Object.defineProperty(E,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Vs.DidRenameFilesNotification}});Object.defineProperty(E,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Vs.WillRenameFilesRequest}});Object.defineProperty(E,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Vs.DidDeleteFilesNotification}});Object.defineProperty(E,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Vs.WillDeleteFilesRequest}});var dm=nC();Object.defineProperty(E,"UniquenessLevel",{enumerable:!0,get:function(){return dm.UniquenessLevel}});Object.defineProperty(E,"MonikerKind",{enumerable:!0,get:function(){return dm.MonikerKind}});Object.defineProperty(E,"MonikerRequest",{enumerable:!0,get:function(){return dm.MonikerRequest}});var fm=aC();Object.defineProperty(E,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return fm.TypeHierarchyPrepareRequest}});Object.defineProperty(E,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return fm.TypeHierarchySubtypesRequest}});Object.defineProperty(E,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return fm.TypeHierarchySupertypesRequest}});var UD=lC();Object.defineProperty(E,"InlineValueRequest",{enumerable:!0,get:function(){return UD.InlineValueRequest}});Object.defineProperty(E,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return UD.InlineValueRefreshRequest}});var hm=gC();Object.defineProperty(E,"InlayHintRequest",{enumerable:!0,get:function(){return hm.InlayHintRequest}});Object.defineProperty(E,"InlayHintResolveRequest",{enumerable:!0,get:function(){return hm.InlayHintResolveRequest}});Object.defineProperty(E,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return hm.InlayHintRefreshRequest}});var cu=wC();Object.defineProperty(E,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return cu.DiagnosticServerCancellationData}});Object.defineProperty(E,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return cu.DocumentDiagnosticReportKind}});Object.defineProperty(E,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return cu.DocumentDiagnosticRequest}});Object.defineProperty(E,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return cu.WorkspaceDiagnosticRequest}});Object.defineProperty(E,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return cu.DiagnosticRefreshRequest}});var ui=TC();Object.defineProperty(E,"NotebookCellKind",{enumerable:!0,get:function(){return ui.NotebookCellKind}});Object.defineProperty(E,"ExecutionSummary",{enumerable:!0,get:function(){return ui.ExecutionSummary}});Object.defineProperty(E,"NotebookCell",{enumerable:!0,get:function(){return ui.NotebookCell}});Object.defineProperty(E,"NotebookDocument",{enumerable:!0,get:function(){return ui.NotebookDocument}});Object.defineProperty(E,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return ui.NotebookDocumentSyncRegistrationType}});Object.defineProperty(E,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return ui.DidOpenNotebookDocumentNotification}});Object.defineProperty(E,"NotebookCellArrayChange",{enumerable:!0,get:function(){return ui.NotebookCellArrayChange}});Object.defineProperty(E,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return ui.DidChangeNotebookDocumentNotification}});Object.defineProperty(E,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return ui.DidSaveNotebookDocumentNotification}});Object.defineProperty(E,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return ui.DidCloseNotebookDocumentNotification}});var NL=MC();Object.defineProperty(E,"InlineCompletionRequest",{enumerable:!0,get:function(){return NL.InlineCompletionRequest}});var sm;(function(t){function e(r){let n=r;return zt.string(n)||zt.string(n.language)||zt.string(n.scheme)||zt.string(n.pattern)}t.is=e})(sm||(E.TextDocumentFilter=sm={}));var om;(function(t){function e(r){let n=r;return zt.objectLiteral(n)&&(zt.string(n.notebookType)||zt.string(n.scheme)||zt.string(n.pattern))}t.is=e})(om||(E.NotebookDocumentFilter=om={}));var am;(function(t){function e(r){let n=r;return zt.objectLiteral(n)&&(zt.string(n.notebook)||om.is(n.notebook))&&(n.language===void 0||zt.string(n.language))}t.is=e})(am||(E.NotebookCellTextDocumentFilter=am={}));var um;(function(t){function e(r){if(!Array.isArray(r))return!1;for(let n of r)if(!zt.string(n)&&!sm.is(n)&&!am.is(n))return!1;return!0}t.is=e})(um||(E.DocumentSelector=um={}));var kC;(function(t){t.method="client/registerCapability",t.messageDirection=V.MessageDirection.serverToClient,t.type=new V.ProtocolRequestType(t.method)})(kC||(E.RegistrationRequest=kC={}));var FC;(function(t){t.method="client/unregisterCapability",t.messageDirection=V.MessageDirection.serverToClient,t.type=new V.ProtocolRequestType(t.method)})(FC||(E.UnregistrationRequest=FC={}));var IC;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(IC||(E.ResourceOperationKind=IC={}));var AC;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(AC||(E.FailureHandlingKind=AC={}));var NC;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(NC||(E.PositionEncodingKind=NC={}));var LC;(function(t){function e(r){let n=r;return n&&zt.string(n.id)&&n.id.length>0}t.hasId=e})(LC||(E.StaticRegistrationOptions=LC={}));var jC;(function(t){function e(r){let n=r;return n&&(n.documentSelector===null||um.is(n.documentSelector))}t.is=e})(jC||(E.TextDocumentRegistrationOptions=jC={}));var $C;(function(t){function e(n){let i=n;return zt.objectLiteral(i)&&(i.workDoneProgress===void 0||zt.boolean(i.workDoneProgress))}t.is=e;function r(n){let i=n;return i&&zt.boolean(i.workDoneProgress)}t.hasWorkDoneProgress=r})($C||(E.WorkDoneProgressOptions=$C={}));var WC;(function(t){t.method="initialize",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType(t.method)})(WC||(E.InitializeRequest=WC={}));var HC;(function(t){t.unknownProtocolVersion=1})(HC||(E.InitializeErrorCodes=HC={}));var UC;(function(t){t.method="initialized",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolNotificationType(t.method)})(UC||(E.InitializedNotification=UC={}));var zC;(function(t){t.method="shutdown",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType0(t.method)})(zC||(E.ShutdownRequest=zC={}));var KC;(function(t){t.method="exit",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolNotificationType0(t.method)})(KC||(E.ExitNotification=KC={}));var BC;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolNotificationType(t.method)})(BC||(E.DidChangeConfigurationNotification=BC={}));var VC;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(VC||(E.MessageType=VC={}));var GC;(function(t){t.method="window/showMessage",t.messageDirection=V.MessageDirection.serverToClient,t.type=new V.ProtocolNotificationType(t.method)})(GC||(E.ShowMessageNotification=GC={}));var YC;(function(t){t.method="window/showMessageRequest",t.messageDirection=V.MessageDirection.serverToClient,t.type=new V.ProtocolRequestType(t.method)})(YC||(E.ShowMessageRequest=YC={}));var XC;(function(t){t.method="window/logMessage",t.messageDirection=V.MessageDirection.serverToClient,t.type=new V.ProtocolNotificationType(t.method)})(XC||(E.LogMessageNotification=XC={}));var JC;(function(t){t.method="telemetry/event",t.messageDirection=V.MessageDirection.serverToClient,t.type=new V.ProtocolNotificationType(t.method)})(JC||(E.TelemetryEventNotification=JC={}));var QC;(function(t){t.None=0,t.Full=1,t.Incremental=2})(QC||(E.TextDocumentSyncKind=QC={}));var ZC;(function(t){t.method="textDocument/didOpen",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolNotificationType(t.method)})(ZC||(E.DidOpenTextDocumentNotification=ZC={}));var eD;(function(t){function e(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}t.isIncremental=e;function r(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}t.isFull=r})(eD||(E.TextDocumentContentChangeEvent=eD={}));var tD;(function(t){t.method="textDocument/didChange",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolNotificationType(t.method)})(tD||(E.DidChangeTextDocumentNotification=tD={}));var rD;(function(t){t.method="textDocument/didClose",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolNotificationType(t.method)})(rD||(E.DidCloseTextDocumentNotification=rD={}));var nD;(function(t){t.method="textDocument/didSave",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolNotificationType(t.method)})(nD||(E.DidSaveTextDocumentNotification=nD={}));var iD;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(iD||(E.TextDocumentSaveReason=iD={}));var sD;(function(t){t.method="textDocument/willSave",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolNotificationType(t.method)})(sD||(E.WillSaveTextDocumentNotification=sD={}));var oD;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType(t.method)})(oD||(E.WillSaveTextDocumentWaitUntilRequest=oD={}));var aD;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolNotificationType(t.method)})(aD||(E.DidChangeWatchedFilesNotification=aD={}));var uD;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(uD||(E.FileChangeType=uD={}));var cD;(function(t){function e(r){let n=r;return zt.objectLiteral(n)&&(xC.URI.is(n.baseUri)||xC.WorkspaceFolder.is(n.baseUri))&&zt.string(n.pattern)}t.is=e})(cD||(E.RelativePattern=cD={}));var lD;(function(t){t.Create=1,t.Change=2,t.Delete=4})(lD||(E.WatchKind=lD={}));var dD;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=V.MessageDirection.serverToClient,t.type=new V.ProtocolNotificationType(t.method)})(dD||(E.PublishDiagnosticsNotification=dD={}));var fD;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(fD||(E.CompletionTriggerKind=fD={}));var hD;(function(t){t.method="textDocument/completion",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType(t.method)})(hD||(E.CompletionRequest=hD={}));var gD;(function(t){t.method="completionItem/resolve",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType(t.method)})(gD||(E.CompletionResolveRequest=gD={}));var pD;(function(t){t.method="textDocument/hover",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType(t.method)})(pD||(E.HoverRequest=pD={}));var mD;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(mD||(E.SignatureHelpTriggerKind=mD={}));var yD;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType(t.method)})(yD||(E.SignatureHelpRequest=yD={}));var vD;(function(t){t.method="textDocument/definition",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType(t.method)})(vD||(E.DefinitionRequest=vD={}));var _D;(function(t){t.method="textDocument/references",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType(t.method)})(_D||(E.ReferencesRequest=_D={}));var bD;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType(t.method)})(bD||(E.DocumentHighlightRequest=bD={}));var wD;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType(t.method)})(wD||(E.DocumentSymbolRequest=wD={}));var SD;(function(t){t.method="textDocument/codeAction",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType(t.method)})(SD||(E.CodeActionRequest=SD={}));var RD;(function(t){t.method="codeAction/resolve",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType(t.method)})(RD||(E.CodeActionResolveRequest=RD={}));var CD;(function(t){t.method="workspace/symbol",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType(t.method)})(CD||(E.WorkspaceSymbolRequest=CD={}));var DD;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType(t.method)})(DD||(E.WorkspaceSymbolResolveRequest=DD={}));var ED;(function(t){t.method="textDocument/codeLens",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType(t.method)})(ED||(E.CodeLensRequest=ED={}));var PD;(function(t){t.method="codeLens/resolve",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType(t.method)})(PD||(E.CodeLensResolveRequest=PD={}));var TD;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=V.MessageDirection.serverToClient,t.type=new V.ProtocolRequestType0(t.method)})(TD||(E.CodeLensRefreshRequest=TD={}));var qD;(function(t){t.method="textDocument/documentLink",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType(t.method)})(qD||(E.DocumentLinkRequest=qD={}));var OD;(function(t){t.method="documentLink/resolve",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType(t.method)})(OD||(E.DocumentLinkResolveRequest=OD={}));var MD;(function(t){t.method="textDocument/formatting",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType(t.method)})(MD||(E.DocumentFormattingRequest=MD={}));var xD;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType(t.method)})(xD||(E.DocumentRangeFormattingRequest=xD={}));var kD;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType(t.method)})(kD||(E.DocumentRangesFormattingRequest=kD={}));var FD;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType(t.method)})(FD||(E.DocumentOnTypeFormattingRequest=FD={}));var ID;(function(t){t.Identifier=1})(ID||(E.PrepareSupportDefaultBehavior=ID={}));var AD;(function(t){t.method="textDocument/rename",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType(t.method)})(AD||(E.RenameRequest=AD={}));var ND;(function(t){t.method="textDocument/prepareRename",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType(t.method)})(ND||(E.PrepareRenameRequest=ND={}));var LD;(function(t){t.method="workspace/executeCommand",t.messageDirection=V.MessageDirection.clientToServer,t.type=new V.ProtocolRequestType(t.method)})(LD||(E.ExecuteCommandRequest=LD={}));var jD;(function(t){t.method="workspace/applyEdit",t.messageDirection=V.MessageDirection.serverToClient,t.type=new V.ProtocolRequestType("workspace/applyEdit")})(jD||(E.ApplyWorkspaceEditRequest=jD={}))});var BD=_(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});Wl.createProtocolConnection=void 0;var KD=Bs();function LL(t,e,r,n){return KD.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,KD.createMessageConnection)(t,e,r,n)}Wl.createProtocolConnection=LL});var GD=_(jr=>{"use strict";var jL=jr&&jr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Hl=jr&&jr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&jL(e,t,r)};Object.defineProperty(jr,"__esModule",{value:!0});jr.LSPErrorCodes=jr.createProtocolConnection=void 0;Hl(Bs(),jr);Hl(oi(),jr);Hl(ht(),jr);Hl(zD(),jr);var $L=BD();Object.defineProperty(jr,"createProtocolConnection",{enumerable:!0,get:function(){return $L.createProtocolConnection}});var VD;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(VD||(jr.LSPErrorCodes=VD={}))});var ne=_(ci=>{"use strict";var WL=ci&&ci.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),YD=ci&&ci.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&WL(e,t,r)};Object.defineProperty(ci,"__esModule",{value:!0});ci.createProtocolConnection=void 0;var HL=Jp();YD(Jp(),ci);YD(GD(),ci);function UL(t,e,r,n){return(0,HL.createMessageConnection)(t,e,r,n)}ci.createProtocolConnection=UL});var Ul=_(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});ar.forEach=ar.mapAsync=ar.map=ar.clearTestMode=ar.setTestMode=ar.Semaphore=ar.Delayer=void 0;var du=ne(),gm=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,r=this.defaultDelay){return this.task=e,r>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(n=>{this.onSuccess=n}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var n=this.task();return this.task=void 0,n})),(r>=0||this.timeout===void 0)&&(this.timeout=(0,du.RAL)().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},r>=0?r:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(this.timeout.dispose(),this.timeout=void 0)}};ar.Delayer=gm;var pm=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,du.RAL)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}};ar.Semaphore=pm;var mm=!1;function zL(){mm=!0}ar.setTestMode=zL;function KL(){mm=!1}ar.clearTestMode=KL;var XD=15,lu=class{constructor(e=XD){this.yieldAfter=mm===!0?Math.max(e,2):Math.max(e,XD),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.counter=0,this.total=0,this.counterInterval=1,this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){let e=Date.now()-this.startTime,r=Math.max(0,this.yieldAfter-e);if(this.total+=this.counter,this.counter=0,e>=this.yieldAfter||r<=1)return this.counterInterval=1,this.total=0,!0;switch(e){case 0:case 1:this.counterInterval=this.total*2;break}}return!1}};async function BL(t,e,r,n){if(t.length===0)return[];let i=new Array(t.length),s=new lu(n?.yieldAfter);function o(u){s.start();for(let c=u;c<t.length;c++)if(i[c]=e(t[c]),s.shouldYield())return n?.yieldCallback&&n.yieldCallback(),c+1;return-1}let a=o(0);for(;a!==-1&&!(r!==void 0&&r.isCancellationRequested);)a=await new Promise(u=>{(0,du.RAL)().timer.setImmediate(()=>{u(o(a))})});return i}ar.map=BL;async function VL(t,e,r,n){if(t.length===0)return[];let i=new Array(t.length),s=new lu(n?.yieldAfter);async function o(u){s.start();for(let c=u;c<t.length;c++)if(i[c]=await e(t[c],r),s.shouldYield())return n?.yieldCallback&&n.yieldCallback(),c+1;return-1}let a=await o(0);for(;a!==-1&&!(r!==void 0&&r.isCancellationRequested);)a=await new Promise(u=>{(0,du.RAL)().timer.setImmediate(()=>{u(o(a))})});return i}ar.mapAsync=VL;async function GL(t,e,r,n){if(t.length===0)return;let i=new lu(n?.yieldAfter);function s(a){i.start();for(let u=a;u<t.length;u++)if(e(t[u]),i.shouldYield())return n?.yieldCallback&&n.yieldCallback(),u+1;return-1}let o=s(0);for(;o!==-1&&!(r!==void 0&&r.isCancellationRequested);)o=await new Promise(a=>{(0,du.RAL)().timer.setImmediate(()=>{a(s(o))})})}ar.forEach=GL});var _m=_(vm=>{"use strict";Object.defineProperty(vm,"__esModule",{value:!0});var YL=require("vscode"),ym=class extends YL.CompletionItem{constructor(e){super(e)}};vm.default=ym});var Sm=_(wm=>{"use strict";Object.defineProperty(wm,"__esModule",{value:!0});var XL=require("vscode"),bm=class extends XL.CodeLens{constructor(e){super(e)}};wm.default=bm});var Dm=_(Cm=>{"use strict";Object.defineProperty(Cm,"__esModule",{value:!0});var JL=require("vscode"),Rm=class extends JL.DocumentLink{constructor(e,r){super(e,r)}};Cm.default=Rm});var Tm=_(Pm=>{"use strict";Object.defineProperty(Pm,"__esModule",{value:!0});var QL=require("vscode"),Em=class extends QL.CodeAction{constructor(e,r){super(e),this.data=r}};Pm.default=Em});var Mm=_(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});Go.ProtocolDiagnostic=Go.DiagnosticCode=void 0;var ZL=require("vscode"),qm=gn(),JD;(function(t){function e(r){let n=r;return n!=null&&(qm.number(n.value)||qm.string(n.value))&&qm.string(n.target)}t.is=e})(JD||(Go.DiagnosticCode=JD={}));var Om=class extends ZL.Diagnostic{constructor(e,r,n,i){super(e,r,n),this.data=i,this.hasDiagnosticCode=!1}};Go.ProtocolDiagnostic=Om});var Fm=_(km=>{"use strict";Object.defineProperty(km,"__esModule",{value:!0});var ej=require("vscode"),xm=class extends ej.CallHierarchyItem{constructor(e,r,n,i,s,o,a){super(e,r,n,i,s,o),a!==void 0&&(this.data=a)}};km.default=xm});var Nm=_(Am=>{"use strict";Object.defineProperty(Am,"__esModule",{value:!0});var tj=require("vscode"),Im=class extends tj.TypeHierarchyItem{constructor(e,r,n,i,s,o,a){super(e,r,n,i,s,o),a!==void 0&&(this.data=a)}};Am.default=Im});var $m=_(jm=>{"use strict";Object.defineProperty(jm,"__esModule",{value:!0});var zl=require("vscode"),Lm=class extends zl.SymbolInformation{constructor(e,r,n,i,s){let o=!(i instanceof zl.Uri);super(e,r,n,o?i:new zl.Location(i,new zl.Range(0,0,0,0))),this.hasRange=o,s!==void 0&&(this.data=s)}};jm.default=Lm});var Um=_(Hm=>{"use strict";Object.defineProperty(Hm,"__esModule",{value:!0});var rj=require("vscode"),Wm=class extends rj.InlayHint{constructor(e,r,n){super(e,r,n)}};Hm.default=Wm});var tE=_(Kl=>{"use strict";Object.defineProperty(Kl,"__esModule",{value:!0});Kl.createConverter=void 0;var kt=require("vscode"),_e=ne(),Gs=gn(),QD=Ul(),nj=_m(),ij=Sm(),sj=Dm(),ZD=Tm(),eE=Mm(),oj=Fm(),aj=Nm(),uj=$m(),cj=Um(),zm;(function(t){function e(r){let n=r;return n&&!!n.inserting&&!!n.replacing}t.is=e})(zm||(zm={}));function lj(t){let r=t||(y=>y.toString());function n(y){return r(y)}function i(y){return{uri:r(y.uri)}}function s(y){return{uri:r(y.uri),languageId:y.languageId,version:y.version,text:y.getText()}}function o(y){return{uri:r(y.uri),version:y.version}}function a(y){return{textDocument:s(y)}}function u(y){let I=y;return!!I.document&&!!I.contentChanges}function c(y){let I=y;return!!I.uri&&!!I.version}function l(y,I,oe){if(c(y))return{textDocument:{uri:r(y.uri),version:y.version},contentChanges:[{text:y.getText()}]};if(u(y)){let ze=I,x=oe;return{textDocument:{uri:r(ze),version:x},contentChanges:y.contentChanges.map(T=>{let q=T.range;return{range:{start:{line:q.start.line,character:q.start.character},end:{line:q.end.line,character:q.end.character}},rangeLength:T.rangeLength,text:T.text}})}}else throw Error("Unsupported text document change parameter")}function f(y){return{textDocument:i(y)}}function d(y,I=!1){let oe={textDocument:i(y)};return I&&(oe.text=y.getText()),oe}function p(y){switch(y){case kt.TextDocumentSaveReason.Manual:return _e.TextDocumentSaveReason.Manual;case kt.TextDocumentSaveReason.AfterDelay:return _e.TextDocumentSaveReason.AfterDelay;case kt.TextDocumentSaveReason.FocusOut:return _e.TextDocumentSaveReason.FocusOut}return _e.TextDocumentSaveReason.Manual}function g(y){return{textDocument:i(y.document),reason:p(y.reason)}}function b(y){return{files:y.files.map(I=>({uri:r(I)}))}}function C(y){return{files:y.files.map(I=>({oldUri:r(I.oldUri),newUri:r(I.newUri)}))}}function D(y){return{files:y.files.map(I=>({uri:r(I)}))}}function S(y){return{files:y.files.map(I=>({uri:r(I)}))}}function w(y){return{files:y.files.map(I=>({oldUri:r(I.oldUri),newUri:r(I.newUri)}))}}function O(y){return{files:y.files.map(I=>({uri:r(I)}))}}function j(y,I){return{textDocument:i(y),position:he(I)}}function z(y){switch(y){case kt.CompletionTriggerKind.TriggerCharacter:return _e.CompletionTriggerKind.TriggerCharacter;case kt.CompletionTriggerKind.TriggerForIncompleteCompletions:return _e.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return _e.CompletionTriggerKind.Invoked}}function W(y,I,oe){return{textDocument:i(y),position:he(I),context:{triggerKind:z(oe.triggerKind),triggerCharacter:oe.triggerCharacter}}}function G(y){switch(y){case kt.SignatureHelpTriggerKind.Invoke:return _e.SignatureHelpTriggerKind.Invoked;case kt.SignatureHelpTriggerKind.TriggerCharacter:return _e.SignatureHelpTriggerKind.TriggerCharacter;case kt.SignatureHelpTriggerKind.ContentChange:return _e.SignatureHelpTriggerKind.ContentChange}}function Z(y){return{label:y.label}}function K(y){return y.map(Z)}function N(y){return{label:y.label,parameters:K(y.parameters)}}function J(y){return y.map(N)}function Q(y){return y===void 0?y:{signatures:J(y.signatures),activeSignature:y.activeSignature,activeParameter:y.activeParameter}}function ge(y,I,oe){return{textDocument:i(y),position:he(I),context:{isRetrigger:oe.isRetrigger,triggerCharacter:oe.triggerCharacter,triggerKind:G(oe.triggerKind),activeSignatureHelp:Q(oe.activeSignatureHelp)}}}function he(y){return{line:y.line,character:y.character}}function k(y){return y==null?y:{line:y.line>_e.uinteger.MAX_VALUE?_e.uinteger.MAX_VALUE:y.line,character:y.character>_e.uinteger.MAX_VALUE?_e.uinteger.MAX_VALUE:y.character}}function X(y,I){return QD.map(y,k,I)}function pe(y){return y.map(k)}function le(y){return y==null?y:{start:k(y.start),end:k(y.end)}}function ae(y){return y.map(le)}function ot(y){return y==null?y:_e.Location.create(n(y.uri),le(y.range))}function ut(y){switch(y){case kt.DiagnosticSeverity.Error:return _e.DiagnosticSeverity.Error;case kt.DiagnosticSeverity.Warning:return _e.DiagnosticSeverity.Warning;case kt.DiagnosticSeverity.Information:return _e.DiagnosticSeverity.Information;case kt.DiagnosticSeverity.Hint:return _e.DiagnosticSeverity.Hint}}function Pr(y){if(!y)return;let I=[];for(let oe of y){let ze=hr(oe);ze!==void 0&&I.push(ze)}return I.length>0?I:void 0}function hr(y){switch(y){case kt.DiagnosticTag.Unnecessary:return _e.DiagnosticTag.Unnecessary;case kt.DiagnosticTag.Deprecated:return _e.DiagnosticTag.Deprecated;default:return}}function Zr(y){return{message:y.message,location:ot(y.location)}}function Tr(y){return y.map(Zr)}function ri(y){if(y!=null)return Gs.number(y)||Gs.string(y)?y:{value:y.value,target:n(y.target)}}function St(y){let I=_e.Diagnostic.create(le(y.range),y.message),oe=y instanceof eE.ProtocolDiagnostic?y:void 0;oe!==void 0&&oe.data!==void 0&&(I.data=oe.data);let ze=ri(y.code);return eE.DiagnosticCode.is(ze)?oe!==void 0&&oe.hasDiagnosticCode?I.code=ze:(I.code=ze.value,I.codeDescription={href:ze.target}):I.code=ze,Gs.number(y.severity)&&(I.severity=ut(y.severity)),Array.isArray(y.tags)&&(I.tags=Pr(y.tags)),y.relatedInformation&&(I.relatedInformation=Tr(y.relatedInformation)),y.source&&(I.source=y.source),I}function qr(y,I){return y==null?y:QD.map(y,St,I)}function en(y){return y==null?y:y.map(St)}function tn(y,I){switch(y){case"$string":return I;case _e.MarkupKind.PlainText:return{kind:y,value:I};case _e.MarkupKind.Markdown:return{kind:y,value:I.value};default:return`Unsupported Markup content received. Kind is: ${y}`}}function mt(y){switch(y){case kt.CompletionItemTag.Deprecated:return _e.CompletionItemTag.Deprecated}}function Or(y){if(y===void 0)return y;let I=[];for(let oe of y){let ze=mt(oe);ze!==void 0&&I.push(ze)}return I}function nr(y,I){return I!==void 0?I:y+1}function Mr(y,I=!1){let oe,ze;Gs.string(y.label)?oe=y.label:(oe=y.label.label,I&&(y.label.detail!==void 0||y.label.description!==void 0)&&(ze={detail:y.label.detail,description:y.label.description}));let x={label:oe};ze!==void 0&&(x.labelDetails=ze);let v=y instanceof nj.default?y:void 0;y.detail&&(x.detail=y.detail),y.documentation&&(!v||v.documentationFormat==="$string"?x.documentation=y.documentation:x.documentation=tn(v.documentationFormat,y.documentation)),y.filterText&&(x.filterText=y.filterText),xr(x,y),Gs.number(y.kind)&&(x.kind=nr(y.kind,v&&v.originalItemKind)),y.sortText&&(x.sortText=y.sortText),y.additionalTextEdits&&(x.additionalTextEdits=yt(y.additionalTextEdits)),y.commitCharacters&&(x.commitCharacters=y.commitCharacters.slice()),y.command&&(x.command=re(y.command)),(y.preselect===!0||y.preselect===!1)&&(x.preselect=y.preselect);let T=Or(y.tags);if(v){if(v.data!==void 0&&(x.data=v.data),v.deprecated===!0||v.deprecated===!1){if(v.deprecated===!0&&T!==void 0&&T.length>0){let q=T.indexOf(kt.CompletionItemTag.Deprecated);q!==-1&&T.splice(q,1)}x.deprecated=v.deprecated}v.insertTextMode!==void 0&&(x.insertTextMode=v.insertTextMode)}return T!==void 0&&T.length>0&&(x.tags=T),x.insertTextMode===void 0&&y.keepWhitespace===!0&&(x.insertTextMode=_e.InsertTextMode.adjustIndentation),x}function xr(y,I){let oe=_e.InsertTextFormat.PlainText,ze,x;I.textEdit?(ze=I.textEdit.newText,x=I.textEdit.range):I.insertText instanceof kt.SnippetString?(oe=_e.InsertTextFormat.Snippet,ze=I.insertText.value):ze=I.insertText,I.range&&(x=I.range),y.insertTextFormat=oe,I.fromEdit&&ze!==void 0&&x!==void 0?y.textEdit=Nt(ze,x):y.insertText=ze}function Nt(y,I){return zm.is(I)?_e.InsertReplaceEdit.create(y,le(I.inserting),le(I.replacing)):{newText:y,range:le(I)}}function kr(y){return{range:le(y.range),newText:y.newText}}function yt(y){return y==null?y:y.map(kr)}function Lt(y){return y<=kt.SymbolKind.TypeParameter?y+1:_e.SymbolKind.Property}function Yt(y){return y}function rn(y){return y.map(Yt)}function Fr(y,I,oe){return{textDocument:i(y),position:he(I),context:{includeDeclaration:oe.includeDeclaration}}}async function ni(y,I){let oe=_e.CodeAction.create(y.title);if(y instanceof ZD.default&&y.data!==void 0&&(oe.data=y.data),y.kind!==void 0&&(oe.kind=P(y.kind)),y.diagnostics!==void 0&&(oe.diagnostics=await qr(y.diagnostics,I)),y.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return y.command!==void 0&&(oe.command=re(y.command)),y.isPreferred!==void 0&&(oe.isPreferred=y.isPreferred),y.disabled!==void 0&&(oe.disabled={reason:y.disabled.reason}),oe}function Ei(y){let I=_e.CodeAction.create(y.title);if(y instanceof ZD.default&&y.data!==void 0&&(I.data=y.data),y.kind!==void 0&&(I.kind=P(y.kind)),y.diagnostics!==void 0&&(I.diagnostics=en(y.diagnostics)),y.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return y.command!==void 0&&(I.command=re(y.command)),y.isPreferred!==void 0&&(I.isPreferred=y.isPreferred),y.disabled!==void 0&&(I.disabled={reason:y.disabled.reason}),I}async function Fn(y,I){if(y==null)return y;let oe;return y.only&&Gs.string(y.only.value)&&(oe=[y.only.value]),_e.CodeActionContext.create(await qr(y.diagnostics,I),oe,gr(y.triggerKind))}function Pi(y){if(y==null)return y;let I;return y.only&&Gs.string(y.only.value)&&(I=[y.only.value]),_e.CodeActionContext.create(en(y.diagnostics),I,gr(y.triggerKind))}function gr(y){switch(y){case kt.CodeActionTriggerKind.Invoke:return _e.CodeActionTriggerKind.Invoked;case kt.CodeActionTriggerKind.Automatic:return _e.CodeActionTriggerKind.Automatic;default:return}}function P(y){if(y!=null)return y.value}function $(y){return y==null?y:_e.InlineValueContext.create(y.frameId,le(y.stoppedLocation))}function Y(y,I,oe){return{context:_e.InlineCompletionContext.create(oe.triggerKind,oe.selectedCompletionInfo),textDocument:i(y),position:k(I)}}function re(y){let I=_e.Command.create(y.title,y.command);return y.arguments&&(I.arguments=y.arguments),I}function je(y){let I=_e.CodeLens.create(le(y.range));return y.command&&(I.command=re(y.command)),y instanceof ij.default&&y.data&&(I.data=y.data),I}function Ne(y,I){let oe={tabSize:y.tabSize,insertSpaces:y.insertSpaces};return I.trimTrailingWhitespace&&(oe.trimTrailingWhitespace=!0),I.trimFinalNewlines&&(oe.trimFinalNewlines=!0),I.insertFinalNewline&&(oe.insertFinalNewline=!0),oe}function Ge(y){return{textDocument:i(y)}}function Ze(y){return{textDocument:i(y)}}function De(y){let I=_e.DocumentLink.create(le(y.range));y.target&&(I.target=n(y.target)),y.tooltip!==void 0&&(I.tooltip=y.tooltip);let oe=y instanceof sj.default?y:void 0;return oe&&oe.data&&(I.data=oe.data),I}function Ue(y){return{textDocument:i(y)}}function ke(y){let I={name:y.name,kind:Lt(y.kind),uri:n(y.uri),range:le(y.range),selectionRange:le(y.selectionRange)};return y.detail!==void 0&&y.detail.length>0&&(I.detail=y.detail),y.tags!==void 0&&(I.tags=rn(y.tags)),y instanceof oj.default&&y.data!==void 0&&(I.data=y.data),I}function et(y){let I={name:y.name,kind:Lt(y.kind),uri:n(y.uri),range:le(y.range),selectionRange:le(y.selectionRange)};return y.detail!==void 0&&y.detail.length>0&&(I.detail=y.detail),y.tags!==void 0&&(I.tags=rn(y.tags)),y instanceof aj.default&&y.data!==void 0&&(I.data=y.data),I}function Rt(y){let I=y instanceof uj.default?{name:y.name,kind:Lt(y.kind),location:y.hasRange?ot(y.location):{uri:r(y.location.uri)},data:y.data}:{name:y.name,kind:Lt(y.kind),location:ot(y.location)};return y.tags!==void 0&&(I.tags=rn(y.tags)),y.containerName!==""&&(I.containerName=y.containerName),I}function Ht(y){let I=typeof y.label=="string"?y.label:y.label.map(Bi),oe=_e.InlayHint.create(k(y.position),I);return y.kind!==void 0&&(oe.kind=y.kind),y.textEdits!==void 0&&(oe.textEdits=yt(y.textEdits)),y.tooltip!==void 0&&(oe.tooltip=Vi(y.tooltip)),y.paddingLeft!==void 0&&(oe.paddingLeft=y.paddingLeft),y.paddingRight!==void 0&&(oe.paddingRight=y.paddingRight),y instanceof cj.default&&y.data!==void 0&&(oe.data=y.data),oe}function Bi(y){let I=_e.InlayHintLabelPart.create(y.value);return y.location!==void 0&&(I.location=ot(y.location)),y.command!==void 0&&(I.command=re(y.command)),y.tooltip!==void 0&&(I.tooltip=Vi(y.tooltip)),I}function Vi(y){return typeof y=="string"?y:{kind:_e.MarkupKind.Markdown,value:y.value}}return{asUri:n,asTextDocumentIdentifier:i,asTextDocumentItem:s,asVersionedTextDocumentIdentifier:o,asOpenTextDocumentParams:a,asChangeTextDocumentParams:l,asCloseTextDocumentParams:f,asSaveTextDocumentParams:d,asWillSaveTextDocumentParams:g,asDidCreateFilesParams:b,asDidRenameFilesParams:C,asDidDeleteFilesParams:D,asWillCreateFilesParams:S,asWillRenameFilesParams:w,asWillDeleteFilesParams:O,asTextDocumentPositionParams:j,asCompletionParams:W,asSignatureHelpParams:ge,asWorkerPosition:he,asRange:le,asRanges:ae,asPosition:k,asPositions:X,asPositionsSync:pe,asLocation:ot,asDiagnosticSeverity:ut,asDiagnosticTag:hr,asDiagnostic:St,asDiagnostics:qr,asDiagnosticsSync:en,asCompletionItem:Mr,asTextEdit:kr,asSymbolKind:Lt,asSymbolTag:Yt,asSymbolTags:rn,asReferenceParams:Fr,asCodeAction:ni,asCodeActionSync:Ei,asCodeActionContext:Fn,asCodeActionContextSync:Pi,asInlineValueContext:$,asCommand:re,asCodeLens:je,asFormattingOptions:Ne,asDocumentSymbolParams:Ge,asCodeLensParams:Ze,asDocumentLink:De,asDocumentLinkParams:Ue,asCallHierarchyItem:ke,asTypeHierarchyItem:et,asInlayHint:Ht,asWorkspaceSymbol:Rt,asInlineCompletionParams:Y}}Kl.createConverter=lj});var iE=_(Vl=>{"use strict";Object.defineProperty(Vl,"__esModule",{value:!0});Vl.createConverter=void 0;var ee=require("vscode"),ye=ne(),yn=gn(),$e=Ul(),dj=_m(),fj=Sm(),hj=Dm(),gj=Tm(),rE=Mm(),pj=Fm(),mj=Nm(),yj=$m(),vj=Um(),nE=ne(),Bl;(function(t){function e(r){let n=r;return n&&yn.string(n.language)&&yn.string(n.value)}t.is=e})(Bl||(Bl={}));function _j(t,e,r){let i=t||(h=>ee.Uri.parse(h));function s(h){return i(h)}function o(h){let M=[];for(let U of h)if(typeof U=="string")M.push(U);else if(nE.NotebookCellTextDocumentFilter.is(U))if(typeof U.notebook=="string")M.push({notebookType:U.notebook,language:U.language});else{let ce=U.notebook.notebookType??"*";M.push({notebookType:ce,scheme:U.notebook.scheme,pattern:U.notebook.pattern,language:U.language})}else nE.TextDocumentFilter.is(U)&&M.push({language:U.language,scheme:U.scheme,pattern:U.pattern});return M}async function a(h,M){return $e.map(h,c,M)}function u(h){let M=new Array(h.length);for(let U=0;U<h.length;U++)M[U]=c(h[U]);return M}function c(h){let M=new rE.ProtocolDiagnostic(g(h.range),h.message,C(h.severity),h.data);if(h.code!==void 0){if(typeof h.code=="string"||typeof h.code=="number")ye.CodeDescription.is(h.codeDescription)?M.code={value:h.code,target:s(h.codeDescription.href)}:M.code=h.code;else if(rE.DiagnosticCode.is(h.code)){M.hasDiagnosticCode=!0;let U=h.code;M.code={value:U.value,target:s(U.target)}}}return h.source&&(M.source=h.source),h.relatedInformation&&(M.relatedInformation=l(h.relatedInformation)),Array.isArray(h.tags)&&(M.tags=f(h.tags)),M}function l(h){let M=new Array(h.length);for(let U=0;U<h.length;U++){let ce=h[U];M[U]=new ee.DiagnosticRelatedInformation(ut(ce.location),ce.message)}return M}function f(h){if(!h)return;let M=[];for(let U of h){let ce=d(U);ce!==void 0&&M.push(ce)}return M.length>0?M:void 0}function d(h){switch(h){case ye.DiagnosticTag.Unnecessary:return ee.DiagnosticTag.Unnecessary;case ye.DiagnosticTag.Deprecated:return ee.DiagnosticTag.Deprecated;default:return}}function p(h){return h?new ee.Position(h.line,h.character):void 0}function g(h){return h?new ee.Range(h.start.line,h.start.character,h.end.line,h.end.character):void 0}async function b(h,M){return $e.map(h,U=>new ee.Range(U.start.line,U.start.character,U.end.line,U.end.character),M)}function C(h){if(h==null)return ee.DiagnosticSeverity.Error;switch(h){case ye.DiagnosticSeverity.Error:return ee.DiagnosticSeverity.Error;case ye.DiagnosticSeverity.Warning:return ee.DiagnosticSeverity.Warning;case ye.DiagnosticSeverity.Information:return ee.DiagnosticSeverity.Information;case ye.DiagnosticSeverity.Hint:return ee.DiagnosticSeverity.Hint}return ee.DiagnosticSeverity.Error}function D(h){if(yn.string(h))return w(h);if(Bl.is(h))return w().appendCodeblock(h.value,h.language);if(Array.isArray(h)){let M=[];for(let U of h){let ce=w();Bl.is(U)?ce.appendCodeblock(U.value,U.language):ce.appendMarkdown(U),M.push(ce)}return M}else return w(h)}function S(h){if(yn.string(h))return h;switch(h.kind){case ye.MarkupKind.Markdown:return w(h.value);case ye.MarkupKind.PlainText:return h.value;default:return`Unsupported Markup content received. Kind is: ${h.kind}`}}function w(h){let M;if(h===void 0||typeof h=="string")M=new ee.MarkdownString(h);else switch(h.kind){case ye.MarkupKind.Markdown:M=new ee.MarkdownString(h.value);break;case ye.MarkupKind.PlainText:M=new ee.MarkdownString,M.appendText(h.value);break;default:M=new ee.MarkdownString,M.appendText(`Unsupported Markup content received. Kind is: ${h.kind}`);break}return M.isTrusted=e,M.supportHtml=r,M}function O(h){if(h)return new ee.Hover(D(h.contents),g(h.range))}async function j(h,M,U){if(!h)return;if(Array.isArray(h))return $e.map(h,si=>K(si,M),U);let ce=h,{defaultRange:Ut,commitCharacters:Xt}=z(ce,M),Je=await $e.map(ce.items,si=>K(si,Xt,Ut,ce.itemDefaults?.insertTextMode,ce.itemDefaults?.insertTextFormat,ce.itemDefaults?.data),U);return new ee.CompletionList(Je,ce.isIncomplete)}function z(h,M){let U=h.itemDefaults?.editRange,ce=h.itemDefaults?.commitCharacters??M;return ye.Range.is(U)?{defaultRange:g(U),commitCharacters:ce}:U!==void 0?{defaultRange:{inserting:g(U.insert),replacing:g(U.replace)},commitCharacters:ce}:{defaultRange:void 0,commitCharacters:ce}}function W(h){return ye.CompletionItemKind.Text<=h&&h<=ye.CompletionItemKind.TypeParameter?[h-1,void 0]:[ee.CompletionItemKind.Text,h]}function G(h){switch(h){case ye.CompletionItemTag.Deprecated:return ee.CompletionItemTag.Deprecated}}function Z(h){if(h==null)return[];let M=[];for(let U of h){let ce=G(U);ce!==void 0&&M.push(ce)}return M}function K(h,M,U,ce,Ut,Xt){let Je=Z(h.tags),si=N(h),nt=new dj.default(si);h.detail&&(nt.detail=h.detail),h.documentation&&(nt.documentation=S(h.documentation),nt.documentationFormat=yn.string(h.documentation)?"$string":h.documentation.kind),h.filterText&&(nt.filterText=h.filterText);let nl=J(h,U,Ut);if(nl&&(nt.insertText=nl.text,nt.range=nl.range,nt.fromEdit=nl.fromEdit),yn.number(h.kind)){let[PN,mS]=W(h.kind);nt.kind=PN,mS&&(nt.originalItemKind=mS)}h.sortText&&(nt.sortText=h.sortText),h.additionalTextEdits&&(nt.additionalTextEdits=k(h.additionalTextEdits));let gS=h.commitCharacters!==void 0?yn.stringArray(h.commitCharacters)?h.commitCharacters:void 0:M;gS&&(nt.commitCharacters=gS.slice()),h.command&&(nt.command=yt(h.command)),(h.deprecated===!0||h.deprecated===!1)&&(nt.deprecated=h.deprecated,h.deprecated===!0&&Je.push(ee.CompletionItemTag.Deprecated)),(h.preselect===!0||h.preselect===!1)&&(nt.preselect=h.preselect);let pS=h.data??Xt;pS!==void 0&&(nt.data=pS),Je.length>0&&(nt.tags=Je);let jg=h.insertTextMode??ce;return jg!==void 0&&(nt.insertTextMode=jg,jg===ye.InsertTextMode.asIs&&(nt.keepWhitespace=!0)),nt}function N(h){return ye.CompletionItemLabelDetails.is(h.labelDetails)?{label:h.label,detail:h.labelDetails.detail,description:h.labelDetails.description}:h.label}function J(h,M,U){let ce=h.insertTextFormat??U;if(h.textEdit!==void 0||M!==void 0){let[Ut,Xt]=h.textEdit!==void 0?Q(h.textEdit):[M,h.textEditText??h.label];return ce===ye.InsertTextFormat.Snippet?{text:new ee.SnippetString(Xt),range:Ut,fromEdit:!0}:{text:Xt,range:Ut,fromEdit:!0}}else return h.insertText?ce===ye.InsertTextFormat.Snippet?{text:new ee.SnippetString(h.insertText),fromEdit:!1}:{text:h.insertText,fromEdit:!1}:void 0}function Q(h){return ye.InsertReplaceEdit.is(h)?[{inserting:g(h.insert),replacing:g(h.replace)},h.newText]:[g(h.range),h.newText]}function ge(h){if(h)return new ee.TextEdit(g(h.range),h.newText)}async function he(h,M){if(h)return $e.map(h,ge,M)}function k(h){if(!h)return;let M=new Array(h.length);for(let U=0;U<h.length;U++)M[U]=ge(h[U]);return M}async function X(h,M){if(!h)return;let U=new ee.SignatureHelp;return yn.number(h.activeSignature)?U.activeSignature=h.activeSignature:U.activeSignature=0,yn.number(h.activeParameter)?U.activeParameter=h.activeParameter:U.activeParameter=0,h.signatures&&(U.signatures=await pe(h.signatures,M)),U}async function pe(h,M){return $e.mapAsync(h,le,M)}async function le(h,M){let U=new ee.SignatureInformation(h.label);return h.documentation!==void 0&&(U.documentation=S(h.documentation)),h.parameters!==void 0&&(U.parameters=await ae(h.parameters,M)),h.activeParameter!==void 0&&(U.activeParameter=h.activeParameter),U}function ae(h,M){return $e.map(h,ot,M)}function ot(h){let M=new ee.ParameterInformation(h.label);return h.documentation&&(M.documentation=S(h.documentation)),M}function ut(h){return h?new ee.Location(i(h.uri),g(h.range)):void 0}async function Pr(h,M){if(h)return Tr(h,M)}async function hr(h,M){if(h)return Tr(h,M)}function Zr(h){if(!h)return;let M={targetUri:i(h.targetUri),targetRange:g(h.targetRange),originSelectionRange:g(h.originSelectionRange),targetSelectionRange:g(h.targetSelectionRange)};if(!M.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return M}async function Tr(h,M){if(h)if(yn.array(h)){if(h.length===0)return[];if(ye.LocationLink.is(h[0])){let U=h;return $e.map(U,Zr,M)}else{let U=h;return $e.map(U,ut,M)}}else return ye.LocationLink.is(h)?[Zr(h)]:ut(h)}async function ri(h,M){if(h)return $e.map(h,ut,M)}async function St(h,M){if(h)return $e.map(h,qr,M)}function qr(h){let M=new ee.DocumentHighlight(g(h.range));return yn.number(h.kind)&&(M.kind=en(h.kind)),M}function en(h){switch(h){case ye.DocumentHighlightKind.Text:return ee.DocumentHighlightKind.Text;case ye.DocumentHighlightKind.Read:return ee.DocumentHighlightKind.Read;case ye.DocumentHighlightKind.Write:return ee.DocumentHighlightKind.Write}return ee.DocumentHighlightKind.Text}async function tn(h,M){if(h)return $e.map(h,Mr,M)}function mt(h){return h<=ye.SymbolKind.TypeParameter?h-1:ee.SymbolKind.Property}function Or(h){switch(h){case ye.SymbolTag.Deprecated:return ee.SymbolTag.Deprecated;default:return}}function nr(h){if(h==null)return;let M=[];for(let U of h){let ce=Or(U);ce!==void 0&&M.push(ce)}return M.length===0?void 0:M}function Mr(h){let M=h.data,U=h.location,ce=U.range===void 0||M!==void 0?new yj.default(h.name,mt(h.kind),h.containerName??"",U.range===void 0?i(U.uri):new ee.Location(i(h.location.uri),g(U.range)),M):new ee.SymbolInformation(h.name,mt(h.kind),h.containerName??"",new ee.Location(i(h.location.uri),g(U.range)));return kr(ce,h),ce}async function xr(h,M){if(h!=null)return $e.map(h,Nt,M)}function Nt(h){let M=new ee.DocumentSymbol(h.name,h.detail||"",mt(h.kind),g(h.range),g(h.selectionRange));if(kr(M,h),h.children!==void 0&&h.children.length>0){let U=[];for(let ce of h.children)U.push(Nt(ce));M.children=U}return M}function kr(h,M){h.tags=nr(M.tags),M.deprecated&&(h.tags?h.tags.includes(ee.SymbolTag.Deprecated)||(h.tags=h.tags.concat(ee.SymbolTag.Deprecated)):h.tags=[ee.SymbolTag.Deprecated])}function yt(h){let M={title:h.title,command:h.command};return h.arguments&&(M.arguments=h.arguments),M}async function Lt(h,M){if(h)return $e.map(h,yt,M)}let Yt=new Map;Yt.set(ye.CodeActionKind.Empty,ee.CodeActionKind.Empty),Yt.set(ye.CodeActionKind.QuickFix,ee.CodeActionKind.QuickFix),Yt.set(ye.CodeActionKind.Refactor,ee.CodeActionKind.Refactor),Yt.set(ye.CodeActionKind.RefactorExtract,ee.CodeActionKind.RefactorExtract),Yt.set(ye.CodeActionKind.RefactorInline,ee.CodeActionKind.RefactorInline),Yt.set(ye.CodeActionKind.RefactorRewrite,ee.CodeActionKind.RefactorRewrite),Yt.set(ye.CodeActionKind.Source,ee.CodeActionKind.Source),Yt.set(ye.CodeActionKind.SourceOrganizeImports,ee.CodeActionKind.SourceOrganizeImports);function rn(h){if(h==null)return;let M=Yt.get(h);if(M)return M;let U=h.split(".");M=ee.CodeActionKind.Empty;for(let ce of U)M=M.append(ce);return M}function Fr(h){if(h!=null)return h.map(M=>rn(M))}async function ni(h,M){if(h==null)return;let U=new gj.default(h.title,h.data);return h.kind!==void 0&&(U.kind=rn(h.kind)),h.diagnostics!==void 0&&(U.diagnostics=u(h.diagnostics)),h.edit!==void 0&&(U.edit=await gr(h.edit,M)),h.command!==void 0&&(U.command=yt(h.command)),h.isPreferred!==void 0&&(U.isPreferred=h.isPreferred),h.disabled!==void 0&&(U.disabled={reason:h.disabled.reason}),U}function Ei(h,M){return $e.mapAsync(h,async U=>ye.Command.is(U)?yt(U):ni(U,M),M)}function Fn(h){if(!h)return;let M=new fj.default(g(h.range));return h.command&&(M.command=yt(h.command)),h.data!==void 0&&h.data!==null&&(M.data=h.data),M}async function Pi(h,M){if(h)return $e.map(h,Fn,M)}async function gr(h,M){if(!h)return;let U=new Map;if(h.changeAnnotations!==void 0){let Xt=h.changeAnnotations;await $e.forEach(Object.keys(Xt),Je=>{let si=P(Xt[Je]);U.set(Je,si)},M)}let ce=Xt=>{if(Xt!==void 0)return U.get(Xt)},Ut=new ee.WorkspaceEdit;if(h.documentChanges){let Xt=h.documentChanges;await $e.forEach(Xt,Je=>{if(ye.CreateFile.is(Je))Ut.createFile(i(Je.uri),Je.options,ce(Je.annotationId));else if(ye.RenameFile.is(Je))Ut.renameFile(i(Je.oldUri),i(Je.newUri),Je.options,ce(Je.annotationId));else if(ye.DeleteFile.is(Je))Ut.deleteFile(i(Je.uri),Je.options,ce(Je.annotationId));else if(ye.TextDocumentEdit.is(Je)){let si=i(Je.textDocument.uri);for(let nt of Je.edits)ye.AnnotatedTextEdit.is(nt)?Ut.replace(si,g(nt.range),nt.newText,ce(nt.annotationId)):Ut.replace(si,g(nt.range),nt.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(Je,void 0,4)}`)},M)}else if(h.changes){let Xt=h.changes;await $e.forEach(Object.keys(Xt),Je=>{Ut.set(i(Je),k(Xt[Je]))},M)}return Ut}function P(h){if(h!==void 0)return{label:h.label,needsConfirmation:!!h.needsConfirmation,description:h.description}}function $(h){let M=g(h.range),U=h.target?s(h.target):void 0,ce=new hj.default(M,U);return h.tooltip!==void 0&&(ce.tooltip=h.tooltip),h.data!==void 0&&h.data!==null&&(ce.data=h.data),ce}async function Y(h,M){if(h)return $e.map(h,$,M)}function re(h){return new ee.Color(h.red,h.green,h.blue,h.alpha)}function je(h){return new ee.ColorInformation(g(h.range),re(h.color))}async function Ne(h,M){if(h)return $e.map(h,je,M)}function Ge(h){let M=new ee.ColorPresentation(h.label);return M.additionalTextEdits=k(h.additionalTextEdits),h.textEdit&&(M.textEdit=ge(h.textEdit)),M}async function Ze(h,M){if(h)return $e.map(h,Ge,M)}function De(h){if(h)switch(h){case ye.FoldingRangeKind.Comment:return ee.FoldingRangeKind.Comment;case ye.FoldingRangeKind.Imports:return ee.FoldingRangeKind.Imports;case ye.FoldingRangeKind.Region:return ee.FoldingRangeKind.Region}}function Ue(h){return new ee.FoldingRange(h.startLine,h.endLine,De(h.kind))}async function ke(h,M){if(h)return $e.map(h,Ue,M)}function et(h){return new ee.SelectionRange(g(h.range),h.parent?et(h.parent):void 0)}async function Rt(h,M){return Array.isArray(h)?$e.map(h,et,M):[]}function Ht(h){return ye.InlineValueText.is(h)?new ee.InlineValueText(g(h.range),h.text):ye.InlineValueVariableLookup.is(h)?new ee.InlineValueVariableLookup(g(h.range),h.variableName,h.caseSensitiveLookup):new ee.InlineValueEvaluatableExpression(g(h.range),h.expression)}async function Bi(h,M){return Array.isArray(h)?$e.map(h,Ht,M):[]}async function Vi(h,M){let U=typeof h.label=="string"?h.label:await $e.map(h.label,y,M),ce=new vj.default(p(h.position),U);return h.kind!==void 0&&(ce.kind=h.kind),h.textEdits!==void 0&&(ce.textEdits=await he(h.textEdits,M)),h.tooltip!==void 0&&(ce.tooltip=I(h.tooltip)),h.paddingLeft!==void 0&&(ce.paddingLeft=h.paddingLeft),h.paddingRight!==void 0&&(ce.paddingRight=h.paddingRight),h.data!==void 0&&(ce.data=h.data),ce}function y(h){let M=new ee.InlayHintLabelPart(h.value);return h.location!==void 0&&(M.location=ut(h.location)),h.tooltip!==void 0&&(M.tooltip=I(h.tooltip)),h.command!==void 0&&(M.command=yt(h.command)),M}function I(h){return typeof h=="string"?h:w(h)}async function oe(h,M){if(Array.isArray(h))return $e.mapAsync(h,Vi,M)}function ze(h){if(h===null)return;let M=new pj.default(mt(h.kind),h.name,h.detail||"",s(h.uri),g(h.range),g(h.selectionRange),h.data);return h.tags!==void 0&&(M.tags=nr(h.tags)),M}async function x(h,M){if(h!==null)return $e.map(h,ze,M)}async function v(h,M){return new ee.CallHierarchyIncomingCall(ze(h.from),await b(h.fromRanges,M))}async function T(h,M){if(h!==null)return $e.mapAsync(h,v,M)}async function q(h,M){return new ee.CallHierarchyOutgoingCall(ze(h.to),await b(h.fromRanges,M))}async function R(h,M){if(h!==null)return $e.mapAsync(h,q,M)}async function m(h,M){if(h!=null)return new ee.SemanticTokens(new Uint32Array(h.data),h.resultId)}function F(h){return new ee.SemanticTokensEdit(h.start,h.deleteCount,h.data!==void 0?new Uint32Array(h.data):void 0)}async function H(h,M){if(h!=null)return new ee.SemanticTokensEdits(h.edits.map(F),h.resultId)}function ve(h){return h}async function ft(h,M){if(h!=null)return new ee.LinkedEditingRanges(await b(h.ranges,M),tt(h.wordPattern))}function tt(h){if(h!=null)return new RegExp(h)}function Ir(h){if(h===null)return;let M=new mj.default(mt(h.kind),h.name,h.detail||"",s(h.uri),g(h.range),g(h.selectionRange),h.data);return h.tags!==void 0&&(M.tags=nr(h.tags)),M}async function nn(h,M){if(h!==null)return $e.map(h,Ir,M)}function In(h){if(yn.string(h))return h;if(ye.RelativePattern.is(h)){if(ye.URI.is(h.baseUri))return new ee.RelativePattern(s(h.baseUri),h.pattern);if(ye.WorkspaceFolder.is(h.baseUri)){let M=ee.workspace.getWorkspaceFolder(s(h.baseUri.uri));return M!==void 0?new ee.RelativePattern(M,h.pattern):void 0}}}async function Me(h,M){if(!h)return;if(Array.isArray(h))return $e.map(h,Ut=>ii(Ut),M);let U=h,ce=await $e.map(U.items,Ut=>ii(Ut),M);return new ee.InlineCompletionList(ce)}function ii(h){let M;typeof h.insertText=="string"?M=h.insertText:M=new ee.SnippetString(h.insertText.value);let U;h.command&&(U=yt(h.command));let ce=new ee.InlineCompletionItem(M,g(h.range),U);return h.filterText&&(ce.filterText=h.filterText),ce}return{asUri:s,asDocumentSelector:o,asDiagnostics:a,asDiagnostic:c,asRange:g,asRanges:b,asPosition:p,asDiagnosticSeverity:C,asDiagnosticTag:d,asHover:O,asCompletionResult:j,asCompletionItem:K,asTextEdit:ge,asTextEdits:he,asSignatureHelp:X,asSignatureInformations:pe,asSignatureInformation:le,asParameterInformations:ae,asParameterInformation:ot,asDeclarationResult:Pr,asDefinitionResult:hr,asLocation:ut,asReferences:ri,asDocumentHighlights:St,asDocumentHighlight:qr,asDocumentHighlightKind:en,asSymbolKind:mt,asSymbolTag:Or,asSymbolTags:nr,asSymbolInformations:tn,asSymbolInformation:Mr,asDocumentSymbols:xr,asDocumentSymbol:Nt,asCommand:yt,asCommands:Lt,asCodeAction:ni,asCodeActionKind:rn,asCodeActionKinds:Fr,asCodeActionResult:Ei,asCodeLens:Fn,asCodeLenses:Pi,asWorkspaceEdit:gr,asDocumentLink:$,asDocumentLinks:Y,asFoldingRangeKind:De,asFoldingRange:Ue,asFoldingRanges:ke,asColor:re,asColorInformation:je,asColorInformations:Ne,asColorPresentation:Ge,asColorPresentations:Ze,asSelectionRange:et,asSelectionRanges:Rt,asInlineValue:Ht,asInlineValues:Bi,asInlayHint:Vi,asInlayHints:oe,asSemanticTokensLegend:ve,asSemanticTokens:m,asSemanticTokensEdit:F,asSemanticTokensEdits:H,asCallHierarchyItem:ze,asCallHierarchyItems:x,asCallHierarchyIncomingCall:v,asCallHierarchyIncomingCalls:T,asCallHierarchyOutgoingCall:q,asCallHierarchyOutgoingCalls:R,asLinkedEditingRanges:ft,asTypeHierarchyItem:Ir,asTypeHierarchyItems:nn,asGlobPattern:In,asInlineCompletionResult:Me,asInlineCompletionItem:ii}}Vl.createConverter=_j});var gt=_(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.generateUuid=vn.parse=vn.isUUID=vn.v4=vn.empty=void 0;var fu=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},hu=class t extends fu{static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}};hu._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];hu._timeHighBits=["8","9","a","b"];vn.empty=new fu("00000000-0000-0000-0000-000000000000");function sE(){return new hu}vn.v4=sE;var bj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function oE(t){return bj.test(t)}vn.isUUID=oE;function wj(t){if(!oE(t))throw new Error("invalid uuid");return new fu(t)}vn.parse=wj;function Sj(){return sE().asHex()}vn.generateUuid=Sj});var Bm=_(Gl=>{"use strict";Object.defineProperty(Gl,"__esModule",{value:!0});Gl.ProgressPart=void 0;var aE=require("vscode"),uE=ne(),cE=gn(),Km=class{constructor(e,r,n){this._client=e,this._token=r,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(uE.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),n&&n(this);break}})}begin(e){this._infinite=e.percentage===void 0,this._lspProgressDisposable!==void 0&&aE.window.withProgress({location:aE.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(r,n)=>{if(this._lspProgressDisposable!==void 0)return this._progress=r,this._cancellationToken=n,this._tokenDisposable=this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(uE.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,s)=>{this._resolve=i,this._reject=s})})}report(e){if(this._infinite&&cE.string(e.message))this._progress!==void 0&&this._progress.report({message:e.message});else if(cE.number(e.percentage)){let r=Math.max(0,Math.min(e.percentage,100)),n=Math.max(0,r-this._reported);this._reported+=n,this._progress!==void 0&&this._progress.report({message:e.message,increment:n})}}cancel(){this.cleanup(),this._reject!==void 0&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this.cleanup(),this._resolve!==void 0&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}cleanup(){this._lspProgressDisposable!==void 0&&(this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0),this._tokenDisposable!==void 0&&(this._tokenDisposable.dispose(),this._tokenDisposable=void 0),this._progress=void 0,this._cancellationToken=void 0}};Gl.ProgressPart=Km});var Le=_(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.WorkspaceFeature=Kt.TextDocumentLanguageFeature=Kt.TextDocumentEventFeature=Kt.DynamicDocumentFeature=Kt.DynamicFeature=Kt.StaticFeature=Kt.ensure=Kt.LSPCancellationError=void 0;var Ys=require("vscode"),Vm=ne(),pr=gn(),lE=gt(),Gm=class extends Ys.CancellationError{constructor(e){super(),this.data=e}};Kt.LSPCancellationError=Gm;function Rj(t,e){return t[e]===void 0&&(t[e]={}),t[e]}Kt.ensure=Rj;var dE;(function(t){function e(r){let n=r;return n!=null&&pr.func(n.fillClientCapabilities)&&pr.func(n.initialize)&&pr.func(n.getState)&&pr.func(n.clear)&&(n.fillInitializeParams===void 0||pr.func(n.fillInitializeParams))}t.is=e})(dE||(Kt.StaticFeature=dE={}));var fE;(function(t){function e(r){let n=r;return n!=null&&pr.func(n.fillClientCapabilities)&&pr.func(n.initialize)&&pr.func(n.getState)&&pr.func(n.clear)&&(n.fillInitializeParams===void 0||pr.func(n.fillInitializeParams))&&pr.func(n.register)&&pr.func(n.unregister)&&n.registrationType!==void 0}t.is=e})(fE||(Kt.DynamicFeature=fE={}));var gu=class{constructor(e){this._client=e}getState(){let e=this.getDocumentSelectors(),r=0;for(let i of e){r++;for(let s of Ys.workspace.textDocuments)if(Ys.languages.match(i,s)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}let n=r>0;return{kind:"document",id:this.registrationType.method,registrations:n,matches:!1}}};Kt.DynamicDocumentFeature=gu;var Ym=class extends gu{static textDocumentFilter(e,r){for(let n of e)if(Ys.languages.match(n,r)>0)return!0;return!1}constructor(e,r,n,i,s,o,a){super(e),this._event=r,this._type=n,this._middleware=i,this._createParams=s,this._textDocument=o,this._selectorFilter=a,this._selectors=new Map,this._onNotificationSent=new Ys.EventEmitter}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(r=>{this.callback(r).catch(n=>{this._client.error(`Sending document notification ${this._type.method} failed.`,n)})})),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}async callback(e){let r=async n=>{let i=this._createParams(n);await this._client.sendNotification(this._type,i),this.notificationSent(this.getTextDocument(n),this._type,i)};if(this.matches(e)){let n=this._middleware();return n?n(e,i=>r(i)):r(e)}}matches(e){return this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(e))?!1:!this._selectorFilter||this._selectorFilter(this._selectors.values(),e)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,r,n){this._onNotificationSent.fire({textDocument:e,type:r,params:n})}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}clear(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let r of this._selectors.values())if(Ys.languages.match(r,e)>0)return{send:n=>this.callback(n)}}};Kt.TextDocumentEventFeature=Ym;var Xm=class extends gu{constructor(e,r){super(e),this._registrationType=r,this._registrations=new Map}*getDocumentSelectors(){for(let e of this._registrations.values()){let r=e.data.registerOptions.documentSelector;r!==null&&(yield this._client.protocol2CodeConverter.asDocumentSelector(r))}}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let r=this.registerLanguageProvider(e.registerOptions,e.id);this._registrations.set(e.id,{disposable:r[0],data:e,provider:r[1]})}unregister(e){let r=this._registrations.get(e);r!==void 0&&r.disposable.dispose()}clear(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,r){if(r){if(Vm.TextDocumentRegistrationOptions.is(r)){let n=Vm.StaticRegistrationOptions.hasId(r)?r.id:lE.generateUuid(),i=r.documentSelector??e;if(i)return[n,Object.assign({},r,{documentSelector:i})]}else if(pr.boolean(r)&&r===!0||Vm.WorkDoneProgressOptions.is(r)){if(!e)return[void 0,void 0];let n=pr.boolean(r)&&r===!0?{documentSelector:e}:Object.assign({},r,{documentSelector:e});return[lE.generateUuid(),n]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,r){if(!(!e||!r))return pr.boolean(r)&&r===!0?{documentSelector:e}:Object.assign({},r,{documentSelector:e})}getProvider(e){for(let r of this._registrations.values()){let n=r.data.registerOptions.documentSelector;if(n!==null&&Ys.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(n),e)>0)return r.provider}}getAllProviders(){let e=[];for(let r of this._registrations.values())e.push(r.provider);return e}};Kt.TextDocumentLanguageFeature=Xm;var Jm=class{constructor(e,r){this._client=e,this._registrationType=r,this._registrations=new Map}getState(){let e=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:e}}get registrationType(){return this._registrationType}register(e){let r=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:r[0],provider:r[1]})}unregister(e){let r=this._registrations.get(e);r!==void 0&&r.disposable.dispose()}clear(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let r of this._registrations.values())e.push(r.provider);return e}};Kt.WorkspaceFeature=Jm});var gE=_((hY,hE)=>{var Cj=typeof process=="object"&&process&&process.platform==="win32";hE.exports=Cj?{sep:"\\"}:{sep:"/"}});var _E=_((gY,vE)=>{"use strict";vE.exports=mE;function mE(t,e,r){t instanceof RegExp&&(t=pE(t,r)),e instanceof RegExp&&(e=pE(e,r));var n=yE(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function pE(t,e){var r=e.match(t);return r?r[0]:null}mE.range=yE;function yE(t,e,r){var n,i,s,o,a,u=r.indexOf(t),c=r.indexOf(e,u+1),l=u;if(u>=0&&c>0){if(t===e)return[u,c];for(n=[],s=r.length;l>=0&&!a;)l==u?(n.push(l),u=r.indexOf(t,l+1)):n.length==1?a=[n.pop(),c]:(i=n.pop(),i<s&&(s=i,o=c),c=r.indexOf(e,l+1)),l=u<c&&u>=0?u:c;n.length&&(a=[s,o])}return a}});var PE=_((pY,EE)=>{var bE=_E();EE.exports=Pj;var wE="\0SLASH"+Math.random()+"\0",SE="\0OPEN"+Math.random()+"\0",Zm="\0CLOSE"+Math.random()+"\0",RE="\0COMMA"+Math.random()+"\0",CE="\0PERIOD"+Math.random()+"\0";function Qm(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function Dj(t){return t.split("\\\\").join(wE).split("\\{").join(SE).split("\\}").join(Zm).split("\\,").join(RE).split("\\.").join(CE)}function Ej(t){return t.split(wE).join("\\").split(SE).join("{").split(Zm).join("}").split(RE).join(",").split(CE).join(".")}function DE(t){if(!t)return[""];var e=[],r=bE("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,s=r.post,o=n.split(",");o[o.length-1]+="{"+i+"}";var a=DE(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function Pj(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),pu(Dj(t),!0).map(Ej)):[]}function Tj(t){return"{"+t+"}"}function qj(t){return/^-?0\d/.test(t)}function Oj(t,e){return t<=e}function Mj(t,e){return t>=e}function pu(t,e){var r=[],n=bE("{","}",t);if(!n)return[t];var i=n.pre,s=n.post.length?pu(n.post,!1):[""];if(/\$$/.test(n.pre))for(var o=0;o<s.length;o++){var a=i+"{"+n.body+"}"+s[o];r.push(a)}else{var u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),l=u||c,f=n.body.indexOf(",")>=0;if(!l&&!f)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+Zm+n.post,pu(t)):[t];var d;if(l)d=n.body.split(/\.\./);else if(d=DE(n.body),d.length===1&&(d=pu(d[0],!1).map(Tj),d.length===1))return s.map(function(K){return n.pre+d[0]+K});var p;if(l){var g=Qm(d[0]),b=Qm(d[1]),C=Math.max(d[0].length,d[1].length),D=d.length==3?Math.abs(Qm(d[2])):1,S=Oj,w=b<g;w&&(D*=-1,S=Mj);var O=d.some(qj);p=[];for(var j=g;S(j,b);j+=D){var z;if(c)z=String.fromCharCode(j),z==="\\"&&(z="");else if(z=String(j),O){var W=C-z.length;if(W>0){var G=new Array(W+1).join("0");j<0?z="-"+G+z.slice(1):z=G+z}}p.push(z)}}else{p=[];for(var Z=0;Z<d.length;Z++)p.push.apply(p,pu(d[Z],!1))}for(var Z=0;Z<p.length;Z++)for(var o=0;o<s.length;o++){var a=i+p[Z]+s[o];(!e||l||a)&&r.push(a)}}return r}});var Xl=_((yY,iy)=>{var an=iy.exports=(t,e,r={})=>(Yl(e),!r.nocomment&&e.charAt(0)==="#"?!1:new Yo(e,r).match(t));iy.exports=an;var ry=gE();an.sep=ry.sep;var Ln=Symbol("globstar **");an.GLOBSTAR=Ln;var xj=PE(),TE={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},ny="[^/]",ey=ny+"*?",kj="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Fj="(?:(?!(?:\\/|^)\\.).)*?",ME=t=>t.split("").reduce((e,r)=>(e[r]=!0,e),{}),qE=ME("().*{}+?[]^$\\!"),Ij=ME("[.("),OE=/\/+/;an.filter=(t,e={})=>(r,n,i)=>an(r,t,e);var ns=(t,e={})=>{let r={};return Object.keys(t).forEach(n=>r[n]=t[n]),Object.keys(e).forEach(n=>r[n]=e[n]),r};an.defaults=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return an;let e=an,r=(n,i,s)=>e(n,i,ns(t,s));return r.Minimatch=class extends e.Minimatch{constructor(i,s){super(i,ns(t,s))}},r.Minimatch.defaults=n=>e.defaults(ns(t,n)).Minimatch,r.filter=(n,i)=>e.filter(n,ns(t,i)),r.defaults=n=>e.defaults(ns(t,n)),r.makeRe=(n,i)=>e.makeRe(n,ns(t,i)),r.braceExpand=(n,i)=>e.braceExpand(n,ns(t,i)),r.match=(n,i,s)=>e.match(n,i,ns(t,s)),r};an.braceExpand=(t,e)=>xE(t,e);var xE=(t,e={})=>(Yl(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:xj(t)),Aj=1024*64,Yl=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>Aj)throw new TypeError("pattern is too long")},ty=Symbol("subparse");an.makeRe=(t,e)=>new Yo(t,e||{}).makeRe();an.match=(t,e,r={})=>{let n=new Yo(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};var Nj=t=>t.replace(/\\(.)/g,"$1"),Lj=t=>t.replace(/\\([^-\]])/g,"$1"),jj=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),$j=t=>t.replace(/[[\]\\]/g,"\\$&"),Yo=class{constructor(e,r){Yl(e),r||(r={}),this.options=r,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.make()}debug(){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();let n=this.globSet=this.braceExpand();r.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,n),n=this.globParts=n.map(i=>i.split(OE)),this.debug(this.pattern,n),n=n.map((i,s,o)=>i.map(this.parse,this)),this.debug(this.pattern,n),n=n.filter(i=>i.indexOf(!1)===-1),this.debug(this.pattern,n),this.set=n}parseNegate(){if(this.options.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,o=0,a=e.length,u=r.length;s<a&&o<u;s++,o++){this.debug("matchOne loop");var c=r[o],l=e[s];if(this.debug(r,c,l),c===!1)return!1;if(c===Ln){this.debug("GLOBSTAR",[r,c,l]);var f=s,d=o+1;if(d===u){for(this.debug("** at the end");s<a;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;f<a;){var p=e[f];if(this.debug(`
globstar while`,e,f,r,d,p),this.matchOne(e.slice(f),r.slice(d),n))return this.debug("globstar found match!",f,a,p),!0;if(p==="."||p===".."||!i.dot&&p.charAt(0)==="."){this.debug("dot detected!",e,f,r,d);break}this.debug("globstar swallow a segment, and continue"),f++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,f,r,d),f===a))}var g;if(typeof c=="string"?(g=l===c,this.debug("string match",c,l,g)):(g=l.match(c),this.debug("pattern match",c,l,g)),!g)return!1}if(s===a&&o===u)return!0;if(s===a)return n;if(o===u)return s===a-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return xE(this.pattern,this.options)}parse(e,r){Yl(e);let n=this.options;if(e==="**")if(n.noglobstar)e="*";else return Ln;if(e==="")return"";let i="",s=!1,o=!1,a=[],u=[],c,l=!1,f=-1,d=-1,p,g,b,C=e.charAt(0)===".",D=n.dot||C,S=()=>C?"":D?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",w=W=>W.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",O=()=>{if(c){switch(c){case"*":i+=ey,s=!0;break;case"?":i+=ny,s=!0;break;default:i+="\\"+c;break}this.debug("clearStateChar %j %j",c,i),c=!1}};for(let W=0,G;W<e.length&&(G=e.charAt(W));W++){if(this.debug("%s	%s %s %j",e,W,i,G),o){if(G==="/")return!1;qE[G]&&(i+="\\"),i+=G,o=!1;continue}switch(G){case"/":return!1;case"\\":if(l&&e.charAt(W+1)==="-"){i+=G;continue}O(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,W,i,G),l){this.debug("  in class"),G==="!"&&W===d+1&&(G="^"),i+=G;continue}this.debug("call clearStateChar %j",c),O(),c=G,n.noext&&O();continue;case"(":{if(l){i+="(";continue}if(!c){i+="\\(";continue}let Z={type:c,start:W-1,reStart:i.length,open:TE[c].open,close:TE[c].close};this.debug(this.pattern,"	",Z),a.push(Z),i+=Z.open,Z.start===0&&Z.type!=="!"&&(C=!0,i+=w(e.slice(W+1))),this.debug("plType %j %j",c,i),c=!1;continue}case")":{let Z=a[a.length-1];if(l||!Z){i+="\\)";continue}a.pop(),O(),s=!0,g=Z,i+=g.close,g.type==="!"&&u.push(Object.assign(g,{reEnd:i.length}));continue}case"|":{let Z=a[a.length-1];if(l||!Z){i+="\\|";continue}O(),i+="|",Z.start===0&&Z.type!=="!"&&(C=!0,i+=w(e.slice(W+1)));continue}case"[":if(O(),l){i+="\\"+G;continue}l=!0,d=W,f=i.length,i+=G;continue;case"]":if(W===d+1||!l){i+="\\"+G;continue}p=e.substring(d+1,W);try{RegExp("["+$j(Lj(p))+"]"),i+=G}catch{i=i.substring(0,f)+"(?:$.)"}s=!0,l=!1;continue;default:O(),qE[G]&&!(G==="^"&&l)&&(i+="\\"),i+=G;break}}for(l&&(p=e.slice(d+1),b=this.parse(p,ty),i=i.substring(0,f)+"\\["+b[0],s=s||b[1]),g=a.pop();g;g=a.pop()){let W;W=i.slice(g.reStart+g.open.length),this.debug("setting tail",i,g),W=W.replace(/((?:\\{2}){0,64})(\\?)\|/g,(Z,K,N)=>(N||(N="\\"),K+K+N+"|")),this.debug(`tail=%j
   %s`,W,W,g,i);let G=g.type==="*"?ey:g.type==="?"?ny:"\\"+g.type;s=!0,i=i.slice(0,g.reStart)+G+"\\("+W}O(),o&&(i+="\\\\");let j=Ij[i.charAt(0)];for(let W=u.length-1;W>-1;W--){let G=u[W],Z=i.slice(0,G.reStart),K=i.slice(G.reStart,G.reEnd-8),N=i.slice(G.reEnd),J=i.slice(G.reEnd-8,G.reEnd)+N,Q=Z.split(")").length,ge=Z.split("(").length-Q,he=N;for(let X=0;X<ge;X++)he=he.replace(/\)[+*?]?/,"");N=he;let k=N===""&&r!==ty?"(?:$|\\/)":"";i=Z+K+N+k+J}if(i!==""&&s&&(i="(?=.)"+i),j&&(i=S()+i),r===ty)return[i,s];if(n.nocase&&!s&&(s=e.toUpperCase()!==e.toLowerCase()),!s)return Nj(e);let z=n.nocase?"i":"";try{return Object.assign(new RegExp("^"+i+"$",z),{_glob:e,_src:i})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?ey:r.dot?kj:Fj,i=r.nocase?"i":"",s=e.map(o=>(o=o.map(a=>typeof a=="string"?jj(a):a===Ln?Ln:a._src).reduce((a,u)=>(a[a.length-1]===Ln&&u===Ln||a.push(u),a),[]),o.forEach((a,u)=>{a!==Ln||o[u-1]===Ln||(u===0?o.length>1?o[u+1]="(?:\\/|"+n+"\\/)?"+o[u+1]:o[u]=n:u===o.length-1?o[u-1]+="(?:\\/|"+n+")?":(o[u-1]+="(?:\\/|\\/"+n+"\\/)"+o[u+1],o[u+1]=Ln))}),o.filter(a=>a!==Ln).join("/"))).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,i)}catch{this.regexp=!1}return this.regexp}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;ry.sep!=="/"&&(e=e.split(ry.sep).join("/")),e=e.split(OE),this.debug(this.pattern,"split",e);let i=this.set;this.debug(this.pattern,"set",i);let s;for(let o=e.length-1;o>=0&&(s=e[o],!s);o--);for(let o=0;o<i.length;o++){let a=i[o],u=e;if(n.matchBase&&a.length===1&&(u=[s]),this.matchOne(u,a,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return an.defaults(e).Minimatch}};an.Minimatch=Yo});var fy=_(is=>{"use strict";Object.defineProperty(is,"__esModule",{value:!0});is.DiagnosticFeature=is.DiagnosticPullMode=is.vsdiag=void 0;var Wj=Xl(),Fe=require("vscode"),Et=ne(),Hj=gt(),sy=Le();function Jl(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var _n;(function(t){let e;(function(r){r.full="full",r.unChanged="unChanged"})(e=t.DocumentDiagnosticReportKind||(t.DocumentDiagnosticReportKind={}))})(_n||(is.vsdiag=_n={}));var Ql;(function(t){t.onType="onType",t.onSave="onSave"})(Ql||(is.DiagnosticPullMode=Ql={}));var ur;(function(t){t.active="open",t.reschedule="reschedule",t.outDated="drop"})(ur||(ur={}));var oy=class t{constructor(){this.open=new Set,this._onOpen=new Fe.EventEmitter,this._onClose=new Fe.EventEmitter,t.fillTabResources(this.open);let e=r=>{if(r.closed.length===0&&r.opened.length===0)return;let n=this.open,i=new Set;t.fillTabResources(i);let s=new Set,o=new Set(i);for(let a of n.values())i.has(a)?o.delete(a):s.add(a);if(this.open=i,s.size>0){let a=new Set;for(let u of s)a.add(Fe.Uri.parse(u));this._onClose.fire(a)}if(o.size>0){let a=new Set;for(let u of o)a.add(Fe.Uri.parse(u));this._onOpen.fire(a)}};Fe.window.tabGroups.onDidChangeTabs!==void 0?this.disposable=Fe.window.tabGroups.onDidChangeTabs(e):this.disposable={dispose:()=>{}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive(e){return e instanceof Fe.Uri?Fe.window.activeTextEditor?.document.uri===e:Fe.window.activeTextEditor?.document===e}isVisible(e){let r=e instanceof Fe.Uri?e:e.uri;return this.open.has(r.toString())}getTabResources(){let e=new Set;return t.fillTabResources(new Set,e),e}static fillTabResources(e,r){let n=e??new Set;for(let i of Fe.window.tabGroups.all)for(let s of i.tabs){let o=s.input,a;o instanceof Fe.TabInputText?a=o.uri:o instanceof Fe.TabInputTextDiff?a=o.modified:o instanceof Fe.TabInputCustom&&(a=o.uri),a!==void 0&&!n.has(a.toString())&&(n.add(a.toString()),r!==void 0&&r.add(a))}}},jt;(function(t){t[t.document=1]="document",t[t.workspace=2]="workspace"})(jt||(jt={}));var Oi;(function(t){function e(r){return r instanceof Fe.Uri?r.toString():r.uri.toString()}t.asKey=e})(Oi||(Oi={}));var ay=class{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,r,n){let i=e===jt.document?this.documentPullStates:this.workspacePullStates,[s,o,a]=r instanceof Fe.Uri?[r.toString(),r,n]:[r.uri.toString(),r.uri,r.version],u=i.get(s);return u===void 0&&(u={document:o,pulledVersion:a,resultId:void 0},i.set(s,u)),u}update(e,r,n,i){let s=e===jt.document?this.documentPullStates:this.workspacePullStates,[o,a,u,c]=r instanceof Fe.Uri?[r.toString(),r,n,i]:[r.uri.toString(),r.uri,r.version,n],l=s.get(o);l===void 0?(l={document:a,pulledVersion:u,resultId:c},s.set(o,l)):(l.pulledVersion=u,l.resultId=c)}unTrack(e,r){let n=Oi.asKey(r);(e===jt.document?this.documentPullStates:this.workspacePullStates).delete(n)}tracks(e,r){let n=Oi.asKey(r);return(e===jt.document?this.documentPullStates:this.workspacePullStates).has(n)}getResultId(e,r){let n=Oi.asKey(r);return(e===jt.document?this.documentPullStates:this.workspacePullStates).get(n)?.resultId}getAllResultIds(){let e=[];for(let[r,n]of this.workspacePullStates)this.documentPullStates.has(r)&&(n=this.documentPullStates.get(r)),n.resultId!==void 0&&e.push({uri:r,value:n.resultId});return e}},uy=class{constructor(e,r,n){this.client=e,this.tabs=r,this.options=n,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new Fe.EventEmitter,this.provider=this.createProvider(),this.diagnostics=Fe.languages.createDiagnosticCollection(n.identifier),this.openRequests=new Map,this.documentStates=new ay,this.workspaceErrorCounter=0}knows(e,r){let n=r instanceof Fe.Uri?r:r.uri;return this.documentStates.tracks(e,r)||this.openRequests.has(n.toString())}forget(e,r){this.documentStates.unTrack(e,r)}pull(e,r){if(this.isDisposed)return;let n=e instanceof Fe.Uri?e:e.uri;this.pullAsync(e).then(()=>{r&&r()},i=>{this.client.error(`Document pull failed for text document ${n.toString()}`,i,!1)})}async pullAsync(e,r){if(this.isDisposed)return;let n=e instanceof Fe.Uri,i=n?e:e.uri,s=i.toString();r=n?r:e.version;let o=this.openRequests.get(s),a=n?this.documentStates.track(jt.document,e,r):this.documentStates.track(jt.document,e);if(o===void 0){let u=new Fe.CancellationTokenSource;this.openRequests.set(s,{state:ur.active,document:e,version:r,tokenSource:u});let c,l;try{c=await this.provider.provideDiagnostics(e,a.resultId,u.token)??{kind:_n.DocumentDiagnosticReportKind.full,items:[]}}catch(f){if(f instanceof sy.LSPCancellationError&&Et.DiagnosticServerCancellationData.is(f.data)&&f.data.retriggerRequest===!1&&(l={state:ur.outDated,document:e}),l===void 0&&f instanceof Fe.CancellationError)l={state:ur.reschedule,document:e};else throw f}if(l=l??this.openRequests.get(s),l===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${s}`),this.diagnostics.delete(i);return}if(this.openRequests.delete(s),!this.tabs.isVisible(e)){this.documentStates.unTrack(jt.document,e);return}if(l.state===ur.outDated)return;c!==void 0&&(c.kind===_n.DocumentDiagnosticReportKind.full&&this.diagnostics.set(i,c.items),a.pulledVersion=r,a.resultId=c.resultId),l.state===ur.reschedule&&this.pull(e)}else o.state===ur.active?(o.tokenSource.cancel(),this.openRequests.set(s,{state:ur.reschedule,document:o.document})):o.state===ur.outDated&&this.openRequests.set(s,{state:ur.reschedule,document:o.document})}forgetDocument(e){let r=e instanceof Fe.Uri?e:e.uri,n=r.toString(),i=this.openRequests.get(n);this.options.workspaceDiagnostics?i!==void 0?this.openRequests.set(n,{state:ur.reschedule,document:e}):this.pull(e,()=>{this.forget(jt.document,e)}):(i!==void 0&&(i.state===ur.active&&i.tokenSource.cancel(),this.openRequests.set(n,{state:ur.outDated,document:e})),this.diagnostics.delete(r),this.forget(jt.document,e))}pullWorkspace(){this.isDisposed||this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=(0,Et.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3)},e=>{!(e instanceof sy.LSPCancellationError)&&!Et.DiagnosticServerCancellationData.is(e.data)&&(this.client.error("Workspace diagnostic pull failed.",e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=(0,Et.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;this.workspaceCancellation!==void 0&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new Fe.CancellationTokenSource;let e=this.documentStates.getAllResultIds().map(r=>({uri:this.client.protocol2CodeConverter.asUri(r.uri),value:r.value}));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,r=>{if(!(!r||this.isDisposed))for(let n of r.items)n.kind===_n.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(jt.document,n.uri)||this.diagnostics.set(n.uri,n.items)),this.documentStates.update(jt.workspace,n.uri,n.version??void 0,n.resultId)})}createProvider(){let e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(r,n,i)=>{let s=(a,u,c)=>{let l={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(a instanceof Fe.Uri?a:a.uri)},previousResultId:u};return this.isDisposed===!0||!this.client.isRunning()?{kind:_n.DocumentDiagnosticReportKind.full,items:[]}:this.client.sendRequest(Et.DocumentDiagnosticRequest.type,l,c).then(async f=>f==null||this.isDisposed||c.isCancellationRequested?{kind:_n.DocumentDiagnosticReportKind.full,items:[]}:f.kind===Et.DocumentDiagnosticReportKind.Full?{kind:_n.DocumentDiagnosticReportKind.full,resultId:f.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(f.items,c)}:{kind:_n.DocumentDiagnosticReportKind.unChanged,resultId:f.resultId},f=>this.client.handleFailedRequest(Et.DocumentDiagnosticRequest.type,c,f,{kind:_n.DocumentDiagnosticReportKind.full,items:[]}))},o=this.client.middleware;return o.provideDiagnostics?o.provideDiagnostics(r,n,i,s):s(r,n,i)}};return this.options.workspaceDiagnostics&&(e.provideWorkspaceDiagnostics=(r,n,i)=>{let s=async c=>c.kind===Et.DocumentDiagnosticReportKind.Full?{kind:_n.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(c.uri),resultId:c.resultId,version:c.version,items:await this.client.protocol2CodeConverter.asDiagnostics(c.items,n)}:{kind:_n.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(c.uri),resultId:c.resultId,version:c.version},o=c=>{let l=[];for(let f of c)l.push({uri:this.client.code2ProtocolConverter.asUri(f.uri),value:f.value});return l},a=(c,l)=>{let f=(0,Hj.generateUuid)(),d=this.client.onProgress(Et.WorkspaceDiagnosticRequest.partialResult,f,async g=>{if(g==null){i(null);return}let b={items:[]};for(let C of g.items)try{b.items.push(await s(C))}catch(D){this.client.error("Converting workspace diagnostics failed.",D)}i(b)}),p={identifier:this.options.identifier,previousResultIds:o(c),partialResultToken:f};return this.isDisposed===!0||!this.client.isRunning()?{items:[]}:this.client.sendRequest(Et.WorkspaceDiagnosticRequest.type,p,l).then(async g=>{if(l.isCancellationRequested)return{items:[]};let b={items:[]};for(let C of g.items)b.items.push(await s(C));return d.dispose(),i(b),{items:[]}},g=>(d.dispose(),this.client.handleFailedRequest(Et.DocumentDiagnosticRequest.type,l,g,{items:[]})))},u=this.client.middleware;return u.provideWorkspaceDiagnostics?u.provideWorkspaceDiagnostics(r,n,i,a):a(r,n,i)}),e}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(let[e,r]of this.openRequests)r.state===ur.active&&r.tokenSource.cancel(),this.openRequests.set(e,{state:ur.outDated,document:r.document});this.diagnostics.dispose()}},cy=class{constructor(e){this.diagnosticRequestor=e,this.documents=new Et.LinkedMap,this.isDisposed=!1}add(e){if(this.isDisposed===!0)return;let r=Oi.asKey(e);this.documents.has(r)||(this.documents.set(r,e,Et.Touch.Last),this.trigger())}remove(e){let r=Oi.asKey(e);this.documents.delete(r),this.documents.size===0?this.stop():r===this.endDocumentKey()&&(this.endDocument=this.documents.last)}trigger(){if(this.isDisposed!==!0){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,Et.RAL)().timer.setInterval(()=>{let e=this.documents.first;if(e!==void 0){let r=Oi.asKey(e);this.diagnosticRequestor.pull(e),this.documents.set(r,e,Et.Touch.Last),r===this.endDocumentKey()&&this.stop()}},200)}}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}endDocumentKey(){return this.endDocument!==void 0?Oi.asKey(this.endDocument):void 0}},ly=class{constructor(e,r,n){let i=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},s=e.protocol2CodeConverter.asDocumentSelector(n.documentSelector),o=[],a=g=>{let b=n.documentSelector;if(i.match!==void 0)return i.match(b,g);for(let C of b)if(Et.TextDocumentFilter.is(C)){if(typeof C=="string"||C.language!==void 0&&C.language!=="*"||C.scheme!==void 0&&C.scheme!=="*"&&C.scheme!==g.scheme)return!1;if(C.pattern!==void 0){let D=new Wj.Minimatch(C.pattern,{noext:!0});if(!D.makeRe()||!D.match(g.fsPath))return!1}}return!0},u=g=>g instanceof Fe.Uri?a(g):Fe.languages.match(s,g)>0&&r.isVisible(g),c=g=>g instanceof Fe.Uri?this.activeTextDocument?.uri.toString()===g.toString():this.activeTextDocument===g;this.diagnosticRequestor=new uy(e,r,n),this.backgroundScheduler=new cy(this.diagnosticRequestor);let l=g=>{!u(g)||!n.interFileDependencies||c(g)||this.backgroundScheduler.add(g)};this.activeTextDocument=Fe.window.activeTextEditor?.document,Fe.window.onDidChangeActiveTextEditor(g=>{let b=this.activeTextDocument;this.activeTextDocument=g?.document,b!==void 0&&l(b),this.activeTextDocument!==void 0&&this.backgroundScheduler.remove(this.activeTextDocument)});let f=e.getFeature(Et.DidOpenTextDocumentNotification.method);o.push(f.onNotificationSent(g=>{let b=g.textDocument;this.diagnosticRequestor.knows(jt.document,b)||u(b)&&this.diagnosticRequestor.pull(b,()=>{l(b)})})),o.push(r.onOpen(g=>{for(let b of g){if(this.diagnosticRequestor.knows(jt.document,b))continue;let C=b.toString(),D;for(let S of Fe.workspace.textDocuments)if(C===S.uri.toString()){D=S;break}D!==void 0&&u(D)&&this.diagnosticRequestor.pull(D,()=>{l(D)})}}));let d=new Set;for(let g of Fe.workspace.textDocuments)u(g)&&(this.diagnosticRequestor.pull(g,()=>{l(g)}),d.add(g.uri.toString()));if(i.onTabs===!0)for(let g of r.getTabResources())!d.has(g.toString())&&u(g)&&this.diagnosticRequestor.pull(g,()=>{l(g)});if(i.onChange===!0){let g=e.getFeature(Et.DidChangeTextDocumentNotification.method);o.push(g.onNotificationSent(async b=>{let C=b.textDocument;(i.filter===void 0||!i.filter(C,Ql.onType))&&this.diagnosticRequestor.knows(jt.document,C)&&this.diagnosticRequestor.pull(C,()=>{this.backgroundScheduler.trigger()})}))}if(i.onSave===!0){let g=e.getFeature(Et.DidSaveTextDocumentNotification.method);o.push(g.onNotificationSent(b=>{let C=b.textDocument;(i.filter===void 0||!i.filter(C,Ql.onSave))&&this.diagnosticRequestor.knows(jt.document,C)&&this.diagnosticRequestor.pull(b.textDocument,()=>{this.backgroundScheduler.trigger()})}))}let p=e.getFeature(Et.DidCloseTextDocumentNotification.method);o.push(p.onNotificationSent(g=>{this.cleanUpDocument(g.textDocument)})),r.onClose(g=>{for(let b of g)this.cleanUpDocument(b)}),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(let g of Fe.workspace.textDocuments)u(g)&&this.diagnosticRequestor.pull(g)}),n.workspaceDiagnostics===!0&&n.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14"&&this.diagnosticRequestor.pullWorkspace(),this.disposable=Fe.Disposable.from(...o,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument(e){this.diagnosticRequestor.knows(jt.document,e)&&(this.diagnosticRequestor.forgetDocument(e),this.backgroundScheduler.remove(e))}},dy=class extends sy.TextDocumentLanguageFeature{constructor(e){super(e,Et.DocumentDiagnosticRequest.type)}fillClientCapabilities(e){let r=Jl(Jl(e,"textDocument"),"diagnostic");r.dynamicRegistration=!0,r.relatedDocumentSupport=!1,Jl(Jl(e,"workspace"),"diagnostics").refreshSupport=!0}initialize(e,r){this._client.onRequest(Et.DiagnosticRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeDiagnosticsEmitter.fire()});let[i,s]=this.getRegistration(r,e.diagnosticProvider);!i||!s||this.register({id:i,registerOptions:s})}clear(){this.tabs!==void 0&&(this.tabs.dispose(),this.tabs=void 0),super.clear()}registerLanguageProvider(e){this.tabs===void 0&&(this.tabs=new oy);let r=new ly(this._client,this.tabs,e);return[r.disposable,r]}};is.DiagnosticFeature=dy});var IE=_(rd=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0});rd.NotebookDocumentSyncFeature=void 0;var cr=require("vscode"),Uj=Xl(),Mi=ne(),zj=gt(),kE=gn();function FE(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Xo;(function(t){let e;(function(r){function n(d,p){return{version:d.version,uri:p.asUri(d.uri)}}r.asVersionedNotebookDocumentIdentifier=n;function i(d,p,g){let b=Mi.NotebookDocument.create(g.asUri(d.uri),d.notebookType,d.version,s(p,g));return Object.keys(d.metadata).length>0&&(b.metadata=o(d.metadata)),b}r.asNotebookDocument=i;function s(d,p){return d.map(g=>a(g,p))}r.asNotebookCells=s;function o(d){return c(new Set,d)}r.asMetadata=o;function a(d,p){let g=Mi.NotebookCell.create(u(d.kind),p.asUri(d.document.uri));return Object.keys(d.metadata).length>0&&(g.metadata=o(d.metadata)),d.executionSummary!==void 0&&kE.number(d.executionSummary.executionOrder)&&kE.boolean(d.executionSummary.success)&&(g.executionSummary={executionOrder:d.executionSummary.executionOrder,success:d.executionSummary.success}),g}r.asNotebookCell=a;function u(d){switch(d){case cr.NotebookCellKind.Markup:return Mi.NotebookCellKind.Markup;case cr.NotebookCellKind.Code:return Mi.NotebookCellKind.Code}}function c(d,p){if(d.has(p))throw new Error("Can't deep copy cyclic structures.");if(Array.isArray(p)){let g=[];for(let b of p)if(b!==null&&typeof b=="object"||Array.isArray(b))g.push(c(d,b));else{if(b instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");g.push(b)}return g}else{let g=Object.keys(p),b=Object.create(null);for(let C of g){let D=p[C];if(D!==null&&typeof D=="object"||Array.isArray(D))b[C]=c(d,D);else{if(D instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");b[C]=D}}return b}}function l(d,p){let g=p.asChangeTextDocumentParams(d,d.document.uri,d.document.version);return{document:g.textDocument,changes:g.contentChanges}}r.asTextContentChange=l;function f(d,p){let g=Object.create(null);if(d.metadata&&(g.metadata=t.c2p.asMetadata(d.metadata)),d.cells!==void 0){let b=Object.create(null),C=d.cells;C.structure&&(b.structure={array:{start:C.structure.array.start,deleteCount:C.structure.array.deleteCount,cells:C.structure.array.cells!==void 0?C.structure.array.cells.map(D=>t.c2p.asNotebookCell(D,p)):void 0},didOpen:C.structure.didOpen!==void 0?C.structure.didOpen.map(D=>p.asOpenTextDocumentParams(D.document).textDocument):void 0,didClose:C.structure.didClose!==void 0?C.structure.didClose.map(D=>p.asCloseTextDocumentParams(D.document).textDocument):void 0}),C.data!==void 0&&(b.data=C.data.map(D=>t.c2p.asNotebookCell(D,p))),C.textContent!==void 0&&(b.textContent=C.textContent.map(D=>t.c2p.asTextContentChange(D,p))),Object.keys(b).length>0&&(g.cells=b)}return g}r.asNotebookDocumentChangeEvent=f})(e=t.c2p||(t.c2p={}))})(Xo||(Xo={}));var hy;(function(t){function e(a,u,c){let l=a.length,f=u.length,d=0;for(;d<f&&d<l&&r(a[d],u[d],c);)d++;if(d<f&&d<l){let p=l-1,g=f-1;for(;p>=0&&g>=0&&r(a[p],u[g],c);)p--,g--;let b=p+1-d,C=d===g+1?void 0:u.slice(d,g+1);return C!==void 0?{start:d,deleteCount:b,cells:C}:{start:d,deleteCount:b}}else return d<f?{start:d,deleteCount:0,cells:u.slice(d)}:d<l?{start:d,deleteCount:l-d}:void 0}t.computeDiff=e;function r(a,u,c=!0){return a.kind!==u.kind||a.document.uri.toString()!==u.document.uri.toString()||a.document.languageId!==u.document.languageId||!n(a.executionSummary,u.executionSummary)?!1:!c||c&&s(a.metadata,u.metadata)}function n(a,u){return a===u?!0:a===void 0||u===void 0?!1:a.executionOrder===u.executionOrder&&a.success===u.success&&i(a.timing,u.timing)}function i(a,u){return a===u?!0:a===void 0||u===void 0?!1:a.startTime===u.startTime&&a.endTime===u.endTime}function s(a,u){if(a===u)return!0;if(a==null||u===null||u===void 0||typeof a!=typeof u||typeof a!="object")return!1;let c=Array.isArray(a),l=Array.isArray(u);if(c!==l)return!1;if(c&&l){if(a.length!==u.length)return!1;for(let f=0;f<a.length;f++)if(!s(a[f],u[f]))return!1}if(o(a)&&o(u)){let f=Object.keys(a),d=Object.keys(u);if(f.length!==d.length||(f.sort(),d.sort(),!s(f,d)))return!1;for(let p=0;p<f.length;p++){let g=f[p];if(!s(a[g],u[g]))return!1}return!0}return!1}function o(a){return a!==null&&typeof a=="object"}t.isObjectLiteral=o})(hy||(hy={}));var gy;(function(t){function e(r,n){if(typeof r=="string")return r==="*"||n.notebookType===r;if(r.notebookType!==void 0&&r.notebookType!=="*"&&n.notebookType!==r.notebookType)return!1;let i=n.uri;if(r.scheme!==void 0&&r.scheme!=="*"&&i.scheme!==r.scheme)return!1;if(r.pattern!==void 0){let s=new Uj.Minimatch(r.pattern,{noext:!0});if(!s.makeRe()||!s.match(i.fsPath))return!1}return!0}t.matchNotebook=e})(gy||(gy={}));var Zl;(function(t){function e(n){let i=n.notebookSelector,s=[];for(let o of i){let a=(typeof o.notebook=="string"?o.notebook:o.notebook?.notebookType)??"*",u=typeof o.notebook=="string"?void 0:o.notebook?.scheme,c=typeof o.notebook=="string"?void 0:o.notebook?.pattern;if(o.cells!==void 0)for(let l of o.cells)s.push(r(a,u,c,l.language));else s.push(r(a,u,c,void 0))}return s}t.asDocumentSelector=e;function r(n,i,s,o){return i===void 0&&s===void 0?{notebook:n,language:o}:{notebook:{notebookType:n,scheme:i,pattern:s},language:o}}})(Zl||(Zl={}));var ed;(function(t){function e(r){return{cells:r,uris:new Set(r.map(n=>n.document.uri.toString()))}}t.create=e})(ed||(ed={}));var Jo=class{constructor(e,r){this.client=e,this.options=r,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=e.protocol2CodeConverter.asDocumentSelector(Zl.asDocumentSelector(r)),cr.workspace.onDidOpenNotebookDocument(n=>{this.notebookDidOpen.add(n.uri.toString()),this.didOpen(n)},void 0,this.disposables);for(let n of cr.workspace.notebookDocuments)this.notebookDidOpen.add(n.uri.toString()),this.didOpen(n);cr.workspace.onDidChangeNotebookDocument(n=>this.didChangeNotebookDocument(n),void 0,this.disposables),this.options.save===!0&&cr.workspace.onDidSaveNotebookDocument(n=>this.didSave(n),void 0,this.disposables),cr.workspace.onDidCloseNotebookDocument(n=>{this.didClose(n),this.notebookDidOpen.delete(n.uri.toString())},void 0,this.disposables)}getState(){for(let e of cr.workspace.notebookDocuments)if(this.getMatchingCells(e)!==void 0)return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(e){return cr.languages.match(this.selector,e)>0}didOpenNotebookCellTextDocument(e,r){if(cr.languages.match(this.selector,r.document)===0||!this.notebookDidOpen.has(e.uri.toString()))return;let n=this.notebookSyncInfo.get(e.uri.toString()),i=this.cellMatches(e,r);if(n!==void 0){let s=n.uris.has(r.document.uri.toString());if(i&&s||!i&&!s)return;if(i){let o=this.getMatchingCells(e);if(o!==void 0){let a=this.asNotebookDocumentChangeEvent(e,void 0,n,o);a!==void 0&&this.doSendChange(a,o).catch(()=>{})}}}else i&&this.doSendOpen(e,[r]).catch(()=>{})}didChangeNotebookCellTextDocument(e,r){cr.languages.match(this.selector,r.document)!==0&&this.doSendChange({notebook:e,cells:{textContent:[r]}},void 0).catch(()=>{})}didCloseNotebookCellTextDocument(e,r){let n=this.notebookSyncInfo.get(e.uri.toString());if(n===void 0)return;let i=r.document.uri,s=n.cells.findIndex(o=>o.document.uri.toString()===i.toString());if(s!==-1)if(s===0&&n.cells.length===1)this.doSendClose(e,n.cells).catch(()=>{});else{let o=n.cells.slice(),a=o.splice(s,1);this.doSendChange({notebook:e,cells:{structure:{array:{start:s,deleteCount:1},didClose:a}}},o).catch(()=>{})}}dispose(){for(let e of this.disposables)e.dispose()}didOpen(e,r=this.getMatchingCells(e),n=this.notebookSyncInfo.get(e.uri.toString())){if(n!==void 0)if(r!==void 0){let i=this.asNotebookDocumentChangeEvent(e,void 0,n,r);i!==void 0&&this.doSendChange(i,r).catch(()=>{})}else this.doSendClose(e,[]).catch(()=>{});else{if(r===void 0)return;this.doSendOpen(e,r).catch(()=>{})}}didChangeNotebookDocument(e){let r=e.notebook,n=this.notebookSyncInfo.get(r.uri.toString());if(n===void 0){if(e.contentChanges.length===0)return;let i=this.getMatchingCells(r);if(i===void 0)return;this.didOpen(r,i,n)}else{let i=this.getMatchingCells(r);if(i===void 0){this.didClose(r,n);return}let s=this.asNotebookDocumentChangeEvent(e.notebook,e,n,i);s!==void 0&&this.doSendChange(s,i).catch(()=>{})}}didSave(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&&this.doSendSave(e).catch(()=>{})}didClose(e,r=this.notebookSyncInfo.get(e.uri.toString())){if(r===void 0)return;let n=e.getCells().filter(i=>r.uris.has(i.document.uri.toString()));this.doSendClose(e,n).catch(()=>{})}async sendDidOpenNotebookDocument(e){let r=this.getMatchingCells(e);if(r!==void 0)return this.doSendOpen(e,r)}async doSendOpen(e,r){let n=async(s,o)=>{let a=Xo.c2p.asNotebookDocument(s,o,this.client.code2ProtocolConverter),u=o.map(c=>this.client.code2ProtocolConverter.asTextDocumentItem(c.document));try{await this.client.sendNotification(Mi.DidOpenNotebookDocumentNotification.type,{notebookDocument:a,cellTextDocuments:u})}catch(c){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",c),c}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.set(e.uri.toString(),ed.create(r)),i?.didOpen!==void 0?i.didOpen(e,r,n):n(e,r)}async sendDidChangeNotebookDocument(e){return this.doSendChange(e,void 0)}async doSendChange(e,r=this.getMatchingCells(e.notebook)){let n=async s=>{try{await this.client.sendNotification(Mi.DidChangeNotebookDocumentNotification.type,{notebookDocument:Xo.c2p.asVersionedNotebookDocumentIdentifier(s.notebook,this.client.code2ProtocolConverter),change:Xo.c2p.asNotebookDocumentChangeEvent(s,this.client.code2ProtocolConverter)})}catch(o){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",o),o}},i=this.client.middleware?.notebooks;return e.cells?.structure!==void 0&&this.notebookSyncInfo.set(e.notebook.uri.toString(),ed.create(r??[])),i?.didChange!==void 0?i?.didChange(e,n):n(e)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){let r=async i=>{try{await this.client.sendNotification(Mi.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(i.uri)}})}catch(s){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",s),s}},n=this.client.middleware?.notebooks;return n?.didSave!==void 0?n.didSave(e,r):r(e)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,r){let n=async(s,o)=>{try{await this.client.sendNotification(Mi.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(s.uri)},cellTextDocuments:o.map(a=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(a.document))})}catch(a){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",a),a}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.delete(e.uri.toString()),i?.didClose!==void 0?i.didClose(e,r,n):n(e,r)}asNotebookDocumentChangeEvent(e,r,n,i){if(r!==void 0&&r.notebook!==e)throw new Error("Notebook must be identical");let s={notebook:e};r?.metadata!==void 0&&(s.metadata=Xo.c2p.asMetadata(r.metadata));let o;if(r?.cellChanges!==void 0&&r.cellChanges.length>0){let a=[];o=new Set(i.map(u=>u.document.uri.toString()));for(let u of r.cellChanges)o.has(u.cell.document.uri.toString())&&(u.executionSummary!==void 0||u.metadata!==void 0)&&a.push(u.cell);a.length>0&&(s.cells=s.cells??{},s.cells.data=a)}if((r?.contentChanges!==void 0&&r.contentChanges.length>0||r===void 0)&&n!==void 0&&i!==void 0){let a=n.cells,u=i,c=hy.computeDiff(a,u,!1),l,f;if(c!==void 0){l=c.cells===void 0?new Map:new Map(c.cells.map(g=>[g.document.uri.toString(),g])),f=c.deleteCount===0?new Map:new Map(a.slice(c.start,c.start+c.deleteCount).map(g=>[g.document.uri.toString(),g]));for(let g of Array.from(f.keys()))l.has(g)&&(f.delete(g),l.delete(g));s.cells=s.cells??{};let d=[],p=[];if(l.size>0||f.size>0){for(let g of l.values())d.push(g);for(let g of f.values())p.push(g)}s.cells.structure={array:c,didOpen:d,didClose:p}}}return Object.keys(s).length>1?s:void 0}getMatchingCells(e,r=e.getCells()){if(this.options.notebookSelector!==void 0){for(let n of this.options.notebookSelector)if(n.notebook===void 0||gy.matchNotebook(n.notebook,e)){let i=this.filterCells(e,r,n.cells);return i.length===0?void 0:i}}}cellMatches(e,r){let n=this.getMatchingCells(e,[r]);return n!==void 0&&n[0]===r}filterCells(e,r,n){let i=n!==void 0?r.filter(s=>{let o=s.document.languageId;return n.some(a=>a.language==="*"||o===a.language)}):r;return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells=="function"?this.client.clientOptions.notebookDocumentOptions.filterCells(e,i):i}},td=class t{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=Mi.NotebookDocumentSyncRegistrationType.type,cr.workspace.onDidOpenTextDocument(r=>{if(r.uri.scheme!==t.CellScheme)return;let[n,i]=this.findNotebookDocumentAndCell(r);if(!(n===void 0||i===void 0))for(let s of this.registrations.values())s instanceof Jo&&s.didOpenNotebookCellTextDocument(n,i)}),cr.workspace.onDidChangeTextDocument(r=>{if(r.contentChanges.length===0)return;let n=r.document;if(n.uri.scheme!==t.CellScheme)return;let[i]=this.findNotebookDocumentAndCell(n);if(i!==void 0)for(let s of this.registrations.values())s instanceof Jo&&s.didChangeNotebookCellTextDocument(i,r)}),cr.workspace.onDidCloseTextDocument(r=>{if(r.uri.scheme!==t.CellScheme)return;let[n,i]=this.findNotebookDocumentAndCell(r);if(!(n===void 0||i===void 0))for(let s of this.registrations.values())s instanceof Jo&&s.didCloseNotebookCellTextDocument(n,i)})}getState(){if(this.registrations.size===0)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(let e of this.registrations.values()){let r=e.getState();if(r.kind==="document"&&r.registrations===!0&&r.matches===!0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(e){let r=FE(FE(e,"notebookDocument"),"synchronization");r.dynamicRegistration=!0,r.executionSummarySupport=!0}preInitialize(e){let r=e.notebookDocumentSync;r!==void 0&&(this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(Zl.asDocumentSelector(r)))}initialize(e){let r=e.notebookDocumentSync;if(r===void 0)return;let n=r.id??zj.generateUuid();this.register({id:n,registerOptions:r})}register(e){let r=new Jo(this.client,e.registerOptions);this.registrations.set(e.id,r)}unregister(e){let r=this.registrations.get(e);r&&r.dispose()}clear(){for(let e of this.registrations.values())e.dispose();this.registrations.clear()}handles(e){if(e.uri.scheme!==t.CellScheme)return!1;if(this.dedicatedChannel!==void 0&&cr.languages.match(this.dedicatedChannel,e)>0)return!0;for(let r of this.registrations.values())if(r.handles(e))return!0;return!1}getProvider(e){for(let r of this.registrations.values())if(r.handles(e.document))return r}findNotebookDocumentAndCell(e){let r=e.uri.toString();for(let n of cr.workspace.notebookDocuments)for(let i of n.getCells())if(i.document.uri.toString()===r)return[n,i];return[void 0,void 0]}};rd.NotebookDocumentSyncFeature=td;td.CellScheme="vscode-notebook-cell"});var NE=_(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.SyncConfigurationFeature=ss.toJSONObject=ss.ConfigurationFeature=void 0;var Qo=require("vscode"),mu=ne(),Kj=gn(),Bj=gt(),AE=Le(),py=class{constructor(e){this._client=e}getState(){return{kind:"static"}}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(mu.ConfigurationRequest.type,(r,n)=>{let i=o=>{let a=[];for(let u of o.items){let c=u.scopeUri!==void 0&&u.scopeUri!==null?this._client.protocol2CodeConverter.asUri(u.scopeUri):void 0;a.push(this.getConfiguration(c,u.section!==null?u.section:void 0))}return a},s=e.middleware.workspace;return s&&s.configuration?s.configuration(r,n,i):i(r,n)})}getConfiguration(e,r){let n=null;if(r){let i=r.lastIndexOf(".");if(i===-1)n=Xs(Qo.workspace.getConfiguration(void 0,e).get(r));else{let s=Qo.workspace.getConfiguration(r.substr(0,i),e);s&&(n=Xs(s.get(r.substr(i+1))))}}else{let i=Qo.workspace.getConfiguration(void 0,e);n={};for(let s of Object.keys(i))i.has(s)&&(n[s]=Xs(i.get(s)))}return n===void 0&&(n=null),n}clear(){}};ss.ConfigurationFeature=py;function Xs(t){if(t){if(Array.isArray(t))return t.map(Xs);if(typeof t=="object"){let e=Object.create(null);for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=Xs(t[r]));return e}}return t}ss.toJSONObject=Xs;var my=class{constructor(e){this._client=e,this.isCleared=!1,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return mu.DidChangeConfigurationNotification.type}fillClientCapabilities(e){(0,AE.ensure)((0,AE.ensure)(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){this.isCleared=!1;let e=this._client.clientOptions.synchronize?.configurationSection;e!==void 0&&this.register({id:Bj.generateUuid(),registerOptions:{section:e}})}register(e){let r=Qo.workspace.onDidChangeConfiguration(n=>{this.onDidChangeConfiguration(e.registerOptions.section,n)});this._listeners.set(e.id,r),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let r=this._listeners.get(e);r&&(this._listeners.delete(e),r.dispose())}clear(){for(let e of this._listeners.values())e.dispose();this._listeners.clear(),this.isCleared=!0}onDidChangeConfiguration(e,r){if(this.isCleared)return;let n;if(Kj.string(e)?n=[e]:n=e,n!==void 0&&r!==void 0&&!n.some(a=>r.affectsConfiguration(a)))return;let i=async o=>o===void 0?this._client.sendNotification(mu.DidChangeConfigurationNotification.type,{settings:null}):this._client.sendNotification(mu.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(o)}),s=this._client.middleware.workspace?.didChangeConfiguration;(s?s(n,i):i(n)).catch(o=>{this._client.error(`Sending notification ${mu.DidChangeConfigurationNotification.type.method} failed`,o)})}extractSettingsInformation(e){function r(s,o){let a=s;for(let u=0;u<o.length-1;u++){let c=a[o[u]];c||(c=Object.create(null),a[o[u]]=c),a=c}return a}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let s=0;s<e.length;s++){let o=e[s],a=o.indexOf("."),u=null;if(a>=0?u=Qo.workspace.getConfiguration(o.substr(0,a),n).get(o.substr(a+1)):u=Qo.workspace.getConfiguration(void 0,n).get(o),u){let c=e[s].split(".");r(i,c)[c[c.length-1]]=Xs(u)}}return i}};ss.SyncConfigurationFeature=my});var LE=_($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.DidSaveTextDocumentFeature=$r.WillSaveWaitUntilFeature=$r.WillSaveFeature=$r.DidChangeTextDocumentFeature=$r.DidCloseTextDocumentFeature=$r.DidOpenTextDocumentFeature=void 0;var un=require("vscode"),it=ne(),_t=Le(),Zo=gt(),yy=class extends _t.TextDocumentEventFeature{constructor(e,r){super(e,un.workspace.onDidOpenTextDocument,it.DidOpenTextDocumentNotification.type,()=>e.middleware.didOpen,n=>e.code2ProtocolConverter.asOpenTextDocumentParams(n),n=>n,_t.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=r}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){(0,_t.ensure)((0,_t.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.openClose&&this.register({id:Zo.generateUuid(),registerOptions:{documentSelector:r}})}get registrationType(){return it.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let r=this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector);un.workspace.textDocuments.forEach(n=>{let i=n.uri.toString();if(!this._syncedDocuments.has(i)&&un.languages.match(r,n)>0&&!this._client.hasDedicatedTextSynchronizationFeature(n)){let s=this._client.middleware,o=a=>this._client.sendNotification(this._type,this._createParams(a));(s.didOpen?s.didOpen(n,o):o(n)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)}),this._syncedDocuments.set(i,n)}})}getTextDocument(e){return e}notificationSent(e,r,n){this._syncedDocuments.set(e.uri.toString(),e),super.notificationSent(e,r,n)}};$r.DidOpenTextDocumentFeature=yy;var vy=class extends _t.TextDocumentEventFeature{constructor(e,r,n){super(e,un.workspace.onDidCloseTextDocument,it.DidCloseTextDocumentNotification.type,()=>e.middleware.didClose,i=>e.code2ProtocolConverter.asCloseTextDocumentParams(i),i=>i,_t.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=r,this._pendingTextDocumentChanges=n}get registrationType(){return it.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){(0,_t.ensure)((0,_t.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.openClose&&this.register({id:Zo.generateUuid(),registerOptions:{documentSelector:r}})}async callback(e){await super.callback(e),this._pendingTextDocumentChanges.delete(e.uri.toString())}getTextDocument(e){return e}notificationSent(e,r,n){this._syncedDocuments.delete(e.uri.toString()),super.notificationSent(e,r,n)}unregister(e){let r=this._selectors.get(e);super.unregister(e);let n=this._selectors.values();this._syncedDocuments.forEach(i=>{if(un.languages.match(r,i)>0&&!this._selectorFilter(n,i)&&!this._client.hasDedicatedTextSynchronizationFeature(i)){let s=this._client.middleware,o=a=>this._client.sendNotification(this._type,this._createParams(a));this._syncedDocuments.delete(i.uri.toString()),(s.didClose?s.didClose(i,o):o(i)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)})}})}};$r.DidCloseTextDocumentFeature=vy;var _y=class extends _t.DynamicDocumentFeature{constructor(e,r){super(e),this._changeData=new Map,this._onNotificationSent=new un.EventEmitter,this._onPendingChangeAdded=new un.EventEmitter,this._pendingTextDocumentChanges=r,this._syncKind=it.TextDocumentSyncKind.None}get onNotificationSent(){return this._onNotificationSent.event}get onPendingChangeAdded(){return this._onPendingChangeAdded.event}get syncKind(){return this._syncKind}get registrationType(){return it.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){(0,_t.ensure)((0,_t.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.change!==void 0&&n.change!==it.TextDocumentSyncKind.None&&this.register({id:Zo.generateUuid(),registerOptions:Object.assign({},{documentSelector:r},{syncKind:n.change})})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=un.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{syncKind:e.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)}),this.updateSyncKind(e.registerOptions.syncKind))}*getDocumentSelectors(){for(let e of this._changeData.values())yield e.documentSelector}async callback(e){if(e.contentChanges.length===0)return;let r=e.document.uri,n=e.document.version,i=[];for(let s of this._changeData.values())if(un.languages.match(s.documentSelector,e.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let o=this._client.middleware;if(s.syncKind===it.TextDocumentSyncKind.Incremental){let a=async u=>{let c=this._client.code2ProtocolConverter.asChangeTextDocumentParams(u,r,n);await this._client.sendNotification(it.DidChangeTextDocumentNotification.type,c),this.notificationSent(u.document,it.DidChangeTextDocumentNotification.type,c)};i.push(o.didChange?o.didChange(e,u=>a(u)):a(e))}else if(s.syncKind===it.TextDocumentSyncKind.Full){let a=async u=>{let c=u.document.uri.toString();this._pendingTextDocumentChanges.set(c,u.document),this._onPendingChangeAdded.fire()};i.push(o.didChange?o.didChange(e,u=>a(u)):a(e))}}return Promise.all(i).then(void 0,s=>{throw this._client.error(`Sending document notification ${it.DidChangeTextDocumentNotification.type.method} failed`,s),s})}notificationSent(e,r,n){this._onNotificationSent.fire({textDocument:e,type:r,params:n})}unregister(e){if(this._changeData.delete(e),this._changeData.size===0)this._listener&&(this._listener.dispose(),this._listener=void 0),this._syncKind=it.TextDocumentSyncKind.None;else{this._syncKind=it.TextDocumentSyncKind.None;for(let r of this._changeData.values())if(this.updateSyncKind(r.syncKind),this._syncKind===it.TextDocumentSyncKind.Full)break}}clear(){this._pendingTextDocumentChanges.clear(),this._changeData.clear(),this._syncKind=it.TextDocumentSyncKind.None,this._listener&&(this._listener.dispose(),this._listener=void 0)}getPendingDocumentChanges(e){if(this._pendingTextDocumentChanges.size===0)return[];let r;if(e.size===0)r=Array.from(this._pendingTextDocumentChanges.values()),this._pendingTextDocumentChanges.clear();else{r=[];for(let n of this._pendingTextDocumentChanges)e.has(n[0])||(r.push(n[1]),this._pendingTextDocumentChanges.delete(n[0]))}return r}getProvider(e){for(let r of this._changeData.values())if(un.languages.match(r.documentSelector,e)>0)return{send:n=>this.callback(n)}}updateSyncKind(e){if(this._syncKind!==it.TextDocumentSyncKind.Full)switch(e){case it.TextDocumentSyncKind.Full:this._syncKind=e;break;case it.TextDocumentSyncKind.Incremental:this._syncKind===it.TextDocumentSyncKind.None&&(this._syncKind=it.TextDocumentSyncKind.Incremental);break}}};$r.DidChangeTextDocumentFeature=_y;var by=class extends _t.TextDocumentEventFeature{constructor(e){super(e,un.workspace.onWillSaveTextDocument,it.WillSaveTextDocumentNotification.type,()=>e.middleware.willSave,r=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(r),r=>r.document,(r,n)=>_t.TextDocumentEventFeature.textDocumentFilter(r,n.document))}get registrationType(){return it.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let r=(0,_t.ensure)((0,_t.ensure)(e,"textDocument"),"synchronization");r.willSave=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.willSave&&this.register({id:Zo.generateUuid(),registerOptions:{documentSelector:r}})}getTextDocument(e){return e.document}};$r.WillSaveFeature=by;var wy=class extends _t.DynamicDocumentFeature{constructor(e){super(e),this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return it.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let r=(0,_t.ensure)((0,_t.ensure)(e,"textDocument"),"synchronization");r.willSaveWaitUntil=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.willSaveWaitUntil&&this.register({id:Zo.generateUuid(),registerOptions:{documentSelector:r}})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=un.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}callback(e){if(_t.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),e.document)&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let r=this._client.middleware,n=i=>this._client.sendRequest(it.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(async s=>{let o=await this._client.protocol2CodeConverter.asTextEdits(s);return o===void 0?[]:o});e.waitUntil(r.willSaveWaitUntil?r.willSaveWaitUntil(e,n):n(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}clear(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}};$r.WillSaveWaitUntilFeature=wy;var Sy=class extends _t.TextDocumentEventFeature{constructor(e){super(e,un.workspace.onDidSaveTextDocument,it.DidSaveTextDocumentNotification.type,()=>e.middleware.didSave,r=>e.code2ProtocolConverter.asSaveTextDocumentParams(r,this._includeText),r=>r,_t.TextDocumentEventFeature.textDocumentFilter),this._includeText=!1}get registrationType(){return it.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,_t.ensure)((0,_t.ensure)(e,"textDocument"),"synchronization").didSave=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;if(r&&n&&n.save){let i=typeof n.save=="boolean"?{includeText:!1}:{includeText:!!n.save.includeText};this.register({id:Zo.generateUuid(),registerOptions:Object.assign({},{documentSelector:r},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}getTextDocument(e){return e}};$r.DidSaveTextDocumentFeature=Sy});var jE=_(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});nd.CompletionItemFeature=void 0;var Vj=require("vscode"),Ie=ne(),Ry=Le(),Gj=gt(),Yj=[Ie.CompletionItemKind.Text,Ie.CompletionItemKind.Method,Ie.CompletionItemKind.Function,Ie.CompletionItemKind.Constructor,Ie.CompletionItemKind.Field,Ie.CompletionItemKind.Variable,Ie.CompletionItemKind.Class,Ie.CompletionItemKind.Interface,Ie.CompletionItemKind.Module,Ie.CompletionItemKind.Property,Ie.CompletionItemKind.Unit,Ie.CompletionItemKind.Value,Ie.CompletionItemKind.Enum,Ie.CompletionItemKind.Keyword,Ie.CompletionItemKind.Snippet,Ie.CompletionItemKind.Color,Ie.CompletionItemKind.File,Ie.CompletionItemKind.Reference,Ie.CompletionItemKind.Folder,Ie.CompletionItemKind.EnumMember,Ie.CompletionItemKind.Constant,Ie.CompletionItemKind.Struct,Ie.CompletionItemKind.Event,Ie.CompletionItemKind.Operator,Ie.CompletionItemKind.TypeParameter],Cy=class extends Ry.TextDocumentLanguageFeature{constructor(e){super(e,Ie.CompletionRequest.type),this.labelDetailsSupport=new Map}fillClientCapabilities(e){let r=(0,Ry.ensure)((0,Ry.ensure)(e,"textDocument"),"completion");r.dynamicRegistration=!0,r.contextSupport=!0,r.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[Ie.MarkupKind.Markdown,Ie.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[Ie.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[Ie.InsertTextMode.asIs,Ie.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},r.insertTextMode=Ie.InsertTextMode.adjustIndentation,r.completionItemKind={valueSet:Yj},r.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode","data"]}}initialize(e,r){let n=this.getRegistrationOptions(r,e.completionProvider);n&&this.register({id:Gj.generateUuid(),registerOptions:n})}registerLanguageProvider(e,r){this.labelDetailsSupport.set(r,!!e.completionItem?.labelDetailsSupport);let n=e.triggerCharacters??[],i=e.allCommitCharacters,s=e.documentSelector,o={provideCompletionItems:(a,u,c,l)=>{let f=this._client,d=this._client.middleware,p=(g,b,C,D)=>f.sendRequest(Ie.CompletionRequest.type,f.code2ProtocolConverter.asCompletionParams(g,b,C),D).then(S=>D.isCancellationRequested?null:f.protocol2CodeConverter.asCompletionResult(S,i,D),S=>f.handleFailedRequest(Ie.CompletionRequest.type,D,S,null));return d.provideCompletionItem?d.provideCompletionItem(a,u,l,c,p):p(a,u,l,c)},resolveCompletionItem:e.resolveProvider?(a,u)=>{let c=this._client,l=this._client.middleware,f=(d,p)=>c.sendRequest(Ie.CompletionResolveRequest.type,c.code2ProtocolConverter.asCompletionItem(d,!!this.labelDetailsSupport.get(r)),p).then(g=>p.isCancellationRequested?null:c.protocol2CodeConverter.asCompletionItem(g),g=>c.handleFailedRequest(Ie.CompletionResolveRequest.type,p,g,d));return l.resolveCompletionItem?l.resolveCompletionItem(a,u,f):f(a,u)}:void 0};return[Vj.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(s),o,...n),o]}};nd.CompletionItemFeature=Cy});var $E=_(id=>{"use strict";Object.defineProperty(id,"__esModule",{value:!0});id.HoverFeature=void 0;var Xj=require("vscode"),yu=ne(),Dy=Le(),Jj=gt(),Ey=class extends Dy.TextDocumentLanguageFeature{constructor(e){super(e,yu.HoverRequest.type)}fillClientCapabilities(e){let r=(0,Dy.ensure)((0,Dy.ensure)(e,"textDocument"),"hover");r.dynamicRegistration=!0,r.contentFormat=[yu.MarkupKind.Markdown,yu.MarkupKind.PlainText]}initialize(e,r){let n=this.getRegistrationOptions(r,e.hoverProvider);n&&this.register({id:Jj.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.documentSelector,n={provideHover:(i,s,o)=>{let a=this._client,u=(l,f,d)=>a.sendRequest(yu.HoverRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,f),d).then(p=>d.isCancellationRequested?null:a.protocol2CodeConverter.asHover(p),p=>a.handleFailedRequest(yu.HoverRequest.type,d,p,null)),c=a.middleware;return c.provideHover?c.provideHover(i,s,o,u):u(i,s,o)}};return[this.registerProvider(r,n),n]}registerProvider(e,r){return Xj.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),r)}};id.HoverFeature=Ey});var WE=_(sd=>{"use strict";Object.defineProperty(sd,"__esModule",{value:!0});sd.DefinitionFeature=void 0;var Qj=require("vscode"),Py=ne(),Ty=Le(),Zj=gt(),qy=class extends Ty.TextDocumentLanguageFeature{constructor(e){super(e,Py.DefinitionRequest.type)}fillClientCapabilities(e){let r=(0,Ty.ensure)((0,Ty.ensure)(e,"textDocument"),"definition");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.definitionProvider);n&&this.register({id:Zj.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.documentSelector,n={provideDefinition:(i,s,o)=>{let a=this._client,u=(l,f,d)=>a.sendRequest(Py.DefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,f),d).then(p=>d.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(p,d),p=>a.handleFailedRequest(Py.DefinitionRequest.type,d,p,null)),c=a.middleware;return c.provideDefinition?c.provideDefinition(i,s,o,u):u(i,s,o)}};return[this.registerProvider(r,n),n]}registerProvider(e,r){return Qj.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),r)}};sd.DefinitionFeature=qy});var UE=_(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});od.SignatureHelpFeature=void 0;var HE=require("vscode"),vu=ne(),Oy=Le(),e2=gt(),My=class extends Oy.TextDocumentLanguageFeature{constructor(e){super(e,vu.SignatureHelpRequest.type)}fillClientCapabilities(e){let r=(0,Oy.ensure)((0,Oy.ensure)(e,"textDocument"),"signatureHelp");r.dynamicRegistration=!0,r.signatureInformation={documentationFormat:[vu.MarkupKind.Markdown,vu.MarkupKind.PlainText]},r.signatureInformation.parameterInformation={labelOffsetSupport:!0},r.signatureInformation.activeParameterSupport=!0,r.contextSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.signatureHelpProvider);n&&this.register({id:e2.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideSignatureHelp:(n,i,s,o)=>{let a=this._client,u=(l,f,d,p)=>a.sendRequest(vu.SignatureHelpRequest.type,a.code2ProtocolConverter.asSignatureHelpParams(l,f,d),p).then(g=>p.isCancellationRequested?null:a.protocol2CodeConverter.asSignatureHelp(g,p),g=>a.handleFailedRequest(vu.SignatureHelpRequest.type,p,g,null)),c=a.middleware;return c.provideSignatureHelp?c.provideSignatureHelp(n,i,o,s,u):u(n,i,o,s)}};return[this.registerProvider(e,r),r]}registerProvider(e,r){let n=this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector);if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];return HE.languages.registerSignatureHelpProvider(n,r,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};return HE.languages.registerSignatureHelpProvider(n,r,i)}}};od.SignatureHelpFeature=My});var zE=_(ad=>{"use strict";Object.defineProperty(ad,"__esModule",{value:!0});ad.DocumentHighlightFeature=void 0;var t2=require("vscode"),xy=ne(),ky=Le(),r2=gt(),Fy=class extends ky.TextDocumentLanguageFeature{constructor(e){super(e,xy.DocumentHighlightRequest.type)}fillClientCapabilities(e){(0,ky.ensure)((0,ky.ensure)(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentHighlightProvider);n&&this.register({id:r2.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.documentSelector,n={provideDocumentHighlights:(i,s,o)=>{let a=this._client,u=(l,f,d)=>a.sendRequest(xy.DocumentHighlightRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,f),d).then(p=>d.isCancellationRequested?null:a.protocol2CodeConverter.asDocumentHighlights(p,d),p=>a.handleFailedRequest(xy.DocumentHighlightRequest.type,d,p,null)),c=a.middleware;return c.provideDocumentHighlights?c.provideDocumentHighlights(i,s,o,u):u(i,s,o)}};return[t2.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(r),n),n]}};ad.DocumentHighlightFeature=Fy});var Ny=_(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.DocumentSymbolFeature=li.SupportedSymbolTags=li.SupportedSymbolKinds=void 0;var n2=require("vscode"),Ve=ne(),Iy=Le(),i2=gt();li.SupportedSymbolKinds=[Ve.SymbolKind.File,Ve.SymbolKind.Module,Ve.SymbolKind.Namespace,Ve.SymbolKind.Package,Ve.SymbolKind.Class,Ve.SymbolKind.Method,Ve.SymbolKind.Property,Ve.SymbolKind.Field,Ve.SymbolKind.Constructor,Ve.SymbolKind.Enum,Ve.SymbolKind.Interface,Ve.SymbolKind.Function,Ve.SymbolKind.Variable,Ve.SymbolKind.Constant,Ve.SymbolKind.String,Ve.SymbolKind.Number,Ve.SymbolKind.Boolean,Ve.SymbolKind.Array,Ve.SymbolKind.Object,Ve.SymbolKind.Key,Ve.SymbolKind.Null,Ve.SymbolKind.EnumMember,Ve.SymbolKind.Struct,Ve.SymbolKind.Event,Ve.SymbolKind.Operator,Ve.SymbolKind.TypeParameter];li.SupportedSymbolTags=[Ve.SymbolTag.Deprecated];var Ay=class extends Iy.TextDocumentLanguageFeature{constructor(e){super(e,Ve.DocumentSymbolRequest.type)}fillClientCapabilities(e){let r=(0,Iy.ensure)((0,Iy.ensure)(e,"textDocument"),"documentSymbol");r.dynamicRegistration=!0,r.symbolKind={valueSet:li.SupportedSymbolKinds},r.hierarchicalDocumentSymbolSupport=!0,r.tagSupport={valueSet:li.SupportedSymbolTags},r.labelSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentSymbolProvider);n&&this.register({id:i2.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.documentSelector,n={provideDocumentSymbols:(s,o)=>{let a=this._client,u=async(l,f)=>{try{let d=await a.sendRequest(Ve.DocumentSymbolRequest.type,a.code2ProtocolConverter.asDocumentSymbolParams(l),f);if(f.isCancellationRequested||d===void 0||d===null)return null;if(d.length===0)return[];{let p=d[0];return Ve.DocumentSymbol.is(p)?await a.protocol2CodeConverter.asDocumentSymbols(d,f):await a.protocol2CodeConverter.asSymbolInformations(d,f)}}catch(d){return a.handleFailedRequest(Ve.DocumentSymbolRequest.type,f,d,null)}},c=a.middleware;return c.provideDocumentSymbols?c.provideDocumentSymbols(s,o,u):u(s,o)}},i=e.label!==void 0?{label:e.label}:void 0;return[n2.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(r),n,i),n]}};li.DocumentSymbolFeature=Ay});var BE=_(ud=>{"use strict";Object.defineProperty(ud,"__esModule",{value:!0});ud.WorkspaceSymbolFeature=void 0;var s2=require("vscode"),_u=ne(),Ly=Le(),KE=Ny(),o2=gt(),jy=class extends Ly.WorkspaceFeature{constructor(e){super(e,_u.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let r=(0,Ly.ensure)((0,Ly.ensure)(e,"workspace"),"symbol");r.dynamicRegistration=!0,r.symbolKind={valueSet:KE.SupportedSymbolKinds},r.tagSupport={valueSet:KE.SupportedSymbolTags},r.resolveSupport={properties:["location.range"]}}initialize(e){e.workspaceSymbolProvider&&this.register({id:o2.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let r={provideWorkspaceSymbols:(n,i)=>{let s=this._client,o=(u,c)=>s.sendRequest(_u.WorkspaceSymbolRequest.type,{query:u},c).then(l=>c.isCancellationRequested?null:s.protocol2CodeConverter.asSymbolInformations(l,c),l=>s.handleFailedRequest(_u.WorkspaceSymbolRequest.type,c,l,null)),a=s.middleware;return a.provideWorkspaceSymbols?a.provideWorkspaceSymbols(n,i,o):o(n,i)},resolveWorkspaceSymbol:e.resolveProvider===!0?(n,i)=>{let s=this._client,o=(u,c)=>s.sendRequest(_u.WorkspaceSymbolResolveRequest.type,s.code2ProtocolConverter.asWorkspaceSymbol(u),c).then(l=>c.isCancellationRequested?null:s.protocol2CodeConverter.asSymbolInformation(l),l=>s.handleFailedRequest(_u.WorkspaceSymbolResolveRequest.type,c,l,null)),a=s.middleware;return a.resolveWorkspaceSymbol?a.resolveWorkspaceSymbol(n,i,o):o(n,i)}:void 0};return[s2.languages.registerWorkspaceSymbolProvider(r),r]}};ud.WorkspaceSymbolFeature=jy});var VE=_(cd=>{"use strict";Object.defineProperty(cd,"__esModule",{value:!0});cd.ReferencesFeature=void 0;var a2=require("vscode"),$y=ne(),Wy=Le(),u2=gt(),Hy=class extends Wy.TextDocumentLanguageFeature{constructor(e){super(e,$y.ReferencesRequest.type)}fillClientCapabilities(e){(0,Wy.ensure)((0,Wy.ensure)(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.referencesProvider);n&&this.register({id:u2.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.documentSelector,n={provideReferences:(i,s,o,a)=>{let u=this._client,c=(f,d,p,g)=>u.sendRequest($y.ReferencesRequest.type,u.code2ProtocolConverter.asReferenceParams(f,d,p),g).then(b=>g.isCancellationRequested?null:u.protocol2CodeConverter.asReferences(b,g),b=>u.handleFailedRequest($y.ReferencesRequest.type,g,b,null)),l=u.middleware;return l.provideReferences?l.provideReferences(i,s,o,a,c):c(i,s,o,a)}};return[this.registerProvider(r,n),n]}registerProvider(e,r){return a2.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),r)}};cd.ReferencesFeature=Hy});var GE=_(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});ld.CodeActionFeature=void 0;var c2=require("vscode"),cn=ne(),l2=gt(),Uy=Le(),zy=class extends Uy.TextDocumentLanguageFeature{constructor(e){super(e,cn.CodeActionRequest.type)}fillClientCapabilities(e){let r=(0,Uy.ensure)((0,Uy.ensure)(e,"textDocument"),"codeAction");r.dynamicRegistration=!0,r.isPreferredSupport=!0,r.disabledSupport=!0,r.dataSupport=!0,r.resolveSupport={properties:["edit"]},r.codeActionLiteralSupport={codeActionKind:{valueSet:[cn.CodeActionKind.Empty,cn.CodeActionKind.QuickFix,cn.CodeActionKind.Refactor,cn.CodeActionKind.RefactorExtract,cn.CodeActionKind.RefactorInline,cn.CodeActionKind.RefactorRewrite,cn.CodeActionKind.Source,cn.CodeActionKind.SourceOrganizeImports]}},r.honorsChangeAnnotations=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.codeActionProvider);n&&this.register({id:l2.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.documentSelector,n={provideCodeActions:(i,s,o,a)=>{let u=this._client,c=async(f,d,p,g)=>{let b={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(f),range:u.code2ProtocolConverter.asRange(d),context:u.code2ProtocolConverter.asCodeActionContextSync(p)};return u.sendRequest(cn.CodeActionRequest.type,b,g).then(C=>g.isCancellationRequested||C===null||C===void 0?null:u.protocol2CodeConverter.asCodeActionResult(C,g),C=>u.handleFailedRequest(cn.CodeActionRequest.type,g,C,null))},l=u.middleware;return l.provideCodeActions?l.provideCodeActions(i,s,o,a,c):c(i,s,o,a)},resolveCodeAction:e.resolveProvider?(i,s)=>{let o=this._client,a=this._client.middleware,u=async(c,l)=>o.sendRequest(cn.CodeActionResolveRequest.type,o.code2ProtocolConverter.asCodeActionSync(c),l).then(f=>l.isCancellationRequested?c:o.protocol2CodeConverter.asCodeAction(f,l),f=>o.handleFailedRequest(cn.CodeActionResolveRequest.type,l,f,c));return a.resolveCodeAction?a.resolveCodeAction(i,s,u):u(i,s)}:void 0};return[c2.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(r),n,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),n]}};ld.CodeActionFeature=zy});var XE=_(dd=>{"use strict";Object.defineProperty(dd,"__esModule",{value:!0});dd.CodeLensFeature=void 0;var YE=require("vscode"),ea=ne(),d2=gt(),bu=Le(),Ky=class extends bu.TextDocumentLanguageFeature{constructor(e){super(e,ea.CodeLensRequest.type)}fillClientCapabilities(e){(0,bu.ensure)((0,bu.ensure)(e,"textDocument"),"codeLens").dynamicRegistration=!0,(0,bu.ensure)((0,bu.ensure)(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,r){this._client.onRequest(ea.CodeLensRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(r,e.codeLensProvider);i&&this.register({id:d2.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let r=e.documentSelector,n=new YE.EventEmitter,i={onDidChangeCodeLenses:n.event,provideCodeLenses:(s,o)=>{let a=this._client,u=(l,f)=>a.sendRequest(ea.CodeLensRequest.type,a.code2ProtocolConverter.asCodeLensParams(l),f).then(d=>f.isCancellationRequested?null:a.protocol2CodeConverter.asCodeLenses(d,f),d=>a.handleFailedRequest(ea.CodeLensRequest.type,f,d,null)),c=a.middleware;return c.provideCodeLenses?c.provideCodeLenses(s,o,u):u(s,o)},resolveCodeLens:e.resolveProvider?(s,o)=>{let a=this._client,u=(l,f)=>a.sendRequest(ea.CodeLensResolveRequest.type,a.code2ProtocolConverter.asCodeLens(l),f).then(d=>f.isCancellationRequested?l:a.protocol2CodeConverter.asCodeLens(d),d=>a.handleFailedRequest(ea.CodeLensResolveRequest.type,f,d,l)),c=a.middleware;return c.resolveCodeLens?c.resolveCodeLens(s,o,u):u(s,o)}:void 0};return[YE.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(r),i),{provider:i,onDidChangeCodeLensEmitter:n}]}};dd.CodeLensFeature=Ky});var JE=_(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.DocumentOnTypeFormattingFeature=os.DocumentRangeFormattingFeature=os.DocumentFormattingFeature=void 0;var fd=require("vscode"),jn=ne(),Yy=gt(),xi=Le(),ta;(function(t){function e(r){let n=fd.workspace.getConfiguration("files",r);return{trimTrailingWhitespace:n.get("trimTrailingWhitespace"),trimFinalNewlines:n.get("trimFinalNewlines"),insertFinalNewline:n.get("insertFinalNewline")}}t.fromConfiguration=e})(ta||(ta={}));var By=class extends xi.TextDocumentLanguageFeature{constructor(e){super(e,jn.DocumentFormattingRequest.type)}fillClientCapabilities(e){(0,xi.ensure)((0,xi.ensure)(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentFormattingProvider);n&&this.register({id:Yy.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.documentSelector,n={provideDocumentFormattingEdits:(i,s,o)=>{let a=this._client,u=(l,f,d)=>{let p={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(l),options:a.code2ProtocolConverter.asFormattingOptions(f,ta.fromConfiguration(l))};return a.sendRequest(jn.DocumentFormattingRequest.type,p,d).then(g=>d.isCancellationRequested?null:a.protocol2CodeConverter.asTextEdits(g,d),g=>a.handleFailedRequest(jn.DocumentFormattingRequest.type,d,g,null))},c=a.middleware;return c.provideDocumentFormattingEdits?c.provideDocumentFormattingEdits(i,s,o,u):u(i,s,o)}};return[fd.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(r),n),n]}};os.DocumentFormattingFeature=By;var Vy=class extends xi.TextDocumentLanguageFeature{constructor(e){super(e,jn.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){let r=(0,xi.ensure)((0,xi.ensure)(e,"textDocument"),"rangeFormatting");r.dynamicRegistration=!0,r.rangesSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentRangeFormattingProvider);n&&this.register({id:Yy.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.documentSelector,n={provideDocumentRangeFormattingEdits:(i,s,o,a)=>{let u=this._client,c=(f,d,p,g)=>{let b={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(f),range:u.code2ProtocolConverter.asRange(d),options:u.code2ProtocolConverter.asFormattingOptions(p,ta.fromConfiguration(f))};return u.sendRequest(jn.DocumentRangeFormattingRequest.type,b,g).then(C=>g.isCancellationRequested?null:u.protocol2CodeConverter.asTextEdits(C,g),C=>u.handleFailedRequest(jn.DocumentRangeFormattingRequest.type,g,C,null))},l=u.middleware;return l.provideDocumentRangeFormattingEdits?l.provideDocumentRangeFormattingEdits(i,s,o,a,c):c(i,s,o,a)}};return e.rangesSupport&&(n.provideDocumentRangesFormattingEdits=(i,s,o,a)=>{let u=this._client,c=(f,d,p,g)=>{let b={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(f),ranges:u.code2ProtocolConverter.asRanges(d),options:u.code2ProtocolConverter.asFormattingOptions(p,ta.fromConfiguration(f))};return u.sendRequest(jn.DocumentRangesFormattingRequest.type,b,g).then(C=>g.isCancellationRequested?null:u.protocol2CodeConverter.asTextEdits(C,g),C=>u.handleFailedRequest(jn.DocumentRangesFormattingRequest.type,g,C,null))},l=u.middleware;return l.provideDocumentRangesFormattingEdits?l.provideDocumentRangesFormattingEdits(i,s,o,a,c):c(i,s,o,a)}),[fd.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(r),n),n]}};os.DocumentRangeFormattingFeature=Vy;var Gy=class extends xi.TextDocumentLanguageFeature{constructor(e){super(e,jn.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){(0,xi.ensure)((0,xi.ensure)(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentOnTypeFormattingProvider);n&&this.register({id:Yy.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.documentSelector,n={provideOnTypeFormattingEdits:(s,o,a,u,c)=>{let l=this._client,f=(p,g,b,C,D)=>{let S={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(p),position:l.code2ProtocolConverter.asPosition(g),ch:b,options:l.code2ProtocolConverter.asFormattingOptions(C,ta.fromConfiguration(p))};return l.sendRequest(jn.DocumentOnTypeFormattingRequest.type,S,D).then(w=>D.isCancellationRequested?null:l.protocol2CodeConverter.asTextEdits(w,D),w=>l.handleFailedRequest(jn.DocumentOnTypeFormattingRequest.type,D,w,null))},d=l.middleware;return d.provideOnTypeFormattingEdits?d.provideOnTypeFormattingEdits(s,o,a,u,c,f):f(s,o,a,u,c)}},i=e.moreTriggerCharacter||[];return[fd.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(r),n,e.firstTriggerCharacter,...i),n]}};os.DocumentOnTypeFormattingFeature=Gy});var ZE=_(hd=>{"use strict";Object.defineProperty(hd,"__esModule",{value:!0});hd.RenameFeature=void 0;var f2=require("vscode"),Js=ne(),h2=gt(),QE=gn(),Xy=Le(),Jy=class extends Xy.TextDocumentLanguageFeature{constructor(e){super(e,Js.RenameRequest.type)}fillClientCapabilities(e){let r=(0,Xy.ensure)((0,Xy.ensure)(e,"textDocument"),"rename");r.dynamicRegistration=!0,r.prepareSupport=!0,r.prepareSupportDefaultBehavior=Js.PrepareSupportDefaultBehavior.Identifier,r.honorsChangeAnnotations=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.renameProvider);n&&(QE.boolean(e.renameProvider)&&(n.prepareProvider=!1),this.register({id:h2.generateUuid(),registerOptions:n}))}registerLanguageProvider(e){let r=e.documentSelector,n={provideRenameEdits:(i,s,o,a)=>{let u=this._client,c=(f,d,p,g)=>{let b={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(f),position:u.code2ProtocolConverter.asPosition(d),newName:p};return u.sendRequest(Js.RenameRequest.type,b,g).then(C=>g.isCancellationRequested?null:u.protocol2CodeConverter.asWorkspaceEdit(C,g),C=>u.handleFailedRequest(Js.RenameRequest.type,g,C,null,!1))},l=u.middleware;return l.provideRenameEdits?l.provideRenameEdits(i,s,o,a,c):c(i,s,o,a)},prepareRename:e.prepareProvider?(i,s,o)=>{let a=this._client,u=(l,f,d)=>{let p={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(l),position:a.code2ProtocolConverter.asPosition(f)};return a.sendRequest(Js.PrepareRenameRequest.type,p,d).then(g=>d.isCancellationRequested?null:Js.Range.is(g)?a.protocol2CodeConverter.asRange(g):this.isDefaultBehavior(g)?g.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):g&&Js.Range.is(g.range)?{range:a.protocol2CodeConverter.asRange(g.range),placeholder:g.placeholder}:Promise.reject(new Error("The element can't be renamed.")),g=>{throw typeof g.message=="string"?new Error(g.message):new Error("The element can't be renamed.")})},c=a.middleware;return c.prepareRename?c.prepareRename(i,s,o,u):u(i,s,o)}:void 0};return[this.registerProvider(r,n),n]}registerProvider(e,r){return f2.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),r)}isDefaultBehavior(e){let r=e;return r&&QE.boolean(r.defaultBehavior)}};hd.RenameFeature=Jy});var eP=_(gd=>{"use strict";Object.defineProperty(gd,"__esModule",{value:!0});gd.DocumentLinkFeature=void 0;var g2=require("vscode"),wu=ne(),Qy=Le(),p2=gt(),Zy=class extends Qy.TextDocumentLanguageFeature{constructor(e){super(e,wu.DocumentLinkRequest.type)}fillClientCapabilities(e){let r=(0,Qy.ensure)((0,Qy.ensure)(e,"textDocument"),"documentLink");r.dynamicRegistration=!0,r.tooltipSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentLinkProvider);n&&this.register({id:p2.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.documentSelector,n={provideDocumentLinks:(i,s)=>{let o=this._client,a=(c,l)=>o.sendRequest(wu.DocumentLinkRequest.type,o.code2ProtocolConverter.asDocumentLinkParams(c),l).then(f=>l.isCancellationRequested?null:o.protocol2CodeConverter.asDocumentLinks(f,l),f=>o.handleFailedRequest(wu.DocumentLinkRequest.type,l,f,null)),u=o.middleware;return u.provideDocumentLinks?u.provideDocumentLinks(i,s,a):a(i,s)},resolveDocumentLink:e.resolveProvider?(i,s)=>{let o=this._client,a=(c,l)=>o.sendRequest(wu.DocumentLinkResolveRequest.type,o.code2ProtocolConverter.asDocumentLink(c),l).then(f=>l.isCancellationRequested?c:o.protocol2CodeConverter.asDocumentLink(f),f=>o.handleFailedRequest(wu.DocumentLinkResolveRequest.type,l,f,c)),u=o.middleware;return u.resolveDocumentLink?u.resolveDocumentLink(i,s,a):a(i,s)}:void 0};return[g2.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(r),n),n]}};gd.DocumentLinkFeature=Zy});var rP=_(pd=>{"use strict";Object.defineProperty(pd,"__esModule",{value:!0});pd.ExecuteCommandFeature=void 0;var m2=require("vscode"),ev=ne(),y2=gt(),tP=Le(),tv=class{constructor(e){this._client=e,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return ev.ExecuteCommandRequest.type}fillClientCapabilities(e){(0,tP.ensure)((0,tP.ensure)(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register({id:y2.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let r=this._client,n=r.middleware,i=(s,o)=>{let a={command:s,arguments:o};return r.sendRequest(ev.ExecuteCommandRequest.type,a).then(void 0,u=>r.handleFailedRequest(ev.ExecuteCommandRequest.type,void 0,u,void 0))};if(e.registerOptions.commands){let s=[];for(let o of e.registerOptions.commands)s.push(m2.commands.registerCommand(o,(...a)=>n.executeCommand?n.executeCommand(o,a,i):i(o,a)));this._commands.set(e.id,s)}}unregister(e){let r=this._commands.get(e);r&&r.forEach(n=>n.dispose())}clear(){this._commands.forEach(e=>{e.forEach(r=>r.dispose())}),this._commands.clear()}};pd.ExecuteCommandFeature=tv});var nP=_(yd=>{"use strict";Object.defineProperty(yd,"__esModule",{value:!0});yd.FileSystemWatcherFeature=void 0;var v2=require("vscode"),Qs=ne(),md=Le(),rv=class{constructor(e,r){this._client=e,this._notifyFileEvent=r,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return Qs.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){(0,md.ensure)((0,md.ensure)(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,md.ensure)((0,md.ensure)(e,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(e,r){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let r=[];for(let n of e.registerOptions.watchers){let i=this._client.protocol2CodeConverter.asGlobPattern(n.globPattern);if(i===void 0)continue;let s=!0,o=!0,a=!0;n.kind!==void 0&&n.kind!==null&&(s=(n.kind&Qs.WatchKind.Create)!==0,o=(n.kind&Qs.WatchKind.Change)!==0,a=(n.kind&Qs.WatchKind.Delete)!==0);let u=v2.workspace.createFileSystemWatcher(i,!s,!o,!a);this.hookListeners(u,s,o,a,r),r.push(u)}this._watchers.set(e.id,r)}registerRaw(e,r){let n=[];for(let i of r)this.hookListeners(i,!0,!0,!0,n);this._watchers.set(e,n)}hookListeners(e,r,n,i,s){r&&e.onDidCreate(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:Qs.FileChangeType.Created}),null,s),n&&e.onDidChange(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:Qs.FileChangeType.Changed}),null,s),i&&e.onDidDelete(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:Qs.FileChangeType.Deleted}),null,s)}unregister(e){let r=this._watchers.get(e);if(r)for(let n of r)n.dispose()}clear(){this._watchers.forEach(e=>{for(let r of e)r.dispose()}),this._watchers.clear()}};yd.FileSystemWatcherFeature=rv});var iP=_(vd=>{"use strict";Object.defineProperty(vd,"__esModule",{value:!0});vd.ColorProviderFeature=void 0;var _2=require("vscode"),Su=ne(),nv=Le(),iv=class extends nv.TextDocumentLanguageFeature{constructor(e){super(e,Su.DocumentColorRequest.type)}fillClientCapabilities(e){(0,nv.ensure)((0,nv.ensure)(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.colorProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r=e.documentSelector,n={provideColorPresentations:(i,s,o)=>{let a=this._client,u=(l,f,d)=>{let p={color:l,textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(f.document),range:a.code2ProtocolConverter.asRange(f.range)};return a.sendRequest(Su.ColorPresentationRequest.type,p,d).then(g=>d.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorPresentations(g,d),g=>a.handleFailedRequest(Su.ColorPresentationRequest.type,d,g,null))},c=a.middleware;return c.provideColorPresentations?c.provideColorPresentations(i,s,o,u):u(i,s,o)},provideDocumentColors:(i,s)=>{let o=this._client,a=(c,l)=>{let f={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(c)};return o.sendRequest(Su.DocumentColorRequest.type,f,l).then(d=>l.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorInformations(d,l),d=>o.handleFailedRequest(Su.DocumentColorRequest.type,l,d,null))},u=o.middleware;return u.provideDocumentColors?u.provideDocumentColors(i,s,a):a(i,s)}};return[_2.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(r),n),n]}};vd.ColorProviderFeature=iv});var sP=_(_d=>{"use strict";Object.defineProperty(_d,"__esModule",{value:!0});_d.ImplementationFeature=void 0;var b2=require("vscode"),sv=ne(),ov=Le(),av=class extends ov.TextDocumentLanguageFeature{constructor(e){super(e,sv.ImplementationRequest.type)}fillClientCapabilities(e){let r=(0,ov.ensure)((0,ov.ensure)(e,"textDocument"),"implementation");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.implementationProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r=e.documentSelector,n={provideImplementation:(i,s,o)=>{let a=this._client,u=(l,f,d)=>a.sendRequest(sv.ImplementationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,f),d).then(p=>d.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(p,d),p=>a.handleFailedRequest(sv.ImplementationRequest.type,d,p,null)),c=a.middleware;return c.provideImplementation?c.provideImplementation(i,s,o,u):u(i,s,o)}};return[this.registerProvider(r,n),n]}registerProvider(e,r){return b2.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),r)}};_d.ImplementationFeature=av});var oP=_(bd=>{"use strict";Object.defineProperty(bd,"__esModule",{value:!0});bd.TypeDefinitionFeature=void 0;var w2=require("vscode"),uv=ne(),Ru=Le(),cv=class extends Ru.TextDocumentLanguageFeature{constructor(e){super(e,uv.TypeDefinitionRequest.type)}fillClientCapabilities(e){(0,Ru.ensure)((0,Ru.ensure)(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let r=(0,Ru.ensure)((0,Ru.ensure)(e,"textDocument"),"typeDefinition");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.typeDefinitionProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r=e.documentSelector,n={provideTypeDefinition:(i,s,o)=>{let a=this._client,u=(l,f,d)=>a.sendRequest(uv.TypeDefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,f),d).then(p=>d.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(p,d),p=>a.handleFailedRequest(uv.TypeDefinitionRequest.type,d,p,null)),c=a.middleware;return c.provideTypeDefinition?c.provideTypeDefinition(i,s,o,u):u(i,s,o)}};return[this.registerProvider(r,n),n]}registerProvider(e,r){return w2.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),r)}};bd.TypeDefinitionFeature=cv});var aP=_(ra=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});ra.WorkspaceFoldersFeature=ra.arrayDiff=void 0;var S2=gt(),wd=require("vscode"),Cu=ne();function lv(t,e){if(t!=null)return t[e]}function dv(t,e){return t.filter(r=>e.indexOf(r)<0)}ra.arrayDiff=dv;var fv=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return Cu.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let r=wd.workspace.workspaceFolders;this.initializeWithFolders(r),r===void 0?e.workspaceFolders=null:e.workspaceFolders=r.map(n=>this.asProtocol(n))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let r=this._client;r.onRequest(Cu.WorkspaceFoldersRequest.type,s=>{let o=()=>{let u=wd.workspace.workspaceFolders;return u===void 0?null:u.map(l=>this.asProtocol(l))},a=r.middleware.workspace;return a&&a.workspaceFolders?a.workspaceFolders(s,o):o(s)});let n=lv(lv(lv(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof n=="string"?i=n:n===!0&&(i=S2.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){let r;if(this._initialFolders&&e){let n=dv(this._initialFolders,e),i=dv(e,this._initialFolders);(i.length>0||n.length>0)&&(r=this.doSendEvent(i,n))}else this._initialFolders?r=this.doSendEvent([],this._initialFolders):e&&(r=this.doSendEvent(e,[]));r!==void 0&&r.catch(n=>{this._client.error(`Sending notification ${Cu.DidChangeWorkspaceFoldersNotification.type.method} failed`,n)})}doSendEvent(e,r){let n={event:{added:e.map(i=>this.asProtocol(i)),removed:r.map(i=>this.asProtocol(i))}};return this._client.sendNotification(Cu.DidChangeWorkspaceFoldersNotification.type,n)}register(e){let r=e.id,n=this._client,i=wd.workspace.onDidChangeWorkspaceFolders(s=>{let o=c=>this.doSendEvent(c.added,c.removed),a=n.middleware.workspace;(a&&a.didChangeWorkspaceFolders?a.didChangeWorkspaceFolders(s,o):o(s)).catch(c=>{this._client.error(`Sending notification ${Cu.DidChangeWorkspaceFoldersNotification.type.method} failed`,c)})});this._listeners.set(r,i),this.sendInitialEvent(wd.workspace.workspaceFolders)}unregister(e){let r=this._listeners.get(e);r!==void 0&&(this._listeners.delete(e),r.dispose())}clear(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};ra.WorkspaceFoldersFeature=fv});var cP=_(Sd=>{"use strict";Object.defineProperty(Sd,"__esModule",{value:!0});Sd.FoldingRangeFeature=void 0;var uP=require("vscode"),Zs=ne(),Du=Le(),hv=class extends Du.TextDocumentLanguageFeature{constructor(e){super(e,Zs.FoldingRangeRequest.type)}fillClientCapabilities(e){let r=(0,Du.ensure)((0,Du.ensure)(e,"textDocument"),"foldingRange");r.dynamicRegistration=!0,r.rangeLimit=5e3,r.lineFoldingOnly=!0,r.foldingRangeKind={valueSet:[Zs.FoldingRangeKind.Comment,Zs.FoldingRangeKind.Imports,Zs.FoldingRangeKind.Region]},r.foldingRange={collapsedText:!1},(0,Du.ensure)((0,Du.ensure)(e,"workspace"),"foldingRange").refreshSupport=!0}initialize(e,r){this._client.onRequest(Zs.FoldingRangeRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeFoldingRange.fire()});let[n,i]=this.getRegistration(r,e.foldingRangeProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r=e.documentSelector,n=new uP.EventEmitter,i={onDidChangeFoldingRanges:n.event,provideFoldingRanges:(s,o,a)=>{let u=this._client,c=(f,d,p)=>{let g={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(f)};return u.sendRequest(Zs.FoldingRangeRequest.type,g,p).then(b=>p.isCancellationRequested?null:u.protocol2CodeConverter.asFoldingRanges(b,p),b=>u.handleFailedRequest(Zs.FoldingRangeRequest.type,p,b,null))},l=u.middleware;return l.provideFoldingRanges?l.provideFoldingRanges(s,o,a,c):c(s,o,a)}};return[uP.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(r),i),{provider:i,onDidChangeFoldingRange:n}]}};Sd.FoldingRangeFeature=hv});var lP=_(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});Rd.DeclarationFeature=void 0;var R2=require("vscode"),gv=ne(),pv=Le(),mv=class extends pv.TextDocumentLanguageFeature{constructor(e){super(e,gv.DeclarationRequest.type)}fillClientCapabilities(e){let r=(0,pv.ensure)((0,pv.ensure)(e,"textDocument"),"declaration");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.declarationProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r=e.documentSelector,n={provideDeclaration:(i,s,o)=>{let a=this._client,u=(l,f,d)=>a.sendRequest(gv.DeclarationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,f),d).then(p=>d.isCancellationRequested?null:a.protocol2CodeConverter.asDeclarationResult(p,d),p=>a.handleFailedRequest(gv.DeclarationRequest.type,d,p,null)),c=a.middleware;return c.provideDeclaration?c.provideDeclaration(i,s,o,u):u(i,s,o)}};return[this.registerProvider(r,n),n]}registerProvider(e,r){return R2.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),r)}};Rd.DeclarationFeature=mv});var dP=_(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});Cd.SelectionRangeFeature=void 0;var C2=require("vscode"),yv=ne(),vv=Le(),_v=class extends vv.TextDocumentLanguageFeature{constructor(e){super(e,yv.SelectionRangeRequest.type)}fillClientCapabilities(e){let r=(0,vv.ensure)((0,vv.ensure)(e,"textDocument"),"selectionRange");r.dynamicRegistration=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.selectionRangeProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r=e.documentSelector,n={provideSelectionRanges:(i,s,o)=>{let a=this._client,u=async(l,f,d)=>{let p={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(l),positions:a.code2ProtocolConverter.asPositionsSync(f,d)};return a.sendRequest(yv.SelectionRangeRequest.type,p,d).then(g=>d.isCancellationRequested?null:a.protocol2CodeConverter.asSelectionRanges(g,d),g=>a.handleFailedRequest(yv.SelectionRangeRequest.type,d,g,null))},c=a.middleware;return c.provideSelectionRanges?c.provideSelectionRanges(i,s,o,u):u(i,s,o)}};return[this.registerProvider(r,n),n]}registerProvider(e,r){return C2.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),r)}};Cd.SelectionRangeFeature=_v});var hP=_(Dd=>{"use strict";Object.defineProperty(Dd,"__esModule",{value:!0});Dd.ProgressFeature=void 0;var fP=ne(),D2=Bm();function E2(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var bv=class{constructor(e){this._client=e,this.activeParts=new Set}getState(){return{kind:"window",id:fP.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(e){E2(e,"window").workDoneProgress=!0}initialize(){let e=this._client,r=i=>{this.activeParts.delete(i)},n=i=>{this.activeParts.add(new D2.ProgressPart(this._client,i.token,r))};e.onRequest(fP.WorkDoneProgressCreateRequest.type,n)}clear(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};Dd.ProgressFeature=bv});var gP=_(Ed=>{"use strict";Object.defineProperty(Ed,"__esModule",{value:!0});Ed.CallHierarchyFeature=void 0;var P2=require("vscode"),eo=ne(),wv=Le(),Sv=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareCallHierarchy(e,r,n){let i=this.client,s=this.middleware,o=(a,u,c)=>{let l=i.code2ProtocolConverter.asTextDocumentPositionParams(a,u);return i.sendRequest(eo.CallHierarchyPrepareRequest.type,l,c).then(f=>c.isCancellationRequested?null:i.protocol2CodeConverter.asCallHierarchyItems(f,c),f=>i.handleFailedRequest(eo.CallHierarchyPrepareRequest.type,c,f,null))};return s.prepareCallHierarchy?s.prepareCallHierarchy(e,r,n,o):o(e,r,n)}provideCallHierarchyIncomingCalls(e,r){let n=this.client,i=this.middleware,s=(o,a)=>{let u={item:n.code2ProtocolConverter.asCallHierarchyItem(o)};return n.sendRequest(eo.CallHierarchyIncomingCallsRequest.type,u,a).then(c=>a.isCancellationRequested?null:n.protocol2CodeConverter.asCallHierarchyIncomingCalls(c,a),c=>n.handleFailedRequest(eo.CallHierarchyIncomingCallsRequest.type,a,c,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,r,s):s(e,r)}provideCallHierarchyOutgoingCalls(e,r){let n=this.client,i=this.middleware,s=(o,a)=>{let u={item:n.code2ProtocolConverter.asCallHierarchyItem(o)};return n.sendRequest(eo.CallHierarchyOutgoingCallsRequest.type,u,a).then(c=>a.isCancellationRequested?null:n.protocol2CodeConverter.asCallHierarchyOutgoingCalls(c,a),c=>n.handleFailedRequest(eo.CallHierarchyOutgoingCallsRequest.type,a,c,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,r,s):s(e,r)}},Rv=class extends wv.TextDocumentLanguageFeature{constructor(e){super(e,eo.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let r=e,n=(0,wv.ensure)((0,wv.ensure)(r,"textDocument"),"callHierarchy");n.dynamicRegistration=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.callHierarchyProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r=this._client,n=new Sv(r);return[P2.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector),n),n]}};Ed.CallHierarchyFeature=Rv});var pP=_(Td=>{"use strict";Object.defineProperty(Td,"__esModule",{value:!0});Td.SemanticTokensFeature=void 0;var Pd=require("vscode"),Re=ne(),Eu=Le(),T2=gn(),Cv=class extends Eu.TextDocumentLanguageFeature{constructor(e){super(e,Re.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let r=(0,Eu.ensure)((0,Eu.ensure)(e,"textDocument"),"semanticTokens");r.dynamicRegistration=!0,r.tokenTypes=[Re.SemanticTokenTypes.namespace,Re.SemanticTokenTypes.type,Re.SemanticTokenTypes.class,Re.SemanticTokenTypes.enum,Re.SemanticTokenTypes.interface,Re.SemanticTokenTypes.struct,Re.SemanticTokenTypes.typeParameter,Re.SemanticTokenTypes.parameter,Re.SemanticTokenTypes.variable,Re.SemanticTokenTypes.property,Re.SemanticTokenTypes.enumMember,Re.SemanticTokenTypes.event,Re.SemanticTokenTypes.function,Re.SemanticTokenTypes.method,Re.SemanticTokenTypes.macro,Re.SemanticTokenTypes.keyword,Re.SemanticTokenTypes.modifier,Re.SemanticTokenTypes.comment,Re.SemanticTokenTypes.string,Re.SemanticTokenTypes.number,Re.SemanticTokenTypes.regexp,Re.SemanticTokenTypes.operator,Re.SemanticTokenTypes.decorator],r.tokenModifiers=[Re.SemanticTokenModifiers.declaration,Re.SemanticTokenModifiers.definition,Re.SemanticTokenModifiers.readonly,Re.SemanticTokenModifiers.static,Re.SemanticTokenModifiers.deprecated,Re.SemanticTokenModifiers.abstract,Re.SemanticTokenModifiers.async,Re.SemanticTokenModifiers.modification,Re.SemanticTokenModifiers.documentation,Re.SemanticTokenModifiers.defaultLibrary],r.formats=[Re.TokenFormat.Relative],r.requests={range:!0,full:{delta:!0}},r.multilineTokenSupport=!1,r.overlappingTokenSupport=!1,r.serverCancelSupport=!0,r.augmentsSyntaxTokens=!0,(0,Eu.ensure)((0,Eu.ensure)(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,r){this._client.onRequest(Re.SemanticTokensRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeSemanticTokensEmitter.fire()});let[i,s]=this.getRegistration(r,e.semanticTokensProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let r=e.documentSelector,n=T2.boolean(e.full)?e.full:e.full!==void 0,i=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,s=new Pd.EventEmitter,o=n?{onDidChangeSemanticTokens:s.event,provideDocumentSemanticTokens:(p,g)=>{let b=this._client,C=b.middleware,D=(S,w)=>{let O={textDocument:b.code2ProtocolConverter.asTextDocumentIdentifier(S)};return b.sendRequest(Re.SemanticTokensRequest.type,O,w).then(j=>w.isCancellationRequested?null:b.protocol2CodeConverter.asSemanticTokens(j,w),j=>b.handleFailedRequest(Re.SemanticTokensRequest.type,w,j,null))};return C.provideDocumentSemanticTokens?C.provideDocumentSemanticTokens(p,g,D):D(p,g)},provideDocumentSemanticTokensEdits:i?(p,g,b)=>{let C=this._client,D=C.middleware,S=(w,O,j)=>{let z={textDocument:C.code2ProtocolConverter.asTextDocumentIdentifier(w),previousResultId:O};return C.sendRequest(Re.SemanticTokensDeltaRequest.type,z,j).then(async W=>j.isCancellationRequested?null:Re.SemanticTokens.is(W)?await C.protocol2CodeConverter.asSemanticTokens(W,j):await C.protocol2CodeConverter.asSemanticTokensEdits(W,j),W=>C.handleFailedRequest(Re.SemanticTokensDeltaRequest.type,j,W,null))};return D.provideDocumentSemanticTokensEdits?D.provideDocumentSemanticTokensEdits(p,g,b,S):S(p,g,b)}:void 0}:void 0,u=e.range===!0?{provideDocumentRangeSemanticTokens:(p,g,b)=>{let C=this._client,D=C.middleware,S=(w,O,j)=>{let z={textDocument:C.code2ProtocolConverter.asTextDocumentIdentifier(w),range:C.code2ProtocolConverter.asRange(O)};return C.sendRequest(Re.SemanticTokensRangeRequest.type,z,j).then(W=>j.isCancellationRequested?null:C.protocol2CodeConverter.asSemanticTokens(W,j),W=>C.handleFailedRequest(Re.SemanticTokensRangeRequest.type,j,W,null))};return D.provideDocumentRangeSemanticTokens?D.provideDocumentRangeSemanticTokens(p,g,b,S):S(p,g,b)}}:void 0,c=[],l=this._client,f=l.protocol2CodeConverter.asSemanticTokensLegend(e.legend),d=l.protocol2CodeConverter.asDocumentSelector(r);return o!==void 0&&c.push(Pd.languages.registerDocumentSemanticTokensProvider(d,o,f)),u!==void 0&&c.push(Pd.languages.registerDocumentRangeSemanticTokensProvider(d,u,f)),[new Pd.Disposable(()=>c.forEach(p=>p.dispose())),{range:u,full:o,onDidChangeSemanticTokensEmitter:s}]}};Td.SemanticTokensFeature=Cv});var vP=_(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.WillDeleteFilesFeature=Wr.WillRenameFilesFeature=Wr.WillCreateFilesFeature=Wr.DidDeleteFilesFeature=Wr.DidRenameFilesFeature=Wr.DidCreateFilesFeature=void 0;var bn=require("vscode"),q2=Xl(),ki=ne(),O2=gt();function mP(t,e){return t[e]===void 0&&(t[e]={}),t[e]}function M2(t,e){return t[e]}function yP(t,e,r){t[e]=r}var Pu=class t{constructor(e,r,n,i,s){this._client=e,this._event=r,this._registrationType=n,this._clientCapability=i,this._serverCapability=s,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){let r=mP(mP(e,"workspace"),"fileOperations");yP(r,"dynamicRegistration",!0),yP(r,this._clientCapability,!0)}initialize(e){let r=e.workspace?.fileOperations,n=r!==void 0?M2(r,this._serverCapability):void 0;if(n?.filters!==void 0)try{this.register({id:O2.generateUuid(),registerOptions:{filters:n.filters}})}catch(i){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${i}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let r=e.registerOptions.filters.map(n=>{let i=new q2.Minimatch(n.pattern.glob,t.asMinimatchOptions(n.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${n.pattern.glob}!`);return{scheme:n.scheme,matcher:i,kind:n.pattern.matches}});this._filters.set(e.id,r)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}clear(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getFileType(e){return t.getFileType(e)}async filter(e,r){let n=await Promise.all(e.files.map(async s=>{let o=r(s),a=o.fsPath.replace(/\\/g,"/");for(let u of this._filters.values())for(let c of u)if(!(c.scheme!==void 0&&c.scheme!==o.scheme)){if(c.matcher.match(a)){if(c.kind===void 0)return!0;let l=await this.getFileType(o);if(l===void 0)return this._client.error(`Failed to determine file type for ${o.toString()}.`),!0;if(l===bn.FileType.File&&c.kind===ki.FileOperationPatternKind.file||l===bn.FileType.Directory&&c.kind===ki.FileOperationPatternKind.folder)return!0}else if(c.kind===ki.FileOperationPatternKind.folder&&await t.getFileType(o)===bn.FileType.Directory&&c.matcher.match(`${a}/`))return!0}return!1})),i=e.files.filter((s,o)=>n[o]);return{...e,files:i}}static async getFileType(e){try{return(await bn.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){let r={dot:!0};return e?.ignoreCase===!0&&(r.nocase=!0),r}},qd=class extends Pu{constructor(e,r,n,i,s,o,a){super(e,r,n,i,s),this._notificationType=n,this._accessUri=o,this._createParams=a}async send(e){let r=await this.filter(e,this._accessUri);if(r.files.length){let n=async i=>this._client.sendNotification(this._notificationType,this._createParams(i));return this.doSend(r,n)}}},Od=class extends qd{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){let r=e.fsPath;if(this._fsPathFileTypes.has(r))return this._fsPathFileTypes.get(r);let n=await Pu.getFileType(e);return n&&this._fsPathFileTypes.set(r,n),n}async cacheFileTypes(e,r){await this.filter(e,r)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),this.filterSize()===0&&this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}clear(){super.clear(),this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}},Dv=class extends qd{constructor(e){super(e,bn.workspace.onDidCreateFiles,ki.DidCreateFilesNotification.type,"didCreate","didCreate",r=>r,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,r){let n=this._client.middleware.workspace;return n?.didCreateFiles?n.didCreateFiles(e,r):r(e)}};Wr.DidCreateFilesFeature=Dv;var Ev=class extends Od{constructor(e){super(e,bn.workspace.onDidRenameFiles,ki.DidRenameFilesNotification.type,"didRename","didRename",r=>r.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=bn.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,r=>r.oldUri))}doSend(e,r){this.clearFileTypeCache();let n=this._client.middleware.workspace;return n?.didRenameFiles?n.didRenameFiles(e,r):r(e)}};Wr.DidRenameFilesFeature=Ev;var Pv=class extends Od{constructor(e){super(e,bn.workspace.onDidDeleteFiles,ki.DidDeleteFilesNotification.type,"didDelete","didDelete",r=>r,e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=bn.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,r=>r))}doSend(e,r){this.clearFileTypeCache();let n=this._client.middleware.workspace;return n?.didDeleteFiles?n.didDeleteFiles(e,r):r(e)}};Wr.DidDeleteFilesFeature=Pv;var Tu=class extends Pu{constructor(e,r,n,i,s,o,a){super(e,r,n,i,s),this._requestType=n,this._accessUri=o,this._createParams=a}async send(e){let r=this.waitUntil(e);e.waitUntil(r)}async waitUntil(e){let r=await this.filter(e,this._accessUri);if(r.files.length){let n=i=>this._client.sendRequest(this._requestType,this._createParams(i),i.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(r,n)}else return}},Tv=class extends Tu{constructor(e){super(e,bn.workspace.onWillCreateFiles,ki.WillCreateFilesRequest.type,"willCreate","willCreate",r=>r,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,r){let n=this._client.middleware.workspace;return n?.willCreateFiles?n.willCreateFiles(e,r):r(e)}};Wr.WillCreateFilesFeature=Tv;var qv=class extends Tu{constructor(e){super(e,bn.workspace.onWillRenameFiles,ki.WillRenameFilesRequest.type,"willRename","willRename",r=>r.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,r){let n=this._client.middleware.workspace;return n?.willRenameFiles?n.willRenameFiles(e,r):r(e)}};Wr.WillRenameFilesFeature=qv;var Ov=class extends Tu{constructor(e){super(e,bn.workspace.onWillDeleteFiles,ki.WillDeleteFilesRequest.type,"willDelete","willDelete",r=>r,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,r){let n=this._client.middleware.workspace;return n?.willDeleteFiles?n.willDeleteFiles(e,r):r(e)}};Wr.WillDeleteFilesFeature=Ov});var _P=_(Md=>{"use strict";Object.defineProperty(Md,"__esModule",{value:!0});Md.LinkedEditingFeature=void 0;var x2=require("vscode"),Mv=ne(),xv=Le(),kv=class extends xv.TextDocumentLanguageFeature{constructor(e){super(e,Mv.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let r=(0,xv.ensure)((0,xv.ensure)(e,"textDocument"),"linkedEditingRange");r.dynamicRegistration=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.linkedEditingRangeProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r=e.documentSelector,n={provideLinkedEditingRanges:(i,s,o)=>{let a=this._client,u=(l,f,d)=>a.sendRequest(Mv.LinkedEditingRangeRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,f),d).then(p=>d.isCancellationRequested?null:a.protocol2CodeConverter.asLinkedEditingRanges(p,d),p=>a.handleFailedRequest(Mv.LinkedEditingRangeRequest.type,d,p,null)),c=a.middleware;return c.provideLinkedEditingRange?c.provideLinkedEditingRange(i,s,o,u):u(i,s,o)}};return[this.registerProvider(r,n),n]}registerProvider(e,r){return x2.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),r)}};Md.LinkedEditingFeature=kv});var bP=_(xd=>{"use strict";Object.defineProperty(xd,"__esModule",{value:!0});xd.TypeHierarchyFeature=void 0;var k2=require("vscode"),to=ne(),Fv=Le(),Iv=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareTypeHierarchy(e,r,n){let i=this.client,s=this.middleware,o=(a,u,c)=>{let l=i.code2ProtocolConverter.asTextDocumentPositionParams(a,u);return i.sendRequest(to.TypeHierarchyPrepareRequest.type,l,c).then(f=>c.isCancellationRequested?null:i.protocol2CodeConverter.asTypeHierarchyItems(f,c),f=>i.handleFailedRequest(to.TypeHierarchyPrepareRequest.type,c,f,null))};return s.prepareTypeHierarchy?s.prepareTypeHierarchy(e,r,n,o):o(e,r,n)}provideTypeHierarchySupertypes(e,r){let n=this.client,i=this.middleware,s=(o,a)=>{let u={item:n.code2ProtocolConverter.asTypeHierarchyItem(o)};return n.sendRequest(to.TypeHierarchySupertypesRequest.type,u,a).then(c=>a.isCancellationRequested?null:n.protocol2CodeConverter.asTypeHierarchyItems(c,a),c=>n.handleFailedRequest(to.TypeHierarchySupertypesRequest.type,a,c,null))};return i.provideTypeHierarchySupertypes?i.provideTypeHierarchySupertypes(e,r,s):s(e,r)}provideTypeHierarchySubtypes(e,r){let n=this.client,i=this.middleware,s=(o,a)=>{let u={item:n.code2ProtocolConverter.asTypeHierarchyItem(o)};return n.sendRequest(to.TypeHierarchySubtypesRequest.type,u,a).then(c=>a.isCancellationRequested?null:n.protocol2CodeConverter.asTypeHierarchyItems(c,a),c=>n.handleFailedRequest(to.TypeHierarchySubtypesRequest.type,a,c,null))};return i.provideTypeHierarchySubtypes?i.provideTypeHierarchySubtypes(e,r,s):s(e,r)}},Av=class extends Fv.TextDocumentLanguageFeature{constructor(e){super(e,to.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){let r=(0,Fv.ensure)((0,Fv.ensure)(e,"textDocument"),"typeHierarchy");r.dynamicRegistration=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.typeHierarchyProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r=this._client,n=new Iv(r);return[k2.languages.registerTypeHierarchyProvider(r.protocol2CodeConverter.asDocumentSelector(e.documentSelector),n),n]}};xd.TypeHierarchyFeature=Av});var SP=_(Fd=>{"use strict";Object.defineProperty(Fd,"__esModule",{value:!0});Fd.InlineValueFeature=void 0;var wP=require("vscode"),kd=ne(),qu=Le(),Nv=class extends qu.TextDocumentLanguageFeature{constructor(e){super(e,kd.InlineValueRequest.type)}fillClientCapabilities(e){(0,qu.ensure)((0,qu.ensure)(e,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,qu.ensure)((0,qu.ensure)(e,"workspace"),"inlineValue").refreshSupport=!0}initialize(e,r){this._client.onRequest(kd.InlineValueRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeInlineValues.fire()});let[n,i]=this.getRegistration(r,e.inlineValueProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r=e.documentSelector,n=new wP.EventEmitter,i={onDidChangeInlineValues:n.event,provideInlineValues:(s,o,a,u)=>{let c=this._client,l=(d,p,g,b)=>{let C={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(d),range:c.code2ProtocolConverter.asRange(p),context:c.code2ProtocolConverter.asInlineValueContext(g)};return c.sendRequest(kd.InlineValueRequest.type,C,b).then(D=>b.isCancellationRequested?null:c.protocol2CodeConverter.asInlineValues(D,b),D=>c.handleFailedRequest(kd.InlineValueRequest.type,b,D,null))},f=c.middleware;return f.provideInlineValues?f.provideInlineValues(s,o,a,u,l):l(s,o,a,u)}};return[this.registerProvider(r,i),{provider:i,onDidChangeInlineValues:n}]}registerProvider(e,r){return wP.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),r)}};Fd.InlineValueFeature=Nv});var CP=_(Id=>{"use strict";Object.defineProperty(Id,"__esModule",{value:!0});Id.InlayHintsFeature=void 0;var RP=require("vscode"),na=ne(),Ou=Le(),Lv=class extends Ou.TextDocumentLanguageFeature{constructor(e){super(e,na.InlayHintRequest.type)}fillClientCapabilities(e){let r=(0,Ou.ensure)((0,Ou.ensure)(e,"textDocument"),"inlayHint");r.dynamicRegistration=!0,r.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,Ou.ensure)((0,Ou.ensure)(e,"workspace"),"inlayHint").refreshSupport=!0}initialize(e,r){this._client.onRequest(na.InlayHintRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeInlayHints.fire()});let[n,i]=this.getRegistration(r,e.inlayHintProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r=e.documentSelector,n=new RP.EventEmitter,i={onDidChangeInlayHints:n.event,provideInlayHints:(s,o,a)=>{let u=this._client,c=async(f,d,p)=>{let g={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(f),range:u.code2ProtocolConverter.asRange(d)};try{let b=await u.sendRequest(na.InlayHintRequest.type,g,p);return p.isCancellationRequested?null:u.protocol2CodeConverter.asInlayHints(b,p)}catch(b){return u.handleFailedRequest(na.InlayHintRequest.type,p,b,null)}},l=u.middleware;return l.provideInlayHints?l.provideInlayHints(s,o,a,c):c(s,o,a)}};return i.resolveInlayHint=e.resolveProvider===!0?(s,o)=>{let a=this._client,u=async(l,f)=>{try{let d=await a.sendRequest(na.InlayHintResolveRequest.type,a.code2ProtocolConverter.asInlayHint(l),f);if(f.isCancellationRequested)return null;let p=a.protocol2CodeConverter.asInlayHint(d,f);return f.isCancellationRequested?null:p}catch(d){return a.handleFailedRequest(na.InlayHintResolveRequest.type,f,d,null)}},c=a.middleware;return c.resolveInlayHint?c.resolveInlayHint(s,o,u):u(s,o)}:void 0,[this.registerProvider(r,i),{provider:i,onDidChangeInlayHints:n}]}registerProvider(e,r){return RP.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),r)}};Id.InlayHintsFeature=Lv});var DP=_(Ad=>{"use strict";Object.defineProperty(Ad,"__esModule",{value:!0});Ad.InlineCompletionItemFeature=void 0;var F2=require("vscode"),jv=ne(),$v=Le(),I2=gt(),Wv=class extends $v.TextDocumentLanguageFeature{constructor(e){super(e,jv.InlineCompletionRequest.type)}fillClientCapabilities(e){let r=(0,$v.ensure)((0,$v.ensure)(e,"textDocument"),"inlineCompletion");r.dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.inlineCompletionProvider);n&&this.register({id:I2.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.documentSelector,n={provideInlineCompletionItems:(i,s,o,a)=>{let u=this._client,c=this._client.middleware,l=(f,d,p,g)=>u.sendRequest(jv.InlineCompletionRequest.type,u.code2ProtocolConverter.asInlineCompletionParams(f,d,p),g).then(b=>g.isCancellationRequested?null:u.protocol2CodeConverter.asInlineCompletionResult(b,g),b=>u.handleFailedRequest(jv.InlineCompletionRequest.type,g,b,null));return c.provideInlineCompletionItems?c.provideInlineCompletionItems(i,s,o,a,l):l(i,s,o,a)}};return[F2.languages.registerInlineCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(r),n),n]}};Ad.InlineCompletionItemFeature=Wv});var Vv=_(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.ProposedFeatures=Bt.BaseLanguageClient=Bt.MessageTransports=Bt.SuspendMode=Bt.State=Bt.CloseAction=Bt.ErrorAction=Bt.RevealOutputChannelOn=void 0;var Ye=require("vscode"),B=ne(),A2=tE(),N2=iE(),Wn=gn(),Nd=Ul(),EP=gt(),L2=Bm(),$n=Le(),j2=fy(),PP=IE(),TP=NE(),ia=LE(),$2=jE(),W2=$E(),H2=WE(),U2=UE(),z2=zE(),K2=Ny(),B2=BE(),V2=VE(),G2=GE(),Y2=XE(),Hv=JE(),X2=ZE(),J2=eP(),Q2=rP(),Z2=nP(),e$=iP(),t$=sP(),r$=oP(),n$=aP(),i$=cP(),s$=lP(),o$=dP(),a$=hP(),u$=gP(),c$=pP(),sa=vP(),l$=_P(),d$=bP(),f$=SP(),h$=CP(),g$=DP(),ro;(function(t){t[t.Debug=0]="Debug",t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error",t[t.Never=4]="Never"})(ro||(Bt.RevealOutputChannelOn=ro={}));var xu;(function(t){t[t.Continue=1]="Continue",t[t.Shutdown=2]="Shutdown"})(xu||(Bt.ErrorAction=xu={}));var as;(function(t){t[t.DoNotRestart=1]="DoNotRestart",t[t.Restart=2]="Restart"})(as||(Bt.CloseAction=as={}));var Mu;(function(t){t[t.Stopped=1]="Stopped",t[t.Starting=3]="Starting",t[t.Running=2]="Running"})(Mu||(Bt.State=Mu={}));var qP;(function(t){t.off="off",t.on="on"})(qP||(Bt.SuspendMode=qP={}));var Uv;(function(t){function e(r){return r==null?!1:typeof r=="boolean"||typeof r=="object"&&r!==null&&Wn.stringArray(r.enabledCommands)?r:!1}t.sanitizeIsTrusted=e})(Uv||(Uv={}));var zv=class{constructor(e,r){this.client=e,this.maxRestartCount=r,this.restarts=[]}error(e,r,n){return n&&n<=3?{action:xu.Continue}:{action:xu.Shutdown}}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?{action:as.Restart}:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?{action:as.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}:(this.restarts.shift(),{action:as.Restart})}},Te;(function(t){t.Initial="initial",t.Starting="starting",t.StartFailed="startFailed",t.Running="running",t.Stopping="stopping",t.Stopped="stopped"})(Te||(Te={}));var OP;(function(t){function e(r){return r&&B.MessageReader.is(r.reader)&&B.MessageWriter.is(r.writer)}t.is=e})(OP||(Bt.MessageTransports=OP={}));var ku=class t{constructor(e,r,n){this._traceFormat=B.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new Nd.Semaphore(1),this._id=e,this._name=r,n=n||{};let i={isTrusted:!1,supportHtml:!1};n.markdown!==void 0&&(i.isTrusted=Uv.sanitizeIsTrusted(n.markdown.isTrusted),i.supportHtml=n.markdown.supportHtml===!0),this._clientOptions={documentSelector:n.documentSelector??[],synchronize:n.synchronize??{},diagnosticCollectionName:n.diagnosticCollectionName,outputChannelName:n.outputChannelName??this._name,revealOutputChannelOn:n.revealOutputChannelOn??ro.Error,stdioEncoding:n.stdioEncoding??"utf8",initializationOptions:n.initializationOptions,initializationFailedHandler:n.initializationFailedHandler,progressOnInitialization:!!n.progressOnInitialization,errorHandler:n.errorHandler??this.createDefaultErrorHandler(n.connectionOptions?.maxRestartCount),middleware:n.middleware??{},uriConverters:n.uriConverters,workspaceFolder:n.workspaceFolder,connectionOptions:n.connectionOptions,markdown:i,diagnosticPullOptions:n.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:n.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=Te.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,n.outputChannel?(this._outputChannel=n.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=n.traceOutputChannel,this._diagnostics=void 0,this._pendingOpenNotifications=new Set,this._pendingChangeSemaphore=new Nd.Semaphore(1),this._pendingChangeDelayer=new Nd.Delayer(250),this._fileEvents=[],this._fileEventDelayer=new Nd.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new B.Emitter,this._stateChangeEmitter=new B.Emitter,this._trace=B.Trace.Off,this._tracer={log:(s,o)=>{Wn.string(s)?this.logTrace(s,o):this.logObjectTrace(s)}},this._c2p=A2.createConverter(n.uriConverters?n.uriConverters.code2Protocol:void 0),this._p2c=N2.createConverter(n.uriConverters?n.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=Ye.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(e){let r=this.getPublicState();this._state=e;let n=this.getPublicState();n!==r&&this._stateChangeEmitter.fire({oldState:r,newState:n})}getPublicState(){switch(this.$state){case Te.Starting:return Mu.Starting;case Te.Running:return Mu.Running;default:return Mu.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(e,...r){if(this.$state===Te.StartFailed||this.$state===Te.Stopping||this.$state===Te.Stopped)return Promise.reject(new B.ResponseError(B.ErrorCodes.ConnectionInactive,"Client is not running"));let n=await this.$start();this._didChangeTextDocumentFeature.syncKind===B.TextDocumentSyncKind.Full&&await this.sendPendingFullTextDocumentChanges(n);let i=this._clientOptions.middleware?.sendRequest;if(i!==void 0){let s,o;return r.length===1?B.CancellationToken.is(r[0])?o=r[0]:s=r[0]:r.length===2&&(s=r[0],o=r[1]),i(e,s,o,(a,u,c)=>{let l=[];return u!==void 0&&l.push(u),c!==void 0&&l.push(c),n.sendRequest(a,...l)})}else return n.sendRequest(e,...r)}onRequest(e,r){let n=typeof e=="string"?e:e.method;this._requestHandlers.set(n,r);let i=this.activeConnection(),s;return i!==void 0?(this._requestDisposables.set(n,i.onRequest(e,r)),s={dispose:()=>{let o=this._requestDisposables.get(n);o!==void 0&&(o.dispose(),this._requestDisposables.delete(n))}}):(this._pendingRequestHandlers.set(n,r),s={dispose:()=>{this._pendingRequestHandlers.delete(n);let o=this._requestDisposables.get(n);o!==void 0&&(o.dispose(),this._requestDisposables.delete(n))}}),{dispose:()=>{this._requestHandlers.delete(n),s.dispose()}}}async sendNotification(e,r){if(this.$state===Te.StartFailed||this.$state===Te.Stopping||this.$state===Te.Stopped)return Promise.reject(new B.ResponseError(B.ErrorCodes.ConnectionInactive,"Client is not running"));let n=this._didChangeTextDocumentFeature.syncKind===B.TextDocumentSyncKind.Full,i;n&&typeof e!="string"&&e.method===B.DidOpenTextDocumentNotification.method&&(i=r?.textDocument.uri,this._pendingOpenNotifications.add(i));let s=await this.$start();n&&await this.sendPendingFullTextDocumentChanges(s),i!==void 0&&this._pendingOpenNotifications.delete(i);let o=this._clientOptions.middleware?.sendNotification;return o?o(e,s.sendNotification.bind(s),r):s.sendNotification(e,r)}onNotification(e,r){let n=typeof e=="string"?e:e.method;this._notificationHandlers.set(n,r);let i=this.activeConnection(),s;return i!==void 0?(this._notificationDisposables.set(n,i.onNotification(e,r)),s={dispose:()=>{let o=this._notificationDisposables.get(n);o!==void 0&&(o.dispose(),this._notificationDisposables.delete(n))}}):(this._pendingNotificationHandlers.set(n,r),s={dispose:()=>{this._pendingNotificationHandlers.delete(n);let o=this._notificationDisposables.get(n);o!==void 0&&(o.dispose(),this._notificationDisposables.delete(n))}}),{dispose:()=>{this._notificationHandlers.delete(n),s.dispose()}}}async sendProgress(e,r,n){if(this.$state===Te.StartFailed||this.$state===Te.Stopping||this.$state===Te.Stopped)return Promise.reject(new B.ResponseError(B.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(e,r,n)}catch(i){throw this.error(`Sending progress for token ${r} failed.`,i),i}}onProgress(e,r,n){this._progressHandlers.set(r,{type:e,handler:n});let i=this.activeConnection(),s,o=this._clientOptions.middleware?.handleWorkDoneProgress,a=B.WorkDoneProgress.is(e)&&o!==void 0?u=>{o(r,u,()=>n(u))}:n;return i!==void 0?(this._progressDisposables.set(r,i.onProgress(e,r,a)),s={dispose:()=>{let u=this._progressDisposables.get(r);u!==void 0&&(u.dispose(),this._progressDisposables.delete(r))}}):(this._pendingProgressHandlers.set(r,{type:e,handler:n}),s={dispose:()=>{this._pendingProgressHandlers.delete(r);let u=this._progressDisposables.get(r);u!==void 0&&(u.dispose(),this._progressDisposables.delete(r))}}),{dispose:()=>{this._progressHandlers.delete(r),s.dispose()}}}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new zv(this,e??4)}async setTrace(e){this._trace=e;let r=this.activeConnection();r!==void 0&&await r.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(e){if(e instanceof B.ResponseError){let r=e;return`  Message: ${r.message}
  Code: ${r.code} ${r.data?`
`+r.data.toString():""}`}return e instanceof Error?Wn.string(e.stack)?e.stack:e.message:Wn.string(e)?e:e.toString()}debug(e,r,n=!0){this.logOutputMessage(B.MessageType.Debug,ro.Debug,"Debug",e,r,n)}info(e,r,n=!0){this.logOutputMessage(B.MessageType.Info,ro.Info,"Info",e,r,n)}warn(e,r,n=!0){this.logOutputMessage(B.MessageType.Warning,ro.Warn,"Warn",e,r,n)}error(e,r,n=!0){this.logOutputMessage(B.MessageType.Error,ro.Error,"Error",e,r,n)}logOutputMessage(e,r,n,i,s,o){this.outputChannel.appendLine(`[${n.padEnd(5)} - ${new Date().toLocaleTimeString()}] ${i}`),s!=null&&this.outputChannel.appendLine(this.data2String(s)),(o==="force"||o&&this._clientOptions.revealOutputChannelOn<=r)&&this.showNotificationMessage(e,i)}showNotificationMessage(e,r){r=r??"A request has failed. See the output for more information.",(e===B.MessageType.Error?Ye.window.showErrorMessage:e===B.MessageType.Warning?Ye.window.showWarningMessage:Ye.window.showInformationMessage)(r,"Go to output").then(i=>{i!==void 0&&this.outputChannel.show(!0)})}logTrace(e,r){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.traceOutputChannel.appendLine(this.data2String(r))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.$state===Te.Initial||this.$state===Te.Stopping||this.$state===Te.Stopped}needsStop(){return this.$state===Te.Starting||this.$state===Te.Running}activeConnection(){return this.$state===Te.Running&&this._connection!==void 0?this._connection:void 0}isRunning(){return this.$state===Te.Running}async start(){if(this._disposed==="disposing"||this._disposed==="disposed")throw new Error("Client got disposed and can't be restarted.");if(this.$state===Te.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(this._onStart!==void 0)return this._onStart;let[e,r,n]=this.createOnStartPromise();this._onStart=e,this._diagnostics===void 0&&(this._diagnostics=this._clientOptions.diagnosticCollectionName?Ye.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):Ye.languages.createDiagnosticCollection());for(let[i,s]of this._notificationHandlers)this._pendingNotificationHandlers.has(i)||this._pendingNotificationHandlers.set(i,s);for(let[i,s]of this._requestHandlers)this._pendingRequestHandlers.has(i)||this._pendingRequestHandlers.set(i,s);for(let[i,s]of this._progressHandlers)this._pendingProgressHandlers.has(i)||this._pendingProgressHandlers.set(i,s);this.$state=Te.Starting;try{let i=await this.createConnection();i.onNotification(B.LogMessageNotification.type,s=>{switch(s.type){case B.MessageType.Error:this.error(s.message,void 0,!1);break;case B.MessageType.Warning:this.warn(s.message,void 0,!1);break;case B.MessageType.Info:this.info(s.message,void 0,!1);break;case B.MessageType.Debug:this.debug(s.message,void 0,!1);break;default:this.outputChannel.appendLine(s.message)}}),i.onNotification(B.ShowMessageNotification.type,s=>{switch(s.type){case B.MessageType.Error:Ye.window.showErrorMessage(s.message);break;case B.MessageType.Warning:Ye.window.showWarningMessage(s.message);break;case B.MessageType.Info:Ye.window.showInformationMessage(s.message);break;default:Ye.window.showInformationMessage(s.message)}}),i.onRequest(B.ShowMessageRequest.type,s=>{let o;switch(s.type){case B.MessageType.Error:o=Ye.window.showErrorMessage;break;case B.MessageType.Warning:o=Ye.window.showWarningMessage;break;case B.MessageType.Info:o=Ye.window.showInformationMessage;break;default:o=Ye.window.showInformationMessage}let a=s.actions||[];return o(s.message,...a)}),i.onNotification(B.TelemetryEventNotification.type,s=>{this._telemetryEmitter.fire(s)}),i.onRequest(B.ShowDocumentRequest.type,async s=>{let o=async u=>{let c=this.protocol2CodeConverter.asUri(u.uri);try{if(u.external===!0)return{success:await Ye.env.openExternal(c)};{let l={};return u.selection!==void 0&&(l.selection=this.protocol2CodeConverter.asRange(u.selection)),u.takeFocus===void 0||u.takeFocus===!1?l.preserveFocus=!0:u.takeFocus===!0&&(l.preserveFocus=!1),await Ye.window.showTextDocument(c,l),{success:!0}}}catch{return{success:!1}}},a=this._clientOptions.middleware.window?.showDocument;return a!==void 0?a(s,o):o(s)}),i.listen(),await this.initialize(i),r()}catch(i){this.$state=Te.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,i,"force"),n(i)}return this._onStart}createOnStartPromise(){let e,r;return[new Promise((i,s)=>{e=i,r=s}),e,r]}async initialize(e){this.refreshTrace(e,!1);let r=this._clientOptions.initializationOptions,[n,i]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],s={processId:null,clientInfo:{name:Ye.env.appName,version:Ye.version},locale:this.getLocale(),rootPath:n||null,rootUri:n?this._c2p.asUri(Ye.Uri.file(n)):null,capabilities:this.computeClientCapabilities(),initializationOptions:Wn.func(r)?r():r,trace:B.Trace.toString(this._trace),workspaceFolders:i};if(this.fillInitializeParams(s),this._clientOptions.progressOnInitialization){let o=EP.generateUuid(),a=new L2.ProgressPart(e,o);s.workDoneToken=o;try{let u=await this.doInitialize(e,s);return a.done(),u}catch(u){throw a.cancel(),u}}else return this.doInitialize(e,s)}async doInitialize(e,r){try{let n=await e.initialize(r);if(n.capabilities.positionEncoding!==void 0&&n.capabilities.positionEncoding!==B.PositionEncodingKind.UTF16)throw new Error(`Unsupported position encoding (${n.capabilities.positionEncoding}) received from server ${this.name}`);this._initializeResult=n,this.$state=Te.Running;let i;Wn.number(n.capabilities.textDocumentSync)?n.capabilities.textDocumentSync===B.TextDocumentSyncKind.None?i={openClose:!1,change:B.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:n.capabilities.textDocumentSync,save:{includeText:!1}}:n.capabilities.textDocumentSync!==void 0&&n.capabilities.textDocumentSync!==null&&(i=n.capabilities.textDocumentSync),this._capabilities=Object.assign({},n.capabilities,{resolvedTextDocumentSync:i}),e.onNotification(B.PublishDiagnosticsNotification.type,s=>this.handleDiagnostics(s)),e.onRequest(B.RegistrationRequest.type,s=>this.handleRegistrationRequest(s)),e.onRequest("client/registerFeature",s=>this.handleRegistrationRequest(s)),e.onRequest(B.UnregistrationRequest.type,s=>this.handleUnregistrationRequest(s)),e.onRequest("client/unregisterFeature",s=>this.handleUnregistrationRequest(s)),e.onRequest(B.ApplyWorkspaceEditRequest.type,s=>this.handleApplyWorkspaceEdit(s));for(let[s,o]of this._pendingNotificationHandlers)this._notificationDisposables.set(s,e.onNotification(s,o));this._pendingNotificationHandlers.clear();for(let[s,o]of this._pendingRequestHandlers)this._requestDisposables.set(s,e.onRequest(s,o));this._pendingRequestHandlers.clear();for(let[s,o]of this._pendingProgressHandlers)this._progressDisposables.set(s,e.onProgress(o.type,s,o.handler));return this._pendingProgressHandlers.clear(),await e.sendNotification(B.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),n}catch(n){throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(n)?this.initialize(e):this.stop():n instanceof B.ResponseError&&n.data&&n.data.retry?Ye.window.showErrorMessage(n.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):this.stop()}):(n&&n.message&&Ye.window.showErrorMessage(n.message),this.error("Server initialization failed.",n),this.stop()),n}}_clientGetRootPath(){let e=Ye.workspace.workspaceFolders;if(!e||e.length===0)return;let r=e[0];if(r.uri.scheme==="file")return r.uri.fsPath}stop(e=2e3){return this.shutdown("stop",e)}dispose(e=2e3){try{return this._disposed="disposing",this.stop(e)}finally{this._disposed="disposed"}}async shutdown(e,r){if(this.$state===Te.Stopped||this.$state===Te.Initial)return;if(this.$state===Te.Stopping){if(this._onStop!==void 0)return this._onStop;throw new Error("Client is stopping but no stop promise available.")}let n=this.activeConnection();if(n===void 0||this.$state!==Te.Running)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=Te.Stopping,this.cleanUp(e);let i=new Promise(o=>{(0,B.RAL)().timer.setTimeout(o,r)}),s=(async o=>(await o.shutdown(),await o.exit(),o))(n);return this._onStop=Promise.race([i,s]).then(o=>{if(o!==void 0)o.end(),o.dispose();else throw this.error("Stopping server timed out",void 0,!1),new Error("Stopping the server timed out")},o=>{throw this.error("Stopping server failed",o,!1),o}).finally(()=>{this.$state=Te.Stopped,e==="stop"&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()})}cleanUp(e){this._fileEvents=[],this._fileEventDelayer.cancel();let r=this._listeners.splice(0,this._listeners.length);for(let n of r)n.dispose();this._syncedDocuments&&this._syncedDocuments.clear();for(let n of Array.from(this._features.entries()).map(i=>i[1]).reverse())n.clear();e==="stop"&&this._diagnostics!==void 0&&(this._diagnostics.dispose(),this._diagnostics=void 0),this._idleInterval!==void 0&&(this._idleInterval.dispose(),this._idleInterval=void 0)}cleanUpChannel(){this._outputChannel!==void 0&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){let r=this;async function n(s){return r._fileEvents.push(s),r._fileEventDelayer.trigger(async()=>{await r.sendNotification(B.DidChangeWatchedFilesNotification.type,{changes:r._fileEvents}),r._fileEvents=[]})}let i=this.clientOptions.middleware?.workspace;(i?.didChangeWatchedFile?i.didChangeWatchedFile(e,n):n(e)).catch(s=>{r.error("Notify file events failed.",s)})}async sendPendingFullTextDocumentChanges(e){return this._pendingChangeSemaphore.lock(async()=>{try{let r=this._didChangeTextDocumentFeature.getPendingDocumentChanges(this._pendingOpenNotifications);if(r.length===0)return;for(let n of r){let i=this.code2ProtocolConverter.asChangeTextDocumentParams(n);await e.sendNotification(B.DidChangeTextDocumentNotification.type,i),this._didChangeTextDocumentFeature.notificationSent(n,B.DidChangeTextDocumentNotification.type,i)}}catch(r){throw this.error("Sending pending changes failed",r,!1),r}})}triggerPendingChangeDelivery(){this._pendingChangeDelayer.trigger(async()=>{let e=this.activeConnection();if(e===void 0){this.triggerPendingChangeDelivery();return}await this.sendPendingFullTextDocumentChanges(e)}).catch(e=>this.error("Delivering pending changes failed",e,!1))}handleDiagnostics(e){if(!this._diagnostics)return;let r=e.uri;this._diagnosticQueueState.state==="busy"&&this._diagnosticQueueState.document===r&&this._diagnosticQueueState.tokenSource.cancel(),this._diagnosticQueue.set(e.uri,e.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,B.RAL)().timer.setImmediate(()=>{this.workDiagnosticQueue()})}workDiagnosticQueue(){if(this._diagnosticQueueState.state==="busy")return;let e=this._diagnosticQueue.entries().next();if(e.done===!0)return;let[r,n]=e.value;this._diagnosticQueue.delete(r);let i=new Ye.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:r,tokenSource:i},this._p2c.asDiagnostics(n,i.token).then(s=>{if(!i.token.isCancellationRequested){let o=this._p2c.asUri(r),a=this.clientOptions.middleware;a.handleDiagnostics?a.handleDiagnostics(o,s,(u,c)=>this.setDiagnostics(u,c)):this.setDiagnostics(o,s)}}).finally(()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()})}setDiagnostics(e,r){this._diagnostics&&this._diagnostics.set(e,r)}getLocale(){return Ye.env.language}async $start(){if(this.$state===Te.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();let e=this.activeConnection();if(e===void 0)throw new Error("Starting server failed");return e}async createConnection(){let e=(i,s,o)=>{this.handleConnectionError(i,s,o).catch(a=>this.error("Handling connection error failed",a))},r=()=>{this.handleConnectionClosed().catch(i=>this.error("Handling connection close failed",i))},n=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=p$(n.reader,n.writer,e,r,this._clientOptions.connectionOptions),this._connection}async handleConnectionClosed(){if(this.$state===Te.Stopped)return;try{this._connection!==void 0&&this._connection.dispose()}catch{}let e={action:as.DoNotRestart};if(this.$state!==Te.Stopping)try{e=await this._clientOptions.errorHandler.closed()}catch{}this._connection=void 0,e.action===as.DoNotRestart?(this.error(e.message??"Connection to server got closed. Server will not be restarted.",void 0,e.handled===!0?!1:"force"),this.cleanUp("stop"),this.$state===Te.Starting?this.$state=Te.StartFailed:this.$state=Te.Stopped,this._onStop=Promise.resolve(),this._onStart=void 0):e.action===as.Restart&&(this.info(e.message??"Connection to server got closed. Server will restart.",!e.handled),this.cleanUp("restart"),this.$state=Te.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch(r=>this.error("Restarting server failed",r,"force")))}async handleConnectionError(e,r,n){let i=await this._clientOptions.errorHandler.error(e,r,n);i.action===xu.Shutdown?(this.error(i.message??`Client ${this._name}: connection to server is erroring.
${e.message}
Shutting down server.`,void 0,i.handled===!0?!1:"force"),this.stop().catch(s=>{this.error("Stopping server failed",s,!1)})):this.error(i.message??`Client ${this._name}: connection to server is erroring.
${e.message}`,void 0,i.handled===!0?!1:"force")}hookConfigurationChanged(e){this._listeners.push(Ye.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)}))}refreshTrace(e,r=!1){let n=Ye.workspace.getConfiguration(this._id),i=B.Trace.Off,s=B.TraceFormat.Text;if(n){let o=n.get("trace.server","off");typeof o=="string"?i=B.Trace.fromString(o):(i=B.Trace.fromString(n.get("trace.server.verbosity","off")),s=B.TraceFormat.fromString(n.get("trace.server.format","text")))}this._trace=i,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:r,traceFormat:this._traceFormat}).catch(o=>{this.error("Updating trace failed with error",o,!1)})}hookFileEvents(e){let r=this._clientOptions.synchronize.fileEvents;if(!r)return;let n;Wn.array(r)?n=r:n=[r],n&&this._dynamicFeatures.get(B.DidChangeWatchedFilesNotification.type.method).registerRaw(EP.generateUuid(),n)}registerFeatures(e){for(let r of e)this.registerFeature(r)}registerFeature(e){if(this._features.push(e),$n.DynamicFeature.is(e)){let r=e.registrationType;this._dynamicFeatures.set(r.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}hasDedicatedTextSynchronizationFeature(e){let r=this.getFeature(B.NotebookDocumentSyncRegistrationType.method);return r===void 0||!(r instanceof PP.NotebookDocumentSyncFeature)?!1:r.handles(e)}registerBuiltinFeatures(){let e=new Map;this.registerFeature(new TP.ConfigurationFeature(this)),this.registerFeature(new ia.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this._didChangeTextDocumentFeature=new ia.DidChangeTextDocumentFeature(this,e),this._didChangeTextDocumentFeature.onPendingChangeAdded(()=>{this.triggerPendingChangeDelivery()}),this.registerFeature(this._didChangeTextDocumentFeature),this.registerFeature(new ia.WillSaveFeature(this)),this.registerFeature(new ia.WillSaveWaitUntilFeature(this)),this.registerFeature(new ia.DidSaveTextDocumentFeature(this)),this.registerFeature(new ia.DidCloseTextDocumentFeature(this,this._syncedDocuments,e)),this.registerFeature(new Z2.FileSystemWatcherFeature(this,r=>this.notifyFileEvent(r))),this.registerFeature(new $2.CompletionItemFeature(this)),this.registerFeature(new W2.HoverFeature(this)),this.registerFeature(new U2.SignatureHelpFeature(this)),this.registerFeature(new H2.DefinitionFeature(this)),this.registerFeature(new V2.ReferencesFeature(this)),this.registerFeature(new z2.DocumentHighlightFeature(this)),this.registerFeature(new K2.DocumentSymbolFeature(this)),this.registerFeature(new B2.WorkspaceSymbolFeature(this)),this.registerFeature(new G2.CodeActionFeature(this)),this.registerFeature(new Y2.CodeLensFeature(this)),this.registerFeature(new Hv.DocumentFormattingFeature(this)),this.registerFeature(new Hv.DocumentRangeFormattingFeature(this)),this.registerFeature(new Hv.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new X2.RenameFeature(this)),this.registerFeature(new J2.DocumentLinkFeature(this)),this.registerFeature(new Q2.ExecuteCommandFeature(this)),this.registerFeature(new TP.SyncConfigurationFeature(this)),this.registerFeature(new r$.TypeDefinitionFeature(this)),this.registerFeature(new t$.ImplementationFeature(this)),this.registerFeature(new e$.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&&this.registerFeature(new n$.WorkspaceFoldersFeature(this)),this.registerFeature(new i$.FoldingRangeFeature(this)),this.registerFeature(new s$.DeclarationFeature(this)),this.registerFeature(new o$.SelectionRangeFeature(this)),this.registerFeature(new a$.ProgressFeature(this)),this.registerFeature(new u$.CallHierarchyFeature(this)),this.registerFeature(new c$.SemanticTokensFeature(this)),this.registerFeature(new l$.LinkedEditingFeature(this)),this.registerFeature(new sa.DidCreateFilesFeature(this)),this.registerFeature(new sa.DidRenameFilesFeature(this)),this.registerFeature(new sa.DidDeleteFilesFeature(this)),this.registerFeature(new sa.WillCreateFilesFeature(this)),this.registerFeature(new sa.WillRenameFilesFeature(this)),this.registerFeature(new sa.WillDeleteFilesFeature(this)),this.registerFeature(new d$.TypeHierarchyFeature(this)),this.registerFeature(new f$.InlineValueFeature(this)),this.registerFeature(new h$.InlayHintsFeature(this)),this.registerFeature(new j2.DiagnosticFeature(this)),this.registerFeature(new PP.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(Bv.createAll(this))}fillInitializeParams(e){for(let r of this._features)Wn.func(r.fillInitializeParams)&&r.fillInitializeParams(e)}computeClientCapabilities(){let e={};(0,$n.ensure)(e,"workspace").applyEdit=!0;let r=(0,$n.ensure)((0,$n.ensure)(e,"workspace"),"workspaceEdit");r.documentChanges=!0,r.resourceOperations=[B.ResourceOperationKind.Create,B.ResourceOperationKind.Rename,B.ResourceOperationKind.Delete],r.failureHandling=B.FailureHandlingKind.TextOnlyTransactional,r.normalizesLineEndings=!0,r.changeAnnotationSupport={groupsOnLabel:!0};let n=(0,$n.ensure)((0,$n.ensure)(e,"textDocument"),"publishDiagnostics");n.relatedInformation=!0,n.versionSupport=!1,n.tagSupport={valueSet:[B.DiagnosticTag.Unnecessary,B.DiagnosticTag.Deprecated]},n.codeDescriptionSupport=!0,n.dataSupport=!0;let i=(0,$n.ensure)(e,"window"),s=(0,$n.ensure)(i,"showMessage");s.messageActionItem={additionalPropertiesSupport:!0};let o=(0,$n.ensure)(i,"showDocument");o.support=!0;let a=(0,$n.ensure)(e,"general");a.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(t.RequestsToCancelOnContentModified)},a.regularExpressions={engine:"ECMAScript",version:"ES2020"},a.markdown={parser:"marked",version:"1.1.0"},a.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml&&(a.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"]);for(let u of this._features)u.fillClientCapabilities(e);return e}initializeFeatures(e){let r=this._clientOptions.documentSelector;for(let n of this._features)Wn.func(n.preInitialize)&&n.preInitialize(this._capabilities,r);for(let n of this._features)n.initialize(this._capabilities,r)}async handleRegistrationRequest(e){let r=this.clientOptions.middleware?.handleRegisterCapability;return r?r(e,n=>this.doRegisterCapability(n)):this.doRegisterCapability(e)}async doRegisterCapability(e){if(!this.isRunning()){for(let r of e.registrations)this._ignoredRegistrations.add(r.id);return}for(let r of e.registrations){let n=this._dynamicFeatures.get(r.method);if(n===void 0)return Promise.reject(new Error(`No feature implementation for ${r.method} found. Registration failed.`));let i=r.registerOptions??{};i.documentSelector=i.documentSelector??this._clientOptions.documentSelector;let s={id:r.id,registerOptions:i};try{n.register(s)}catch(o){return Promise.reject(o)}}}async handleUnregistrationRequest(e){let r=this.clientOptions.middleware?.handleUnregisterCapability;return r?r(e,n=>this.doUnregisterCapability(n)):this.doUnregisterCapability(e)}async doUnregisterCapability(e){for(let r of e.unregisterations){if(this._ignoredRegistrations.has(r.id))continue;let n=this._dynamicFeatures.get(r.method);if(!n)return Promise.reject(new Error(`No feature implementation for ${r.method} found. Unregistration failed.`));n.unregister(r.id)}}async handleApplyWorkspaceEdit(e){let r=e.edit,n=await this.workspaceEditLock.lock(()=>this._p2c.asWorkspaceEdit(r)),i=new Map;Ye.workspace.textDocuments.forEach(o=>i.set(o.uri.toString(),o));let s=!1;if(r.documentChanges){for(let o of r.documentChanges)if(B.TextDocumentEdit.is(o)&&o.textDocument.version&&o.textDocument.version>=0){let a=this._p2c.asUri(o.textDocument.uri).toString(),u=i.get(a);if(u&&u.version!==o.textDocument.version){s=!0;break}}}return s?Promise.resolve({applied:!1}):Wn.asPromise(Ye.workspace.applyEdit(n).then(o=>({applied:o})))}handleFailedRequest(e,r,n,i,s=!0){if(n instanceof B.ResponseError){if(n.code===B.ErrorCodes.PendingResponseRejected||n.code===B.ErrorCodes.ConnectionInactive)return i;if(n.code===B.LSPErrorCodes.RequestCancelled||n.code===B.LSPErrorCodes.ServerCancelled){if(r!==void 0&&r.isCancellationRequested)return i;throw n.data!==void 0?new $n.LSPCancellationError(n.data):new Ye.CancellationError}else if(n.code===B.LSPErrorCodes.ContentModified){if(t.RequestsToCancelOnContentModified.has(e.method)||t.CancellableResolveCalls.has(e.method))throw new Ye.CancellationError;return i}}throw this.error(`Request ${e.method} failed.`,n,s),n}};Bt.BaseLanguageClient=ku;ku.RequestsToCancelOnContentModified=new Set([B.SemanticTokensRequest.method,B.SemanticTokensRangeRequest.method,B.SemanticTokensDeltaRequest.method]);ku.CancellableResolveCalls=new Set([B.CompletionResolveRequest.method,B.CodeLensResolveRequest.method,B.CodeActionResolveRequest.method,B.InlayHintResolveRequest.method,B.DocumentLinkResolveRequest.method,B.WorkspaceSymbolResolveRequest.method]);var Kv=class{error(e){(0,B.RAL)().console.error(e)}warn(e){(0,B.RAL)().console.warn(e)}info(e){(0,B.RAL)().console.info(e)}log(e){(0,B.RAL)().console.log(e)}};function p$(t,e,r,n,i){let s=new Kv,o=(0,B.createProtocolConnection)(t,e,s,i);return o.onError(u=>{r(u[0],u[1],u[2])}),o.onClose(n),{listen:()=>o.listen(),sendRequest:o.sendRequest,onRequest:o.onRequest,hasPendingResponse:o.hasPendingResponse,sendNotification:o.sendNotification,onNotification:o.onNotification,onProgress:o.onProgress,sendProgress:o.sendProgress,trace:(u,c,l)=>{let f={sendNotification:!1,traceFormat:B.TraceFormat.Text};return l===void 0?o.trace(u,c,f):(Wn.boolean(l),o.trace(u,c,l))},initialize:u=>o.sendRequest(B.InitializeRequest.type,u),shutdown:()=>o.sendRequest(B.ShutdownRequest.type,void 0),exit:()=>o.sendNotification(B.ExitNotification.type),end:()=>o.end(),dispose:()=>o.dispose()}}var Bv;(function(t){function e(r){return[new g$.InlineCompletionItemFeature(r)]}t.createAll=e})(Bv||(Bt.ProposedFeatures=Bv={}))});var xP=_(Ld=>{"use strict";Object.defineProperty(Ld,"__esModule",{value:!0});Ld.terminate=void 0;var MP=require("child_process"),m$=require("path"),y$=process.platform==="win32",v$=process.platform==="darwin",_$=process.platform==="linux";function b$(t,e){if(y$)try{let i={stdio:["pipe","pipe","ignore"]};return e&&(i.cwd=e),MP.execFileSync("taskkill",["/T","/F","/PID",t.pid.toString()],i),!0}catch{return!1}else if(_$||v$)try{var r=(0,m$.join)(__dirname,"terminateProcess.sh"),n=MP.spawnSync(r,[t.pid.toString()]);return!n.error}catch{return!1}else return t.kill("SIGKILL"),!0}Ld.terminate=b$});var Fu=_((tX,kP)=>{"use strict";kP.exports=ne()});var Iu=_((rX,FP)=>{"use strict";var w$=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};FP.exports=w$});var Au=_((nX,IP)=>{"use strict";var S$="2.0.0",R$=Number.MAX_SAFE_INTEGER||9007199254740991,C$=16,D$=250,E$=["major","premajor","minor","preminor","patch","prepatch","prerelease"];IP.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:C$,MAX_SAFE_BUILD_LENGTH:D$,MAX_SAFE_INTEGER:R$,RELEASE_TYPES:E$,SEMVER_SPEC_VERSION:S$,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var oa=_((di,AP)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:Gv,MAX_SAFE_BUILD_LENGTH:P$,MAX_LENGTH:T$}=Au(),q$=Iu();di=AP.exports={};var O$=di.re=[],M$=di.safeRe=[],ie=di.src=[],x$=di.safeSrc=[],se=di.t={},k$=0,Yv="[a-zA-Z0-9-]",F$=[["\\s",1],["\\d",T$],[Yv,P$]],I$=t=>{for(let[e,r]of F$)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},Ce=(t,e,r)=>{let n=I$(e),i=k$++;q$(t,i,e),se[t]=i,ie[i]=e,x$[i]=n,O$[i]=new RegExp(e,r?"g":void 0),M$[i]=new RegExp(n,r?"g":void 0)};Ce("NUMERICIDENTIFIER","0|[1-9]\\d*");Ce("NUMERICIDENTIFIERLOOSE","\\d+");Ce("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Yv}*`);Ce("MAINVERSION",`(${ie[se.NUMERICIDENTIFIER]})\\.(${ie[se.NUMERICIDENTIFIER]})\\.(${ie[se.NUMERICIDENTIFIER]})`);Ce("MAINVERSIONLOOSE",`(${ie[se.NUMERICIDENTIFIERLOOSE]})\\.(${ie[se.NUMERICIDENTIFIERLOOSE]})\\.(${ie[se.NUMERICIDENTIFIERLOOSE]})`);Ce("PRERELEASEIDENTIFIER",`(?:${ie[se.NONNUMERICIDENTIFIER]}|${ie[se.NUMERICIDENTIFIER]})`);Ce("PRERELEASEIDENTIFIERLOOSE",`(?:${ie[se.NONNUMERICIDENTIFIER]}|${ie[se.NUMERICIDENTIFIERLOOSE]})`);Ce("PRERELEASE",`(?:-(${ie[se.PRERELEASEIDENTIFIER]}(?:\\.${ie[se.PRERELEASEIDENTIFIER]})*))`);Ce("PRERELEASELOOSE",`(?:-?(${ie[se.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${ie[se.PRERELEASEIDENTIFIERLOOSE]})*))`);Ce("BUILDIDENTIFIER",`${Yv}+`);Ce("BUILD",`(?:\\+(${ie[se.BUILDIDENTIFIER]}(?:\\.${ie[se.BUILDIDENTIFIER]})*))`);Ce("FULLPLAIN",`v?${ie[se.MAINVERSION]}${ie[se.PRERELEASE]}?${ie[se.BUILD]}?`);Ce("FULL",`^${ie[se.FULLPLAIN]}$`);Ce("LOOSEPLAIN",`[v=\\s]*${ie[se.MAINVERSIONLOOSE]}${ie[se.PRERELEASELOOSE]}?${ie[se.BUILD]}?`);Ce("LOOSE",`^${ie[se.LOOSEPLAIN]}$`);Ce("GTLT","((?:<|>)?=?)");Ce("XRANGEIDENTIFIERLOOSE",`${ie[se.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Ce("XRANGEIDENTIFIER",`${ie[se.NUMERICIDENTIFIER]}|x|X|\\*`);Ce("XRANGEPLAIN",`[v=\\s]*(${ie[se.XRANGEIDENTIFIER]})(?:\\.(${ie[se.XRANGEIDENTIFIER]})(?:\\.(${ie[se.XRANGEIDENTIFIER]})(?:${ie[se.PRERELEASE]})?${ie[se.BUILD]}?)?)?`);Ce("XRANGEPLAINLOOSE",`[v=\\s]*(${ie[se.XRANGEIDENTIFIERLOOSE]})(?:\\.(${ie[se.XRANGEIDENTIFIERLOOSE]})(?:\\.(${ie[se.XRANGEIDENTIFIERLOOSE]})(?:${ie[se.PRERELEASELOOSE]})?${ie[se.BUILD]}?)?)?`);Ce("XRANGE",`^${ie[se.GTLT]}\\s*${ie[se.XRANGEPLAIN]}$`);Ce("XRANGELOOSE",`^${ie[se.GTLT]}\\s*${ie[se.XRANGEPLAINLOOSE]}$`);Ce("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Gv}})(?:\\.(\\d{1,${Gv}}))?(?:\\.(\\d{1,${Gv}}))?`);Ce("COERCE",`${ie[se.COERCEPLAIN]}(?:$|[^\\d])`);Ce("COERCEFULL",ie[se.COERCEPLAIN]+`(?:${ie[se.PRERELEASE]})?(?:${ie[se.BUILD]})?(?:$|[^\\d])`);Ce("COERCERTL",ie[se.COERCE],!0);Ce("COERCERTLFULL",ie[se.COERCEFULL],!0);Ce("LONETILDE","(?:~>?)");Ce("TILDETRIM",`(\\s*)${ie[se.LONETILDE]}\\s+`,!0);di.tildeTrimReplace="$1~";Ce("TILDE",`^${ie[se.LONETILDE]}${ie[se.XRANGEPLAIN]}$`);Ce("TILDELOOSE",`^${ie[se.LONETILDE]}${ie[se.XRANGEPLAINLOOSE]}$`);Ce("LONECARET","(?:\\^)");Ce("CARETTRIM",`(\\s*)${ie[se.LONECARET]}\\s+`,!0);di.caretTrimReplace="$1^";Ce("CARET",`^${ie[se.LONECARET]}${ie[se.XRANGEPLAIN]}$`);Ce("CARETLOOSE",`^${ie[se.LONECARET]}${ie[se.XRANGEPLAINLOOSE]}$`);Ce("COMPARATORLOOSE",`^${ie[se.GTLT]}\\s*(${ie[se.LOOSEPLAIN]})$|^$`);Ce("COMPARATOR",`^${ie[se.GTLT]}\\s*(${ie[se.FULLPLAIN]})$|^$`);Ce("COMPARATORTRIM",`(\\s*)${ie[se.GTLT]}\\s*(${ie[se.LOOSEPLAIN]}|${ie[se.XRANGEPLAIN]})`,!0);di.comparatorTrimReplace="$1$2$3";Ce("HYPHENRANGE",`^\\s*(${ie[se.XRANGEPLAIN]})\\s+-\\s+(${ie[se.XRANGEPLAIN]})\\s*$`);Ce("HYPHENRANGELOOSE",`^\\s*(${ie[se.XRANGEPLAINLOOSE]})\\s+-\\s+(${ie[se.XRANGEPLAINLOOSE]})\\s*$`);Ce("STAR","(<|>)?=?\\s*\\*");Ce("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Ce("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var jd=_((iX,NP)=>{"use strict";var A$=Object.freeze({loose:!0}),N$=Object.freeze({}),L$=t=>t?typeof t!="object"?A$:t:N$;NP.exports=L$});var Xv=_((sX,$P)=>{"use strict";var LP=/^[0-9]+$/,jP=(t,e)=>{let r=LP.test(t),n=LP.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},j$=(t,e)=>jP(e,t);$P.exports={compareIdentifiers:jP,rcompareIdentifiers:j$}});var lr=_((oX,HP)=>{"use strict";var $d=Iu(),{MAX_LENGTH:WP,MAX_SAFE_INTEGER:Wd}=Au(),{safeRe:Hd,t:Ud}=oa(),$$=jd(),{compareIdentifiers:aa}=Xv(),Jv=class t{constructor(e,r){if(r=$$(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>WP)throw new TypeError(`version is longer than ${WP} characters`);$d("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?Hd[Ud.LOOSE]:Hd[Ud.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Wd||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Wd||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Wd||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<Wd)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if($d("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),aa(this.major,e.major)||aa(this.minor,e.minor)||aa(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if($d("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return aa(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if($d("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return aa(n,i)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let i=`-${r}`.match(this.options.loose?Hd[Ud.PRERELEASELOOSE]:Hd[Ud.PRERELEASE]);if(!i||i[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let s=[r,i];n===!1&&(s=[r]),aa(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};HP.exports=Jv});var us=_((aX,zP)=>{"use strict";var UP=lr(),W$=(t,e,r=!1)=>{if(t instanceof UP)return t;try{return new UP(t,e)}catch(n){if(!r)return null;throw n}};zP.exports=W$});var BP=_((uX,KP)=>{"use strict";var Qv=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}};KP.exports=Qv});var wn=_((cX,GP)=>{"use strict";var VP=lr(),H$=(t,e,r)=>new VP(t,r).compare(new VP(e,r));GP.exports=H$});var Zv=_((lX,YP)=>{"use strict";var U$=wn(),z$=(t,e,r)=>U$(t,e,r)===0;YP.exports=z$});var e_=_((dX,XP)=>{"use strict";var K$=wn(),B$=(t,e,r)=>K$(t,e,r)!==0;XP.exports=B$});var Nu=_((fX,JP)=>{"use strict";var V$=wn(),G$=(t,e,r)=>V$(t,e,r)>0;JP.exports=G$});var zd=_((hX,QP)=>{"use strict";var Y$=wn(),X$=(t,e,r)=>Y$(t,e,r)>=0;QP.exports=X$});var Kd=_((gX,ZP)=>{"use strict";var J$=wn(),Q$=(t,e,r)=>J$(t,e,r)<0;ZP.exports=Q$});var Bd=_((pX,eT)=>{"use strict";var Z$=wn(),eW=(t,e,r)=>Z$(t,e,r)<=0;eT.exports=eW});var t_=_((mX,tT)=>{"use strict";var tW=Zv(),rW=e_(),nW=Nu(),iW=zd(),sW=Kd(),oW=Bd(),aW=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return tW(t,r,n);case"!=":return rW(t,r,n);case">":return nW(t,r,n);case">=":return iW(t,r,n);case"<":return sW(t,r,n);case"<=":return oW(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};tT.exports=aW});var ju=_((yX,aT)=>{"use strict";var Lu=Symbol("SemVer ANY"),i_=class t{static get ANY(){return Lu}constructor(e,r){if(r=rT(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),n_("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===Lu?this.value="":this.value=this.operator+this.semver.version,n_("comp",this)}parse(e){let r=this.options.loose?nT[iT.COMPARATORLOOSE]:nT[iT.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new sT(n[2],this.options.loose):this.semver=Lu}toString(){return this.value}test(e){if(n_("Comparator.test",e,this.options.loose),this.semver===Lu||e===Lu)return!0;if(typeof e=="string")try{e=new sT(e,this.options)}catch{return!1}return r_(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new oT(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new oT(this.value,r).test(e.semver):(r=rT(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||r_(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||r_(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};aT.exports=i_;var rT=jd(),{safeRe:nT,t:iT}=oa(),r_=t_(),n_=Iu(),sT=lr(),oT=Sn()});var Sn=_((vX,dT)=>{"use strict";var uW=/\s+/g,s_=class t{constructor(e,r){if(r=lW(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof o_)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(uW," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!cT(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&yW(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&pW)|(this.options.loose&&mW))+":"+e,i=uT.get(n);if(i)return i;let s=this.options.loose,o=s?Hr[mr.HYPHENRANGELOOSE]:Hr[mr.HYPHENRANGE];e=e.replace(o,PW(this.options.includePrerelease)),lt("hyphen replace",e),e=e.replace(Hr[mr.COMPARATORTRIM],fW),lt("comparator trim",e),e=e.replace(Hr[mr.TILDETRIM],hW),lt("tilde trim",e),e=e.replace(Hr[mr.CARETTRIM],gW),lt("caret trim",e);let a=e.split(" ").map(f=>vW(f,this.options)).join(" ").split(/\s+/).map(f=>EW(f,this.options));s&&(a=a.filter(f=>(lt("loose invalid filter",f,this.options),!!f.match(Hr[mr.COMPARATORLOOSE])))),lt("range list",a);let u=new Map,c=a.map(f=>new o_(f,this.options));for(let f of c){if(cT(f))return[f];u.set(f.value,f)}u.size>1&&u.has("")&&u.delete("");let l=[...u.values()];return uT.set(n,l),l}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>lT(n,r)&&e.set.some(i=>lT(i,r)&&n.every(s=>i.every(o=>s.intersects(o,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new dW(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(TW(this.set[r],e,this.options))return!0;return!1}};dT.exports=s_;var cW=BP(),uT=new cW,lW=jd(),o_=ju(),lt=Iu(),dW=lr(),{safeRe:Hr,t:mr,comparatorTrimReplace:fW,tildeTrimReplace:hW,caretTrimReplace:gW}=oa(),{FLAG_INCLUDE_PRERELEASE:pW,FLAG_LOOSE:mW}=Au(),cT=t=>t.value==="<0.0.0-0",yW=t=>t.value==="",lT=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(s=>i.intersects(s,e)),i=n.pop();return r},vW=(t,e)=>(lt("comp",t,e),t=wW(t,e),lt("caret",t),t=_W(t,e),lt("tildes",t),t=RW(t,e),lt("xrange",t),t=DW(t,e),lt("stars",t),t),yr=t=>!t||t.toLowerCase()==="x"||t==="*",_W=(t,e)=>t.trim().split(/\s+/).map(r=>bW(r,e)).join(" "),bW=(t,e)=>{let r=e.loose?Hr[mr.TILDELOOSE]:Hr[mr.TILDE];return t.replace(r,(n,i,s,o,a)=>{lt("tilde",t,n,i,s,o,a);let u;return yr(i)?u="":yr(s)?u=`>=${i}.0.0 <${+i+1}.0.0-0`:yr(o)?u=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(lt("replaceTilde pr",a),u=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):u=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,lt("tilde return",u),u})},wW=(t,e)=>t.trim().split(/\s+/).map(r=>SW(r,e)).join(" "),SW=(t,e)=>{lt("caret",t,e);let r=e.loose?Hr[mr.CARETLOOSE]:Hr[mr.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,s,o,a,u)=>{lt("caret",t,i,s,o,a,u);let c;return yr(s)?c="":yr(o)?c=`>=${s}.0.0${n} <${+s+1}.0.0-0`:yr(a)?s==="0"?c=`>=${s}.${o}.0${n} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.0${n} <${+s+1}.0.0-0`:u?(lt("replaceCaret pr",u),s==="0"?o==="0"?c=`>=${s}.${o}.${a}-${u} <${s}.${o}.${+a+1}-0`:c=`>=${s}.${o}.${a}-${u} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.${a}-${u} <${+s+1}.0.0-0`):(lt("no pr"),s==="0"?o==="0"?c=`>=${s}.${o}.${a}${n} <${s}.${o}.${+a+1}-0`:c=`>=${s}.${o}.${a}${n} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),lt("caret return",c),c})},RW=(t,e)=>(lt("replaceXRanges",t,e),t.split(/\s+/).map(r=>CW(r,e)).join(" ")),CW=(t,e)=>{t=t.trim();let r=e.loose?Hr[mr.XRANGELOOSE]:Hr[mr.XRANGE];return t.replace(r,(n,i,s,o,a,u)=>{lt("xRange",t,n,i,s,o,a,u);let c=yr(s),l=c||yr(o),f=l||yr(a),d=f;return i==="="&&d&&(i=""),u=e.includePrerelease?"-0":"",c?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&d?(l&&(o=0),a=0,i===">"?(i=">=",l?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",l?s=+s+1:o=+o+1),i==="<"&&(u="-0"),n=`${i+s}.${o}.${a}${u}`):l?n=`>=${s}.0.0${u} <${+s+1}.0.0-0`:f&&(n=`>=${s}.${o}.0${u} <${s}.${+o+1}.0-0`),lt("xRange return",n),n})},DW=(t,e)=>(lt("replaceStars",t,e),t.trim().replace(Hr[mr.STAR],"")),EW=(t,e)=>(lt("replaceGTE0",t,e),t.trim().replace(Hr[e.includePrerelease?mr.GTE0PRE:mr.GTE0],"")),PW=t=>(e,r,n,i,s,o,a,u,c,l,f,d)=>(yr(n)?r="":yr(i)?r=`>=${n}.0.0${t?"-0":""}`:yr(s)?r=`>=${n}.${i}.0${t?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,yr(c)?u="":yr(l)?u=`<${+c+1}.0.0-0`:yr(f)?u=`<${c}.${+l+1}.0-0`:d?u=`<=${c}.${l}.${f}-${d}`:t?u=`<${c}.${l}.${+f+1}-0`:u=`<=${u}`,`${r} ${u}`.trim()),TW=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(lt(t[n].semver),t[n].semver!==o_.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var ua=_((_X,fT)=>{"use strict";var qW=Sn(),OW=(t,e,r)=>{try{e=new qW(e,r)}catch{return!1}return e.test(t)};fT.exports=OW});var gT=_(ln=>{"use strict";var MW=ln&&ln.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),a_=ln&&ln.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&MW(e,t,r)};Object.defineProperty(ln,"__esModule",{value:!0});ln.DiagnosticPullMode=ln.vsdiag=void 0;a_(ne(),ln);a_(Le(),ln);var hT=fy();Object.defineProperty(ln,"vsdiag",{enumerable:!0,get:function(){return hT.vsdiag}});Object.defineProperty(ln,"DiagnosticPullMode",{enumerable:!0,get:function(){return hT.DiagnosticPullMode}});a_(Vv(),ln)});var vT=_(Ur=>{"use strict";var xW=Ur&&Ur.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),yT=Ur&&Ur.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&xW(e,t,r)};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.SettingMonitor=Ur.LanguageClient=Ur.TransportKind=void 0;var Fi=require("child_process"),u_=require("fs"),c_=require("path"),ls=require("vscode"),pt=gn(),pT=Vv(),kW=xP(),bt=Fu(),FW=us(),IW=ua();yT(Fu(),Ur);yT(gT(),Ur);var mT="^1.82.0",wt;(function(t){t[t.stdio=0]="stdio",t[t.ipc=1]="ipc",t[t.pipe=2]="pipe",t[t.socket=3]="socket"})(wt||(Ur.TransportKind=wt={}));var cs;(function(t){function e(r){let n=r;return n&&n.kind===wt.socket&&pt.number(n.port)}t.isSocket=e})(cs||(cs={}));var l_;(function(t){function e(r){return pt.string(r.command)}t.is=e})(l_||(l_={}));var d_;(function(t){function e(r){return pt.string(r.module)}t.is=e})(d_||(d_={}));var f_;(function(t){function e(r){let n=r;return n&&n.writer!==void 0&&n.reader!==void 0}t.is=e})(f_||(f_={}));var h_;(function(t){function e(r){let n=r;return n&&n.process!==void 0&&typeof n.detached=="boolean"}t.is=e})(h_||(h_={}));var g_=class extends pT.BaseLanguageClient{constructor(e,r,n,i,s){let o,a,u,c,l;pt.string(r)?(o=e,a=r,u=n,c=i,l=!!s):(o=e.toLowerCase(),a=e,u=r,c=n,l=i),l===void 0&&(l=!1),super(o,a,c),this._serverOptions=u,this._forceDebug=l,this._isInDebugMode=l;try{this.checkVersion()}catch(f){throw pt.string(f.message)&&this.outputChannel.appendLine(f.message),f}}checkVersion(){let e=FW(ls.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${ls.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!IW(e,mT))throw new Error(`The language client requires VS Code version ${mT} but received version ${ls.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise(e=>setTimeout(e,1e3)),await this.start()):await this.start()}stop(e=2e3){return super.stop(e).finally(()=>{if(this._serverProcess){let r=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(r),this._isDetached=void 0}})}checkProcessDied(e){!e||e.pid===void 0||setTimeout(()=>{try{e.pid!==void 0&&(process.kill(e.pid,0),(0,kW.terminate)(e))}catch{}},2e3)}handleConnectionClosed(){return this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function r(l,f){if(!l&&!f)return;let d=Object.create(null);return Object.keys(process.env).forEach(p=>d[p]=process.env[p]),f&&(d.ELECTRON_RUN_AS_NODE="1",d.ELECTRON_NO_ASAR="1"),l&&Object.keys(l).forEach(p=>d[p]=l[p]),d}let n=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function s(){let l=process.execArgv;return l?l.some(f=>n.some(d=>f.startsWith(d))||i.some(d=>f===d)):!1}function o(l){if(l.stdin===null||l.stdout===null||l.stderr===null)throw new Error("Process created without stdio streams")}let a=this._serverOptions;if(pt.func(a))return a().then(l=>{if(pT.MessageTransports.is(l))return this._isDetached=!!l.detached,l;if(f_.is(l))return this._isDetached=!!l.detached,{reader:new bt.StreamMessageReader(l.reader),writer:new bt.StreamMessageWriter(l.writer)};{let f;return h_.is(l)?(f=l.process,this._isDetached=l.detached):(f=l,this._isDetached=!1),f.stderr.on("data",d=>this.outputChannel.append(pt.string(d)?d:d.toString(e))),{reader:new bt.StreamMessageReader(f.stdout),writer:new bt.StreamMessageWriter(f.stdin)}}});let u,c=a;return c.run||c.debug?this._forceDebug||s()?(u=c.debug,this._isInDebugMode=!0):(u=c.run,this._isInDebugMode=!1):u=a,this._getServerWorkingDir(u.options).then(l=>{if(d_.is(u)&&u.module){let f=u,d=f.transport||wt.stdio;if(f.runtime){let p=[],g=f.options??Object.create(null);g.execArgv&&g.execArgv.forEach(S=>p.push(S)),p.push(f.module),f.args&&f.args.forEach(S=>p.push(S));let b=Object.create(null);b.cwd=l,b.env=r(g.env,!1);let C=this._getRuntimePath(f.runtime,l),D;if(d===wt.ipc?(b.stdio=[null,null,null,"ipc"],p.push("--node-ipc")):d===wt.stdio?p.push("--stdio"):d===wt.pipe?(D=(0,bt.generateRandomPipeName)(),p.push(`--pipe=${D}`)):cs.isSocket(d)&&p.push(`--socket=${d.port}`),p.push(`--clientProcessId=${process.pid.toString()}`),d===wt.ipc||d===wt.stdio){let S=Fi.spawn(C,p,b);return!S||!S.pid?ca(S,`Launching server using runtime ${C} failed.`):(this._serverProcess=S,S.stderr.on("data",w=>this.outputChannel.append(pt.string(w)?w:w.toString(e))),d===wt.ipc?(S.stdout.on("data",w=>this.outputChannel.append(pt.string(w)?w:w.toString(e))),Promise.resolve({reader:new bt.IPCMessageReader(S),writer:new bt.IPCMessageWriter(S)})):Promise.resolve({reader:new bt.StreamMessageReader(S.stdout),writer:new bt.StreamMessageWriter(S.stdin)}))}else{if(d===wt.pipe)return(0,bt.createClientPipeTransport)(D).then(S=>{let w=Fi.spawn(C,p,b);return!w||!w.pid?ca(w,`Launching server using runtime ${C} failed.`):(this._serverProcess=w,w.stderr.on("data",O=>this.outputChannel.append(pt.string(O)?O:O.toString(e))),w.stdout.on("data",O=>this.outputChannel.append(pt.string(O)?O:O.toString(e))),S.onConnected().then(O=>({reader:O[0],writer:O[1]})))});if(cs.isSocket(d))return(0,bt.createClientSocketTransport)(d.port).then(S=>{let w=Fi.spawn(C,p,b);return!w||!w.pid?ca(w,`Launching server using runtime ${C} failed.`):(this._serverProcess=w,w.stderr.on("data",O=>this.outputChannel.append(pt.string(O)?O:O.toString(e))),w.stdout.on("data",O=>this.outputChannel.append(pt.string(O)?O:O.toString(e))),S.onConnected().then(O=>({reader:O[0],writer:O[1]})))})}}else{let p;return new Promise((g,b)=>{let C=(f.args&&f.args.slice())??[];d===wt.ipc?C.push("--node-ipc"):d===wt.stdio?C.push("--stdio"):d===wt.pipe?(p=(0,bt.generateRandomPipeName)(),C.push(`--pipe=${p}`)):cs.isSocket(d)&&C.push(`--socket=${d.port}`),C.push(`--clientProcessId=${process.pid.toString()}`);let D=f.options??Object.create(null);if(D.env=r(D.env,!0),D.execArgv=D.execArgv||[],D.cwd=l,D.silent=!0,d===wt.ipc||d===wt.stdio){let S=Fi.fork(f.module,C||[],D);o(S),this._serverProcess=S,S.stderr.on("data",w=>this.outputChannel.append(pt.string(w)?w:w.toString(e))),d===wt.ipc?(S.stdout.on("data",w=>this.outputChannel.append(pt.string(w)?w:w.toString(e))),g({reader:new bt.IPCMessageReader(this._serverProcess),writer:new bt.IPCMessageWriter(this._serverProcess)})):g({reader:new bt.StreamMessageReader(S.stdout),writer:new bt.StreamMessageWriter(S.stdin)})}else d===wt.pipe?(0,bt.createClientPipeTransport)(p).then(S=>{let w=Fi.fork(f.module,C||[],D);o(w),this._serverProcess=w,w.stderr.on("data",O=>this.outputChannel.append(pt.string(O)?O:O.toString(e))),w.stdout.on("data",O=>this.outputChannel.append(pt.string(O)?O:O.toString(e))),S.onConnected().then(O=>{g({reader:O[0],writer:O[1]})},b)},b):cs.isSocket(d)&&(0,bt.createClientSocketTransport)(d.port).then(S=>{let w=Fi.fork(f.module,C||[],D);o(w),this._serverProcess=w,w.stderr.on("data",O=>this.outputChannel.append(pt.string(O)?O:O.toString(e))),w.stdout.on("data",O=>this.outputChannel.append(pt.string(O)?O:O.toString(e))),S.onConnected().then(O=>{g({reader:O[0],writer:O[1]})},b)},b)})}}else if(l_.is(u)&&u.command){let f=u,d=u.args!==void 0?u.args.slice(0):[],p,g=u.transport;if(g===wt.stdio)d.push("--stdio");else if(g===wt.pipe)p=(0,bt.generateRandomPipeName)(),d.push(`--pipe=${p}`);else if(cs.isSocket(g))d.push(`--socket=${g.port}`);else if(g===wt.ipc)throw new Error("Transport kind ipc is not support for command executable");let b=Object.assign({},f.options);if(b.cwd=b.cwd||l,g===void 0||g===wt.stdio){let C=Fi.spawn(f.command,d,b);return!C||!C.pid?ca(C,`Launching server using command ${f.command} failed.`):(C.stderr.on("data",D=>this.outputChannel.append(pt.string(D)?D:D.toString(e))),this._serverProcess=C,this._isDetached=!!b.detached,Promise.resolve({reader:new bt.StreamMessageReader(C.stdout),writer:new bt.StreamMessageWriter(C.stdin)}))}else{if(g===wt.pipe)return(0,bt.createClientPipeTransport)(p).then(C=>{let D=Fi.spawn(f.command,d,b);return!D||!D.pid?ca(D,`Launching server using command ${f.command} failed.`):(this._serverProcess=D,this._isDetached=!!b.detached,D.stderr.on("data",S=>this.outputChannel.append(pt.string(S)?S:S.toString(e))),D.stdout.on("data",S=>this.outputChannel.append(pt.string(S)?S:S.toString(e))),C.onConnected().then(S=>({reader:S[0],writer:S[1]})))});if(cs.isSocket(g))return(0,bt.createClientSocketTransport)(g.port).then(C=>{let D=Fi.spawn(f.command,d,b);return!D||!D.pid?ca(D,`Launching server using command ${f.command} failed.`):(this._serverProcess=D,this._isDetached=!!b.detached,D.stderr.on("data",S=>this.outputChannel.append(pt.string(S)?S:S.toString(e))),D.stdout.on("data",S=>this.outputChannel.append(pt.string(S)?S:S.toString(e))),C.onConnected().then(S=>({reader:S[0],writer:S[1]})))})}}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(a,null,4)))}).finally(()=>{this._serverProcess!==void 0&&this._serverProcess.on("exit",(l,f)=>{l!==null&&this.error(`Server process exited with code ${l}.`,void 0,!1),f!==null&&this.error(`Server process exited with signal ${f}.`,void 0,!1)})})}_getRuntimePath(e,r){if(c_.isAbsolute(e))return e;let n=this._mainGetRootPath();if(n!==void 0){let i=c_.join(n,e);if(u_.existsSync(i))return i}if(r!==void 0){let i=c_.join(r,e);if(u_.existsSync(i))return i}return e}_mainGetRootPath(){let e=ls.workspace.workspaceFolders;if(!e||e.length===0)return;let r=e[0];if(r.uri.scheme==="file")return r.uri.fsPath}_getServerWorkingDir(e){let r=e&&e.cwd;return r||(r=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),r?new Promise(n=>{u_.lstat(r,(i,s)=>{n(!i&&s.isDirectory()?r:void 0)})}):Promise.resolve(void 0)}};Ur.LanguageClient=g_;var p_=class{constructor(e,r){this._client=e,this._setting=r,this._listeners=[]}start(){return ls.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new ls.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),r=e>=0?this._setting.substr(0,e):this._setting,n=e>=0?this._setting.substr(e+1):void 0,i=n?ls.workspace.getConfiguration(r).get(n,!1):ls.workspace.getConfiguration(r);i&&this._client.needsStart()?this._client.start().catch(s=>this._client.error("Start failed after configuration change",s,"force")):!i&&this._client.needsStop()&&this._client.stop().catch(s=>this._client.error("Stop failed after configuration change",s,"force"))}};Ur.SettingMonitor=p_;function ca(t,e){return t===null?Promise.reject(e):new Promise((r,n)=>{t.on("error",i=>{n(`${e} ${i}`)}),setImmediate(()=>n(e))})}});var bT=_((SX,_T)=>{"use strict";_T.exports=vT()});var m_=_(Vd=>{"use strict";Object.defineProperty(Vd,"__esModule",{value:!0});Vd.ApiEvent=void 0;var wT;(function(t){t.DidRegisterDocumentFormattingEditProvider="DidRegisterDocumentFormattingEditProvider",t.DidResetConfiguration="DidResetConfiguration"})(wT||(Vd.ApiEvent=wT={}))});var zr=_((CX,ST)=>{"use strict";var y_=class t extends Error{constructor(e){super(`Format functions must be synchronous taking a two arguments: (info, opts)
Found: ${e.toString().split(`
`)[0]}
`),Error.captureStackTrace(this,t)}};ST.exports=t=>{if(t.length>2)throw new y_(t);function e(n={}){this.options=n}e.prototype.transform=t;function r(n){return new e(n)}return r.Format=e,r}});var ET=_((DX,DT)=>{var CT={};DT.exports=CT;var RT={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(RT).forEach(function(t){var e=RT[t],r=CT[t]=[];r.open="\x1B["+e[0]+"m",r.close="\x1B["+e[1]+"m"})});var TT=_((EX,PT)=>{"use strict";PT.exports=function(t,e){e=e||process.argv||[];var r=e.indexOf("--"),n=/^-{1,2}/.test(t)?"":"--",i=e.indexOf(n+t);return i!==-1&&(r===-1?!0:i<r)}});var OT=_((PX,qT)=>{"use strict";var AW=require("os"),Hn=TT(),vr=process.env,la=void 0;Hn("no-color")||Hn("no-colors")||Hn("color=false")?la=!1:(Hn("color")||Hn("colors")||Hn("color=true")||Hn("color=always"))&&(la=!0);"FORCE_COLOR"in vr&&(la=vr.FORCE_COLOR.length===0||parseInt(vr.FORCE_COLOR,10)!==0);function NW(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function LW(t){if(la===!1)return 0;if(Hn("color=16m")||Hn("color=full")||Hn("color=truecolor"))return 3;if(Hn("color=256"))return 2;if(t&&!t.isTTY&&la!==!0)return 0;var e=la?1:0;if(process.platform==="win32"){var r=AW.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in vr)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(i){return i in vr})||vr.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in vr)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(vr.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in vr){var n=parseInt((vr.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(vr.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(vr.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(vr.TERM)||"COLORTERM"in vr?1:(vr.TERM==="dumb",e)}function v_(t){var e=LW(t);return NW(e)}qT.exports={supportsColor:v_,stdout:v_(process.stdout),stderr:v_(process.stderr)}});var xT=_((TX,MT)=>{MT.exports=function(e,r){var n="";e=e||"Run the trap, drop the bass",e=e.split("");var i={a:["@","\u0104","\u023A","\u0245","\u0394","\u039B","\u0414"],b:["\xDF","\u0181","\u0243","\u026E","\u03B2","\u0E3F"],c:["\xA9","\u023B","\u03FE"],d:["\xD0","\u018A","\u0500","\u0501","\u0502","\u0503"],e:["\xCB","\u0115","\u018E","\u0258","\u03A3","\u03BE","\u04BC","\u0A6C"],f:["\u04FA"],g:["\u0262"],h:["\u0126","\u0195","\u04A2","\u04BA","\u04C7","\u050A"],i:["\u0F0F"],j:["\u0134"],k:["\u0138","\u04A0","\u04C3","\u051E"],l:["\u0139"],m:["\u028D","\u04CD","\u04CE","\u0520","\u0521","\u0D69"],n:["\xD1","\u014B","\u019D","\u0376","\u03A0","\u048A"],o:["\xD8","\xF5","\xF8","\u01FE","\u0298","\u047A","\u05DD","\u06DD","\u0E4F"],p:["\u01F7","\u048E"],q:["\u09CD"],r:["\xAE","\u01A6","\u0210","\u024C","\u0280","\u042F"],s:["\xA7","\u03DE","\u03DF","\u03E8"],t:["\u0141","\u0166","\u0373"],u:["\u01B1","\u054D"],v:["\u05D8"],w:["\u0428","\u0460","\u047C","\u0D70"],x:["\u04B2","\u04FE","\u04FC","\u04FD"],y:["\xA5","\u04B0","\u04CB"],z:["\u01B5","\u0240"]};return e.forEach(function(s){s=s.toLowerCase();var o=i[s]||[" "],a=Math.floor(Math.random()*o.length);typeof i[s]<"u"?n+=i[s][a]:n+=s}),n}});var FT=_((qX,kT)=>{kT.exports=function(e,r){e=e||"   he is here   ";var n={up:["\u030D","\u030E","\u0304","\u0305","\u033F","\u0311","\u0306","\u0310","\u0352","\u0357","\u0351","\u0307","\u0308","\u030A","\u0342","\u0313","\u0308","\u034A","\u034B","\u034C","\u0303","\u0302","\u030C","\u0350","\u0300","\u0301","\u030B","\u030F","\u0312","\u0313","\u0314","\u033D","\u0309","\u0363","\u0364","\u0365","\u0366","\u0367","\u0368","\u0369","\u036A","\u036B","\u036C","\u036D","\u036E","\u036F","\u033E","\u035B","\u0346","\u031A"],down:["\u0316","\u0317","\u0318","\u0319","\u031C","\u031D","\u031E","\u031F","\u0320","\u0324","\u0325","\u0326","\u0329","\u032A","\u032B","\u032C","\u032D","\u032E","\u032F","\u0330","\u0331","\u0332","\u0333","\u0339","\u033A","\u033B","\u033C","\u0345","\u0347","\u0348","\u0349","\u034D","\u034E","\u0353","\u0354","\u0355","\u0356","\u0359","\u035A","\u0323"],mid:["\u0315","\u031B","\u0300","\u0301","\u0358","\u0321","\u0322","\u0327","\u0328","\u0334","\u0335","\u0336","\u035C","\u035D","\u035E","\u035F","\u0360","\u0362","\u0338","\u0337","\u0361"," \u0489"]},i=[].concat(n.up,n.down,n.mid);function s(u){var c=Math.floor(Math.random()*u);return c}function o(u){var c=!1;return i.filter(function(l){c=l===u}),c}function a(u,c){var l="",f,d;c=c||{},c.up=typeof c.up<"u"?c.up:!0,c.mid=typeof c.mid<"u"?c.mid:!0,c.down=typeof c.down<"u"?c.down:!0,c.size=typeof c.size<"u"?c.size:"maxi",u=u.split("");for(d in u)if(!o(d)){switch(l=l+u[d],f={up:0,down:0,mid:0},c.size){case"mini":f.up=s(8),f.mid=s(2),f.down=s(8);break;case"maxi":f.up=s(16)+3,f.mid=s(4)+1,f.down=s(64)+3;break;default:f.up=s(8)+1,f.mid=s(6)/2,f.down=s(8)+1;break}var p=["up","mid","down"];for(var g in p)for(var b=p[g],C=0;C<=f[b];C++)c[b]&&(l=l+n[b][s(n[b].length)])}return l}return a(e,r)}});var AT=_((OX,IT)=>{IT.exports=function(t){return function(e,r,n){if(e===" ")return e;switch(r%3){case 0:return t.red(e);case 1:return t.white(e);case 2:return t.blue(e)}}}});var LT=_((MX,NT)=>{NT.exports=function(t){return function(e,r,n){return r%2===0?e:t.inverse(e)}}});var $T=_((xX,jT)=>{jT.exports=function(t){var e=["red","yellow","green","blue","magenta"];return function(r,n,i){return r===" "?r:t[e[n++%e.length]](r)}}});var HT=_((kX,WT)=>{WT.exports=function(t){var e=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(r,n,i){return r===" "?r:t[e[Math.round(Math.random()*(e.length-2))]](r)}}});var GT=_((IX,VT)=>{var xe={};VT.exports=xe;xe.themes={};var jW=require("util"),no=xe.styles=ET(),zT=Object.defineProperties,$W=new RegExp(/[\r\n]+/g);xe.supportsColor=OT().supportsColor;typeof xe.enabled>"u"&&(xe.enabled=xe.supportsColor()!==!1);xe.enable=function(){xe.enabled=!0};xe.disable=function(){xe.enabled=!1};xe.stripColors=xe.strip=function(t){return(""+t).replace(/\x1B\[\d+m/g,"")};var FX=xe.stylize=function(e,r){if(!xe.enabled)return e+"";var n=no[r];return!n&&r in xe?xe[r](e):n.open+e+n.close},WW=/[|\\{}()[\]^$+*?.]/g,HW=function(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(WW,"\\$&")};function KT(t){var e=function r(){return zW.apply(r,arguments)};return e._styles=t,e.__proto__=UW,e}var BT=function(){var t={};return no.grey=no.gray,Object.keys(no).forEach(function(e){no[e].closeRe=new RegExp(HW(no[e].close),"g"),t[e]={get:function(){return KT(this._styles.concat(e))}}}),t}(),UW=zT(function(){},BT);function zW(){var t=Array.prototype.slice.call(arguments),e=t.map(function(o){return o!=null&&o.constructor===String?o:jW.inspect(o)}).join(" ");if(!xe.enabled||!e)return e;for(var r=e.indexOf(`
`)!=-1,n=this._styles,i=n.length;i--;){var s=no[n[i]];e=s.open+e.replace(s.closeRe,s.open)+s.close,r&&(e=e.replace($W,function(o){return s.close+o+s.open}))}return e}xe.setTheme=function(t){if(typeof t=="string"){console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));");return}for(var e in t)(function(r){xe[r]=function(n){if(typeof t[r]=="object"){var i=n;for(var s in t[r])i=xe[t[r][s]](i);return i}return xe[t[r]](n)}})(e)};function KW(){var t={};return Object.keys(BT).forEach(function(e){t[e]={get:function(){return KT([e])}}}),t}var BW=function(e,r){var n=r.split("");return n=n.map(e),n.join("")};xe.trap=xT();xe.zalgo=FT();xe.maps={};xe.maps.america=AT()(xe);xe.maps.zebra=LT()(xe);xe.maps.rainbow=$T()(xe);xe.maps.random=HT()(xe);for(UT in xe.maps)(function(t){xe[t]=function(e){return BW(xe.maps[t],e)}})(UT);var UT;zT(xe,KW())});var __=_((AX,YT)=>{var VW=GT();YT.exports=VW});var XT=_(b_=>{"use strict";b_.levels={error:0,warn:1,help:2,data:3,info:4,debug:5,prompt:6,verbose:7,input:8,silly:9};b_.colors={error:"red",warn:"yellow",help:"cyan",data:"grey",info:"green",debug:"blue",prompt:"grey",verbose:"cyan",input:"grey",silly:"magenta"}});var JT=_(w_=>{"use strict";w_.levels={error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6};w_.colors={error:"red",warn:"yellow",info:"green",http:"green",verbose:"cyan",debug:"blue",silly:"magenta"}});var QT=_(S_=>{"use strict";S_.levels={emerg:0,alert:1,crit:2,error:3,warning:4,notice:5,info:6,debug:7};S_.colors={emerg:"red",alert:"yellow",crit:"red",error:"red",warning:"red",notice:"yellow",info:"green",debug:"blue"}});var ZT=_(Gd=>{"use strict";Object.defineProperty(Gd,"cli",{value:XT()});Object.defineProperty(Gd,"npm",{value:JT()});Object.defineProperty(Gd,"syslog",{value:QT()})});var Pt=_($u=>{"use strict";Object.defineProperty($u,"LEVEL",{value:Symbol.for("level")});Object.defineProperty($u,"MESSAGE",{value:Symbol.for("message")});Object.defineProperty($u,"SPLAT",{value:Symbol.for("splat")});Object.defineProperty($u,"configs",{value:ZT()})});var Jd=_((HX,Xd)=>{"use strict";var D_=__(),{LEVEL:R_,MESSAGE:C_}=Pt();D_.enabled=!0;var e1=/\s+/,Yd=class t{constructor(e={}){e.colors&&this.addColors(e.colors),this.options=e}static addColors(e){let r=Object.keys(e).reduce((n,i)=>(n[i]=e1.test(e[i])?e[i].split(e1):e[i],n),{});return t.allColors=Object.assign({},t.allColors||{},r),t.allColors}addColors(e){return t.addColors(e)}colorize(e,r,n){if(typeof n>"u"&&(n=r),!Array.isArray(t.allColors[e]))return D_[t.allColors[e]](n);for(let i=0,s=t.allColors[e].length;i<s;i++)n=D_[t.allColors[e][i]](n);return n}transform(e,r){return r.all&&typeof e[C_]=="string"&&(e[C_]=this.colorize(e[R_],e.level,e[C_])),(r.level||r.all||!r.message)&&(e.level=this.colorize(e[R_],e.level)),(r.all||r.message)&&(e.message=this.colorize(e[R_],e.level,e.message)),e}};Xd.exports=t=>new Yd(t);Xd.exports.Colorizer=Xd.exports.Format=Yd});var r1=_((UX,t1)=>{"use strict";var{Colorizer:GW}=Jd();t1.exports=t=>(GW.addColors(t.colors||t),t)});var i1=_((zX,n1)=>{"use strict";var YW=zr();n1.exports=YW(t=>(t.message=`	${t.message}`,t))});var a1=_((KX,o1)=>{"use strict";var XW=zr(),{LEVEL:s1,MESSAGE:E_}=Pt();o1.exports=XW((t,{stack:e,cause:r})=>{if(t instanceof Error){let i=Object.assign({},t,{level:t.level,[s1]:t[s1]||t.level,message:t.message,[E_]:t[E_]||t.message});return e&&(i.stack=t.stack),r&&(i.cause=t.cause),i}if(!(t.message instanceof Error))return t;let n=t.message;return Object.assign(t,n),t.message=n.message,t[E_]=n.message,e&&(t.stack=n.stack),r&&(t.cause=n.cause),t})});var T_=_((BX,Zd)=>{"use strict";var{configs:JW,LEVEL:u1,MESSAGE:P_}=Pt(),Qd=class t{constructor(e={levels:JW.npm.levels}){this.paddings=t.paddingForLevels(e.levels,e.filler),this.options=e}static getLongestLevel(e){let r=Object.keys(e).map(n=>n.length);return Math.max(...r)}static paddingForLevel(e,r,n){let i=n+1-e.length,s=Math.floor(i/r.length);return`${r}${r.repeat(s)}`.slice(0,i)}static paddingForLevels(e,r=" "){let n=t.getLongestLevel(e);return Object.keys(e).reduce((i,s)=>(i[s]=t.paddingForLevel(s,r,n),i),{})}transform(e,r){return e.message=`${this.paddings[e[u1]]}${e.message}`,e[P_]&&(e[P_]=`${this.paddings[e[u1]]}${e[P_]}`),e}};Zd.exports=t=>new Qd(t);Zd.exports.Padder=Zd.exports.Format=Qd});var c1=_((VX,q_)=>{"use strict";var{Colorizer:QW}=Jd(),{Padder:ZW}=T_(),{configs:eH,MESSAGE:tH}=Pt(),ef=class{constructor(e={}){e.levels||(e.levels=eH.cli.levels),this.colorizer=new QW(e),this.padder=new ZW(e),this.options=e}transform(e,r){return this.colorizer.transform(this.padder.transform(e,r),r),e[tH]=`${e.level}:${e.message}`,e}};q_.exports=t=>new ef(t);q_.exports.Format=ef});var d1=_((GX,O_)=>{"use strict";var rH=zr();function l1(t){if(t.every(nH))return e=>{let r=e;for(let n=0;n<t.length;n++)if(r=t[n].transform(r,t[n].options),!r)return!1;return r}}function nH(t){if(typeof t.transform!="function")throw new Error(["No transform function found on format. Did you create a format instance?","const myFormat = format(formatFn);","const instance = myFormat();"].join(`
`));return!0}O_.exports=(...t)=>{let e=rH(l1(t)),r=e();return r.Format=e.Format,r};O_.exports.cascade=l1});var Hu=_((F_,g1)=>{"use strict";var{hasOwnProperty:Wu}=Object.prototype,so=k_();so.configure=k_;so.stringify=so;so.default=so;F_.stringify=so;F_.configure=k_;g1.exports=so;var iH=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function ds(t){return t.length<5e3&&!iH.test(t)?`"${t}"`:JSON.stringify(t)}function M_(t,e){if(t.length>200||e)return t.sort(e);for(let r=1;r<t.length;r++){let n=t[r],i=r;for(;i!==0&&t[i-1]>n;)t[i]=t[i-1],i--;t[i]=n}return t}var sH=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function x_(t){return sH.call(t)!==void 0&&t.length!==0}function f1(t,e,r){t.length<r&&(r=t.length);let n=e===","?"":" ",i=`"0":${n}${t[0]}`;for(let s=1;s<r;s++)i+=`${e}"${s}":${n}${t[s]}`;return i}function oH(t){if(Wu.call(t,"circularValue")){let e=t.circularValue;if(typeof e=="string")return`"${e}"`;if(e==null)return e;if(e===Error||e===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function aH(t){let e;if(Wu.call(t,"deterministic")&&(e=t.deterministic,typeof e!="boolean"&&typeof e!="function"))throw new TypeError('The "deterministic" argument must be of type boolean or comparator function');return e===void 0?!0:e}function uH(t,e){let r;if(Wu.call(t,e)&&(r=t[e],typeof r!="boolean"))throw new TypeError(`The "${e}" argument must be of type boolean`);return r===void 0?!0:r}function h1(t,e){let r;if(Wu.call(t,e)){if(r=t[e],typeof r!="number")throw new TypeError(`The "${e}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${e}" argument must be an integer`);if(r<1)throw new RangeError(`The "${e}" argument must be >= 1`)}return r===void 0?1/0:r}function io(t){return t===1?"1 item":`${t} items`}function cH(t){let e=new Set;for(let r of t)(typeof r=="string"||typeof r=="number")&&e.add(String(r));return e}function lH(t){if(Wu.call(t,"strict")){let e=t.strict;if(typeof e!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(e)return r=>{let n=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(n+=` (${r.toString()})`),new Error(n)}}}function k_(t){t={...t};let e=lH(t);e&&(t.bigint===void 0&&(t.bigint=!1),"circularValue"in t||(t.circularValue=Error));let r=oH(t),n=uH(t,"bigint"),i=aH(t),s=typeof i=="function"?i:void 0,o=h1(t,"maximumDepth"),a=h1(t,"maximumBreadth");function u(p,g,b,C,D,S){let w=g[p];switch(typeof w=="object"&&w!==null&&typeof w.toJSON=="function"&&(w=w.toJSON(p)),w=C.call(g,p,w),typeof w){case"string":return ds(w);case"object":{if(w===null)return"null";if(b.indexOf(w)!==-1)return r;let O="",j=",",z=S;if(Array.isArray(w)){if(w.length===0)return"[]";if(o<b.length+1)return'"[Array]"';b.push(w),D!==""&&(S+=D,O+=`
${S}`,j=`,
${S}`);let J=Math.min(w.length,a),Q=0;for(;Q<J-1;Q++){let he=u(String(Q),w,b,C,D,S);O+=he!==void 0?he:"null",O+=j}let ge=u(String(Q),w,b,C,D,S);if(O+=ge!==void 0?ge:"null",w.length-1>a){let he=w.length-a-1;O+=`${j}"... ${io(he)} not stringified"`}return D!==""&&(O+=`
${z}`),b.pop(),`[${O}]`}let W=Object.keys(w),G=W.length;if(G===0)return"{}";if(o<b.length+1)return'"[Object]"';let Z="",K="";D!==""&&(S+=D,j=`,
${S}`,Z=" ");let N=Math.min(G,a);i&&!x_(w)&&(W=M_(W,s)),b.push(w);for(let J=0;J<N;J++){let Q=W[J],ge=u(Q,w,b,C,D,S);ge!==void 0&&(O+=`${K}${ds(Q)}:${Z}${ge}`,K=j)}if(G>a){let J=G-a;O+=`${K}"...":${Z}"${io(J)} not stringified"`,K=j}return D!==""&&K.length>1&&(O=`
${S}${O}
${z}`),b.pop(),`{${O}}`}case"number":return isFinite(w)?String(w):e?e(w):"null";case"boolean":return w===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(w);default:return e?e(w):void 0}}function c(p,g,b,C,D,S){switch(typeof g=="object"&&g!==null&&typeof g.toJSON=="function"&&(g=g.toJSON(p)),typeof g){case"string":return ds(g);case"object":{if(g===null)return"null";if(b.indexOf(g)!==-1)return r;let w=S,O="",j=",";if(Array.isArray(g)){if(g.length===0)return"[]";if(o<b.length+1)return'"[Array]"';b.push(g),D!==""&&(S+=D,O+=`
${S}`,j=`,
${S}`);let G=Math.min(g.length,a),Z=0;for(;Z<G-1;Z++){let N=c(String(Z),g[Z],b,C,D,S);O+=N!==void 0?N:"null",O+=j}let K=c(String(Z),g[Z],b,C,D,S);if(O+=K!==void 0?K:"null",g.length-1>a){let N=g.length-a-1;O+=`${j}"... ${io(N)} not stringified"`}return D!==""&&(O+=`
${w}`),b.pop(),`[${O}]`}b.push(g);let z="";D!==""&&(S+=D,j=`,
${S}`,z=" ");let W="";for(let G of C){let Z=c(G,g[G],b,C,D,S);Z!==void 0&&(O+=`${W}${ds(G)}:${z}${Z}`,W=j)}return D!==""&&W.length>1&&(O=`
${S}${O}
${w}`),b.pop(),`{${O}}`}case"number":return isFinite(g)?String(g):e?e(g):"null";case"boolean":return g===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(g);default:return e?e(g):void 0}}function l(p,g,b,C,D){switch(typeof g){case"string":return ds(g);case"object":{if(g===null)return"null";if(typeof g.toJSON=="function"){if(g=g.toJSON(p),typeof g!="object")return l(p,g,b,C,D);if(g===null)return"null"}if(b.indexOf(g)!==-1)return r;let S=D;if(Array.isArray(g)){if(g.length===0)return"[]";if(o<b.length+1)return'"[Array]"';b.push(g),D+=C;let Z=`
${D}`,K=`,
${D}`,N=Math.min(g.length,a),J=0;for(;J<N-1;J++){let ge=l(String(J),g[J],b,C,D);Z+=ge!==void 0?ge:"null",Z+=K}let Q=l(String(J),g[J],b,C,D);if(Z+=Q!==void 0?Q:"null",g.length-1>a){let ge=g.length-a-1;Z+=`${K}"... ${io(ge)} not stringified"`}return Z+=`
${S}`,b.pop(),`[${Z}]`}let w=Object.keys(g),O=w.length;if(O===0)return"{}";if(o<b.length+1)return'"[Object]"';D+=C;let j=`,
${D}`,z="",W="",G=Math.min(O,a);x_(g)&&(z+=f1(g,j,a),w=w.slice(g.length),G-=g.length,W=j),i&&(w=M_(w,s)),b.push(g);for(let Z=0;Z<G;Z++){let K=w[Z],N=l(K,g[K],b,C,D);N!==void 0&&(z+=`${W}${ds(K)}: ${N}`,W=j)}if(O>a){let Z=O-a;z+=`${W}"...": "${io(Z)} not stringified"`,W=j}return W!==""&&(z=`
${D}${z}
${S}`),b.pop(),`{${z}}`}case"number":return isFinite(g)?String(g):e?e(g):"null";case"boolean":return g===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(g);default:return e?e(g):void 0}}function f(p,g,b){switch(typeof g){case"string":return ds(g);case"object":{if(g===null)return"null";if(typeof g.toJSON=="function"){if(g=g.toJSON(p),typeof g!="object")return f(p,g,b);if(g===null)return"null"}if(b.indexOf(g)!==-1)return r;let C="",D=g.length!==void 0;if(D&&Array.isArray(g)){if(g.length===0)return"[]";if(o<b.length+1)return'"[Array]"';b.push(g);let z=Math.min(g.length,a),W=0;for(;W<z-1;W++){let Z=f(String(W),g[W],b);C+=Z!==void 0?Z:"null",C+=","}let G=f(String(W),g[W],b);if(C+=G!==void 0?G:"null",g.length-1>a){let Z=g.length-a-1;C+=`,"... ${io(Z)} not stringified"`}return b.pop(),`[${C}]`}let S=Object.keys(g),w=S.length;if(w===0)return"{}";if(o<b.length+1)return'"[Object]"';let O="",j=Math.min(w,a);D&&x_(g)&&(C+=f1(g,",",a),S=S.slice(g.length),j-=g.length,O=","),i&&(S=M_(S,s)),b.push(g);for(let z=0;z<j;z++){let W=S[z],G=f(W,g[W],b);G!==void 0&&(C+=`${O}${ds(W)}:${G}`,O=",")}if(w>a){let z=w-a;C+=`${O}"...":"${io(z)} not stringified"`}return b.pop(),`{${C}}`}case"number":return isFinite(g)?String(g):e?e(g):"null";case"boolean":return g===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(g);default:return e?e(g):void 0}}function d(p,g,b){if(arguments.length>1){let C="";if(typeof b=="number"?C=" ".repeat(Math.min(b,10)):typeof b=="string"&&(C=b.slice(0,10)),g!=null){if(typeof g=="function")return u("",{"":p},[],g,C,"");if(Array.isArray(g))return c("",p,[],cH(g),C,"")}if(C.length!==0)return l("",p,[],C,"")}return f("",p,[])}return d}});var I_=_((YX,p1)=>{"use strict";var dH=zr(),{MESSAGE:fH}=Pt(),hH=Hu();function gH(t,e){return typeof e=="bigint"?e.toString():e}p1.exports=dH((t,e)=>{let r=hH.configure(e);return t[fH]=r(t,e.replacer||gH,e.space),t})});var y1=_((XX,m1)=>{"use strict";var pH=zr();m1.exports=pH((t,e)=>e.message?(t.message=`[${e.label}] ${t.message}`,t):(t.label=e.label,t))});var _1=_((JX,v1)=>{"use strict";var mH=zr(),{MESSAGE:yH}=Pt(),vH=Hu();v1.exports=mH(t=>{let e={};return t.message&&(e["@message"]=t.message,delete t.message),t.timestamp&&(e["@timestamp"]=t.timestamp,delete t.timestamp),e["@fields"]=t,t[yH]=vH(e),t})});var w1=_((QX,b1)=>{"use strict";var _H=zr();function bH(t,e,r){let n=e.reduce((s,o)=>(s[o]=t[o],delete t[o],s),{}),i=Object.keys(t).reduce((s,o)=>(s[o]=t[o],delete t[o],s),{});return Object.assign(t,n,{[r]:i}),t}function wH(t,e,r){return t[r]=e.reduce((n,i)=>(n[i]=t[i],delete t[i],n),{}),t}b1.exports=_H((t,e={})=>{let r="metadata";e.key&&(r=e.key);let n=[];return!e.fillExcept&&!e.fillWith&&(n.push("level"),n.push("message")),e.fillExcept&&(n=e.fillExcept),n.length>0?bH(t,n,r):e.fillWith?wH(t,e.fillWith,r):t})});var R1=_((ZX,S1)=>{var da=1e3,fa=da*60,ha=fa*60,oo=ha*24,SH=oo*7,RH=oo*365.25;S1.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return CH(t);if(r==="number"&&isFinite(t))return e.long?EH(t):DH(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function CH(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*RH;case"weeks":case"week":case"w":return r*SH;case"days":case"day":case"d":return r*oo;case"hours":case"hour":case"hrs":case"hr":case"h":return r*ha;case"minutes":case"minute":case"mins":case"min":case"m":return r*fa;case"seconds":case"second":case"secs":case"sec":case"s":return r*da;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function DH(t){var e=Math.abs(t);return e>=oo?Math.round(t/oo)+"d":e>=ha?Math.round(t/ha)+"h":e>=fa?Math.round(t/fa)+"m":e>=da?Math.round(t/da)+"s":t+"ms"}function EH(t){var e=Math.abs(t);return e>=oo?tf(t,e,oo,"day"):e>=ha?tf(t,e,ha,"hour"):e>=fa?tf(t,e,fa,"minute"):e>=da?tf(t,e,da,"second"):t+" ms"}function tf(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var D1=_((Uu,C1)=>{"use strict";var PH=zr(),TH=R1();C1.exports=PH(t=>{let e=+new Date;return Uu.diff=e-(Uu.prevTime||e),Uu.prevTime=e,t.ms=`+${TH(Uu.diff)}`,t})});var T1=_((eJ,P1)=>{"use strict";var qH=require("util").inspect,OH=zr(),{LEVEL:MH,MESSAGE:E1,SPLAT:xH}=Pt();P1.exports=OH((t,e={})=>{let r=Object.assign({},t);return delete r[MH],delete r[E1],delete r[xH],t[E1]=qH(r,!1,e.depth||null,e.colorize),t})});var q1=_((tJ,nf)=>{"use strict";var{MESSAGE:kH}=Pt(),rf=class{constructor(e){this.template=e}transform(e){return e[kH]=this.template(e),e}};nf.exports=t=>new rf(t);nf.exports.Printf=nf.exports.Format=rf});var x1=_((rJ,M1)=>{"use strict";var FH=zr(),{MESSAGE:O1}=Pt(),IH=Hu();M1.exports=FH(t=>{let e=IH(Object.assign({},t,{level:void 0,message:void 0,splat:void 0})),r=t.padding&&t.padding[t.level]||"";return e!=="{}"?t[O1]=`${t.level}:${r} ${t.message} ${e}`:t[O1]=`${t.level}:${r} ${t.message}`,t})});var I1=_((nJ,F1)=>{"use strict";var AH=require("util"),{SPLAT:k1}=Pt(),NH=/%[scdjifoO%]/g,LH=/%%/g,A_=class{constructor(e){this.options=e}_splat(e,r){let n=e.message,i=e[k1]||e.splat||[],s=n.match(LH),o=s&&s.length||0,u=r.length-o-i.length,c=u<0?i.splice(u,-1*u):[],l=c.length;if(l)for(let f=0;f<l;f++)Object.assign(e,c[f]);return e.message=AH.format(n,...i),e}transform(e){let r=e.message,n=e[k1]||e.splat;if(!n||!n.length)return e;let i=r&&r.match&&r.match(NH);if(!i&&(n||n.length)){let s=n.length>1?n.splice(0):n,o=s.length;if(o)for(let a=0;a<o;a++)Object.assign(e,s[a]);return e}return i?this._splat(e,i):e}};F1.exports=t=>new A_(t)});var N1=_((sf,A1)=>{(function(t,e){typeof sf=="object"&&typeof A1<"u"?e(sf):typeof define=="function"&&define.amd?define(["exports"],e):e(t.fecha={})})(sf,function(t){"use strict";var e=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,r="\\d\\d?",n="\\d\\d",i="\\d{3}",s="\\d{4}",o="[^\\s]+",a=/\[([^]*?)\]/gm;function u(k,X){for(var pe=[],le=0,ae=k.length;le<ae;le++)pe.push(k[le].substr(0,X));return pe}var c=function(k){return function(X,pe){var le=pe[k].map(function(ot){return ot.toLowerCase()}),ae=le.indexOf(X.toLowerCase());return ae>-1?ae:null}};function l(k){for(var X=[],pe=1;pe<arguments.length;pe++)X[pe-1]=arguments[pe];for(var le=0,ae=X;le<ae.length;le++){var ot=ae[le];for(var ut in ot)k[ut]=ot[ut]}return k}var f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d=["January","February","March","April","May","June","July","August","September","October","November","December"],p=u(d,3),g=u(f,3),b={dayNamesShort:g,dayNames:f,monthNamesShort:p,monthNames:d,amPm:["am","pm"],DoFn:function(k){return k+["th","st","nd","rd"][k%10>3?0:(k-k%10!==10?1:0)*k%10]}},C=l({},b),D=function(k){return C=l(C,k)},S=function(k){return k.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},w=function(k,X){for(X===void 0&&(X=2),k=String(k);k.length<X;)k="0"+k;return k},O={D:function(k){return String(k.getDate())},DD:function(k){return w(k.getDate())},Do:function(k,X){return X.DoFn(k.getDate())},d:function(k){return String(k.getDay())},dd:function(k){return w(k.getDay())},ddd:function(k,X){return X.dayNamesShort[k.getDay()]},dddd:function(k,X){return X.dayNames[k.getDay()]},M:function(k){return String(k.getMonth()+1)},MM:function(k){return w(k.getMonth()+1)},MMM:function(k,X){return X.monthNamesShort[k.getMonth()]},MMMM:function(k,X){return X.monthNames[k.getMonth()]},YY:function(k){return w(String(k.getFullYear()),4).substr(2)},YYYY:function(k){return w(k.getFullYear(),4)},h:function(k){return String(k.getHours()%12||12)},hh:function(k){return w(k.getHours()%12||12)},H:function(k){return String(k.getHours())},HH:function(k){return w(k.getHours())},m:function(k){return String(k.getMinutes())},mm:function(k){return w(k.getMinutes())},s:function(k){return String(k.getSeconds())},ss:function(k){return w(k.getSeconds())},S:function(k){return String(Math.round(k.getMilliseconds()/100))},SS:function(k){return w(Math.round(k.getMilliseconds()/10),2)},SSS:function(k){return w(k.getMilliseconds(),3)},a:function(k,X){return k.getHours()<12?X.amPm[0]:X.amPm[1]},A:function(k,X){return k.getHours()<12?X.amPm[0].toUpperCase():X.amPm[1].toUpperCase()},ZZ:function(k){var X=k.getTimezoneOffset();return(X>0?"-":"+")+w(Math.floor(Math.abs(X)/60)*100+Math.abs(X)%60,4)},Z:function(k){var X=k.getTimezoneOffset();return(X>0?"-":"+")+w(Math.floor(Math.abs(X)/60),2)+":"+w(Math.abs(X)%60,2)}},j=function(k){return+k-1},z=[null,r],W=[null,o],G=["isPm",o,function(k,X){var pe=k.toLowerCase();return pe===X.amPm[0]?0:pe===X.amPm[1]?1:null}],Z=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(k){var X=(k+"").match(/([+-]|\d\d)/gi);if(X){var pe=+X[1]*60+parseInt(X[2],10);return X[0]==="+"?pe:-pe}return 0}],K={D:["day",r],DD:["day",n],Do:["day",r+o,function(k){return parseInt(k,10)}],M:["month",r,j],MM:["month",n,j],YY:["year",n,function(k){var X=new Date,pe=+(""+X.getFullYear()).substr(0,2);return+(""+(+k>68?pe-1:pe)+k)}],h:["hour",r,void 0,"isPm"],hh:["hour",n,void 0,"isPm"],H:["hour",r],HH:["hour",n],m:["minute",r],mm:["minute",n],s:["second",r],ss:["second",n],YYYY:["year",s],S:["millisecond","\\d",function(k){return+k*100}],SS:["millisecond",n,function(k){return+k*10}],SSS:["millisecond",i],d:z,dd:z,ddd:W,dddd:W,MMM:["month",o,c("monthNamesShort")],MMMM:["month",o,c("monthNames")],a:G,A:G,ZZ:Z,Z},N={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},J=function(k){return l(N,k)},Q=function(k,X,pe){if(X===void 0&&(X=N.default),pe===void 0&&(pe={}),typeof k=="number"&&(k=new Date(k)),Object.prototype.toString.call(k)!=="[object Date]"||isNaN(k.getTime()))throw new Error("Invalid Date pass to format");X=N[X]||X;var le=[];X=X.replace(a,function(ot,ut){return le.push(ut),"@@@"});var ae=l(l({},C),pe);return X=X.replace(e,function(ot){return O[ot](k,ae)}),X.replace(/@@@/g,function(){return le.shift()})};function ge(k,X,pe){if(pe===void 0&&(pe={}),typeof X!="string")throw new Error("Invalid format in fecha parse");if(X=N[X]||X,k.length>1e3)return null;var le=new Date,ae={year:le.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},ot=[],ut=[],Pr=X.replace(a,function(xr,Nt){return ut.push(S(Nt)),"@@@"}),hr={},Zr={};Pr=S(Pr).replace(e,function(xr){var Nt=K[xr],kr=Nt[0],yt=Nt[1],Lt=Nt[3];if(hr[kr])throw new Error("Invalid format. "+kr+" specified twice in format");return hr[kr]=!0,Lt&&(Zr[Lt]=!0),ot.push(Nt),"("+yt+")"}),Object.keys(Zr).forEach(function(xr){if(!hr[xr])throw new Error("Invalid format. "+xr+" is required in specified format")}),Pr=Pr.replace(/@@@/g,function(){return ut.shift()});var Tr=k.match(new RegExp(Pr,"i"));if(!Tr)return null;for(var ri=l(l({},C),pe),St=1;St<Tr.length;St++){var qr=ot[St-1],en=qr[0],tn=qr[2],mt=tn?tn(Tr[St],ri):+Tr[St];if(mt==null)return null;ae[en]=mt}ae.isPm===1&&ae.hour!=null&&+ae.hour!=12?ae.hour=+ae.hour+12:ae.isPm===0&&+ae.hour==12&&(ae.hour=0);var Or;if(ae.timezoneOffset==null){Or=new Date(ae.year,ae.month,ae.day,ae.hour,ae.minute,ae.second,ae.millisecond);for(var nr=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],St=0,Mr=nr.length;St<Mr;St++)if(hr[nr[St][0]]&&ae[nr[St][0]]!==Or[nr[St][1]]())return null}else if(Or=new Date(Date.UTC(ae.year,ae.month,ae.day,ae.hour,ae.minute-ae.timezoneOffset,ae.second,ae.millisecond)),ae.month>11||ae.month<0||ae.day>31||ae.day<1||ae.hour>23||ae.hour<0||ae.minute>59||ae.minute<0||ae.second>59||ae.second<0)return null;return Or}var he={format:Q,parse:ge,defaultI18n:b,setGlobalDateI18n:D,setGlobalDateMasks:J};t.assign=l,t.default=he,t.format=Q,t.parse=ge,t.defaultI18n=b,t.setGlobalDateI18n=D,t.setGlobalDateMasks=J,Object.defineProperty(t,"__esModule",{value:!0})})});var j1=_((iJ,L1)=>{"use strict";var jH=N1(),$H=zr();L1.exports=$H((t,e={})=>(e.format&&(t.timestamp=typeof e.format=="function"?e.format():jH.format(new Date,e.format)),t.timestamp||(t.timestamp=new Date().toISOString()),e.alias&&(t[e.alias]=t.timestamp),t))});var W1=_((sJ,$1)=>{"use strict";var N_=__(),WH=zr(),{MESSAGE:L_}=Pt();$1.exports=WH((t,e)=>(e.level!==!1&&(t.level=N_.strip(t.level)),e.message!==!1&&(t.message=N_.strip(String(t.message))),e.raw!==!1&&t[L_]&&(t[L_]=N_.strip(String(t[L_]))),t))});var $_=_(j_=>{"use strict";var HH=j_.format=zr();j_.levels=r1();function Qt(t,e){Object.defineProperty(HH,t,{get(){return e()},configurable:!0})}Qt("align",function(){return i1()});Qt("errors",function(){return a1()});Qt("cli",function(){return c1()});Qt("combine",function(){return d1()});Qt("colorize",function(){return Jd()});Qt("json",function(){return I_()});Qt("label",function(){return y1()});Qt("logstash",function(){return _1()});Qt("metadata",function(){return w1()});Qt("ms",function(){return D1()});Qt("padLevels",function(){return T_()});Qt("prettyPrint",function(){return T1()});Qt("printf",function(){return q1()});Qt("simple",function(){return x1()});Qt("splat",function(){return I1()});Qt("timestamp",function(){return j1()});Qt("uncolorize",function(){return W1()})});var W_=_(of=>{"use strict";var{format:H1}=require("util");of.warn={deprecated(t){return()=>{throw new Error(H1("{ %s } was removed in winston@3.0.0.",t))}},useFormat(t){return()=>{throw new Error([H1("{ %s } was removed in winston@3.0.0.",t),"Use a custom winston.format = winston.format(function) instead."].join(`
`))}},forFunctions(t,e,r){r.forEach(n=>{t[n]=of.warn[e](n)})},forProperties(t,e,r){r.forEach(n=>{let i=of.warn[e](n);Object.defineProperty(t,n,{get:i,set:i})})}}});var U1=_((uJ,UH)=>{UH.exports={name:"winston",description:"A logger for just about everything.",version:"3.17.0",author:"Charlie Robbins <charlie.robbins@gmail.com>",maintainers:["David Hyde <dabh@alumni.stanford.edu>"],repository:{type:"git",url:"https://github.com/winstonjs/winston.git"},keywords:["winston","logger","logging","logs","sysadmin","bunyan","pino","loglevel","tools","json","stream"],dependencies:{"@dabh/diagnostics":"^2.0.2","@colors/colors":"^1.6.0",async:"^3.2.3","is-stream":"^2.0.0",logform:"^2.7.0","one-time":"^1.0.0","readable-stream":"^3.4.0","safe-stable-stringify":"^2.3.1","stack-trace":"0.0.x","triple-beam":"^1.3.0","winston-transport":"^4.9.0"},devDependencies:{"@babel/cli":"^7.23.9","@babel/core":"^7.24.0","@babel/preset-env":"^7.24.0","@dabh/eslint-config-populist":"^4.4.0","@types/node":"^20.11.24","abstract-winston-transport":"^0.5.1",assume:"^2.2.0","cross-spawn-async":"^2.2.5",eslint:"^8.57.0",hock:"^1.4.1",mocha:"^10.3.0",nyc:"^17.1.0",rimraf:"5.0.1",split2:"^4.1.0","std-mocks":"^2.0.0",through2:"^4.0.2","winston-compat":"^0.1.5"},main:"./lib/winston.js",browser:"./dist/winston",types:"./index.d.ts",scripts:{lint:"eslint lib/*.js lib/winston/*.js lib/winston/**/*.js --resolve-plugins-relative-to ./node_modules/@dabh/eslint-config-populist",test:"rimraf test/fixtures/logs/* && mocha","test:coverage":"nyc npm run test:unit","test:unit":"mocha test/unit","test:integration":"mocha test/integration",build:"rimraf dist && babel lib -d dist",prepublishOnly:"npm run build"},engines:{node:">= 12.0.0"},license:"MIT"}});var H_=_((cJ,z1)=>{z1.exports=require("util").deprecate});var U_=_((lJ,K1)=>{K1.exports=require("stream")});var K_=_((dJ,V1)=>{"use strict";function zH(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(z_,this,t)):process.nextTick(z_,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(af,r):(r._writableState.errorEmitted=!0,process.nextTick(B1,r,s)):process.nextTick(B1,r,s):e?(process.nextTick(af,r),e(s)):process.nextTick(af,r)}),this)}function B1(t,e){z_(t,e),af(t)}function af(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function KH(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function z_(t,e){t.emit("error",e)}function BH(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}V1.exports={destroy:zH,undestroy:KH,errorOrDestroy:BH}});var ga=_((fJ,X1)=>{"use strict";var Y1={};function Rn(t,e,r){r||(r=Error);function n(s,o,a){return typeof e=="string"?e:e(s,o,a)}class i extends r{constructor(o,a,u){super(n(o,a,u))}}i.prototype.name=r.name,i.prototype.code=t,Y1[t]=i}function G1(t,e){if(Array.isArray(t)){let r=t.length;return t=t.map(n=>String(n)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function VH(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function GH(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function YH(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}Rn("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);Rn("ERR_INVALID_ARG_TYPE",function(t,e,r){let n;typeof e=="string"&&VH(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";let i;if(GH(t," argument"))i=`The ${t} ${n} ${G1(e,"type")}`;else{let s=YH(t,".")?"property":"argument";i=`The "${t}" ${s} ${n} ${G1(e,"type")}`}return i+=`. Received type ${typeof r}`,i},TypeError);Rn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Rn("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});Rn("ERR_STREAM_PREMATURE_CLOSE","Premature close");Rn("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});Rn("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Rn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Rn("ERR_STREAM_WRITE_AFTER_END","write after end");Rn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Rn("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);Rn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");X1.exports.codes=Y1});var B_=_((hJ,J1)=>{"use strict";var XH=ga().codes.ERR_INVALID_OPT_VALUE;function JH(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function QH(t,e,r,n){var i=JH(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new XH(s,i)}return Math.floor(i)}return t.objectMode?16:16*1024}J1.exports={getHighWaterMark:QH}});var Q1=_((gJ,V_)=>{typeof Object.create=="function"?V_.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:V_.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var Ii=_((pJ,Y_)=>{try{if(G_=require("util"),typeof G_.inherits!="function")throw"";Y_.exports=G_.inherits}catch{Y_.exports=Q1()}var G_});var iq=_((mJ,nq)=>{"use strict";function Z1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function eq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Z1(Object(r),!0).forEach(function(n){ZH(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z1(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ZH(t,e,r){return e=rq(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rq(n.key),n)}}function t5(t,e,r){return e&&tq(t.prototype,e),r&&tq(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function rq(t){var e=r5(t,"string");return typeof e=="symbol"?e:String(e)}function r5(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var n5=require("buffer"),uf=n5.Buffer,i5=require("util"),X_=i5.inspect,s5=X_&&X_.custom||"inspect";function o5(t,e,r){uf.prototype.copy.call(t,e,r)}nq.exports=function(){function t(){e5(this,t),this.head=null,this.tail=null,this.length=0}return t5(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return uf.alloc(0);for(var n=uf.allocUnsafe(r>>>0),i=this.head,s=0;i;)o5(i.data,n,s),s+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,s=n.data;for(r-=s.length;n=n.next;){var o=n.data,a=r>o.length?o.length:r;if(a===o.length?s+=o:s+=o.slice(0,r),r-=a,r===0){a===o.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++i}return this.length-=i,s}},{key:"_getBuffer",value:function(r){var n=uf.allocUnsafe(r),i=this.head,s=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var o=i.data,a=r>o.length?o.length:r;if(o.copy(n,n.length-r,0,a),r-=a,r===0){a===o.length?(++s,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(a));break}++s}return this.length-=s,n}},{key:s5,value:function(r,n){return X_(this,eq(eq({},n),{},{depth:0,customInspect:!1}))}}]),t}()});var aq=_((J_,oq)=>{var cf=require("buffer"),Ai=cf.Buffer;function sq(t,e){for(var r in t)e[r]=t[r]}Ai.from&&Ai.alloc&&Ai.allocUnsafe&&Ai.allocUnsafeSlow?oq.exports=cf:(sq(cf,J_),J_.Buffer=pa);function pa(t,e,r){return Ai(t,e,r)}sq(Ai,pa);pa.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Ai(t,e,r)};pa.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Ai(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};pa.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ai(t)};pa.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return cf.SlowBuffer(t)}});var Ku=_(cq=>{"use strict";var Z_=aq().Buffer,uq=Z_.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a5(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function u5(t){var e=a5(t);if(typeof e!="string"&&(Z_.isEncoding===uq||!uq(t)))throw new Error("Unknown encoding: "+t);return e||t}cq.StringDecoder=zu;function zu(t){this.encoding=u5(t);var e;switch(this.encoding){case"utf16le":this.text=g5,this.end=p5,e=4;break;case"utf8":this.fillLast=d5,e=4;break;case"base64":this.text=m5,this.end=y5,e=3;break;default:this.write=v5,this.end=_5;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Z_.allocUnsafe(e)}zu.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};zu.prototype.end=h5;zu.prototype.text=f5;zu.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Q_(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function c5(t,e,r){var n=e.length-1;if(n<r)return 0;var i=Q_(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=Q_(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=Q_(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function l5(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function d5(t){var e=this.lastTotal-this.lastNeed,r=l5(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function f5(t,e){var r=c5(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function h5(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function g5(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function p5(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function m5(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function y5(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function v5(t){return t.toString(this.encoding)}function _5(t){return t&&t.length?this.write(t):""}});var hq=_((vJ,fq)=>{"use strict";var lq=ga().codes.ERR_STREAM_PREMATURE_CLOSE;function b5(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function w5(){}function S5(t){return t.setHeader&&typeof t.abort=="function"}function dq(t,e,r){if(typeof e=="function")return dq(t,null,e);e||(e={}),r=b5(r||w5);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){i=!1,o=!0,n||r.call(t)},u=t._readableState&&t._readableState.endEmitted,c=function(){n=!1,u=!0,i||r.call(t)},l=function(g){r.call(t,g)},f=function(){var g;if(n&&!u)return(!t._readableState||!t._readableState.ended)&&(g=new lq),r.call(t,g);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(g=new lq),r.call(t,g)},d=function(){t.req.on("finish",a)};return S5(t)?(t.on("complete",a),t.on("abort",f),t.req?d():t.on("request",d)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",c),t.on("finish",a),e.error!==!1&&t.on("error",l),t.on("close",f),function(){t.removeListener("complete",a),t.removeListener("abort",f),t.removeListener("request",d),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",c),t.removeListener("error",l),t.removeListener("close",f)}}fq.exports=dq});var pq=_((_J,gq)=>{"use strict";var lf;function fs(t,e,r){return e=R5(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function R5(t){var e=C5(t,"string");return typeof e=="symbol"?e:String(e)}function C5(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var D5=hq(),hs=Symbol("lastResolve"),ao=Symbol("lastReject"),Bu=Symbol("error"),df=Symbol("ended"),uo=Symbol("lastPromise"),eb=Symbol("handlePromise"),co=Symbol("stream");function gs(t,e){return{value:t,done:e}}function E5(t){var e=t[hs];if(e!==null){var r=t[co].read();r!==null&&(t[uo]=null,t[hs]=null,t[ao]=null,e(gs(r,!1)))}}function P5(t){process.nextTick(E5,t)}function T5(t,e){return function(r,n){t.then(function(){if(e[df]){r(gs(void 0,!0));return}e[eb](r,n)},n)}}var q5=Object.getPrototypeOf(function(){}),O5=Object.setPrototypeOf((lf={get stream(){return this[co]},next:function(){var e=this,r=this[Bu];if(r!==null)return Promise.reject(r);if(this[df])return Promise.resolve(gs(void 0,!0));if(this[co].destroyed)return new Promise(function(o,a){process.nextTick(function(){e[Bu]?a(e[Bu]):o(gs(void 0,!0))})});var n=this[uo],i;if(n)i=new Promise(T5(n,this));else{var s=this[co].read();if(s!==null)return Promise.resolve(gs(s,!1));i=new Promise(this[eb])}return this[uo]=i,i}},fs(lf,Symbol.asyncIterator,function(){return this}),fs(lf,"return",function(){var e=this;return new Promise(function(r,n){e[co].destroy(null,function(i){if(i){n(i);return}r(gs(void 0,!0))})})}),lf),q5),M5=function(e){var r,n=Object.create(O5,(r={},fs(r,co,{value:e,writable:!0}),fs(r,hs,{value:null,writable:!0}),fs(r,ao,{value:null,writable:!0}),fs(r,Bu,{value:null,writable:!0}),fs(r,df,{value:e._readableState.endEmitted,writable:!0}),fs(r,eb,{value:function(s,o){var a=n[co].read();a?(n[uo]=null,n[hs]=null,n[ao]=null,s(gs(a,!1))):(n[hs]=s,n[ao]=o)},writable:!0}),r));return n[uo]=null,D5(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=n[ao];s!==null&&(n[uo]=null,n[hs]=null,n[ao]=null,s(i)),n[Bu]=i;return}var o=n[hs];o!==null&&(n[uo]=null,n[hs]=null,n[ao]=null,o(gs(void 0,!0))),n[df]=!0}),e.on("readable",P5.bind(null,n)),n};gq.exports=M5});var _q=_((bJ,vq)=>{"use strict";function mq(t,e,r,n,i,s,o){try{var a=t[s](o),u=a.value}catch(c){r(c);return}a.done?e(u):Promise.resolve(u).then(n,i)}function x5(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var s=t.apply(e,r);function o(u){mq(s,n,i,o,a,"next",u)}function a(u){mq(s,n,i,o,a,"throw",u)}o(void 0)})}}function yq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function k5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yq(Object(r),!0).forEach(function(n){F5(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function F5(t,e,r){return e=I5(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I5(t){var e=A5(t,"string");return typeof e=="symbol"?e:String(e)}function A5(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var N5=ga().codes.ERR_INVALID_ARG_TYPE;function L5(t,e,r){var n;if(e&&typeof e.next=="function")n=e;else if(e&&e[Symbol.asyncIterator])n=e[Symbol.asyncIterator]();else if(e&&e[Symbol.iterator])n=e[Symbol.iterator]();else throw new N5("iterable",["Iterable"],e);var i=new t(k5({objectMode:!0},r)),s=!1;i._read=function(){s||(s=!0,o())};function o(){return a.apply(this,arguments)}function a(){return a=x5(function*(){try{var u=yield n.next(),c=u.value,l=u.done;l?i.push(null):i.push(yield c)?o():s=!1}catch(f){i.destroy(f)}}),a.apply(this,arguments)}return i}vq.exports=L5});var Oq=_((SJ,qq)=>{"use strict";qq.exports=We;var ma;We.ReadableState=Rq;var wJ=require("events").EventEmitter,Sq=function(e,r){return e.listeners(r).length},Gu=U_(),ff=require("buffer").Buffer,j5=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function $5(t){return ff.from(t)}function W5(t){return ff.isBuffer(t)||t instanceof j5}var tb=require("util"),qe;tb&&tb.debuglog?qe=tb.debuglog("stream"):qe=function(){};var H5=iq(),ub=K_(),U5=B_(),z5=U5.getHighWaterMark,hf=ga().codes,K5=hf.ERR_INVALID_ARG_TYPE,B5=hf.ERR_STREAM_PUSH_AFTER_EOF,V5=hf.ERR_METHOD_NOT_IMPLEMENTED,G5=hf.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,ya,rb,nb;Ii()(We,Gu);var Vu=ub.errorOrDestroy,ib=["error","close","destroy","pause","resume"];function Y5(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function Rq(t,e,r){ma=ma||Yu(),t=t||{},typeof r!="boolean"&&(r=e instanceof ma),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=z5(this,t,"readableHighWaterMark",r),this.buffer=new H5,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(ya||(ya=Ku().StringDecoder),this.decoder=new ya(t.encoding),this.encoding=t.encoding)}function We(t){if(ma=ma||Yu(),!(this instanceof We))return new We(t);var e=this instanceof ma;this._readableState=new Rq(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),Gu.call(this)}Object.defineProperty(We.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});We.prototype.destroy=ub.destroy;We.prototype._undestroy=ub.undestroy;We.prototype._destroy=function(t,e){e(t)};We.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=ff.from(t,e),e=""),n=!0),Cq(this,t,e,!1,n)};We.prototype.unshift=function(t){return Cq(this,t,null,!0,!1)};function Cq(t,e,r,n,i){qe("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,Q5(t,s);else{var o;if(i||(o=X5(s,e)),o)Vu(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==ff.prototype&&(e=$5(e)),n)s.endEmitted?Vu(t,new G5):sb(t,s,e,!0);else if(s.ended)Vu(t,new B5);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?sb(t,s,e,!1):ab(t,s)):sb(t,s,e,!1)}else n||(s.reading=!1,ab(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function sb(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&gf(t)),ab(t,e)}function X5(t,e){var r;return!W5(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new K5("chunk",["string","Buffer","Uint8Array"],e)),r}We.prototype.isPaused=function(){return this._readableState.flowing===!1};We.prototype.setEncoding=function(t){ya||(ya=Ku().StringDecoder);var e=new ya(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var bq=1073741824;function J5(t){return t>=bq?t=bq:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function wq(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=J5(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}We.prototype.read=function(t){qe("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return qe("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?ob(this):gf(this),null;if(t=wq(t,e),t===0&&e.ended)return e.length===0&&ob(this),null;var n=e.needReadable;qe("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,qe("length less than watermark",n)),e.ended||e.reading?(n=!1,qe("reading or ended",n)):n&&(qe("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=wq(r,e)));var i;return t>0?i=Pq(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&ob(this)),i!==null&&this.emit("data",i),i};function Q5(t,e){if(qe("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?gf(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,Dq(t)))}}function gf(t){var e=t._readableState;qe("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(qe("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(Dq,t))}function Dq(t){var e=t._readableState;qe("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,cb(t)}function ab(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(Z5,t,e))}function Z5(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(qe("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}We.prototype._read=function(t){Vu(this,new V5("_read()"))};We.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,qe("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=i?a:b;n.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(C,D){qe("onunpipe"),C===r&&D&&D.hasUnpiped===!1&&(D.hasUnpiped=!0,l())}function a(){qe("onend"),t.end()}var u=eU(r);t.on("drain",u);var c=!1;function l(){qe("cleanup"),t.removeListener("close",p),t.removeListener("finish",g),t.removeListener("drain",u),t.removeListener("error",d),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",b),r.removeListener("data",f),c=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}r.on("data",f);function f(C){qe("ondata");var D=t.write(C);qe("dest.write",D),D===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&Tq(n.pipes,t)!==-1)&&!c&&(qe("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function d(C){qe("onerror",C),b(),t.removeListener("error",d),Sq(t,"error")===0&&Vu(t,C)}Y5(t,"error",d);function p(){t.removeListener("finish",g),b()}t.once("close",p);function g(){qe("onfinish"),t.removeListener("close",p),b()}t.once("finish",g);function b(){qe("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(qe("pipe resume"),r.resume()),t};function eU(t){return function(){var r=t._readableState;qe("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&Sq(t,"data")&&(r.flowing=!0,cb(t))}}We.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=Tq(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};We.prototype.on=function(t,e){var r=Gu.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,qe("on readable",n.length,n.reading),n.length?gf(this):n.reading||process.nextTick(tU,this)),r};We.prototype.addListener=We.prototype.on;We.prototype.removeListener=function(t,e){var r=Gu.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(Eq,this),r};We.prototype.removeAllListeners=function(t){var e=Gu.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(Eq,this),e};function Eq(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function tU(t){qe("readable nexttick read 0"),t.read(0)}We.prototype.resume=function(){var t=this._readableState;return t.flowing||(qe("resume"),t.flowing=!t.readableListening,rU(this,t)),t.paused=!1,this};function rU(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(nU,t,e))}function nU(t,e){qe("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),cb(t),e.flowing&&!e.reading&&t.read(0)}We.prototype.pause=function(){return qe("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(qe("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function cb(t){var e=t._readableState;for(qe("flow",e.flowing);e.flowing&&t.read()!==null;);}We.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(qe("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(qe("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));for(var s=0;s<ib.length;s++)t.on(ib[s],this.emit.bind(this,ib[s]));return this._read=function(o){qe("wrapped _read",o),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(We.prototype[Symbol.asyncIterator]=function(){return rb===void 0&&(rb=pq()),rb(this)});Object.defineProperty(We.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(We.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(We.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});We._fromList=Pq;Object.defineProperty(We.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Pq(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function ob(t){var e=t._readableState;qe("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(iU,e,t))}function iU(t,e){if(qe("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(We.from=function(t,e){return nb===void 0&&(nb=_q()),nb(We,t,e)});function Tq(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var Yu=_((RJ,xq)=>{"use strict";var sU=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};xq.exports=fi;var Mq=Oq(),db=fb();Ii()(fi,Mq);for(lb=sU(db.prototype),pf=0;pf<lb.length;pf++)mf=lb[pf],fi.prototype[mf]||(fi.prototype[mf]=db.prototype[mf]);var lb,mf,pf;function fi(t){if(!(this instanceof fi))return new fi(t);Mq.call(this,t),db.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",oU)))}Object.defineProperty(fi.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(fi.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(fi.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function oU(){this._writableState.ended||process.nextTick(aU,this)}function aU(t){t.end()}Object.defineProperty(fi.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var fb=_((CJ,Lq)=>{"use strict";Lq.exports=Tt;function Fq(t){var e=this;this.next=null,this.entry=null,this.finish=function(){FU(e,t)}}var va;Tt.WritableState=Ju;var uU={deprecate:H_()},Iq=U_(),vf=require("buffer").Buffer,cU=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function lU(t){return vf.from(t)}function dU(t){return vf.isBuffer(t)||t instanceof cU}var gb=K_(),fU=B_(),hU=fU.getHighWaterMark,ps=ga().codes,gU=ps.ERR_INVALID_ARG_TYPE,pU=ps.ERR_METHOD_NOT_IMPLEMENTED,mU=ps.ERR_MULTIPLE_CALLBACK,yU=ps.ERR_STREAM_CANNOT_PIPE,vU=ps.ERR_STREAM_DESTROYED,_U=ps.ERR_STREAM_NULL_VALUES,bU=ps.ERR_STREAM_WRITE_AFTER_END,wU=ps.ERR_UNKNOWN_ENCODING,_a=gb.errorOrDestroy;Ii()(Tt,Iq);function SU(){}function Ju(t,e,r){va=va||Yu(),t=t||{},typeof r!="boolean"&&(r=e instanceof va),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=hU(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){qU(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new Fq(this)}Ju.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(Ju.prototype,"buffer",{get:uU.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var yf;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(yf=Function.prototype[Symbol.hasInstance],Object.defineProperty(Tt,Symbol.hasInstance,{value:function(e){return yf.call(this,e)?!0:this!==Tt?!1:e&&e._writableState instanceof Ju}})):yf=function(e){return e instanceof this};function Tt(t){va=va||Yu();var e=this instanceof va;if(!e&&!yf.call(Tt,this))return new Tt(t);this._writableState=new Ju(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),Iq.call(this)}Tt.prototype.pipe=function(){_a(this,new yU)};function RU(t,e){var r=new bU;_a(t,r),process.nextTick(e,r)}function CU(t,e,r,n){var i;return r===null?i=new _U:typeof r!="string"&&!e.objectMode&&(i=new gU("chunk",["string","Buffer"],r)),i?(_a(t,i),process.nextTick(n,i),!1):!0}Tt.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&dU(t);return s&&!vf.isBuffer(t)&&(t=lU(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=SU),n.ending?RU(this,r):(s||CU(this,n,t,r))&&(n.pendingcb++,i=EU(this,n,s,t,e,r)),i};Tt.prototype.cork=function(){this._writableState.corked++};Tt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&Aq(this,t))};Tt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new wU(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(Tt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function DU(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=vf.from(e,r)),e}Object.defineProperty(Tt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function EU(t,e,r,n,i,s){if(!r){var o=DU(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else hb(t,e,!1,a,n,i,s);return u}function hb(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new vU("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function PU(t,e,r,n,i){--e.pendingcb,r?(process.nextTick(i,n),process.nextTick(Xu,t,e),t._writableState.errorEmitted=!0,_a(t,n)):(i(n),t._writableState.errorEmitted=!0,_a(t,n),Xu(t,e))}function TU(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function qU(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new mU;if(TU(r),e)PU(t,r,n,e,i);else{var s=Nq(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Aq(t,r),n?process.nextTick(kq,t,r,s,i):kq(t,r,s,i)}}function kq(t,e,r,n){r||OU(t,e),e.pendingcb--,n(),Xu(t,e)}function OU(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function Aq(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,hb(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new Fq(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,l=r.callback,f=e.objectMode?1:u.length;if(hb(t,e,!1,f,u,c,l),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}Tt.prototype._write=function(t,e,r){r(new pU("_write()"))};Tt.prototype._writev=null;Tt.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||kU(this,n,r),this};Object.defineProperty(Tt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Nq(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function MU(t,e){t._final(function(r){e.pendingcb--,r&&_a(t,r),e.prefinished=!0,t.emit("prefinish"),Xu(t,e)})}function xU(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(MU,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Xu(t,e){var r=Nq(e);if(r&&(xU(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function kU(t,e,r){e.ending=!0,Xu(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function FU(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(Tt.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});Tt.prototype.destroy=gb.destroy;Tt.prototype._undestroy=gb.undestroy;Tt.prototype._destroy=function(t,e){e(t)}});var pb=_((DJ,Wq)=>{"use strict";var IU=require("util"),jq=fb(),{LEVEL:$q}=Pt(),Qu=Wq.exports=function(e={}){jq.call(this,{objectMode:!0,highWaterMark:e.highWaterMark}),this.format=e.format,this.level=e.level,this.handleExceptions=e.handleExceptions,this.handleRejections=e.handleRejections,this.silent=e.silent,e.log&&(this.log=e.log),e.logv&&(this.logv=e.logv),e.close&&(this.close=e.close),this.once("pipe",r=>{this.levels=r.levels,this.parent=r}),this.once("unpipe",r=>{r===this.parent&&(this.parent=null,this.close&&this.close())})};IU.inherits(Qu,jq);Qu.prototype._write=function(e,r,n){if(this.silent||e.exception===!0&&!this.handleExceptions)return n(null);let i=this.level||this.parent&&this.parent.level;if(!i||this.levels[i]>=this.levels[e[$q]]){if(e&&!this.format)return this.log(e,n);let s,o;try{o=this.format.transform(Object.assign({},e),this.format.options)}catch(a){s=a}if(s||!o){if(n(),s)throw s;return}return this.log(o,n)}return this._writableState.sync=!1,n(null)};Qu.prototype._writev=function(e,r){if(this.logv){let n=e.filter(this._accept,this);return n.length?this.logv(n,r):r(null)}for(let n=0;n<e.length;n++){if(!this._accept(e[n]))continue;if(e[n].chunk&&!this.format){this.log(e[n].chunk,e[n].callback);continue}let i,s;try{s=this.format.transform(Object.assign({},e[n].chunk),this.format.options)}catch(o){i=o}if(i||!s){if(e[n].callback(),i)throw r(null),i}else this.log(s,e[n].callback)}return r(null)};Qu.prototype._accept=function(e){let r=e.chunk;if(this.silent)return!1;let n=this.level||this.parent&&this.parent.level;return!!((r.exception===!0||!n||this.levels[n]>=this.levels[r[$q]])&&(this.handleExceptions||r.exception!==!0))};Qu.prototype._nop=function(){}});var yb=_((EJ,Uq)=>{"use strict";var AU=require("util"),{LEVEL:mb}=Pt(),Hq=pb(),Zu=Uq.exports=function(e={}){if(Hq.call(this,e),!e.transport||typeof e.transport.log!="function")throw new Error("Invalid transport, must be an object with a log method.");this.transport=e.transport,this.level=this.level||e.transport.level,this.handleExceptions=this.handleExceptions||e.transport.handleExceptions,this._deprecated();function r(n){this.emit("error",n,this.transport)}this.transport.__winstonError||(this.transport.__winstonError=r.bind(this),this.transport.on("error",this.transport.__winstonError))};AU.inherits(Zu,Hq);Zu.prototype._write=function(e,r,n){if(this.silent||e.exception===!0&&!this.handleExceptions)return n(null);(!this.level||this.levels[this.level]>=this.levels[e[mb]])&&this.transport.log(e[mb],e.message,e,this._nop),n(null)};Zu.prototype._writev=function(e,r){for(let n=0;n<e.length;n++)this._accept(e[n])&&(this.transport.log(e[n].chunk[mb],e[n].chunk.message,e[n].chunk,this._nop),e[n].callback());return r(null)};Zu.prototype._deprecated=function(){console.error([`${this.transport.name} is a legacy winston transport. Consider upgrading: `,"- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join(`
`))};Zu.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)}});var lo=_((PJ,vb)=>{"use strict";vb.exports=pb();vb.exports.LegacyTransportStream=yb()});var Bq=_((qJ,Kq)=>{"use strict";var NU=require("os"),{LEVEL:zq,MESSAGE:ba}=Pt(),LU=lo();Kq.exports=class extends LU{constructor(e={}){super(e),this.name=e.name||"console",this.stderrLevels=this._stringArrayToSet(e.stderrLevels),this.consoleWarnLevels=this._stringArrayToSet(e.consoleWarnLevels),this.eol=typeof e.eol=="string"?e.eol:NU.EOL,this.forceConsole=e.forceConsole||!1,this._consoleLog=console.log.bind(console),this._consoleWarn=console.warn.bind(console),this._consoleError=console.error.bind(console),this.setMaxListeners(30)}log(e,r){if(setImmediate(()=>this.emit("logged",e)),this.stderrLevels[e[zq]]){console._stderr&&!this.forceConsole?console._stderr.write(`${e[ba]}${this.eol}`):this._consoleError(e[ba]),r&&r();return}else if(this.consoleWarnLevels[e[zq]]){console._stderr&&!this.forceConsole?console._stderr.write(`${e[ba]}${this.eol}`):this._consoleWarn(e[ba]),r&&r();return}console._stdout&&!this.forceConsole?console._stdout.write(`${e[ba]}${this.eol}`):this._consoleLog(e[ba]),r&&r()}_stringArrayToSet(e,r){if(!e)return{};if(r=r||"Cannot make set from type other than Array of string elements",!Array.isArray(e))throw new Error(r);return e.reduce((n,i)=>{if(typeof i!="string")throw new Error(r);return n[i]=!0,n},{})}}});var bf=_((_f,Vq)=>{"use strict";Object.defineProperty(_f,"__esModule",{value:!0});_f.default=jU;function jU(t){return t&&typeof t.length=="number"&&t.length>=0&&t.length%1===0}Vq.exports=_f.default});var Yq=_((wf,Gq)=>{"use strict";Object.defineProperty(wf,"__esModule",{value:!0});wf.default=function(t){return function(...e){var r=e.pop();return t.call(this,e,r)}};Gq.exports=wf.default});var Qq=_(ms=>{"use strict";Object.defineProperty(ms,"__esModule",{value:!0});ms.fallback=Xq;ms.wrap=Jq;var $U=ms.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,WU=ms.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,HU=ms.hasNextTick=typeof process=="object"&&typeof process.nextTick=="function";function Xq(t){setTimeout(t,0)}function Jq(t){return(e,...r)=>t(()=>e(...r))}var ec;$U?ec=queueMicrotask:WU?ec=setImmediate:HU?ec=process.nextTick:ec=Xq;ms.default=Jq(ec)});var nO=_((Sf,rO)=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});Sf.default=GU;var UU=Yq(),zU=tO(UU),KU=Qq(),BU=tO(KU),VU=fo();function tO(t){return t&&t.__esModule?t:{default:t}}function GU(t){return(0,VU.isAsync)(t)?function(...e){let r=e.pop(),n=t.apply(this,e);return Zq(n,r)}:(0,zU.default)(function(e,r){var n;try{n=t.apply(this,e)}catch(i){return r(i)}if(n&&typeof n.then=="function")return Zq(n,r);r(null,n)})}function Zq(t,e){return t.then(r=>{eO(e,null,r)},r=>{eO(e,r&&(r instanceof Error||r.message)?r:new Error(r))})}function eO(t,e,r){try{t(e,r)}catch(n){(0,BU.default)(i=>{throw i},n)}}rO.exports=Sf.default});var fo=_(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.isAsyncIterable=Ni.isAsyncGenerator=Ni.isAsync=void 0;var YU=nO(),XU=JU(YU);function JU(t){return t&&t.__esModule?t:{default:t}}function iO(t){return t[Symbol.toStringTag]==="AsyncFunction"}function QU(t){return t[Symbol.toStringTag]==="AsyncGenerator"}function ZU(t){return typeof t[Symbol.asyncIterator]=="function"}function e3(t){if(typeof t!="function")throw new Error("expected a function");return iO(t)?(0,XU.default)(t):t}Ni.default=e3;Ni.isAsync=iO;Ni.isAsyncGenerator=QU;Ni.isAsyncIterable=ZU});var wa=_((Rf,sO)=>{"use strict";Object.defineProperty(Rf,"__esModule",{value:!0});Rf.default=t3;function t3(t,e){if(e||(e=t.length),!e)throw new Error("arity is undefined");function r(...n){return typeof n[e-1]=="function"?t.apply(this,n):new Promise((i,s)=>{n[e-1]=(o,...a)=>{if(o)return s(o);i(a.length>1?a:a[0])},t.apply(this,n)})}return r}sO.exports=Rf.default});var aO=_((Cf,oO)=>{"use strict";Object.defineProperty(Cf,"__esModule",{value:!0});var r3=bf(),n3=_b(r3),i3=fo(),s3=_b(i3),o3=wa(),a3=_b(o3);function _b(t){return t&&t.__esModule?t:{default:t}}Cf.default=(0,a3.default)((t,e,r)=>{var n=(0,n3.default)(e)?[]:{};t(e,(i,s,o)=>{(0,s3.default)(i)((a,...u)=>{u.length<2&&([u]=u),n[s]=u,o(a)})},i=>r(i,n))},3);oO.exports=Cf.default});var bb=_((Df,uO)=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});Df.default=u3;function u3(t){function e(...r){if(t!==null){var n=t;t=null,n.apply(this,r)}}return Object.assign(e,t),e}uO.exports=Df.default});var lO=_((Ef,cO)=>{"use strict";Object.defineProperty(Ef,"__esModule",{value:!0});Ef.default=function(t){return t[Symbol.iterator]&&t[Symbol.iterator]()};cO.exports=Ef.default});var hO=_((Pf,fO)=>{"use strict";Object.defineProperty(Pf,"__esModule",{value:!0});Pf.default=m3;var c3=bf(),l3=dO(c3),d3=lO(),f3=dO(d3);function dO(t){return t&&t.__esModule?t:{default:t}}function h3(t){var e=-1,r=t.length;return function(){return++e<r?{value:t[e],key:e}:null}}function g3(t){var e=-1;return function(){var n=t.next();return n.done?null:(e++,{value:n.value,key:e})}}function p3(t){var e=t?Object.keys(t):[],r=-1,n=e.length;return function i(){var s=e[++r];return s==="__proto__"?i():r<n?{value:t[s],key:s}:null}}function m3(t){if((0,l3.default)(t))return h3(t);var e=(0,f3.default)(t);return e?g3(e):p3(t)}fO.exports=Pf.default});var wb=_((Tf,gO)=>{"use strict";Object.defineProperty(Tf,"__esModule",{value:!0});Tf.default=y3;function y3(t){return function(...e){if(t===null)throw new Error("Callback was already called.");var r=t;t=null,r.apply(this,e)}}gO.exports=Tf.default});var Of=_((qf,pO)=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});var v3={};qf.default=v3;pO.exports=qf.default});var yO=_((Mf,mO)=>{"use strict";Object.defineProperty(Mf,"__esModule",{value:!0});Mf.default=S3;var _3=Of(),b3=w3(_3);function w3(t){return t&&t.__esModule?t:{default:t}}function S3(t,e,r,n){let i=!1,s=!1,o=!1,a=0,u=0;function c(){a>=e||o||i||(o=!0,t.next().then(({value:d,done:p})=>{if(!(s||i)){if(o=!1,p){i=!0,a<=0&&n(null);return}a++,r(d,u,l),u++,c()}}).catch(f))}function l(d,p){if(a-=1,!s){if(d)return f(d);if(d===!1){i=!0,s=!0;return}if(p===b3.default||i&&a<=0)return i=!0,n(null);c()}}function f(d){s||(o=!1,i=!0,n(d))}c()}mO.exports=Mf.default});var wO=_((xf,bO)=>{"use strict";Object.defineProperty(xf,"__esModule",{value:!0});var R3=bb(),C3=tc(R3),D3=hO(),E3=tc(D3),P3=wb(),T3=tc(P3),vO=fo(),q3=yO(),_O=tc(q3),O3=Of(),M3=tc(O3);function tc(t){return t&&t.__esModule?t:{default:t}}xf.default=t=>(e,r,n)=>{if(n=(0,C3.default)(n),t<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!e)return n(null);if((0,vO.isAsyncGenerator)(e))return(0,_O.default)(e,t,r,n);if((0,vO.isAsyncIterable)(e))return(0,_O.default)(e[Symbol.asyncIterator](),t,r,n);var i=(0,E3.default)(e),s=!1,o=!1,a=0,u=!1;function c(f,d){if(!o)if(a-=1,f)s=!0,n(f);else if(f===!1)s=!0,o=!0;else{if(d===M3.default||s&&a<=0)return s=!0,n(null);u||l()}}function l(){for(u=!0;a<t&&!s;){var f=i();if(f===null){s=!0,a<=0&&n(null);return}a+=1,r(f.value,f.key,(0,T3.default)(c))}u=!1}l()};bO.exports=xf.default});var Rb=_((kf,SO)=>{"use strict";Object.defineProperty(kf,"__esModule",{value:!0});var x3=wO(),k3=Sb(x3),F3=fo(),I3=Sb(F3),A3=wa(),N3=Sb(A3);function Sb(t){return t&&t.__esModule?t:{default:t}}function L3(t,e,r,n){return(0,k3.default)(e)(t,(0,I3.default)(r),n)}kf.default=(0,N3.default)(L3,4);SO.exports=kf.default});var DO=_((Ff,CO)=>{"use strict";Object.defineProperty(Ff,"__esModule",{value:!0});var j3=Rb(),$3=RO(j3),W3=wa(),H3=RO(W3);function RO(t){return t&&t.__esModule?t:{default:t}}function U3(t,e,r){return(0,$3.default)(t,1,e,r)}Ff.default=(0,H3.default)(U3,3);CO.exports=Ff.default});var TO=_((If,PO)=>{"use strict";Object.defineProperty(If,"__esModule",{value:!0});If.default=G3;var z3=aO(),K3=EO(z3),B3=DO(),V3=EO(B3);function EO(t){return t&&t.__esModule?t:{default:t}}function G3(t,e){return(0,K3.default)(V3.default,t,e)}PO.exports=If.default});var Cb=_((xJ,qO)=>{qO.exports=require("stream")});var kO=_((kJ,xO)=>{"use strict";function OO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Y3(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OO(Object(r),!0).forEach(function(n){X3(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function X3(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function J3(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Q3(t,e,r){return e&&MO(t.prototype,e),r&&MO(t,r),t}var Z3=require("buffer"),Af=Z3.Buffer,e4=require("util"),Db=e4.inspect,t4=Db&&Db.custom||"inspect";function r4(t,e,r){Af.prototype.copy.call(t,e,r)}xO.exports=function(){function t(){J3(this,t),this.head=null,this.tail=null,this.length=0}return Q3(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return Af.alloc(0);for(var n=Af.allocUnsafe(r>>>0),i=this.head,s=0;i;)r4(i.data,n,s),s+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,s=n.data;for(r-=s.length;n=n.next;){var o=n.data,a=r>o.length?o.length:r;if(a===o.length?s+=o:s+=o.slice(0,r),r-=a,r===0){a===o.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++i}return this.length-=i,s}},{key:"_getBuffer",value:function(r){var n=Af.allocUnsafe(r),i=this.head,s=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var o=i.data,a=r>o.length?o.length:r;if(o.copy(n,n.length-r,0,a),r-=a,r===0){a===o.length?(++s,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(a));break}++s}return this.length-=s,n}},{key:t4,value:function(r,n){return Db(this,Y3({},n,{depth:0,customInspect:!1}))}}]),t}()});var Pb=_((FJ,IO)=>{"use strict";function n4(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(Eb,this,t)):process.nextTick(Eb,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(Nf,r):(r._writableState.errorEmitted=!0,process.nextTick(FO,r,s)):process.nextTick(FO,r,s):e?(process.nextTick(Nf,r),e(s)):process.nextTick(Nf,r)}),this)}function FO(t,e){Eb(t,e),Nf(t)}function Nf(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function i4(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Eb(t,e){t.emit("error",e)}function s4(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}IO.exports={destroy:n4,undestroy:i4,errorOrDestroy:s4}});var ys=_((IJ,LO)=>{"use strict";var NO={};function Cn(t,e,r){r||(r=Error);function n(s,o,a){return typeof e=="string"?e:e(s,o,a)}class i extends r{constructor(o,a,u){super(n(o,a,u))}}i.prototype.name=r.name,i.prototype.code=t,NO[t]=i}function AO(t,e){if(Array.isArray(t)){let r=t.length;return t=t.map(n=>String(n)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function o4(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function a4(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function u4(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}Cn("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);Cn("ERR_INVALID_ARG_TYPE",function(t,e,r){let n;typeof e=="string"&&o4(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";let i;if(a4(t," argument"))i=`The ${t} ${n} ${AO(e,"type")}`;else{let s=u4(t,".")?"property":"argument";i=`The "${t}" ${s} ${n} ${AO(e,"type")}`}return i+=`. Received type ${typeof r}`,i},TypeError);Cn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Cn("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});Cn("ERR_STREAM_PREMATURE_CLOSE","Premature close");Cn("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});Cn("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Cn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Cn("ERR_STREAM_WRITE_AFTER_END","write after end");Cn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Cn("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);Cn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");LO.exports.codes=NO});var Tb=_((AJ,jO)=>{"use strict";var c4=ys().codes.ERR_INVALID_OPT_VALUE;function l4(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function d4(t,e,r,n){var i=l4(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new c4(s,i)}return Math.floor(i)}return t.objectMode?16:16*1024}jO.exports={getHighWaterMark:d4}});var Mb=_((NJ,KO)=>{"use strict";KO.exports=qt;function WO(t){var e=this;this.next=null,this.entry=null,this.finish=function(){L4(e,t)}}var Sa;qt.WritableState=nc;var f4={deprecate:H_()},HO=Cb(),jf=require("buffer").Buffer,h4=global.Uint8Array||function(){};function g4(t){return jf.from(t)}function p4(t){return jf.isBuffer(t)||t instanceof h4}var Ob=Pb(),m4=Tb(),y4=m4.getHighWaterMark,vs=ys().codes,v4=vs.ERR_INVALID_ARG_TYPE,_4=vs.ERR_METHOD_NOT_IMPLEMENTED,b4=vs.ERR_MULTIPLE_CALLBACK,w4=vs.ERR_STREAM_CANNOT_PIPE,S4=vs.ERR_STREAM_DESTROYED,R4=vs.ERR_STREAM_NULL_VALUES,C4=vs.ERR_STREAM_WRITE_AFTER_END,D4=vs.ERR_UNKNOWN_ENCODING,Ra=Ob.errorOrDestroy;Ii()(qt,HO);function E4(){}function nc(t,e,r){Sa=Sa||ho(),t=t||{},typeof r!="boolean"&&(r=e instanceof Sa),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=y4(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){k4(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new WO(this)}nc.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(nc.prototype,"buffer",{get:f4.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Lf;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Lf=Function.prototype[Symbol.hasInstance],Object.defineProperty(qt,Symbol.hasInstance,{value:function(e){return Lf.call(this,e)?!0:this!==qt?!1:e&&e._writableState instanceof nc}})):Lf=function(e){return e instanceof this};function qt(t){Sa=Sa||ho();var e=this instanceof Sa;if(!e&&!Lf.call(qt,this))return new qt(t);this._writableState=new nc(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),HO.call(this)}qt.prototype.pipe=function(){Ra(this,new w4)};function P4(t,e){var r=new C4;Ra(t,r),process.nextTick(e,r)}function T4(t,e,r,n){var i;return r===null?i=new R4:typeof r!="string"&&!e.objectMode&&(i=new v4("chunk",["string","Buffer"],r)),i?(Ra(t,i),process.nextTick(n,i),!1):!0}qt.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&p4(t);return s&&!jf.isBuffer(t)&&(t=g4(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=E4),n.ending?P4(this,r):(s||T4(this,n,t,r))&&(n.pendingcb++,i=O4(this,n,s,t,e,r)),i};qt.prototype.cork=function(){this._writableState.corked++};qt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&UO(this,t))};qt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new D4(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(qt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function q4(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=jf.from(e,r)),e}Object.defineProperty(qt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function O4(t,e,r,n,i,s){if(!r){var o=q4(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else qb(t,e,!1,a,n,i,s);return u}function qb(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new S4("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function M4(t,e,r,n,i){--e.pendingcb,r?(process.nextTick(i,n),process.nextTick(rc,t,e),t._writableState.errorEmitted=!0,Ra(t,n)):(i(n),t._writableState.errorEmitted=!0,Ra(t,n),rc(t,e))}function x4(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function k4(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new b4;if(x4(r),e)M4(t,r,n,e,i);else{var s=zO(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&UO(t,r),n?process.nextTick($O,t,r,s,i):$O(t,r,s,i)}}function $O(t,e,r,n){r||F4(t,e),e.pendingcb--,n(),rc(t,e)}function F4(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function UO(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,qb(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new WO(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,l=r.callback,f=e.objectMode?1:u.length;if(qb(t,e,!1,f,u,c,l),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}qt.prototype._write=function(t,e,r){r(new _4("_write()"))};qt.prototype._writev=null;qt.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||N4(this,n,r),this};Object.defineProperty(qt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function zO(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function I4(t,e){t._final(function(r){e.pendingcb--,r&&Ra(t,r),e.prefinished=!0,t.emit("prefinish"),rc(t,e)})}function A4(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(I4,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function rc(t,e){var r=zO(e);if(r&&(A4(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function N4(t,e,r){e.ending=!0,rc(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function L4(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(qt.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});qt.prototype.destroy=Ob.destroy;qt.prototype._undestroy=Ob.undestroy;qt.prototype._destroy=function(t,e){e(t)}});var ho=_((LJ,VO)=>{"use strict";var j4=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};VO.exports=hi;var BO=Fb(),kb=Mb();Ii()(hi,BO);for(xb=j4(kb.prototype),$f=0;$f<xb.length;$f++)Wf=xb[$f],hi.prototype[Wf]||(hi.prototype[Wf]=kb.prototype[Wf]);var xb,Wf,$f;function hi(t){if(!(this instanceof hi))return new hi(t);BO.call(this,t),kb.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",$4)))}Object.defineProperty(hi.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(hi.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(hi.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function $4(){this._writableState.ended||process.nextTick(W4,this)}function W4(t){t.end()}Object.defineProperty(hi.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var Hf=_((jJ,XO)=>{"use strict";var GO=ys().codes.ERR_STREAM_PREMATURE_CLOSE;function H4(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function U4(){}function z4(t){return t.setHeader&&typeof t.abort=="function"}function YO(t,e,r){if(typeof e=="function")return YO(t,null,e);e||(e={}),r=H4(r||U4);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){i=!1,o=!0,n||r.call(t)},u=t._readableState&&t._readableState.endEmitted,c=function(){n=!1,u=!0,i||r.call(t)},l=function(g){r.call(t,g)},f=function(){var g;if(n&&!u)return(!t._readableState||!t._readableState.ended)&&(g=new GO),r.call(t,g);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(g=new GO),r.call(t,g)},d=function(){t.req.on("finish",a)};return z4(t)?(t.on("complete",a),t.on("abort",f),t.req?d():t.on("request",d)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",c),t.on("finish",a),e.error!==!1&&t.on("error",l),t.on("close",f),function(){t.removeListener("complete",a),t.removeListener("abort",f),t.removeListener("request",d),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",c),t.removeListener("error",l),t.removeListener("close",f)}}XO.exports=YO});var QO=_(($J,JO)=>{"use strict";var Uf;function _s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var K4=Hf(),bs=Symbol("lastResolve"),go=Symbol("lastReject"),ic=Symbol("error"),zf=Symbol("ended"),po=Symbol("lastPromise"),Ib=Symbol("handlePromise"),mo=Symbol("stream");function ws(t,e){return{value:t,done:e}}function B4(t){var e=t[bs];if(e!==null){var r=t[mo].read();r!==null&&(t[po]=null,t[bs]=null,t[go]=null,e(ws(r,!1)))}}function V4(t){process.nextTick(B4,t)}function G4(t,e){return function(r,n){t.then(function(){if(e[zf]){r(ws(void 0,!0));return}e[Ib](r,n)},n)}}var Y4=Object.getPrototypeOf(function(){}),X4=Object.setPrototypeOf((Uf={get stream(){return this[mo]},next:function(){var e=this,r=this[ic];if(r!==null)return Promise.reject(r);if(this[zf])return Promise.resolve(ws(void 0,!0));if(this[mo].destroyed)return new Promise(function(o,a){process.nextTick(function(){e[ic]?a(e[ic]):o(ws(void 0,!0))})});var n=this[po],i;if(n)i=new Promise(G4(n,this));else{var s=this[mo].read();if(s!==null)return Promise.resolve(ws(s,!1));i=new Promise(this[Ib])}return this[po]=i,i}},_s(Uf,Symbol.asyncIterator,function(){return this}),_s(Uf,"return",function(){var e=this;return new Promise(function(r,n){e[mo].destroy(null,function(i){if(i){n(i);return}r(ws(void 0,!0))})})}),Uf),Y4),J4=function(e){var r,n=Object.create(X4,(r={},_s(r,mo,{value:e,writable:!0}),_s(r,bs,{value:null,writable:!0}),_s(r,go,{value:null,writable:!0}),_s(r,ic,{value:null,writable:!0}),_s(r,zf,{value:e._readableState.endEmitted,writable:!0}),_s(r,Ib,{value:function(s,o){var a=n[mo].read();a?(n[po]=null,n[bs]=null,n[go]=null,s(ws(a,!1))):(n[bs]=s,n[go]=o)},writable:!0}),r));return n[po]=null,K4(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=n[go];s!==null&&(n[po]=null,n[bs]=null,n[go]=null,s(i)),n[ic]=i;return}var o=n[bs];o!==null&&(n[po]=null,n[bs]=null,n[go]=null,o(ws(void 0,!0))),n[zf]=!0}),e.on("readable",V4.bind(null,n)),n};JO.exports=J4});var rM=_((WJ,tM)=>{"use strict";function ZO(t,e,r,n,i,s,o){try{var a=t[s](o),u=a.value}catch(c){r(c);return}a.done?e(u):Promise.resolve(u).then(n,i)}function Q4(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var s=t.apply(e,r);function o(u){ZO(s,n,i,o,a,"next",u)}function a(u){ZO(s,n,i,o,a,"throw",u)}o(void 0)})}}function eM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Z4(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eM(Object(r),!0).forEach(function(n){ez(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eM(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ez(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var tz=ys().codes.ERR_INVALID_ARG_TYPE;function rz(t,e,r){var n;if(e&&typeof e.next=="function")n=e;else if(e&&e[Symbol.asyncIterator])n=e[Symbol.asyncIterator]();else if(e&&e[Symbol.iterator])n=e[Symbol.iterator]();else throw new tz("iterable",["Iterable"],e);var i=new t(Z4({objectMode:!0},r)),s=!1;i._read=function(){s||(s=!0,o())};function o(){return a.apply(this,arguments)}function a(){return a=Q4(function*(){try{var u=yield n.next(),c=u.value,l=u.done;l?i.push(null):i.push(yield c)?o():s=!1}catch(f){i.destroy(f)}}),a.apply(this,arguments)}return i}tM.exports=rz});var Fb=_((UJ,fM)=>{"use strict";fM.exports=He;var Ca;He.ReadableState=oM;var HJ=require("events").EventEmitter,sM=function(e,r){return e.listeners(r).length},oc=Cb(),Kf=require("buffer").Buffer,nz=global.Uint8Array||function(){};function iz(t){return Kf.from(t)}function sz(t){return Kf.isBuffer(t)||t instanceof nz}var Ab=require("util"),Oe;Ab&&Ab.debuglog?Oe=Ab.debuglog("stream"):Oe=function(){};var oz=kO(),Ub=Pb(),az=Tb(),uz=az.getHighWaterMark,Bf=ys().codes,cz=Bf.ERR_INVALID_ARG_TYPE,lz=Bf.ERR_STREAM_PUSH_AFTER_EOF,dz=Bf.ERR_METHOD_NOT_IMPLEMENTED,fz=Bf.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Da,Nb,Lb;Ii()(He,oc);var sc=Ub.errorOrDestroy,jb=["error","close","destroy","pause","resume"];function hz(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function oM(t,e,r){Ca=Ca||ho(),t=t||{},typeof r!="boolean"&&(r=e instanceof Ca),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=uz(this,t,"readableHighWaterMark",r),this.buffer=new oz,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Da||(Da=Ku().StringDecoder),this.decoder=new Da(t.encoding),this.encoding=t.encoding)}function He(t){if(Ca=Ca||ho(),!(this instanceof He))return new He(t);var e=this instanceof Ca;this._readableState=new oM(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),oc.call(this)}Object.defineProperty(He.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});He.prototype.destroy=Ub.destroy;He.prototype._undestroy=Ub.undestroy;He.prototype._destroy=function(t,e){e(t)};He.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=Kf.from(t,e),e=""),n=!0),aM(this,t,e,!1,n)};He.prototype.unshift=function(t){return aM(this,t,null,!0,!1)};function aM(t,e,r,n,i){Oe("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,mz(t,s);else{var o;if(i||(o=gz(s,e)),o)sc(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==Kf.prototype&&(e=iz(e)),n)s.endEmitted?sc(t,new fz):$b(t,s,e,!0);else if(s.ended)sc(t,new lz);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?$b(t,s,e,!1):Hb(t,s)):$b(t,s,e,!1)}else n||(s.reading=!1,Hb(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function $b(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&Vf(t)),Hb(t,e)}function gz(t,e){var r;return!sz(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new cz("chunk",["string","Buffer","Uint8Array"],e)),r}He.prototype.isPaused=function(){return this._readableState.flowing===!1};He.prototype.setEncoding=function(t){Da||(Da=Ku().StringDecoder);var e=new Da(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var nM=1073741824;function pz(t){return t>=nM?t=nM:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function iM(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=pz(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}He.prototype.read=function(t){Oe("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Oe("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Wb(this):Vf(this),null;if(t=iM(t,e),t===0&&e.ended)return e.length===0&&Wb(this),null;var n=e.needReadable;Oe("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Oe("length less than watermark",n)),e.ended||e.reading?(n=!1,Oe("reading or ended",n)):n&&(Oe("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=iM(r,e)));var i;return t>0?i=lM(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Wb(this)),i!==null&&this.emit("data",i),i};function mz(t,e){if(Oe("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Vf(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,uM(t)))}}function Vf(t){var e=t._readableState;Oe("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Oe("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(uM,t))}function uM(t){var e=t._readableState;Oe("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,zb(t)}function Hb(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(yz,t,e))}function yz(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(Oe("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}He.prototype._read=function(t){sc(this,new dz("_read()"))};He.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,Oe("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=i?a:b;n.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(C,D){Oe("onunpipe"),C===r&&D&&D.hasUnpiped===!1&&(D.hasUnpiped=!0,l())}function a(){Oe("onend"),t.end()}var u=vz(r);t.on("drain",u);var c=!1;function l(){Oe("cleanup"),t.removeListener("close",p),t.removeListener("finish",g),t.removeListener("drain",u),t.removeListener("error",d),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",b),r.removeListener("data",f),c=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}r.on("data",f);function f(C){Oe("ondata");var D=t.write(C);Oe("dest.write",D),D===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&dM(n.pipes,t)!==-1)&&!c&&(Oe("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function d(C){Oe("onerror",C),b(),t.removeListener("error",d),sM(t,"error")===0&&sc(t,C)}hz(t,"error",d);function p(){t.removeListener("finish",g),b()}t.once("close",p);function g(){Oe("onfinish"),t.removeListener("close",p),b()}t.once("finish",g);function b(){Oe("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(Oe("pipe resume"),r.resume()),t};function vz(t){return function(){var r=t._readableState;Oe("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&sM(t,"data")&&(r.flowing=!0,zb(t))}}He.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=dM(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};He.prototype.on=function(t,e){var r=oc.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Oe("on readable",n.length,n.reading),n.length?Vf(this):n.reading||process.nextTick(_z,this)),r};He.prototype.addListener=He.prototype.on;He.prototype.removeListener=function(t,e){var r=oc.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(cM,this),r};He.prototype.removeAllListeners=function(t){var e=oc.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(cM,this),e};function cM(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function _z(t){Oe("readable nexttick read 0"),t.read(0)}He.prototype.resume=function(){var t=this._readableState;return t.flowing||(Oe("resume"),t.flowing=!t.readableListening,bz(this,t)),t.paused=!1,this};function bz(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(wz,t,e))}function wz(t,e){Oe("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),zb(t),e.flowing&&!e.reading&&t.read(0)}He.prototype.pause=function(){return Oe("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Oe("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function zb(t){var e=t._readableState;for(Oe("flow",e.flowing);e.flowing&&t.read()!==null;);}He.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(Oe("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(Oe("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));for(var s=0;s<jb.length;s++)t.on(jb[s],this.emit.bind(this,jb[s]));return this._read=function(o){Oe("wrapped _read",o),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(He.prototype[Symbol.asyncIterator]=function(){return Nb===void 0&&(Nb=QO()),Nb(this)});Object.defineProperty(He.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(He.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(He.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});He._fromList=lM;Object.defineProperty(He.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function lM(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Wb(t){var e=t._readableState;Oe("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(Sz,e,t))}function Sz(t,e){if(Oe("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(He.from=function(t,e){return Lb===void 0&&(Lb=rM()),Lb(He,t,e)});function dM(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var Kb=_((zJ,gM)=>{"use strict";gM.exports=Li;var Gf=ys().codes,Rz=Gf.ERR_METHOD_NOT_IMPLEMENTED,Cz=Gf.ERR_MULTIPLE_CALLBACK,Dz=Gf.ERR_TRANSFORM_ALREADY_TRANSFORMING,Ez=Gf.ERR_TRANSFORM_WITH_LENGTH_0,Yf=ho();Ii()(Li,Yf);function Pz(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new Cz);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Li(t){if(!(this instanceof Li))return new Li(t);Yf.call(this,t),this._transformState={afterTransform:Pz.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Tz)}function Tz(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){hM(t,e,r)}):hM(this,null,null)}Li.prototype.push=function(t,e){return this._transformState.needTransform=!1,Yf.prototype.push.call(this,t,e)};Li.prototype._transform=function(t,e,r){r(new Rz("_transform()"))};Li.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Li.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Li.prototype._destroy=function(t,e){Yf.prototype._destroy.call(this,t,function(r){e(r)})};function hM(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new Ez;if(t._transformState.transforming)throw new Dz;return t.push(null)}});var yM=_((KJ,mM)=>{"use strict";mM.exports=ac;var pM=Kb();Ii()(ac,pM);function ac(t){if(!(this instanceof ac))return new ac(t);pM.call(this,t)}ac.prototype._transform=function(t,e,r){r(null,t)}});var SM=_((BJ,wM)=>{"use strict";var Bb;function qz(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var bM=ys().codes,Oz=bM.ERR_MISSING_ARGS,Mz=bM.ERR_STREAM_DESTROYED;function vM(t){if(t)throw t}function xz(t){return t.setHeader&&typeof t.abort=="function"}function kz(t,e,r,n){n=qz(n);var i=!1;t.on("close",function(){i=!0}),Bb===void 0&&(Bb=Hf()),Bb(t,{readable:e,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,xz(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new Mz("pipe"))}}}function _M(t){t()}function Fz(t,e){return t.pipe(e)}function Iz(t){return!t.length||typeof t[t.length-1]!="function"?vM:t.pop()}function Az(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=Iz(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Oz("streams");var i,s=e.map(function(o,a){var u=a<e.length-1,c=a>0;return kz(o,u,c,function(l){i||(i=l),l&&s.forEach(_M),!u&&(s.forEach(_M),n(i))})});return e.reduce(Fz)}wM.exports=Az});var yo=_((Dn,cc)=>{var uc=require("stream");process.env.READABLE_STREAM==="disable"&&uc?(cc.exports=uc.Readable,Object.assign(cc.exports,uc),cc.exports.Stream=uc):(Dn=cc.exports=Fb(),Dn.Stream=uc||Dn,Dn.Readable=Dn,Dn.Writable=Mb(),Dn.Duplex=ho(),Dn.Transform=Kb(),Dn.PassThrough=yM(),Dn.finished=Hf(),Dn.pipeline=SM())});var Zb=_((VJ,CM)=>{var Ea=[],lc=[],Vb=function(){};function Yb(t){return~Ea.indexOf(t)?!1:(Ea.push(t),!0)}function Xb(t){Vb=t}function Nz(t){for(var e=[],r=0;r<Ea.length;r++){if(Ea[r].async){e.push(Ea[r]);continue}if(Ea[r](t))return!0}return e.length?new Promise(function(i){Promise.all(e.map(function(o){return o(t)})).then(function(o){i(o.some(Boolean))})}):!1}function Jb(t){return~lc.indexOf(t)?!1:(lc.push(t),!0)}function Gb(){Vb.apply(Vb,arguments)}function RM(t){for(var e=0;e<lc.length;e++)t=lc[e].apply(lc[e],arguments);return t}function Qb(t,e){var r=Object.prototype.hasOwnProperty;for(var n in e)r.call(e,n)&&(t[n]=e[n]);return t}function Lz(t){return t.enabled=!1,t.modify=Jb,t.set=Xb,t.use=Yb,Qb(function(){return!1},t)}function jz(t){function e(){var r=Array.prototype.slice.call(arguments,0);return Gb.call(Gb,t,RM(r,t)),!0}return t.enabled=!0,t.modify=Jb,t.set=Xb,t.use=Yb,Qb(e,t)}CM.exports=function(e){return e.introduce=Qb,e.enabled=Nz,e.process=RM,e.modify=Jb,e.write=Gb,e.nope=Lz,e.yep=jz,e.set=Xb,e.use=Yb,e}});var EM=_((GJ,DM)=>{var $z=Zb(),Wz=$z(function t(e,r){return r=r||{},r.namespace=e,r.prod=!0,r.dev=!1,r.force||t.force?t.yep(r):t.nope(r)});DM.exports=Wz});var ew=_((YJ,PM)=>{"use strict";PM.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var qM=_((XJ,TM)=>{TM.exports=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")}});var xM=_((JJ,MM)=>{"use strict";var Hz=qM(),Uz=Array.prototype.concat,zz=Array.prototype.slice,OM=MM.exports=function(e){for(var r=[],n=0,i=e.length;n<i;n++){var s=e[n];Hz(s)?r=Uz.call(r,zz.call(s)):r.push(s)}return r};OM.wrap=function(t){return function(){return t(OM(arguments))}}});var IM=_((QJ,FM)=>{var Qf=ew(),dc=xM(),kM={};for(Xf in Qf)Qf.hasOwnProperty(Xf)&&(kM[Qf[Xf]]=Xf);var Xf,dn=FM.exports={to:{},get:{}};dn.get=function(t){var e=t.substring(0,3).toLowerCase(),r,n;switch(e){case"hsl":r=dn.get.hsl(t),n="hsl";break;case"hwb":r=dn.get.hwb(t),n="hwb";break;default:r=dn.get.rgb(t),n="rgb";break}return r?{model:n,value:r}:null};dn.get.rgb=function(t){if(!t)return null;var e=/^#([a-f0-9]{3,4})$/i,r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,s=/(\D+)/,o=[0,0,0,1],a,u,c;if(a=t.match(r)){for(c=a[2],a=a[1],u=0;u<3;u++){var l=u*2;o[u]=parseInt(a.slice(l,l+2),16)}c&&(o[3]=parseInt(c,16)/255)}else if(a=t.match(e)){for(a=a[1],c=a[3],u=0;u<3;u++)o[u]=parseInt(a[u]+a[u],16);c&&(o[3]=parseInt(c+c,16)/255)}else if(a=t.match(n)){for(u=0;u<3;u++)o[u]=parseInt(a[u+1],0);a[4]&&(o[3]=parseFloat(a[4]))}else if(a=t.match(i)){for(u=0;u<3;u++)o[u]=Math.round(parseFloat(a[u+1])*2.55);a[4]&&(o[3]=parseFloat(a[4]))}else return(a=t.match(s))?a[1]==="transparent"?[0,0,0,0]:(o=Qf[a[1]],o?(o[3]=1,o):null):null;for(u=0;u<3;u++)o[u]=Ss(o[u],0,255);return o[3]=Ss(o[3],0,1),o};dn.get.hsl=function(t){if(!t)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?[\d\.]+)\s*)?\)$/,r=t.match(e);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])+360)%360,s=Ss(parseFloat(r[2]),0,100),o=Ss(parseFloat(r[3]),0,100),a=Ss(isNaN(n)?1:n,0,1);return[i,s,o,a]}return null};dn.get.hwb=function(t){if(!t)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,r=t.match(e);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,s=Ss(parseFloat(r[2]),0,100),o=Ss(parseFloat(r[3]),0,100),a=Ss(isNaN(n)?1:n,0,1);return[i,s,o,a]}return null};dn.to.hex=function(){var t=dc(arguments);return"#"+Jf(t[0])+Jf(t[1])+Jf(t[2])+(t[3]<1?Jf(Math.round(t[3]*255)):"")};dn.to.rgb=function(){var t=dc(arguments);return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};dn.to.rgb.percent=function(){var t=dc(arguments),e=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+r+"%, "+n+"%)":"rgba("+e+"%, "+r+"%, "+n+"%, "+t[3]+")"};dn.to.hsl=function(){var t=dc(arguments);return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};dn.to.hwb=function(){var t=dc(arguments),e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};dn.to.keyword=function(t){return kM[t.slice(0,3)]};function Ss(t,e,r){return Math.min(Math.max(e,t),r)}function Jf(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}});var tw=_((ZJ,jM)=>{var vo=ew(),LM={};for(Zf in vo)vo.hasOwnProperty(Zf)&&(LM[vo[Zf]]=Zf);var Zf,de=jM.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(_r in de)if(de.hasOwnProperty(_r)){if(!("channels"in de[_r]))throw new Error("missing channels property: "+_r);if(!("labels"in de[_r]))throw new Error("missing channel labels property: "+_r);if(de[_r].labels.length!==de[_r].channels)throw new Error("channel and label counts mismatch: "+_r);AM=de[_r].channels,NM=de[_r].labels,delete de[_r].channels,delete de[_r].labels,Object.defineProperty(de[_r],"channels",{value:AM}),Object.defineProperty(de[_r],"labels",{value:NM})}var AM,NM,_r;de.rgb.hsl=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.min(e,r,n),s=Math.max(e,r,n),o=s-i,a,u,c;return s===i?a=0:e===s?a=(r-n)/o:r===s?a=2+(n-e)/o:n===s&&(a=4+(e-r)/o),a=Math.min(a*60,360),a<0&&(a+=360),c=(i+s)/2,s===i?u=0:c<=.5?u=o/(s+i):u=o/(2-s-i),[a,u*100,c*100]};de.rgb.hsv=function(t){var e,r,n,i,s,o=t[0]/255,a=t[1]/255,u=t[2]/255,c=Math.max(o,a,u),l=c-Math.min(o,a,u),f=function(d){return(c-d)/6/l+1/2};return l===0?i=s=0:(s=l/c,e=f(o),r=f(a),n=f(u),o===c?i=n-r:a===c?i=1/3+e-n:u===c&&(i=2/3+r-e),i<0?i+=1:i>1&&(i-=1)),[i*360,s*100,c*100]};de.rgb.hwb=function(t){var e=t[0],r=t[1],n=t[2],i=de.rgb.hsl(t)[0],s=1/255*Math.min(e,Math.min(r,n));return n=1-1/255*Math.max(e,Math.max(r,n)),[i,s*100,n*100]};de.rgb.cmyk=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i,s,o,a;return a=Math.min(1-e,1-r,1-n),i=(1-e-a)/(1-a)||0,s=(1-r-a)/(1-a)||0,o=(1-n-a)/(1-a)||0,[i*100,s*100,o*100,a*100]};function Kz(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2)}de.rgb.keyword=function(t){var e=LM[t];if(e)return e;var r=1/0,n;for(var i in vo)if(vo.hasOwnProperty(i)){var s=vo[i],o=Kz(t,s);o<r&&(r=o,n=i)}return n};de.keyword.rgb=function(t){return vo[t]};de.rgb.xyz=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var i=e*.4124+r*.3576+n*.1805,s=e*.2126+r*.7152+n*.0722,o=e*.0193+r*.1192+n*.9505;return[i*100,s*100,o*100]};de.rgb.lab=function(t){var e=de.rgb.xyz(t),r=e[0],n=e[1],i=e[2],s,o,a;return r/=95.047,n/=100,i/=108.883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,s=116*n-16,o=500*(r-n),a=200*(n-i),[s,o,a]};de.hsl.rgb=function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100,i,s,o,a,u;if(r===0)return u=n*255,[u,u,u];n<.5?s=n*(1+r):s=n+r-n*r,i=2*n-s,a=[0,0,0];for(var c=0;c<3;c++)o=e+1/3*-(c-1),o<0&&o++,o>1&&o--,6*o<1?u=i+(s-i)*6*o:2*o<1?u=s:3*o<2?u=i+(s-i)*(2/3-o)*6:u=i,a[c]=u*255;return a};de.hsl.hsv=function(t){var e=t[0],r=t[1]/100,n=t[2]/100,i=r,s=Math.max(n,.01),o,a;return n*=2,r*=n<=1?n:2-n,i*=s<=1?s:2-s,a=(n+r)/2,o=n===0?2*i/(s+i):2*r/(n+r),[e,o*100,a*100]};de.hsv.rgb=function(t){var e=t[0]/60,r=t[1]/100,n=t[2]/100,i=Math.floor(e)%6,s=e-Math.floor(e),o=255*n*(1-r),a=255*n*(1-r*s),u=255*n*(1-r*(1-s));switch(n*=255,i){case 0:return[n,u,o];case 1:return[a,n,o];case 2:return[o,n,u];case 3:return[o,a,n];case 4:return[u,o,n];case 5:return[n,o,a]}};de.hsv.hsl=function(t){var e=t[0],r=t[1]/100,n=t[2]/100,i=Math.max(n,.01),s,o,a;return a=(2-r)*n,s=(2-r)*i,o=r*i,o/=s<=1?s:2-s,o=o||0,a/=2,[e,o*100,a*100]};de.hwb.rgb=function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100,i=r+n,s,o,a,u;i>1&&(r/=i,n/=i),s=Math.floor(6*e),o=1-n,a=6*e-s,(s&1)!==0&&(a=1-a),u=r+a*(o-r);var c,l,f;switch(s){default:case 6:case 0:c=o,l=u,f=r;break;case 1:c=u,l=o,f=r;break;case 2:c=r,l=o,f=u;break;case 3:c=r,l=u,f=o;break;case 4:c=u,l=r,f=o;break;case 5:c=o,l=r,f=u;break}return[c*255,l*255,f*255]};de.cmyk.rgb=function(t){var e=t[0]/100,r=t[1]/100,n=t[2]/100,i=t[3]/100,s,o,a;return s=1-Math.min(1,e*(1-i)+i),o=1-Math.min(1,r*(1-i)+i),a=1-Math.min(1,n*(1-i)+i),[s*255,o*255,a*255]};de.xyz.rgb=function(t){var e=t[0]/100,r=t[1]/100,n=t[2]/100,i,s,o;return i=e*3.2406+r*-1.5372+n*-.4986,s=e*-.9689+r*1.8758+n*.0415,o=e*.0557+r*-.204+n*1.057,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*12.92,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92,i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),[i*255,s*255,o*255]};de.xyz.lab=function(t){var e=t[0],r=t[1],n=t[2],i,s,o;return e/=95.047,r/=100,n/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=116*r-16,s=500*(e-r),o=200*(r-n),[i,s,o]};de.lab.xyz=function(t){var e=t[0],r=t[1],n=t[2],i,s,o;s=(e+16)/116,i=r/500+s,o=s-n/200;var a=Math.pow(s,3),u=Math.pow(i,3),c=Math.pow(o,3);return s=a>.008856?a:(s-16/116)/7.787,i=u>.008856?u:(i-16/116)/7.787,o=c>.008856?c:(o-16/116)/7.787,i*=95.047,s*=100,o*=108.883,[i,s,o]};de.lab.lch=function(t){var e=t[0],r=t[1],n=t[2],i,s,o;return i=Math.atan2(n,r),s=i*360/2/Math.PI,s<0&&(s+=360),o=Math.sqrt(r*r+n*n),[e,o,s]};de.lch.lab=function(t){var e=t[0],r=t[1],n=t[2],i,s,o;return o=n/360*2*Math.PI,i=r*Math.cos(o),s=r*Math.sin(o),[e,i,s]};de.rgb.ansi16=function(t){var e=t[0],r=t[1],n=t[2],i=1 in arguments?arguments[1]:de.rgb.hsv(t)[2];if(i=Math.round(i/50),i===0)return 30;var s=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(e/255));return i===2&&(s+=60),s};de.hsv.ansi16=function(t){return de.rgb.ansi16(de.hsv.rgb(t),t[2])};de.rgb.ansi256=function(t){var e=t[0],r=t[1],n=t[2];if(e===r&&r===n)return e<8?16:e>248?231:Math.round((e-8)/247*24)+232;var i=16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5);return i};de.ansi16.rgb=function(t){var e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];var r=(~~(t>50)+1)*.5,n=(e&1)*r*255,i=(e>>1&1)*r*255,s=(e>>2&1)*r*255;return[n,i,s]};de.ansi256.rgb=function(t){if(t>=232){var e=(t-232)*10+8;return[e,e,e]}t-=16;var r,n=Math.floor(t/36)/5*255,i=Math.floor((r=t%36)/6)/5*255,s=r%6/5*255;return[n,i,s]};de.rgb.hex=function(t){var e=((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255),r=e.toString(16).toUpperCase();return"000000".substring(r.length)+r};de.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var r=e[0];e[0].length===3&&(r=r.split("").map(function(a){return a+a}).join(""));var n=parseInt(r,16),i=n>>16&255,s=n>>8&255,o=n&255;return[i,s,o]};de.rgb.hcg=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.max(Math.max(e,r),n),s=Math.min(Math.min(e,r),n),o=i-s,a,u;return o<1?a=s/(1-o):a=0,o<=0?u=0:i===e?u=(r-n)/o%6:i===r?u=2+(n-e)/o:u=4+(e-r)/o+4,u/=6,u%=1,[u*360,o*100,a*100]};de.hsl.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=1,i=0;return r<.5?n=2*e*r:n=2*e*(1-r),n<1&&(i=(r-.5*n)/(1-n)),[t[0],n*100,i*100]};de.hsv.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=e*r,i=0;return n<1&&(i=(r-n)/(1-n)),[t[0],n*100,i*100]};de.hcg.rgb=function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100;if(r===0)return[n*255,n*255,n*255];var i=[0,0,0],s=e%1*6,o=s%1,a=1-o,u=0;switch(Math.floor(s)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return u=(1-r)*n,[(r*i[0]+u)*255,(r*i[1]+u)*255,(r*i[2]+u)*255]};de.hcg.hsv=function(t){var e=t[1]/100,r=t[2]/100,n=e+r*(1-e),i=0;return n>0&&(i=e/n),[t[0],i*100,n*100]};de.hcg.hsl=function(t){var e=t[1]/100,r=t[2]/100,n=r*(1-e)+.5*e,i=0;return n>0&&n<.5?i=e/(2*n):n>=.5&&n<1&&(i=e/(2*(1-n))),[t[0],i*100,n*100]};de.hcg.hwb=function(t){var e=t[1]/100,r=t[2]/100,n=e+r*(1-e);return[t[0],(n-e)*100,(1-n)*100]};de.hwb.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=1-r,i=n-e,s=0;return i<1&&(s=(n-i)/(1-i)),[t[0],i*100,s*100]};de.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};de.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};de.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};de.gray.hsl=de.gray.hsv=function(t){return[0,0,t[0]]};de.gray.hwb=function(t){return[0,100,t[0]]};de.gray.cmyk=function(t){return[0,0,0,t[0]]};de.gray.lab=function(t){return[t[0],0,0]};de.gray.hex=function(t){var e=Math.round(t[0]/100*255)&255,r=(e<<16)+(e<<8)+e,n=r.toString(16).toUpperCase();return"000000".substring(n.length)+n};de.rgb.gray=function(t){var e=(t[0]+t[1]+t[2])/3;return[e/255*100]}});var WM=_((eQ,$M)=>{var eh=tw();function Bz(){for(var t={},e=Object.keys(eh),r=e.length,n=0;n<r;n++)t[e[n]]={distance:-1,parent:null};return t}function Vz(t){var e=Bz(),r=[t];for(e[t].distance=0;r.length;)for(var n=r.pop(),i=Object.keys(eh[n]),s=i.length,o=0;o<s;o++){var a=i[o],u=e[a];u.distance===-1&&(u.distance=e[n].distance+1,u.parent=n,r.unshift(a))}return e}function Gz(t,e){return function(r){return e(t(r))}}function Yz(t,e){for(var r=[e[t].parent,t],n=eh[e[t].parent][t],i=e[t].parent;e[i].parent;)r.unshift(e[i].parent),n=Gz(eh[e[i].parent][i],n),i=e[i].parent;return n.conversion=r,n}$M.exports=function(t){for(var e=Vz(t),r={},n=Object.keys(e),i=n.length,s=0;s<i;s++){var o=n[s],a=e[o];a.parent!==null&&(r[o]=Yz(o,e))}return r}});var UM=_((tQ,HM)=>{var rw=tw(),Xz=WM(),Pa={},Jz=Object.keys(rw);function Qz(t){var e=function(r){return r==null?r:(arguments.length>1&&(r=Array.prototype.slice.call(arguments)),t(r))};return"conversion"in t&&(e.conversion=t.conversion),e}function Zz(t){var e=function(r){if(r==null)return r;arguments.length>1&&(r=Array.prototype.slice.call(arguments));var n=t(r);if(typeof n=="object")for(var i=n.length,s=0;s<i;s++)n[s]=Math.round(n[s]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}Jz.forEach(function(t){Pa[t]={},Object.defineProperty(Pa[t],"channels",{value:rw[t].channels}),Object.defineProperty(Pa[t],"labels",{value:rw[t].labels});var e=Xz(t),r=Object.keys(e);r.forEach(function(n){var i=e[n];Pa[t][n]=Zz(i),Pa[t][n].raw=Qz(i)})});HM.exports=Pa});var BM=_((rQ,KM)=>{"use strict";var fc=IM(),fn=UM(),sw=[].slice,zM=["keyword","gray","hex"],nw={};Object.keys(fn).forEach(function(t){nw[sw.call(fn[t].labels).sort().join("")]=t});var th={};function Zt(t,e){if(!(this instanceof Zt))return new Zt(t,e);if(e&&e in zM&&(e=null),e&&!(e in fn))throw new Error("Unknown model: "+e);var r,n;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof Zt)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if(typeof t=="string"){var i=fc.get(t);if(i===null)throw new Error("Unable to parse color from string: "+t);this.model=i.model,n=fn[this.model].channels,this.color=i.value.slice(0,n),this.valpha=typeof i.value[n]=="number"?i.value[n]:1}else if(t.length){this.model=e||"rgb",n=fn[this.model].channels;var s=sw.call(t,0,n);this.color=iw(s,n),this.valpha=typeof t[n]=="number"?t[n]:1}else if(typeof t=="number")t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;var o=Object.keys(t);"alpha"in t&&(o.splice(o.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);var a=o.sort().join("");if(!(a in nw))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=nw[a];var u=fn[this.model].labels,c=[];for(r=0;r<u.length;r++)c.push(t[u[r]]);this.color=iw(c)}if(th[this.model])for(n=fn[this.model].channels,r=0;r<n;r++){var l=th[this.model][r];l&&(this.color[r]=l(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Zt.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in fc.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);var r=e.valpha===1?e.color:e.color.concat(this.valpha);return fc.to[e.model](r)},percentString:function(t){var e=this.rgb().round(typeof t=="number"?t:1),r=e.valpha===1?e.color:e.color.concat(this.valpha);return fc.to.rgb.percent(r)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=fn[this.model].channels,r=fn[this.model].labels,n=0;n<e;n++)t[r[n]]=this.color[n];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new Zt(this.color.map(tK(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new Zt(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:Ot("rgb",0,$t(255)),green:Ot("rgb",1,$t(255)),blue:Ot("rgb",2,$t(255)),hue:Ot(["hsl","hsv","hsl","hwb","hcg"],0,function(t){return(t%360+360)%360}),saturationl:Ot("hsl",1,$t(100)),lightness:Ot("hsl",2,$t(100)),saturationv:Ot("hsv",1,$t(100)),value:Ot("hsv",2,$t(100)),chroma:Ot("hcg",1,$t(100)),gray:Ot("hcg",2,$t(100)),white:Ot("hwb",1,$t(100)),wblack:Ot("hwb",2,$t(100)),cyan:Ot("cmyk",0,$t(100)),magenta:Ot("cmyk",1,$t(100)),yellow:Ot("cmyk",2,$t(100)),black:Ot("cmyk",3,$t(100)),x:Ot("xyz",0,$t(100)),y:Ot("xyz",1,$t(100)),z:Ot("xyz",2,$t(100)),l:Ot("lab",0,$t(100)),a:Ot("lab",1),b:Ot("lab",2),keyword:function(t){return arguments.length?new Zt(t):fn[this.model].keyword(this.color)},hex:function(t){return arguments.length?new Zt(t):fc.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity:function(){for(var t=this.rgb().color,e=[],r=0;r<t.length;r++){var n=t[r]/255;e[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),r=t.luminosity();return e>r?(e+.05)/(r+.05):(r+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark:function(){var t=this.rgb().color,e=(t[0]*299+t[1]*587+t[2]*114)/1e3;return e<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return Zt.rgb(e,e,e)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),r=e.color[0];return r=(r+t)%360,r=r<0?360+r:r,e.color[0]=r,e},mix:function(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);var r=t.rgb(),n=this.rgb(),i=e===void 0?.5:e,s=2*i-1,o=r.alpha()-n.alpha(),a=((s*o===-1?s:(s+o)/(1+s*o))+1)/2,u=1-a;return Zt.rgb(a*r.red()+u*n.red(),a*r.green()+u*n.green(),a*r.blue()+u*n.blue(),r.alpha()*i+n.alpha()*(1-i))}};Object.keys(fn).forEach(function(t){if(zM.indexOf(t)===-1){var e=fn[t].channels;Zt.prototype[t]=function(){if(this.model===t)return new Zt(this);if(arguments.length)return new Zt(arguments,t);var r=typeof arguments[e]=="number"?e:this.valpha;return new Zt(rK(fn[this.model][t].raw(this.color)).concat(r),t)},Zt[t]=function(r){return typeof r=="number"&&(r=iw(sw.call(arguments),e)),new Zt(r,t)}}});function eK(t,e){return Number(t.toFixed(e))}function tK(t){return function(e){return eK(e,t)}}function Ot(t,e,r){return t=Array.isArray(t)?t:[t],t.forEach(function(n){(th[n]||(th[n]=[]))[e]=r}),t=t[0],function(n){var i;return arguments.length?(r&&(n=r(n)),i=this[t](),i.color[e]=n,i):(i=this[t]().color[e],r&&(i=r(i)),i)}}function $t(t){return function(e){return Math.max(0,Math.min(t,e))}}function rK(t){return Array.isArray(t)?t:[t]}function iw(t,e){for(var r=0;r<e;r++)typeof t[r]!="number"&&(t[r]=0);return t}KM.exports=Zt});var GM=_((nQ,VM)=>{"use strict";VM.exports=function(e){for(var r=0,n=0;r<e.length;n=e.charCodeAt(r++)+((n<<5)-n));var i=Math.floor(Math.abs(Math.sin(n)*1e4%1*16777216)).toString(16);return"#"+Array(6-i.length+1).join("0")+i}});var QM=_((iQ,JM)=>{"use strict";var YM=BM(),XM=GM();JM.exports=function(e,r){var n=e.split(r||":"),i=XM(n[0]);if(!n.length)return i;for(var s=0,o=n.length-1;s<o;s++)i=YM(i).mix(YM(XM(n[s+1]))).saturate(1).hex();return i}});var ex=_((sQ,ZM)=>{"use strict";function Un(t,e){if(e)return new Un(t).style(e);if(!(this instanceof Un))return new Un(t);this.text=t}Un.prototype.prefix="\x1B[";Un.prototype.suffix="m";Un.prototype.hex=function(e){e=e[0]==="#"?e.substring(1):e,e.length===3&&(e=e.split(""),e[5]=e[2],e[4]=e[2],e[3]=e[1],e[2]=e[1],e[1]=e[0],e=e.join(""));var r=e.substring(0,2),n=e.substring(2,4),i=e.substring(4,6);return[parseInt(r,16),parseInt(n,16),parseInt(i,16)]};Un.prototype.rgb=function(e,r,n){var i=e/255*5,s=r/255*5,o=n/255*5;return this.ansi(i,s,o)};Un.prototype.ansi=function(e,r,n){var i=Math.round(e),s=Math.round(r),o=Math.round(n);return 16+i*36+s*6+o};Un.prototype.reset=function(){return this.prefix+"39;49"+this.suffix};Un.prototype.style=function(e){return this.prefix+"38;5;"+this.rgb.apply(this,this.hex(e))+this.suffix+this.text+this.reset()};ZM.exports=Un});var rx=_((oQ,tx)=>{var nK=QM(),iK=ex();tx.exports=function(e,r){var n=r.namespace,i=r.colors!==!1?iK(n+":",nK(n)):n+":";return e[0]=i+" "+e[0],e}});var ix=_((aQ,nx)=>{"use strict";nx.exports=function(e,r){if(!r)return!1;for(var n=r.split(/[\s,]+/),i=0;i<n.length;i++){if(r=n[i].replace("*",".*?"),r.charAt(0)==="-"){if(new RegExp("^"+r.substr(1)+"$").test(e))return!1;continue}if(new RegExp("^"+r+"$").test(e))return!0}return!1}});var ox=_((uQ,sx)=>{var sK=ix();sx.exports=function(e){return function(n){try{return sK(n,e())}catch{}return!1}}});var ux=_((cQ,ax)=>{var oK=ox();ax.exports=oK(function(){return process.env.DEBUG||process.env.DIAGNOSTICS})});var lx=_((lQ,cx)=>{cx.exports=function(t,e){try{Function.prototype.apply.call(console.log,console,e)}catch{}}});var fx=_((dQ,dx)=>{var aK=Zb(),uK=require("tty").isatty(1),rh=aK(function t(e,r){return r=r||{},r.colors="colors"in r?r.colors:uK,r.namespace=e,r.prod=!1,r.dev=!0,!t.enabled(e)&&!(r.force||t.force)?t.nope(r):t.yep(r)});rh.modify(rx());rh.use(ux());rh.set(lx());dx.exports=rh});var hc=_((fQ,ow)=>{process.env.NODE_ENV==="production"?ow.exports=EM():ow.exports=fx()});var gx=_((hQ,hx)=>{"use strict";var aw=require("fs"),{StringDecoder:cK}=require("string_decoder"),{Stream:lK}=yo();function dK(){}hx.exports=(t,e)=>{let r=Buffer.alloc(65536),n=new cK("utf8"),i=new lK,s="",o=0,a=0;return t.start===-1&&delete t.start,i.readable=!0,i.destroy=()=>{i.destroyed=!0,i.emit("end"),i.emit("close")},aw.open(t.file,"a+","0644",(u,c)=>{if(u){e?e(u):i.emit("error",u),i.destroy();return}(function l(){if(i.destroyed){aw.close(c,dK);return}return aw.read(c,r,0,r.length,o,(f,d)=>{if(f){e?e(f):i.emit("error",f),i.destroy();return}if(!d)return s&&((t.start==null||a>t.start)&&(e?e(null,s):i.emit("line",s)),a++,s=""),setTimeout(l,1e3);let p=n.write(r.slice(0,d));e||i.emit("data",p),p=(s+p).split(/\n+/);let g=p.length-1,b=0;for(;b<g;b++)(t.start==null||a>t.start)&&(e?e(null,p[b]):i.emit("line",p[b])),a++;return s=p[g],o+=d,l()})})()}),e?i.destroy:i}});var vx=_((pQ,yx)=>{"use strict";var Kr=require("fs"),Vt=require("path"),px=TO(),fK=require("zlib"),{MESSAGE:hK}=Pt(),{Stream:gK,PassThrough:mx}=yo(),pK=lo(),zn=hc()("winston:file"),mK=require("os"),yK=gx();yx.exports=class extends pK{constructor(e={}){super(e),this.name=e.name||"file";function r(n,...i){i.slice(1).forEach(s=>{if(e[s])throw new Error(`Cannot set ${s} and ${n} together`)})}if(this._stream=new mx,this._stream.setMaxListeners(30),this._onError=this._onError.bind(this),e.filename||e.dirname)r("filename or dirname","stream"),this._basename=this.filename=e.filename?Vt.basename(e.filename):"winston.log",this.dirname=e.dirname||Vt.dirname(e.filename),this.options=e.options||{flags:"a"};else if(e.stream)console.warn("options.stream will be removed in winston@4. Use winston.transports.Stream"),r("stream","filename","maxsize"),this._dest=this._stream.pipe(this._setupStream(e.stream)),this.dirname=Vt.dirname(this._dest.path);else throw new Error("Cannot log to file without filename or stream.");this.maxsize=e.maxsize||null,this.rotationFormat=e.rotationFormat||!1,this.zippedArchive=e.zippedArchive||!1,this.maxFiles=e.maxFiles||null,this.eol=typeof e.eol=="string"?e.eol:mK.EOL,this.tailable=e.tailable||!1,this.lazy=e.lazy||!1,this._size=0,this._pendingSize=0,this._created=0,this._drain=!1,this._opening=!1,this._ending=!1,this._fileExist=!1,this.dirname&&this._createLogDirIfNotExist(this.dirname),this.lazy||this.open()}finishIfEnding(){this._ending&&(this._opening?this.once("open",()=>{this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())}):(this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())))}log(e,r=()=>{}){if(this.silent)return r(),!0;if(this._drain){this._stream.once("drain",()=>{this._drain=!1,this.log(e,r)});return}if(this._rotate){this._stream.once("rotate",()=>{this._rotate=!1,this.log(e,r)});return}if(this.lazy){if(!this._fileExist){this._opening||this.open(),this.once("open",()=>{this._fileExist=!0,this.log(e,r)});return}if(this._needsNewFile(this._pendingSize)){this._dest.once("close",()=>{this._opening||this.open(),this.once("open",()=>{this.log(e,r)})});return}}let n=`${e[hK]}${this.eol}`,i=Buffer.byteLength(n);function s(){if(this._size+=i,this._pendingSize-=i,zn("logged %s %s",this._size,n),this.emit("logged",e),!this._rotate&&!this._opening&&this._needsNewFile()){if(this.lazy){this._endStream(()=>{this.emit("fileclosed")});return}this._rotate=!0,this._endStream(()=>this._rotateFile())}}this._pendingSize+=i,this._opening&&!this.rotatedWhileOpening&&this._needsNewFile(this._size+this._pendingSize)&&(this.rotatedWhileOpening=!0);let o=this._stream.write(n,s.bind(this));return o?r():(this._drain=!0,this._stream.once("drain",()=>{this._drain=!1,r()})),zn("written",o,this._drain),this.finishIfEnding(),o}query(e,r){typeof e=="function"&&(r=e,e={}),e=f(e);let n=Vt.join(this.dirname,this.filename),i="",s=[],o=0,a=Kr.createReadStream(n,{encoding:"utf8"});a.on("error",d=>{if(a.readable&&a.destroy(),!!r)return d.code!=="ENOENT"?r(d):r(null,s)}),a.on("data",d=>{d=(i+d).split(/\n+/);let p=d.length-1,g=0;for(;g<p;g++)(!e.start||o>=e.start)&&u(d[g]),o++;i=d[p]}),a.on("close",()=>{i&&u(i,!0),e.order==="desc"&&(s=s.reverse()),r&&r(null,s)});function u(d,p){try{let g=JSON.parse(d);l(g)&&c(g)}catch(g){p||a.emit("error",g)}}function c(d){if(e.rows&&s.length>=e.rows&&e.order!=="desc"){a.readable&&a.destroy();return}e.fields&&(d=e.fields.reduce((p,g)=>(p[g]=d[g],p),{})),e.order==="desc"&&s.length>=e.rows&&s.shift(),s.push(d)}function l(d){if(!d||typeof d!="object")return;let p=new Date(d.timestamp);if(!(e.from&&p<e.from||e.until&&p>e.until||e.level&&e.level!==d.level))return!0}function f(d){return d=d||{},d.rows=d.rows||d.limit||10,d.start=d.start||0,d.until=d.until||new Date,typeof d.until!="object"&&(d.until=new Date(d.until)),d.from=d.from||d.until-24*60*60*1e3,typeof d.from!="object"&&(d.from=new Date(d.from)),d.order=d.order||"desc",d}}stream(e={}){let r=Vt.join(this.dirname,this.filename),n=new gK,i={file:r,start:e.start};return n.destroy=yK(i,(s,o)=>{if(s)return n.emit("error",s);try{n.emit("data",o),o=JSON.parse(o),n.emit("log",o)}catch(a){n.emit("error",a)}}),n}open(){this.filename&&(this._opening||(this._opening=!0,this.stat((e,r)=>{if(e)return this.emit("error",e);zn("stat done: %s { size: %s }",this.filename,r),this._size=r,this._dest=this._createStream(this._stream),this._opening=!1,this.once("open",()=>{this._stream.emit("rotate")||(this._rotate=!1)})})))}stat(e){let r=this._getFile(),n=Vt.join(this.dirname,r);Kr.stat(n,(i,s)=>{if(i&&i.code==="ENOENT")return zn("ENOENT\xA0ok",n),this.filename=r,e(null,0);if(i)return zn(`err ${i.code} ${n}`),e(i);if(!s||this._needsNewFile(s.size))return this._incFile(()=>this.stat(e));this.filename=r,e(null,s.size)})}close(e){this._stream&&this._stream.end(()=>{e&&e(),this.emit("flush"),this.emit("closed")})}_needsNewFile(e){return e=e||this._size,this.maxsize&&e>=this.maxsize}_onError(e){this.emit("error",e)}_setupStream(e){return e.on("error",this._onError),e}_cleanupStream(e){return e.removeListener("error",this._onError),e.destroy(),e}_rotateFile(){this._incFile(()=>this.open())}_endStream(e=()=>{}){this._dest?(this._stream.unpipe(this._dest),this._dest.end(()=>{this._cleanupStream(this._dest),e()})):e()}_createStream(e){let r=Vt.join(this.dirname,this.filename);zn("create stream start",r,this.options);let n=Kr.createWriteStream(r,this.options).on("error",i=>zn(i)).on("close",()=>zn("close",n.path,n.bytesWritten)).on("open",()=>{zn("file open ok",r),this.emit("open",r),e.pipe(n),this.rotatedWhileOpening&&(this._stream=new mx,this._stream.setMaxListeners(30),this._rotateFile(),this.rotatedWhileOpening=!1,this._cleanupStream(n),e.end())});return zn("create stream ok",r),n}_incFile(e){zn("_incFile",this.filename);let r=Vt.extname(this._basename),n=Vt.basename(this._basename,r),i=[];this.zippedArchive&&i.push(function(s){let o=this._created>0&&!this.tailable?this._created:"";this._compressFile(Vt.join(this.dirname,`${n}${o}${r}`),Vt.join(this.dirname,`${n}${o}${r}.gz`),s)}.bind(this)),i.push(function(s){this.tailable?this._checkMaxFilesTailable(r,n,s):(this._created+=1,this._checkMaxFilesIncrementing(r,n,s))}.bind(this)),px(i,e)}_getFile(){let e=Vt.extname(this._basename),r=Vt.basename(this._basename,e),n=this.rotationFormat?this.rotationFormat():this._created;return!this.tailable&&this._created?`${r}${n}${e}`:`${r}${e}`}_checkMaxFilesIncrementing(e,r,n){if(!this.maxFiles||this._created<this.maxFiles)return setImmediate(n);let i=this._created-this.maxFiles,s=i!==0?i:"",o=this.zippedArchive?".gz":"",a=`${r}${s}${e}${o}`,u=Vt.join(this.dirname,a);Kr.unlink(u,n)}_checkMaxFilesTailable(e,r,n){let i=[];if(!this.maxFiles)return;let s=this.zippedArchive?".gz":"";for(let o=this.maxFiles-1;o>1;o--)i.push(function(a,u){let c=`${r}${a-1}${e}${s}`,l=Vt.join(this.dirname,c);Kr.exists(l,f=>{if(!f)return u(null);c=`${r}${a}${e}${s}`,Kr.rename(l,Vt.join(this.dirname,c),u)})}.bind(this,o));px(i,()=>{Kr.rename(Vt.join(this.dirname,`${r}${e}${s}`),Vt.join(this.dirname,`${r}1${e}${s}`),n)})}_compressFile(e,r,n){Kr.access(e,Kr.F_OK,i=>{if(i)return n();var s=fK.createGzip(),o=Kr.createReadStream(e),a=Kr.createWriteStream(r);a.on("finish",()=>{Kr.unlink(e,n)}),o.pipe(s).pipe(a)})}_createLogDirIfNotExist(e){Kr.existsSync(e)||Kr.mkdirSync(e,{recursive:!0})}}});var bx=_((yQ,_x)=>{"use strict";var vK=require("http"),_K=require("https"),{Stream:bK}=yo(),wK=lo(),{configure:SK}=Hu();_x.exports=class extends wK{constructor(e={}){super(e),this.options=e,this.name=e.name||"http",this.ssl=!!e.ssl,this.host=e.host||"localhost",this.port=e.port,this.auth=e.auth,this.path=e.path||"",this.maximumDepth=e.maximumDepth,this.agent=e.agent,this.headers=e.headers||{},this.headers["content-type"]="application/json",this.batch=e.batch||!1,this.batchInterval=e.batchInterval||5e3,this.batchCount=e.batchCount||10,this.batchOptions=[],this.batchTimeoutID=-1,this.batchCallback={},this.port||(this.port=this.ssl?443:80)}log(e,r){this._request(e,null,null,(n,i)=>{i&&i.statusCode!==200&&(n=new Error(`Invalid HTTP Status Code: ${i.statusCode}`)),n?this.emit("warn",n):this.emit("logged",e)}),r&&setImmediate(r)}query(e,r){typeof e=="function"&&(r=e,e={}),e={method:"query",params:this.normalizeQuery(e)};let n=e.params.auth||null;delete e.params.auth;let i=e.params.path||null;delete e.params.path,this._request(e,n,i,(s,o,a)=>{if(o&&o.statusCode!==200&&(s=new Error(`Invalid HTTP Status Code: ${o.statusCode}`)),s)return r(s);if(typeof a=="string")try{a=JSON.parse(a)}catch(u){return r(u)}r(null,a)})}stream(e={}){let r=new bK;e={method:"stream",params:e};let n=e.params.path||null;delete e.params.path;let i=e.params.auth||null;delete e.params.auth;let s="",o=this._request(e,i,n);return r.destroy=()=>o.destroy(),o.on("data",a=>{a=(s+a).split(/\n+/);let u=a.length-1,c=0;for(;c<u;c++)try{r.emit("log",JSON.parse(a[c]))}catch(l){r.emit("error",l)}s=a[u]}),o.on("error",a=>r.emit("error",a)),r}_request(e,r,n,i){e=e||{},r=r||this.auth,n=n||this.path||"",this.batch?this._doBatch(e,i,r,n):this._doRequest(e,i,r,n)}_doBatch(e,r,n,i){if(this.batchOptions.push(e),this.batchOptions.length===1){let s=this;this.batchCallback=r,this.batchTimeoutID=setTimeout(function(){s.batchTimeoutID=-1,s._doBatchRequest(s.batchCallback,n,i)},this.batchInterval)}this.batchOptions.length===this.batchCount&&this._doBatchRequest(this.batchCallback,n,i)}_doBatchRequest(e,r,n){this.batchTimeoutID>0&&(clearTimeout(this.batchTimeoutID),this.batchTimeoutID=-1);let i=this.batchOptions.slice();this.batchOptions=[],this._doRequest(i,e,r,n)}_doRequest(e,r,n,i){let s=Object.assign({},this.headers);n&&n.bearer&&(s.Authorization=`Bearer ${n.bearer}`);let o=(this.ssl?_K:vK).request({...this.options,method:"POST",host:this.host,port:this.port,path:`/${i.replace(/^\//,"")}`,headers:s,auth:n&&n.username&&n.password?`${n.username}:${n.password}`:"",agent:this.agent});o.on("error",r),o.on("response",u=>u.on("end",()=>r(null,u)).resume());let a=SK({...this.maximumDepth&&{maximumDepth:this.maximumDepth}});o.end(Buffer.from(a(e,this.options.replacer),"utf8"))}}});var uw=_((vQ,wx)=>{"use strict";var gi=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";gi.writable=t=>gi(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";gi.readable=t=>gi(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";gi.duplex=t=>gi.writable(t)&&gi.readable(t);gi.transform=t=>gi.duplex(t)&&typeof t._transform=="function";wx.exports=gi});var Rx=_((bQ,Sx)=>{"use strict";var RK=uw(),{MESSAGE:CK}=Pt(),DK=require("os"),EK=lo();Sx.exports=class extends EK{constructor(e={}){if(super(e),!e.stream||!RK(e.stream))throw new Error("options.stream is required.");this._stream=e.stream,this._stream.setMaxListeners(1/0),this.isObjectMode=e.stream._writableState.objectMode,this.eol=typeof e.eol=="string"?e.eol:DK.EOL}log(e,r){if(setImmediate(()=>this.emit("logged",e)),this.isObjectMode){this._stream.write(e),r&&r();return}this._stream.write(`${e[CK]}${this.eol}`),r&&r()}}});var Cx=_(gc=>{"use strict";Object.defineProperty(gc,"Console",{configurable:!0,enumerable:!0,get(){return Bq()}});Object.defineProperty(gc,"File",{configurable:!0,enumerable:!0,get(){return vx()}});Object.defineProperty(gc,"Http",{configurable:!0,enumerable:!0,get(){return bx()}});Object.defineProperty(gc,"Stream",{configurable:!0,enumerable:!0,get(){return Rx()}})});var ih=_(pc=>{"use strict";var nh=$_(),{configs:cw}=Pt();pc.cli=nh.levels(cw.cli);pc.npm=nh.levels(cw.npm);pc.syslog=nh.levels(cw.syslog);pc.addColors=nh.levels});var Ex=_((sh,Dx)=>{"use strict";Object.defineProperty(sh,"__esModule",{value:!0});var PK=bf(),TK=_o(PK),qK=Of(),OK=_o(qK),MK=Rb(),xK=_o(MK),kK=bb(),FK=_o(kK),IK=wb(),AK=_o(IK),NK=fo(),LK=_o(NK),jK=wa(),$K=_o(jK);function _o(t){return t&&t.__esModule?t:{default:t}}function WK(t,e,r){r=(0,FK.default)(r);var n=0,i=0,{length:s}=t,o=!1;s===0&&r(null);function a(u,c){u===!1&&(o=!0),o!==!0&&(u?r(u):(++i===s||c===OK.default)&&r(null))}for(;n<s;n++)e(t[n],n,(0,AK.default)(a))}function HK(t,e,r){return(0,xK.default)(t,1/0,e,r)}function UK(t,e,r){var n=(0,TK.default)(t)?WK:HK;return n(t,(0,LK.default)(e),r)}sh.default=(0,$K.default)(UK,3);Dx.exports=sh.default});var Tx=_((oh,Px)=>{"use strict";Object.defineProperty(oh,"__esModule",{value:!0});oh.default=zK;function zK(t){return(e,r,n)=>t(e,n)}Px.exports=oh.default});var ch=_((uh,qx)=>{"use strict";Object.defineProperty(uh,"__esModule",{value:!0});var KK=Ex(),BK=ah(KK),VK=Tx(),GK=ah(VK),YK=fo(),XK=ah(YK),JK=wa(),QK=ah(JK);function ah(t){return t&&t.__esModule?t:{default:t}}function ZK(t,e,r){return(0,BK.default)(t,(0,GK.default)((0,XK.default)(e)),r)}uh.default=(0,QK.default)(ZK,3);qx.exports=uh.default});var Mx=_((RQ,Ox)=>{"use strict";var e6=Object.prototype.toString;Ox.exports=function(e){if(typeof e.displayName=="string"&&e.constructor.name)return e.displayName;if(typeof e.name=="string"&&e.name)return e.name;if(typeof e=="object"&&e.constructor&&typeof e.constructor.name=="string")return e.constructor.name;var r=e.toString(),n=e6.call(e).slice(8,-1);return n==="Function"?r=r.substring(r.indexOf("(")+1,r.indexOf(")")):r=n,r||"anonymous"}});var lw=_((CQ,xx)=>{"use strict";var t6=Mx();xx.exports=function(e){var r=0,n;function i(){return r||(r=1,n=e.apply(this,arguments),e=null),n}return i.displayName=t6(e),i}});var dw=_(yc=>{yc.get=function(t){var e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var r={},n=Error.prepareStackTrace;Error.prepareStackTrace=function(s,o){return o},Error.captureStackTrace(r,t||yc.get);var i=r.stack;return Error.prepareStackTrace=n,Error.stackTraceLimit=e,i};yc.parse=function(t){if(!t.stack)return[];var e=this,r=t.stack.split(`
`).slice(1);return r.map(function(n){if(n.match(/^\s*[-]{4,}$/))return e._createParsedCallSite({fileName:n,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var i=n.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(i){var s=null,o=null,a=null,u=null,c=null,l=i[5]==="native";if(i[1]){a=i[1];var f=a.lastIndexOf(".");if(a[f-1]=="."&&f--,f>0){s=a.substr(0,f),o=a.substr(f+1);var d=s.indexOf(".Module");d>0&&(a=a.substr(d+1),s=s.substr(0,d))}u=null}o&&(u=s,c=o),o==="<anonymous>"&&(c=null,a=null);var p={fileName:i[2]||null,lineNumber:parseInt(i[3],10)||null,functionName:a,typeName:u,methodName:c,columnNumber:parseInt(i[4],10)||null,native:l};return e._createParsedCallSite(p)}}).filter(function(n){return!!n})};function mc(t){for(var e in t)this[e]=t[e]}var r6=["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"],n6=["topLevel","eval","native","constructor"];r6.forEach(function(t){mc.prototype[t]=null,mc.prototype["get"+t[0].toUpperCase()+t.substr(1)]=function(){return this[t]}});n6.forEach(function(t){mc.prototype[t]=!1,mc.prototype["is"+t[0].toUpperCase()+t.substr(1)]=function(){return this[t]}});yc._createParsedCallSite=function(t){return new mc(t)}});var Fx=_((PQ,kx)=>{"use strict";var{Writable:i6}=yo();kx.exports=class extends i6{constructor(e){if(super({objectMode:!0}),!e)throw new Error("ExceptionStream requires a TransportStream instance.");this.handleExceptions=!0,this.transport=e}_write(e,r,n){return e.exception?this.transport.log(e,n):(n(),!0)}}});var hw=_((qQ,Nx)=>{"use strict";var Ix=require("os"),s6=ch(),fw=hc()("winston:exception"),o6=lw(),Ax=dw(),a6=Fx();Nx.exports=class{constructor(e){if(!e)throw new Error("Logger is required to handle exceptions");this.logger=e,this.handlers=new Map}handle(...e){e.forEach(r=>{if(Array.isArray(r))return r.forEach(n=>this._addHandler(n));this._addHandler(r)}),this.catcher||(this.catcher=this._uncaughtException.bind(this),process.on("uncaughtException",this.catcher))}unhandle(){this.catcher&&(process.removeListener("uncaughtException",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(e=>this.logger.unpipe(e)))}getAllInfo(e){let r=null;return e&&(r=typeof e=="string"?e:e.message),{error:e,level:"error",message:[`uncaughtException: ${r||"(no error message)"}`,e&&e.stack||"  No stack trace"].join(`
`),stack:e&&e.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:Ix.loadavg(),uptime:Ix.uptime()}}getTrace(e){return(e?Ax.parse(e):Ax.get()).map(n=>({column:n.getColumnNumber(),file:n.getFileName(),function:n.getFunctionName(),line:n.getLineNumber(),method:n.getMethodName(),native:n.isNative()}))}_addHandler(e){if(!this.handlers.has(e)){e.handleExceptions=!0;let r=new a6(e);this.handlers.set(e,r),this.logger.pipe(r)}}_uncaughtException(e){let r=this.getAllInfo(e),n=this._getExceptionHandlers(),i=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(e):this.logger.exitOnError,s;!n.length&&i&&(console.warn("winston: exitOnError cannot be true with no exception handlers."),console.warn("winston: not exiting process."),i=!1);function o(){fw("doExit",i),fw("process._exiting",process._exiting),i&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!n||n.length===0)return process.nextTick(o);s6(n,(a,u)=>{let c=o6(u),l=a.transport||a;function f(d){return()=>{fw(d),c()}}l._ending=!0,l.once("finish",f("finished")),l.once("error",f("error"))},()=>i&&o()),this.logger.log(r),i&&(s=setTimeout(o,3e3))}_getExceptionHandlers(){return this.logger.transports.filter(e=>(e.transport||e).handleExceptions)}}});var jx=_((MQ,Lx)=>{"use strict";var{Writable:u6}=yo();Lx.exports=class extends u6{constructor(e){if(super({objectMode:!0}),!e)throw new Error("RejectionStream requires a TransportStream instance.");this.handleRejections=!0,this.transport=e}_write(e,r,n){return e.rejection?this.transport.log(e,n):(n(),!0)}}});var pw=_((kQ,Hx)=>{"use strict";var $x=require("os"),c6=ch(),gw=hc()("winston:rejection"),l6=lw(),Wx=dw(),d6=jx();Hx.exports=class{constructor(e){if(!e)throw new Error("Logger is required to handle rejections");this.logger=e,this.handlers=new Map}handle(...e){e.forEach(r=>{if(Array.isArray(r))return r.forEach(n=>this._addHandler(n));this._addHandler(r)}),this.catcher||(this.catcher=this._unhandledRejection.bind(this),process.on("unhandledRejection",this.catcher))}unhandle(){this.catcher&&(process.removeListener("unhandledRejection",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(e=>this.logger.unpipe(e)))}getAllInfo(e){let r=null;return e&&(r=typeof e=="string"?e:e.message),{error:e,level:"error",message:[`unhandledRejection: ${r||"(no error message)"}`,e&&e.stack||"  No stack trace"].join(`
`),stack:e&&e.stack,rejection:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:$x.loadavg(),uptime:$x.uptime()}}getTrace(e){return(e?Wx.parse(e):Wx.get()).map(n=>({column:n.getColumnNumber(),file:n.getFileName(),function:n.getFunctionName(),line:n.getLineNumber(),method:n.getMethodName(),native:n.isNative()}))}_addHandler(e){if(!this.handlers.has(e)){e.handleRejections=!0;let r=new d6(e);this.handlers.set(e,r),this.logger.pipe(r)}}_unhandledRejection(e){let r=this.getAllInfo(e),n=this._getRejectionHandlers(),i=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(e):this.logger.exitOnError,s;!n.length&&i&&(console.warn("winston: exitOnError cannot be true with no rejection handlers."),console.warn("winston: not exiting process."),i=!1);function o(){gw("doExit",i),gw("process._exiting",process._exiting),i&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!n||n.length===0)return process.nextTick(o);c6(n,(a,u)=>{let c=l6(u),l=a.transport||a;function f(d){return()=>{gw(d),c()}}l._ending=!0,l.once("finish",f("finished")),l.once("error",f("error"))},()=>i&&o()),this.logger.log(r),i&&(s=setTimeout(o,3e3))}_getRejectionHandlers(){return this.logger.transports.filter(e=>(e.transport||e).handleRejections)}}});var zx=_((FQ,Ux)=>{"use strict";var mw=class{constructor(e){let r=lh();if(typeof e!="object"||Array.isArray(e)||!(e instanceof r))throw new Error("Logger is required for profiling");this.logger=e,this.start=Date.now()}done(...e){typeof e[e.length-1]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),e.pop());let r=typeof e[e.length-1]=="object"?e.pop():{};return r.level=r.level||"info",r.durationMs=Date.now()-this.start,this.logger.write(r)}};Ux.exports=mw});var lh=_((IQ,Gx)=>{"use strict";var{Stream:f6,Transform:h6}=yo(),Kx=ch(),{LEVEL:pi,SPLAT:Bx}=Pt(),Vx=uw(),g6=hw(),p6=pw(),m6=yb(),y6=zx(),{warn:v6}=W_(),_6=ih(),b6=/%[scdjifoO%]/g,dh=class extends h6{constructor(e){super({objectMode:!0}),this.configure(e)}child(e){let r=this;return Object.create(r,{write:{value:function(n){let i=Object.assign({},e,n);n instanceof Error&&(i.stack=n.stack,i.message=n.message),r.write(i)}}})}configure({silent:e,format:r,defaultMeta:n,levels:i,level:s="info",exitOnError:o=!0,transports:a,colors:u,emitErrs:c,formatters:l,padLevels:f,rewriters:d,stripColors:p,exceptionHandlers:g,rejectionHandlers:b}={}){if(this.transports.length&&this.clear(),this.silent=e,this.format=r||this.format||I_()(),this.defaultMeta=n||null,this.levels=i||this.levels||_6.npm.levels,this.level=s,this.exceptions&&this.exceptions.unhandle(),this.rejections&&this.rejections.unhandle(),this.exceptions=new g6(this),this.rejections=new p6(this),this.profilers={},this.exitOnError=o,a&&(a=Array.isArray(a)?a:[a],a.forEach(C=>this.add(C))),u||c||l||f||d||p)throw new Error(["{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.","Use a custom winston.format(function) instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`));g&&this.exceptions.handle(g),b&&this.rejections.handle(b)}isLevelEnabled(e){let r=yw(this.levels,e);if(r===null)return!1;let n=yw(this.levels,this.level);return n===null?!1:!this.transports||this.transports.length===0?n>=r:this.transports.findIndex(s=>{let o=yw(this.levels,s.level);return o===null&&(o=n),o>=r})!==-1}log(e,r,...n){if(arguments.length===1)return e[pi]=e.level,this._addDefaultMeta(e),this.write(e),this;if(arguments.length===2)return r&&typeof r=="object"?(r[pi]=r.level=e,this._addDefaultMeta(r),this.write(r),this):(r={[pi]:e,level:e,message:r},this._addDefaultMeta(r),this.write(r),this);let[i]=n;if(typeof i=="object"&&i!==null&&!(r&&r.match&&r.match(b6))){let o=Object.assign({},this.defaultMeta,i,{[pi]:e,[Bx]:n,level:e,message:r});return i.message&&(o.message=`${o.message} ${i.message}`),i.stack&&(o.stack=i.stack),i.cause&&(o.cause=i.cause),this.write(o),this}return this.write(Object.assign({},this.defaultMeta,{[pi]:e,[Bx]:n,level:e,message:r})),this}_transform(e,r,n){if(this.silent)return n();e[pi]||(e[pi]=e.level),!this.levels[e[pi]]&&this.levels[e[pi]]!==0&&console.error("[winston] Unknown logger level: %s",e[pi]),this._readableState.pipes||console.error("[winston] Attempt to write logs with no transports, which can increase memory usage: %j",e);try{this.push(this.format.transform(e,this.format.options))}finally{this._writableState.sync=!1,n()}}_final(e){let r=this.transports.slice();Kx(r,(n,i)=>{if(!n||n.finished)return setImmediate(i);n.once("finish",i),n.end()},e)}add(e){let r=!Vx(e)||e.log.length>2?new m6({transport:e}):e;if(!r._writableState||!r._writableState.objectMode)throw new Error("Transports must WritableStreams in objectMode. Set { objectMode: true }.");return this._onEvent("error",r),this._onEvent("warn",r),this.pipe(r),e.handleExceptions&&this.exceptions.handle(),e.handleRejections&&this.rejections.handle(),this}remove(e){if(!e)return this;let r=e;return(!Vx(e)||e.log.length>2)&&(r=this.transports.filter(n=>n.transport===e)[0]),r&&this.unpipe(r),this}clear(){return this.unpipe(),this}close(){return this.exceptions.unhandle(),this.rejections.unhandle(),this.clear(),this.emit("close"),this}setLevels(){v6.deprecated("setLevels")}query(e,r){typeof e=="function"&&(r=e,e={}),e=e||{};let n={},i=Object.assign({},e.query||{});function s(a,u){e.query&&typeof a.formatQuery=="function"&&(e.query=a.formatQuery(i)),a.query(e,(c,l)=>{if(c)return u(c);typeof a.formatResults=="function"&&(l=a.formatResults(l,e.format)),u(null,l)})}function o(a,u){s(a,(c,l)=>{u&&(l=c||l,l&&(n[a.name]=l),u()),u=null})}Kx(this.transports.filter(a=>!!a.query),o,()=>r(null,n))}stream(e={}){let r=new f6,n=[];return r._streams=n,r.destroy=()=>{let i=n.length;for(;i--;)n[i].destroy()},this.transports.filter(i=>!!i.stream).forEach(i=>{let s=i.stream(e);s&&(n.push(s),s.on("log",o=>{o.transport=o.transport||[],o.transport.push(i.name),r.emit("log",o)}),s.on("error",o=>{o.transport=o.transport||[],o.transport.push(i.name),r.emit("error",o)}))}),r}startTimer(){return new y6(this)}profile(e,...r){let n=Date.now();if(this.profilers[e]){let i=this.profilers[e];delete this.profilers[e],typeof r[r.length-2]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),r.pop());let s=typeof r[r.length-1]=="object"?r.pop():{};return s.level=s.level||"info",s.durationMs=n-i,s.message=s.message||e,this.write(s)}return this.profilers[e]=n,this}handleExceptions(...e){console.warn("Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()"),this.exceptions.handle(...e)}unhandleExceptions(...e){console.warn("Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()"),this.exceptions.unhandle(...e)}cli(){throw new Error(["Logger.cli() was removed in winston@3.0.0","Use a custom winston.formats.cli() instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`))}_onEvent(e,r){function n(i){e==="error"&&!this.transports.includes(r)&&this.add(r),this.emit(e,i,r)}r["__winston"+e]||(r["__winston"+e]=n.bind(this),r.on(e,r["__winston"+e]))}_addDefaultMeta(e){this.defaultMeta&&Object.assign(e,this.defaultMeta)}};function yw(t,e){let r=t[e];return!r&&r!==0?null:r}Object.defineProperty(dh.prototype,"transports",{configurable:!1,enumerable:!0,get(){let{pipes:t}=this._readableState;return Array.isArray(t)?t:[t].filter(Boolean)}});Gx.exports=dh});var vw=_((AQ,Yx)=>{"use strict";var{LEVEL:w6}=Pt(),S6=ih(),R6=lh(),C6=hc()("winston:create-logger");function D6(t){return"is"+t.charAt(0).toUpperCase()+t.slice(1)+"Enabled"}Yx.exports=function(t={}){t.levels=t.levels||S6.npm.levels;class e extends R6{constructor(i){super(i)}}let r=new e(t);return Object.keys(t.levels).forEach(function(n){if(C6('Define prototype method for "%s"',n),n==="log"){console.warn('Level "log" not defined: conflicts with the method "log". Use a different level name.');return}e.prototype[n]=function(...i){let s=this||r;if(i.length===1){let[o]=i,a=o&&o.message&&o||{message:o};return a.level=a[w6]=n,s._addDefaultMeta(a),s.write(a),this||r}return i.length===0?(s.log(n,""),s):s.log(n,...i)},e.prototype[D6(n)]=function(){return(this||r).isLevelEnabled(n)}}),r}});var Jx=_((LQ,Xx)=>{"use strict";var E6=vw();Xx.exports=class{constructor(e={}){this.loggers=new Map,this.options=e}add(e,r){if(!this.loggers.has(e)){r=Object.assign({},r||this.options);let n=r.transports||this.options.transports;n?r.transports=Array.isArray(n)?n.slice():[n]:r.transports=[];let i=E6(r);i.on("close",()=>this._delete(e)),this.loggers.set(e,i)}return this.loggers.get(e)}get(e,r){return this.add(e,r)}has(e){return!!this.loggers.has(e)}close(e){if(e)return this._removeLogger(e);this.loggers.forEach((r,n)=>this._removeLogger(n))}_removeLogger(e){if(!this.loggers.has(e))return;this.loggers.get(e).close(),this._delete(e)}_delete(e){this.loggers.delete(e)}}});var Zx=_(st=>{"use strict";var Qx=$_(),{warn:vc}=W_();st.version=U1().version;st.transports=Cx();st.config=ih();st.addColors=Qx.levels;st.format=Qx.format;st.createLogger=vw();st.Logger=lh();st.ExceptionHandler=hw();st.RejectionHandler=pw();st.Container=Jx();st.Transport=lo();st.loggers=new st.Container;var mi=st.createLogger();Object.keys(st.config.npm.levels).concat(["log","query","stream","add","remove","clear","profile","startTimer","handleExceptions","unhandleExceptions","handleRejections","unhandleRejections","configure","child"]).forEach(t=>st[t]=(...e)=>mi[t](...e));Object.defineProperty(st,"level",{get(){return mi.level},set(t){mi.level=t}});Object.defineProperty(st,"exceptions",{get(){return mi.exceptions}});Object.defineProperty(st,"rejections",{get(){return mi.rejections}});["exitOnError"].forEach(t=>{Object.defineProperty(st,t,{get(){return mi[t]},set(e){mi[t]=e}})});Object.defineProperty(st,"default",{get(){return{exceptionHandlers:mi.exceptionHandlers,rejectionHandlers:mi.rejectionHandlers,transports:mi.transports}}});vc.deprecated(st,"setLevels");vc.forFunctions(st,"useFormat",["cli"]);vc.forProperties(st,"useFormat",["padLevels","stripColors"]);vc.forFunctions(st,"deprecated",["addRewriter","addFilter","clone","extend"]);vc.forProperties(st,"deprecated",["emitErrs","levelLength"])});var tk=_(($Q,ek)=>{"use strict";var _w=class t extends Error{constructor(e){super(t._prepareSuperMessage(e)),Object.defineProperty(this,"name",{value:"NonError",configurable:!0,writable:!0}),Error.captureStackTrace&&Error.captureStackTrace(this,t)}static _prepareSuperMessage(e){try{return JSON.stringify(e)}catch{return String(e)}}},P6=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],bw=Symbol(".toJSON called"),T6=t=>{t[bw]=!0;let e=t.toJSON();return delete t[bw],e},ww=({from:t,seen:e,to_:r,forceEnumerable:n,maxDepth:i,depth:s})=>{let o=r||(Array.isArray(t)?[]:{});if(e.push(t),s>=i)return o;if(typeof t.toJSON=="function"&&t[bw]!==!0)return T6(t);for(let[a,u]of Object.entries(t)){if(typeof Buffer=="function"&&Buffer.isBuffer(u)){o[a]="[object Buffer]";continue}if(typeof u!="function"){if(!u||typeof u!="object"){o[a]=u;continue}if(!e.includes(t[a])){s++,o[a]=ww({from:t[a],seen:e.slice(),forceEnumerable:n,maxDepth:i,depth:s});continue}o[a]="[Circular]"}}for(let{property:a,enumerable:u}of P6)typeof t[a]=="string"&&Object.defineProperty(o,a,{value:t[a],enumerable:n?!0:u,configurable:!0,writable:!0});return o},q6=(t,e={})=>{let{maxDepth:r=Number.POSITIVE_INFINITY}=e;return typeof t=="object"&&t!==null?ww({from:t,seen:[],forceEnumerable:!0,maxDepth:r,depth:0}):typeof t=="function"?`[Function: ${t.name||"anonymous"}]`:t},O6=(t,e={})=>{let{maxDepth:r=Number.POSITIVE_INFINITY}=e;if(t instanceof Error)return t;if(typeof t=="object"&&t!==null&&!Array.isArray(t)){let n=new Error;return ww({from:t,seen:[],to_:n,maxDepth:r,depth:0}),n}return new _w(t)};ek.exports={serializeError:q6,deserializeError:O6}});var Sw=_(fh=>{"use strict";Object.defineProperty(fh,"__esModule",{value:!0});fh.isIterable=rk;fh.isIterableObject=M6;function rk(t){return t!=null&&typeof t[Symbol.iterator]=="function"}function M6(t){return rk(t)&&typeof t=="object"}});var hh=_(Rw=>{"use strict";Object.defineProperty(Rw,"__esModule",{value:!0});Rw.isObject=x6;function x6(t){return typeof t=="object"&&t!==null}});var ik=_(Cw=>{"use strict";Object.defineProperty(Cw,"__esModule",{value:!0});Cw.mergeAssign=nk;var k6=hh();function nk(t,e,r){let n=t;for(let i of[e,r])if(i)for(let s of Object.getOwnPropertyNames(i)){if(s==="__proto__"||s==="constructor")continue;let o=i[s];if((0,k6.isObject)(o)){if(Array.isArray(o)){let a=n[s];n[s]=Array.isArray(a)?a.concat(o):o;continue}n[s]||(n[s]={}),n[s]=nk(n[s],o)}else n[s]=o}return n}});var ok=_((zQ,sk)=>{"use strict";sk.exports=F6;function Ta(t){return t instanceof Buffer?Buffer.from(t):new t.constructor(t.buffer.slice(),t.byteOffset,t.length)}function F6(t){if(t=t||{},t.circles)return I6(t);let e=new Map;if(e.set(Date,o=>new Date(o)),e.set(Map,(o,a)=>new Map(n(Array.from(o),a))),e.set(Set,(o,a)=>new Set(n(Array.from(o),a))),t.constructorHandlers)for(let o of t.constructorHandlers)e.set(o[0],o[1]);let r=null;return t.proto?s:i;function n(o,a){let u=Object.keys(o),c=new Array(u.length);for(let l=0;l<u.length;l++){let f=u[l],d=o[f];typeof d!="object"||d===null?c[f]=d:d.constructor!==Object&&(r=e.get(d.constructor))?c[f]=r(d,a):ArrayBuffer.isView(d)?c[f]=Ta(d):c[f]=a(d)}return c}function i(o){if(typeof o!="object"||o===null)return o;if(Array.isArray(o))return n(o,i);if(o.constructor!==Object&&(r=e.get(o.constructor)))return r(o,i);let a={};for(let u in o){if(Object.hasOwnProperty.call(o,u)===!1)continue;let c=o[u];typeof c!="object"||c===null?a[u]=c:c.constructor!==Object&&(r=e.get(c.constructor))?a[u]=r(c,i):ArrayBuffer.isView(c)?a[u]=Ta(c):a[u]=i(c)}return a}function s(o){if(typeof o!="object"||o===null)return o;if(Array.isArray(o))return n(o,s);if(o.constructor!==Object&&(r=e.get(o.constructor)))return r(o,s);let a={};for(let u in o){let c=o[u];typeof c!="object"||c===null?a[u]=c:c.constructor!==Object&&(r=e.get(c.constructor))?a[u]=r(c,s):ArrayBuffer.isView(c)?a[u]=Ta(c):a[u]=s(c)}return a}}function I6(t){let e=[],r=[],n=new Map;if(n.set(Date,u=>new Date(u)),n.set(Map,(u,c)=>new Map(s(Array.from(u),c))),n.set(Set,(u,c)=>new Set(s(Array.from(u),c))),t.constructorHandlers)for(let u of t.constructorHandlers)n.set(u[0],u[1]);let i=null;return t.proto?a:o;function s(u,c){let l=Object.keys(u),f=new Array(l.length);for(let d=0;d<l.length;d++){let p=l[d],g=u[p];if(typeof g!="object"||g===null)f[p]=g;else if(g.constructor!==Object&&(i=n.get(g.constructor)))f[p]=i(g,c);else if(ArrayBuffer.isView(g))f[p]=Ta(g);else{let b=e.indexOf(g);b!==-1?f[p]=r[b]:f[p]=c(g)}}return f}function o(u){if(typeof u!="object"||u===null)return u;if(Array.isArray(u))return s(u,o);if(u.constructor!==Object&&(i=n.get(u.constructor)))return i(u,o);let c={};e.push(u),r.push(c);for(let l in u){if(Object.hasOwnProperty.call(u,l)===!1)continue;let f=u[l];if(typeof f!="object"||f===null)c[l]=f;else if(f.constructor!==Object&&(i=n.get(f.constructor)))c[l]=i(f,o);else if(ArrayBuffer.isView(f))c[l]=Ta(f);else{let d=e.indexOf(f);d!==-1?c[l]=r[d]:c[l]=o(f)}}return e.pop(),r.pop(),c}function a(u){if(typeof u!="object"||u===null)return u;if(Array.isArray(u))return s(u,a);if(u.constructor!==Object&&(i=n.get(u.constructor)))return i(u,a);let c={};e.push(u),r.push(c);for(let l in u){let f=u[l];if(typeof f!="object"||f===null)c[l]=f;else if(f.constructor!==Object&&(i=n.get(f.constructor)))c[l]=i(f,a);else if(ArrayBuffer.isView(f))c[l]=Ta(f);else{let d=e.indexOf(f);d!==-1?c[l]=r[d]:c[l]=a(f)}}return e.pop(),r.pop(),c}}});var uk=_(_c=>{"use strict";var A6=_c&&_c.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_c,"__esModule",{value:!0});_c.mergeOptionsWithDefaults=L6;var N6=A6(ok()),Dw=hh(),gh=(0,N6.default)();function ak(t,e,r,n,i){if(!(0,Dw.isObject)(t))return gh(e);let s={};for(let o of Object.keys(e)){let a=e[o],u=t[o];if(u!==void 0){if((0,Dw.isObject)(u)){if(r.has(u)){i.add([u,s,o]);continue}r.add(u);let c=Array.isArray(u)?u.map(l=>gh(l)):(0,Dw.isObject)(a)&&!Array.isArray(a)?ak(u,a,r,n,i):gh(u);n.set(u,c),s[o]=c;continue}s[o]=u;continue}s[o]=gh(a)}return s}function L6(t,e){let r=new WeakSet,n=new WeakMap,i=new Set,s=ak(t,e,r,n,i);for(let[o,a,u]of i)a[u]=n.get(o);return s}});var Pw=_(ji=>{"use strict";var j6=ji&&ji.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ew=ji&&ji.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&j6(e,t,r)};Object.defineProperty(ji,"__esModule",{value:!0});Ew(hh(),ji);Ew(ik(),ji);Ew(uk(),ji)});var lk=_(Tw=>{"use strict";Object.defineProperty(Tw,"__esModule",{value:!0});Tw.serializeErrors=W6;var ck=tk(),$6=Sw(),ph=Pw();function W6(t){let e=(r,n)=>{if(!r||typeof r!="object")return r;if(n.has(r))return n.get(r);if(r instanceof Error){let s=(0,ck.serializeError)(r);return n.set(r,s),s}if(r instanceof Map){let s=new Map;n.set(r,s);for(let[o,a]of r){let u=e(o,n),c=e(a,n);(0,ph.isObject)(o)&&n.set(o,u),(0,ph.isObject)(a)&&n.set(a,c),s.set(u,c)}return s}if(r instanceof Set){let s=new Set;n.set(r,s);for(let o of r){if(!(0,ph.isObject)(o)){s.add(o);continue}let a=e(o,n);n.set(o,a),s.add(a)}return s}if((0,$6.isIterable)(r)){let s=[];n.set(r,s);for(let o of r)s.push(e(o,n));return s}n.set(r,"[Circular]");let i=Object.fromEntries(Object.entries(r).map(([s,o])=>{if(!(0,ph.isObject)(o))return[s,o];if(n.has(o))return[s,n.get(o)];if(o instanceof Error){let u=(0,ck.serializeError)(o);return n.set(o,u),[s,u]}let a=e(o,n);return n.set(o,a),[s,a]}));return n.set(r,i),i};return e(t,new WeakMap)}});var dk=_(mh=>{"use strict";Object.defineProperty(mh,"__esModule",{value:!0});mh.ErrorFormatter=void 0;var H6=lk(),qw=class{transform(e){let r=(0,H6.serializeErrors)({...e});for(let n of Object.keys(r))e[n]=r[n];return e}};mh.ErrorFormatter=qw});var vh=_(yh=>{"use strict";Object.defineProperty(yh,"__esModule",{value:!0});yh.getLogFunction=void 0;var U6=(t,e)=>{let r=t[e];if(typeof r=="function")return r};yh.getLogFunction=U6});var fk=_(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});Rs.padNumber=Rs.padString=Rs.upperCaseFirstChar=void 0;var z6=t=>t.charAt(0).toUpperCase()+t.slice(1);Rs.upperCaseFirstChar=z6;var K6=(t,e)=>t+" ".repeat(e-t.length);Rs.padString=K6;var B6=(t,e)=>{let r=String(t);return"0".repeat(e-r.length)+r};Rs.padNumber=B6});var gk=_(bh=>{"use strict";Object.defineProperty(bh,"__esModule",{value:!0});bh.LanguageServerFormatter=void 0;var hk=Pt(),V6=vh(),_h=fk(),Ow=class{constructor(e){this.options=e}transform(e){let r=new Date,n=`${r.getHours()%12||12}:${(0,_h.padNumber)(r.getMinutes(),2)}:${(0,_h.padNumber)(r.getSeconds(),2)} ${r.getHours()<12?"a.m.":"p.m."}`,i=[],s=String(e[hk.LEVEL]);(0,V6.getLogFunction)(this.options.connection.console,s)||i.push(`[${(0,_h.padString)((0,_h.upperCaseFirstChar)(s),5)} - ${n}]`),e.component&&i.push(`[${String(e.component)}]`),i.push(e.message),delete e.component,delete e.timestamp;let o=new Set(Object.keys({...e})),a=[];if(this.options.preferredKeyOrder)for(let c of this.options.preferredKeyOrder)o.has(c)&&(a.push(`${c}: ${JSON.stringify(e[c])}`),o.delete(c),delete e[c]);for(let c of o)c==="level"||c==="message"||(a.push(`${c}: ${JSON.stringify(e[c])}`),delete e[c]);let u=a.length>0?`${i.join(" ")} | ${a.join(" ")}`:i.join(" ");return e[hk.MESSAGE]=u,e.message=u,e}};bh.LanguageServerFormatter=Ow});var pk=_(yi=>{"use strict";var G6=yi&&yi.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Mw=yi&&yi.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Y6=yi&&yi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},qa;Object.defineProperty(yi,"__esModule",{value:!0});yi.LanguageServerTransport=void 0;var X6=Y6(lo()),xw=Pt(),J6=vh(),kw=class extends X6.default{constructor(e){super(e),qa.set(this,void 0),G6(this,qa,e.connection.console,"f")}log(e,r){setImmediate(()=>{this.emit("logged",e)});try{let n=(0,J6.getLogFunction)(Mw(this,qa,"f"),String(e[xw.LEVEL]));typeof n=="function"?n.call(Mw(this,qa,"f"),String(e[xw.MESSAGE])):Mw(this,qa,"f").log(String(e[xw.MESSAGE]))}catch(n){(!(n instanceof Error)||!n.message.includes("Connection is disposed"))&&this.emit("error",n)}r()}};yi.LanguageServerTransport=kw;qa=new WeakMap});var mk=_(vi=>{"use strict";var Q6=vi&&vi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),wh=vi&&vi.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Q6(e,t,r)};Object.defineProperty(vi,"__esModule",{value:!0});wh(dk(),vi);wh(vh(),vi);wh(gk(),vi);wh(pk(),vi)});var Fw=_(bc=>{"use strict";var Z6=bc&&bc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bc,"__esModule",{value:!0});bc.createLogger=eB;var Oa=Z6(Zx()),Sh=mk();function eB(t,e="info",r){let n=[new Sh.LanguageServerTransport({connection:t,format:Oa.default.format.combine(new Sh.ErrorFormatter,new Sh.LanguageServerFormatter({connection:t,preferredKeyOrder:["module","uri","command"]}))})];return r&&n.push(new Oa.default.transports.File({filename:r,format:Oa.default.format.combine(new Sh.ErrorFormatter,Oa.default.format.timestamp(),Oa.default.format.json())})),Oa.default.createLogger({level:e,transports:n,levels:{error:0,warn:1,info:2,debug:3}})}});var Ma=_(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.Notification=Cs.CodeActionKind=Cs.CommandId=void 0;var tB=oi(),yk;(function(t){t.ApplyAutoFix="stylelint.applyAutoFix",t.OpenRuleDoc="stylelint.openRuleDoc"})(yk||(Cs.CommandId=yk={}));Cs.CodeActionKind={StylelintSourceFixAll:`${tB.CodeActionKind.SourceFixAll}.stylelint`};var vk;(function(t){t.DidRegisterCodeActionRequestHandler="stylelint/didRegisterCodeActionRequestHandler",t.DidRegisterDocumentFormattingEditProvider="stylelint/didRegisterDocumentFormattingEditProvider",t.DidResetConfiguration="stylelint/didResetConfiguration"})(vk||(Cs.Notification=vk={}))});var Sk=_(Es=>{"use strict";var _k=Es&&Es.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},er=Es&&Es.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Iw,Ds,Kn,wc,wk;Object.defineProperty(Es,"__esModule",{value:!0});Es.AutoFixModule=void 0;var rB=ne(),bk=Ma(),Rh=class{constructor({context:e,logger:r}){Iw.add(this),Ds.set(this,void 0),Kn.set(this,void 0),wc.set(this,[]),_k(this,Ds,e,"f"),_k(this,Kn,r,"f")}onInitialize(){return{capabilities:{executeCommandProvider:{commands:[bk.CommandId.ApplyAutoFix]}}}}dispose(){er(this,wc,"f").forEach(e=>e.dispose()),er(this,wc,"f").length=0}onDidRegisterHandlers(){er(this,Kn,"f")?.debug("Registering onExecuteCommand handler"),er(this,wc,"f").push(er(this,Ds,"f").commands.on(bk.CommandId.ApplyAutoFix,async({arguments:e})=>{if(!e)return{};let r=e[0],n=r.uri,i=er(this,Ds,"f").documents.get(n);if(!i||!await er(this,Iw,"m",wk).call(this,i))return er(this,Kn,"f")?.isDebugEnabled()&&(i?er(this,Kn,"f").debug("Document should not be auto-fixed, ignoring",{uri:n,language:i.languageId}):er(this,Kn,"f").debug("Unknown document, ignoring",{uri:n})),{};if(r.version!==i.version)return er(this,Kn,"f")?.debug("Document has been modified, ignoring",{uri:n}),{};let s=new rB.WorkspaceChange,o=s.getTextEditChange(r),a=await er(this,Ds,"f").getFixes(i);a.forEach(u=>o.add(u)),er(this,Kn,"f")?.debug("Applying fixes",{uri:n,edits:a});try{let u=await er(this,Ds,"f").connection.workspace.applyEdit(s.edit);u.applied||er(this,Kn,"f")?.debug("Failed to apply fixes",{uri:n,response:u})}catch(u){er(this,Kn,"f")?.debug("Failed to apply fixes",{uri:n,error:u})}return{}}))}};Es.AutoFixModule=Rh;Ds=new WeakMap,Kn=new WeakMap,wc=new WeakMap,Iw=new WeakSet,wk=async function(e){return(await er(this,Ds,"f").getOptions(e.uri)).validate.includes(e.languageId)};Rh.id="auto-fix"});var Dk=_(Br=>{"use strict";var nB=Br&&Br.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),iB=Br&&Br.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),sB=Br&&Br.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[n.length]=i);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),i=0;i<n.length;i++)n[i]!=="default"&&nB(r,e,n[i]);return iB(r,e),r}}(),Rk=Br&&Br.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Ft=Br&&Br.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Sc,br,Ps;Object.defineProperty(Br,"__esModule",{value:!0});Br.CommandManager=void 0;var Ck=sB(ne()),Aw=class{constructor(e,r){Sc.set(this,void 0),br.set(this,void 0),Ps.set(this,new Map),Rk(this,Sc,e,"f"),Rk(this,br,r,"f")}dispose(){Ft(this,br,"f")?.debug("Disposing command manager"),Ft(this,Ps,"f").clear(),Ft(this,Sc,"f").onExecuteCommand(()=>{})}on(e,r){if(Array.isArray(e)){Ft(this,br,"f")?.debug("Registering commands",{commands:e});for(let n of e)Ft(this,Ps,"f").set(n,r);return{dispose:()=>{Ft(this,br,"f")?.debug("Deregistering commands",{commands:e});for(let n of e)Ft(this,Ps,"f").delete(n)}}}return Ft(this,br,"f")?.debug("Registering command",{command:e}),Ft(this,Ps,"f").set(e,r),{dispose:()=>{Ft(this,br,"f")?.debug("Deregistering command",{command:e}),Ft(this,Ps,"f").delete(e)}}}register(){Ft(this,br,"f")?.debug("Registering ExecuteCommandRequest handler"),Ft(this,Sc,"f").onExecuteCommand(async(...e)=>{Ft(this,br,"f")?.debug("Received ExecuteCommandRequest",{command:e[0].command,arguments:e[0].arguments});let r=Ft(this,Ps,"f").get(e[0].command);if(!r)return Ft(this,br,"f")?.debug("No handler registered for command",{command:e[0].command}),{};Ft(this,br,"f")?.debug("Executing command",{command:e[0].command});try{let n=await r(...e);return Ft(this,br,"f")?.debug("Sending command response",{command:e[0].command,response:n}),n}catch(n){return Ft(this,br,"f")?.error("Error executing command",{command:e[0].command,error:n}),new Ck.ResponseError(Ck.ErrorCodes.InternalError,`Error executing command ${e[0].command}`,n)}}),Ft(this,br,"f")?.debug("ExecuteCommandRequest handler registered")}};Br.CommandManager=Aw;Sc=new WeakMap,br=new WeakMap,Ps=new WeakMap});var Ek=_(Nw=>{"use strict";Object.defineProperty(Nw,"__esModule",{value:!0});Nw.createDisableCompletionItem=oB;var Rc=oi();function oB(t,e=""){let r=Rc.CompletionItem.create(t);return r.kind=Rc.CompletionItemKind.Snippet,r.insertTextFormat=Rc.InsertTextFormat.Snippet,t==="stylelint-disable"?(r.insertText=`/* stylelint-disable \${0:${e||"rule"}} */
/* stylelint-enable \${0:${e||"rule"}} */`,r.detail="Turn off all Stylelint or individual rules, after which you do not need to re-enable Stylelint. (Stylelint)",r.documentation={kind:Rc.MarkupKind.Markdown,value:`\`\`\`css
/* stylelint-disable ${e||"rule"} */
/* stylelint-enable ${e||"rule"} */
\`\`\``}):(r.insertText=`/* ${t} \${0:${e||"rule"}} */`,r.detail=t==="stylelint-disable-line"?"Turn off Stylelint rules for individual lines only, after which you do not need to explicitly re-enable them. (Stylelint)":"Turn off Stylelint rules for the next line only, after which you do not need to explicitly re-enable them. (Stylelint)",r.documentation={kind:Rc.MarkupKind.Markdown,value:`\`\`\`css
/* ${t} ${e||"rule"} */
\`\`\``}),r}});var Pk=_(Bn=>{"use strict";var aB=Bn&&Bn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),uB=Bn&&Bn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),cB=Bn&&Bn.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[n.length]=i);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),i=0;i<n.length;i++)n[i]!=="default"&&aB(r,e,n[i]);return uB(r,e),r}}(),lB=Bn&&Bn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.createDisableRuleFileCodeAction=fB;var dB=lB(require("os")),Ts=cB(ne());function fB(t,{code:e}){let r=new Ts.WorkspaceChange,n=t.getText(Ts.Range.create(Ts.Position.create(0,0),Ts.Position.create(0,2)));return r.getTextEditChange(t).add(Ts.TextEdit.insert(Ts.Position.create(n==="#!"?1:0,0),`/* stylelint-disable ${e} */${dB.default.EOL}`)),Ts.CodeAction.create(`Disable ${e} for the entire file`,r.edit,Ts.CodeActionKind.QuickFix)}});var Tk=_(Vn=>{"use strict";var hB=Vn&&Vn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),gB=Vn&&Vn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),pB=Vn&&Vn.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[n.length]=i);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),i=0;i<n.length;i++)n[i]!=="default"&&hB(r,e,n[i]);return gB(r,e),r}}(),mB=Vn&&Vn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.createDisableRuleLineCodeAction=vB;var yB=mB(require("os")),En=pB(ne());function vB(t,{code:e,range:r},n){let i=new En.WorkspaceChange;if(n==="sameLine")i.getTextEditChange(t).add(En.TextEdit.insert(En.Position.create(r.start.line,En.uinteger.MAX_VALUE),` /* stylelint-disable-line ${e} */`));else{let o=t.getText(En.Range.create(En.Position.create(r.start.line,0),En.Position.create(r.start.line,En.uinteger.MAX_VALUE))).match(/^([ \t]+)/)?.[1]??"";i.getTextEditChange(t).add(En.TextEdit.insert(En.Position.create(r.start.line,0),`${o}/* stylelint-disable-next-line ${e} */${yB.default.EOL}`))}return En.CodeAction.create(`Disable ${e} for this line`,i.edit,En.CodeActionKind.QuickFix)}});var qk=_(Lw=>{"use strict";Object.defineProperty(Lw,"__esModule",{value:!0});Lw.displayError=bB;var _B=Sw();function bB(t,e){if(!(e instanceof Error)){t.window.showErrorMessage(String(e).replace(/\n/gu," "));return}if((0,_B.isIterableObject)(e?.reasons)){for(let r of e.reasons)t.window.showErrorMessage(`Stylelint: ${r}`);return}if(e?.code===78){t.window.showErrorMessage(`Stylelint: ${e.message}`);return}t.window.showErrorMessage((e.stack||e.message).replace(/\n/gu," "))}});var Mk=_(Os=>{"use strict";var Ok=Os&&Os.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},wr=Os&&Os.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Ch,bo,xa,qs,jw;Object.defineProperty(Os,"__esModule",{value:!0});Os.NotificationManager=void 0;var $w=class{constructor(e,r){Ch.add(this),bo.set(this,void 0),xa.set(this,void 0),qs.set(this,new Map),Ok(this,bo,e,"f"),Ok(this,xa,r,"f")}dispose(){wr(this,xa,"f")?.debug("Disposing notification manager");for(let[e]of wr(this,qs,"f"))e?wr(this,bo,"f").onNotification(e,()=>{}):wr(this,bo,"f").onNotification(()=>{});wr(this,qs,"f").clear()}on(e,r){let n=typeof e=="function",[i,s]=n?[void 0,e]:[e,r];if(!s)throw new Error("Handler must be defined");let o={dispose:()=>{wr(this,qs,"f").get(i)?.delete(s)}},a=wr(this,qs,"f").get(i);return a?(a.add(s),o):(wr(this,qs,"f").set(i,new Set([s])),n?(wr(this,bo,"f").onNotification((...u)=>wr(this,Ch,"m",jw).call(this,void 0,u)),o):(wr(this,bo,"f").onNotification(e,(...u)=>wr(this,Ch,"m",jw).call(this,e,u)),o))}};Os.NotificationManager=$w;bo=new WeakMap,xa=new WeakMap,qs=new WeakMap,Ch=new WeakSet,jw=async function(e,r){wr(this,xa,"f")?.debug("Received notification",{notificationType:e??"<all>",params:r});let n=wr(this,qs,"f").get(e),i=[];for(let s of n)i.push(async()=>{try{await s(...r)}catch(o){wr(this,xa,"f")?.error("Error handling notification",{notificationType:e??"<all>",error:o})}});await Promise.all(i.map(s=>s()))}});var xk=_(ka=>{"use strict";var Ww=ka&&ka.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Cc;Object.defineProperty(ka,"__esModule",{value:!0});ka.RuleCodeActionsCollection=void 0;var Hw=class{constructor(){Cc.set(this,new Map)}get(e){let r=Ww(this,Cc,"f").get(e);if(r)return r;let n={};return Ww(this,Cc,"f").set(e,n),n}*[(Cc=new WeakMap,Symbol.iterator)](){for(let e of Ww(this,Cc,"f").values())e.disableLine&&(yield e.disableLine),e.disableFile&&(yield e.disableFile),e.documentation&&(yield e.documentation)}get size(){let e=this[Symbol.iterator](),r=0;for(;!e.next().done;)r++;return r}};ka.RuleCodeActionsCollection=Hw});var Fk=_(kk=>{"use strict";Object.defineProperty(kk,"__esModule",{value:!0})});var Dh=_(Vr=>{"use strict";var wB=Vr&&Vr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ms=Vr&&Vr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&wB(e,t,r)};Object.defineProperty(Vr,"__esModule",{value:!0});Ms(Dk(),Vr);Ms(Ek(),Vr);Ms(Pk(),Vr);Ms(Tk(),Vr);Ms(qk(),Vr);Ms(Mk(),Vr);Ms(xk(),Vr);Ms(Fk(),Vr)});var Eh=_((fZ,Nk)=>{"use strict";var Ak=require("path");Nk.exports=function(t,e){return t=Ik(t),e=Ik(e),process.platform==="win32"&&(t=t.toLowerCase(),e=e.toLowerCase()),t.lastIndexOf(e,0)===0&&(t[e.length]===Ak.sep||t[e.length]===void 0)};function Ik(t){return t[t.length-1]===Ak.sep?t.slice(0,-1):t}});var Fa=_((Dc,Uw)=>{(function(t,e){if(typeof Dc=="object"&&typeof Uw=="object")Uw.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var r=e();for(var n in r)(typeof Dc=="object"?Dc:t)[n]=r[n]}})(Dc,()=>(()=>{"use strict";var t={975:i=>{function s(u){if(typeof u!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(u))}function o(u,c){for(var l,f="",d=0,p=-1,g=0,b=0;b<=u.length;++b){if(b<u.length)l=u.charCodeAt(b);else{if(l===47)break;l=47}if(l===47){if(!(p===b-1||g===1))if(p!==b-1&&g===2){if(f.length<2||d!==2||f.charCodeAt(f.length-1)!==46||f.charCodeAt(f.length-2)!==46){if(f.length>2){var C=f.lastIndexOf("/");if(C!==f.length-1){C===-1?(f="",d=0):d=(f=f.slice(0,C)).length-1-f.lastIndexOf("/"),p=b,g=0;continue}}else if(f.length===2||f.length===1){f="",d=0,p=b,g=0;continue}}c&&(f.length>0?f+="/..":f="..",d=2)}else f.length>0?f+="/"+u.slice(p+1,b):f=u.slice(p+1,b),d=b-p-1;p=b,g=0}else l===46&&g!==-1?++g:g=-1}return f}var a={resolve:function(){for(var u,c="",l=!1,f=arguments.length-1;f>=-1&&!l;f--){var d;f>=0?d=arguments[f]:(u===void 0&&(u=process.cwd()),d=u),s(d),d.length!==0&&(c=d+"/"+c,l=d.charCodeAt(0)===47)}return c=o(c,!l),l?c.length>0?"/"+c:"/":c.length>0?c:"."},normalize:function(u){if(s(u),u.length===0)return".";var c=u.charCodeAt(0)===47,l=u.charCodeAt(u.length-1)===47;return(u=o(u,!c)).length!==0||c||(u="."),u.length>0&&l&&(u+="/"),c?"/"+u:u},isAbsolute:function(u){return s(u),u.length>0&&u.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var u,c=0;c<arguments.length;++c){var l=arguments[c];s(l),l.length>0&&(u===void 0?u=l:u+="/"+l)}return u===void 0?".":a.normalize(u)},relative:function(u,c){if(s(u),s(c),u===c||(u=a.resolve(u))===(c=a.resolve(c)))return"";for(var l=1;l<u.length&&u.charCodeAt(l)===47;++l);for(var f=u.length,d=f-l,p=1;p<c.length&&c.charCodeAt(p)===47;++p);for(var g=c.length-p,b=d<g?d:g,C=-1,D=0;D<=b;++D){if(D===b){if(g>b){if(c.charCodeAt(p+D)===47)return c.slice(p+D+1);if(D===0)return c.slice(p+D)}else d>b&&(u.charCodeAt(l+D)===47?C=D:D===0&&(C=0));break}var S=u.charCodeAt(l+D);if(S!==c.charCodeAt(p+D))break;S===47&&(C=D)}var w="";for(D=l+C+1;D<=f;++D)D!==f&&u.charCodeAt(D)!==47||(w.length===0?w+="..":w+="/..");return w.length>0?w+c.slice(p+C):(p+=C,c.charCodeAt(p)===47&&++p,c.slice(p))},_makeLong:function(u){return u},dirname:function(u){if(s(u),u.length===0)return".";for(var c=u.charCodeAt(0),l=c===47,f=-1,d=!0,p=u.length-1;p>=1;--p)if((c=u.charCodeAt(p))===47){if(!d){f=p;break}}else d=!1;return f===-1?l?"/":".":l&&f===1?"//":u.slice(0,f)},basename:function(u,c){if(c!==void 0&&typeof c!="string")throw new TypeError('"ext" argument must be a string');s(u);var l,f=0,d=-1,p=!0;if(c!==void 0&&c.length>0&&c.length<=u.length){if(c.length===u.length&&c===u)return"";var g=c.length-1,b=-1;for(l=u.length-1;l>=0;--l){var C=u.charCodeAt(l);if(C===47){if(!p){f=l+1;break}}else b===-1&&(p=!1,b=l+1),g>=0&&(C===c.charCodeAt(g)?--g==-1&&(d=l):(g=-1,d=b))}return f===d?d=b:d===-1&&(d=u.length),u.slice(f,d)}for(l=u.length-1;l>=0;--l)if(u.charCodeAt(l)===47){if(!p){f=l+1;break}}else d===-1&&(p=!1,d=l+1);return d===-1?"":u.slice(f,d)},extname:function(u){s(u);for(var c=-1,l=0,f=-1,d=!0,p=0,g=u.length-1;g>=0;--g){var b=u.charCodeAt(g);if(b!==47)f===-1&&(d=!1,f=g+1),b===46?c===-1?c=g:p!==1&&(p=1):c!==-1&&(p=-1);else if(!d){l=g+1;break}}return c===-1||f===-1||p===0||p===1&&c===f-1&&c===l+1?"":u.slice(c,f)},format:function(u){if(u===null||typeof u!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof u);return function(c,l){var f=l.dir||l.root,d=l.base||(l.name||"")+(l.ext||"");return f?f===l.root?f+d:f+"/"+d:d}(0,u)},parse:function(u){s(u);var c={root:"",dir:"",base:"",ext:"",name:""};if(u.length===0)return c;var l,f=u.charCodeAt(0),d=f===47;d?(c.root="/",l=1):l=0;for(var p=-1,g=0,b=-1,C=!0,D=u.length-1,S=0;D>=l;--D)if((f=u.charCodeAt(D))!==47)b===-1&&(C=!1,b=D+1),f===46?p===-1?p=D:S!==1&&(S=1):p!==-1&&(S=-1);else if(!C){g=D+1;break}return p===-1||b===-1||S===0||S===1&&p===b-1&&p===g+1?b!==-1&&(c.base=c.name=g===0&&d?u.slice(1,b):u.slice(g,b)):(g===0&&d?(c.name=u.slice(1,p),c.base=u.slice(1,b)):(c.name=u.slice(g,p),c.base=u.slice(g,b)),c.ext=u.slice(p,b)),g>0?c.dir=u.slice(0,g-1):d&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};a.posix=a,i.exports=a},70:(i,s)=>{if(Object.defineProperty(s,"__esModule",{value:!0}),s.isWindows=void 0,typeof process=="object")s.isWindows=process.platform==="win32";else if(typeof navigator=="object"){let o=navigator.userAgent;s.isWindows=o.indexOf("Windows")>=0}},231:(i,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.uriToFsPath=s.URI=void 0;let a=o(70),u=/^\w[\w\d+.-]*$/,c=/^\//,l=/^\/\//;function f(K,N){if(!K.scheme&&N)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${K.authority}", path: "${K.path}", query: "${K.query}", fragment: "${K.fragment}"}`);if(K.scheme&&!u.test(K.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(K.path){if(K.authority){if(!c.test(K.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(K.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let d="",p="/",g=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class b{static isUri(N){return N instanceof b||!!N&&typeof N.authority=="string"&&typeof N.fragment=="string"&&typeof N.path=="string"&&typeof N.query=="string"&&typeof N.scheme=="string"&&typeof N.fsPath=="string"&&typeof N.with=="function"&&typeof N.toString=="function"}scheme;authority;path;query;fragment;constructor(N,J,Q,ge,he,k=!1){typeof N=="object"?(this.scheme=N.scheme||d,this.authority=N.authority||d,this.path=N.path||d,this.query=N.query||d,this.fragment=N.fragment||d):(this.scheme=function(X,pe){return X||pe?X:"file"}(N,k),this.authority=J||d,this.path=function(X,pe){switch(X){case"https":case"http":case"file":pe?pe[0]!==p&&(pe=p+pe):pe=p}return pe}(this.scheme,Q||d),this.query=ge||d,this.fragment=he||d,f(this,k))}get fsPath(){return j(this,!1)}with(N){if(!N)return this;let{scheme:J,authority:Q,path:ge,query:he,fragment:k}=N;return J===void 0?J=this.scheme:J===null&&(J=d),Q===void 0?Q=this.authority:Q===null&&(Q=d),ge===void 0?ge=this.path:ge===null&&(ge=d),he===void 0?he=this.query:he===null&&(he=d),k===void 0?k=this.fragment:k===null&&(k=d),J===this.scheme&&Q===this.authority&&ge===this.path&&he===this.query&&k===this.fragment?this:new D(J,Q,ge,he,k)}static parse(N,J=!1){let Q=g.exec(N);return Q?new D(Q[2]||d,Z(Q[4]||d),Z(Q[5]||d),Z(Q[7]||d),Z(Q[9]||d),J):new D(d,d,d,d,d)}static file(N){let J=d;if(a.isWindows&&(N=N.replace(/\\/g,p)),N[0]===p&&N[1]===p){let Q=N.indexOf(p,2);Q===-1?(J=N.substring(2),N=p):(J=N.substring(2,Q),N=N.substring(Q)||p)}return new D("file",J,N,d,d)}static from(N){let J=new D(N.scheme,N.authority,N.path,N.query,N.fragment);return f(J,!0),J}toString(N=!1){return z(this,N)}toJSON(){return this}static revive(N){if(N){if(N instanceof b)return N;{let J=new D(N);return J._formatted=N.external,J._fsPath=N._sep===C?N.fsPath:null,J}}return N}}s.URI=b;let C=a.isWindows?1:void 0;class D extends b{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=j(this,!1)),this._fsPath}toString(N=!1){return N?z(this,!0):(this._formatted||(this._formatted=z(this,!1)),this._formatted)}toJSON(){let N={$mid:1};return this._fsPath&&(N.fsPath=this._fsPath,N._sep=C),this._formatted&&(N.external=this._formatted),this.path&&(N.path=this.path),this.scheme&&(N.scheme=this.scheme),this.authority&&(N.authority=this.authority),this.query&&(N.query=this.query),this.fragment&&(N.fragment=this.fragment),N}}let S={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function w(K,N,J){let Q,ge=-1;for(let he=0;he<K.length;he++){let k=K.charCodeAt(he);if(k>=97&&k<=122||k>=65&&k<=90||k>=48&&k<=57||k===45||k===46||k===95||k===126||N&&k===47||J&&k===91||J&&k===93||J&&k===58)ge!==-1&&(Q+=encodeURIComponent(K.substring(ge,he)),ge=-1),Q!==void 0&&(Q+=K.charAt(he));else{Q===void 0&&(Q=K.substr(0,he));let X=S[k];X!==void 0?(ge!==-1&&(Q+=encodeURIComponent(K.substring(ge,he)),ge=-1),Q+=X):ge===-1&&(ge=he)}}return ge!==-1&&(Q+=encodeURIComponent(K.substring(ge))),Q!==void 0?Q:K}function O(K){let N;for(let J=0;J<K.length;J++){let Q=K.charCodeAt(J);Q===35||Q===63?(N===void 0&&(N=K.substr(0,J)),N+=S[Q]):N!==void 0&&(N+=K[J])}return N!==void 0?N:K}function j(K,N){let J;return J=K.authority&&K.path.length>1&&K.scheme==="file"?`//${K.authority}${K.path}`:K.path.charCodeAt(0)===47&&(K.path.charCodeAt(1)>=65&&K.path.charCodeAt(1)<=90||K.path.charCodeAt(1)>=97&&K.path.charCodeAt(1)<=122)&&K.path.charCodeAt(2)===58?N?K.path.substr(1):K.path[1].toLowerCase()+K.path.substr(2):K.path,a.isWindows&&(J=J.replace(/\//g,"\\")),J}function z(K,N){let J=N?O:w,Q="",{scheme:ge,authority:he,path:k,query:X,fragment:pe}=K;if(ge&&(Q+=ge,Q+=":"),(he||ge==="file")&&(Q+=p,Q+=p),he){let le=he.indexOf("@");if(le!==-1){let ae=he.substr(0,le);he=he.substr(le+1),le=ae.lastIndexOf(":"),le===-1?Q+=J(ae,!1,!1):(Q+=J(ae.substr(0,le),!1,!1),Q+=":",Q+=J(ae.substr(le+1),!1,!0)),Q+="@"}he=he.toLowerCase(),le=he.lastIndexOf(":"),le===-1?Q+=J(he,!1,!0):(Q+=J(he.substr(0,le),!1,!0),Q+=he.substr(le))}if(k){if(k.length>=3&&k.charCodeAt(0)===47&&k.charCodeAt(2)===58){let le=k.charCodeAt(1);le>=65&&le<=90&&(k=`/${String.fromCharCode(le+32)}:${k.substr(3)}`)}else if(k.length>=2&&k.charCodeAt(1)===58){let le=k.charCodeAt(0);le>=65&&le<=90&&(k=`${String.fromCharCode(le+32)}:${k.substr(2)}`)}Q+=J(k,!0,!1)}return X&&(Q+="?",Q+=J(X,!1,!1)),pe&&(Q+="#",Q+=N?pe:w(pe,!1,!1)),Q}function W(K){try{return decodeURIComponent(K)}catch{return K.length>3?K.substr(0,3)+W(K.substr(3)):K}}s.uriToFsPath=j;let G=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Z(K){return K.match(G)?K.replace(G,N=>W(N)):K}},552:function(i,s,o){var a=this&&this.__createBinding||(Object.create?function(g,b,C,D){D===void 0&&(D=C);var S=Object.getOwnPropertyDescriptor(b,C);S&&!("get"in S?!b.__esModule:S.writable||S.configurable)||(S={enumerable:!0,get:function(){return b[C]}}),Object.defineProperty(g,D,S)}:function(g,b,C,D){D===void 0&&(D=C),g[D]=b[C]}),u=this&&this.__setModuleDefault||(Object.create?function(g,b){Object.defineProperty(g,"default",{enumerable:!0,value:b})}:function(g,b){g.default=b}),c=this&&this.__importStar||function(g){if(g&&g.__esModule)return g;var b={};if(g!=null)for(var C in g)C!=="default"&&Object.prototype.hasOwnProperty.call(g,C)&&a(b,g,C);return u(b,g),b};Object.defineProperty(s,"__esModule",{value:!0}),s.Utils=void 0;let l=c(o(975)),f=l.posix||l,d="/";var p;(function(g){g.joinPath=function(b,...C){return b.with({path:f.join(b.path,...C)})},g.resolvePath=function(b,...C){let D=b.path,S=!1;D[0]!==d&&(D=d+D,S=!0);let w=f.resolve(D,...C);return S&&w[0]===d&&!b.authority&&(w=w.substring(1)),b.with({path:w})},g.dirname=function(b){if(b.path.length===0||b.path===d)return b;let C=f.dirname(b.path);return C.length===1&&C.charCodeAt(0)===46&&(C=""),b.with({path:C})},g.basename=function(b){return f.basename(b.path)},g.extname=function(b){return f.extname(b.path)}})(p||(s.Utils=p={}))}},e={};function r(i){var s=e[i];if(s!==void 0)return s.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,r),o.exports}var n={};return(()=>{var i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.Utils=i.URI=void 0;let s=r(231);Object.defineProperty(i,"URI",{enumerable:!0,get:function(){return s.URI}});let o=r(552);Object.defineProperty(i,"Utils",{enumerable:!0,get:function(){return o.Utils}})})(),n})())});var zw=_(Pc=>{"use strict";var Lk=Pc&&Pc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pc,"__esModule",{value:!0});Pc.findPackageRoot=RB;var SB=Lk(require("fs/promises")),Ec=Lk(require("path"));async function RB(t,e="package.json"){let r=t;for(;;){let n=Ec.default.join(r,e);try{if((await SB.default.stat(n)).isFile())return r;let s=Ec.default.dirname(r);if(!Ec.default.relative(s,r))return;r=s}catch(i){if(i.code==="ENOENT"||i.code==="ENOTDIR"){let s=Ec.default.dirname(r);if(!Ec.default.relative(s,r))return;r=s}else throw i}}}});var $k=_(Tc=>{"use strict";var jk=Tc&&Tc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Tc,"__esModule",{value:!0});Tc.runProcessFindLine=EB;var CB=jk(require("child_process")),DB=jk(require("readline"));function EB(t,e,r,n){return new Promise((i,s)=>{let o=CB.default.spawn(t,e,r),a=DB.default.createInterface({input:o.stdout}),u,c,l=!1,f=!1,d=()=>{l||c===void 0||!f||(l=!0,c===0?i(u):s(new Error(`Command "${t}" exited with code ${c}.`)))},p=g=>{l=!0,o.removeAllListeners(),a.close();try{o.kill()}catch{}s(g)};a.on("line",g=>{if(!(l||u!==void 0))try{let b=n(g);b!==void 0&&(u=b),d()}catch(b){p(b)}}),a.on("close",()=>{l||(f=!0,d())}),o.on("error",p),o.on("exit",(g,b)=>{c=g??b,d()})})}});var Yw=_(_i=>{"use strict";var Wk=_i&&_i.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Gt=_i&&_i.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Hk=_i&&_i.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},qc,Gn,Ph,wo,Vw,Uk,zk,Kk;Object.defineProperty(_i,"__esModule",{value:!0});_i.GlobalPathResolver=void 0;var PB=Hk(require("os")),Kw=Hk(require("path")),Bw=$k(),Gw=class{constructor(e){qc.add(this),Gn.set(this,void 0),Ph.set(this,{yarn:void 0,npm:void 0,pnpm:void 0}),wo.set(this,void 0),Vw.set(this,{yarn:Gt(this,qc,"m",Uk).bind(this),npm:Gt(this,qc,"m",zk).bind(this),pnpm:Gt(this,qc,"m",Kk).bind(this)}),Wk(this,Gn,e,"f"),Wk(this,wo,PB.default.platform()==="win32","f")}async resolve(e){let r=Gt(this,Ph,"f")[e];if(r)return r;let n=Gt(this,Vw,"f")[e];if(!n){Gt(this,Gn,"f")?.warn("Unsupported package manager.",{packageManager:e});return}try{let i=await n();return i&&(Gt(this,Ph,"f")[e]=i),i}catch(i){Gt(this,Gn,"f")?.warn("Failed to resolve global node_modules path.",{packageManager:e,error:i});return}}};_i.GlobalPathResolver=Gw;Gn=new WeakMap,Ph=new WeakMap,wo=new WeakMap,Vw=new WeakMap,qc=new WeakSet,Uk=async function(){let e=n=>{try{return JSON.parse(n)}catch{return}},r=await(0,Bw.runProcessFindLine)("yarn",["global","dir","--json"],Gt(this,wo,"f")?{shell:!0}:void 0,n=>{let i=e(n);if(!i||i.type!=="log"||!i.data)return;let s=Kw.default.join(i.data,"node_modules");return Gt(this,Gn,"f")?.debug("Yarn returned global node_modules path.",{path:s}),s});if(!r){Gt(this,Gn,"f")?.warn('"yarn global dir --json" did not return a path.');return}return r},zk=async function(){let e=await(0,Bw.runProcessFindLine)("npm",["config","get","prefix"],Gt(this,wo,"f")?{shell:!0}:void 0,r=>{let n=r.trim();if(!n)return;let i=Gt(this,wo,"f")?Kw.default.join(n,"node_modules"):Kw.default.join(n,"lib/node_modules");return Gt(this,Gn,"f")?.debug("npm returned global node_modules path.",{path:i}),i});if(!e){Gt(this,Gn,"f")?.warn('"npm config get prefix" did not return a path.');return}return e},Kk=async function(){let e=await(0,Bw.runProcessFindLine)("pnpm",["root","-g"],Gt(this,wo,"f")?{shell:!0}:void 0,r=>{let n=r.trim();if(n)return Gt(this,Gn,"f")?.debug("pnpm returned global node_modules path.",{path:n}),n});if(!e){Gt(this,Gn,"f")?.warn('"pnpm root -g" did not return a path.');return}return e}});var Th=_(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.thenable=It.typedArray=It.stringArray=It.array=It.func=It.error=It.number=It.string=It.boolean=void 0;function TB(t){return t===!0||t===!1}It.boolean=TB;function Bk(t){return typeof t=="string"||t instanceof String}It.string=Bk;function qB(t){return typeof t=="number"||t instanceof Number}It.number=qB;function OB(t){return t instanceof Error}It.error=OB;function Vk(t){return typeof t=="function"}It.func=Vk;function Gk(t){return Array.isArray(t)}It.array=Gk;function MB(t){return Gk(t)&&t.every(e=>Bk(e))}It.stringArray=MB;function xB(t,e){return Array.isArray(t)&&t.every(e)}It.typedArray=xB;function kB(t){return t&&Vk(t.then)}It.thenable=kB});var Xw=_(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.generateUuid=Pn.parse=Pn.isUUID=Pn.v4=Pn.empty=void 0;var Oc=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},Mc=class t extends Oc{static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}};Mc._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Mc._timeHighBits=["8","9","a","b"];Pn.empty=new Oc("00000000-0000-0000-0000-000000000000");function Yk(){return new Mc}Pn.v4=Yk;var FB=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Xk(t){return FB.test(t)}Pn.isUUID=Xk;function IB(t){if(!Xk(t))throw new Error("invalid uuid");return new Oc(t)}Pn.parse=IB;function AB(){return Yk().asHex()}Pn.generateUuid=AB});var Jk=_(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.attachPartialResult=ks.ProgressFeature=ks.attachWorkDone=void 0;var xs=ne(),NB=Xw(),So=class t{constructor(e,r){this._connection=e,this._token=r,t.Instances.set(this._token,this)}begin(e,r,n,i){let s={kind:"begin",title:e,percentage:r,message:n,cancellable:i};this._connection.sendProgress(xs.WorkDoneProgress.type,this._token,s)}report(e,r){let n={kind:"report"};typeof e=="number"?(n.percentage=e,r!==void 0&&(n.message=r)):n.message=e,this._connection.sendProgress(xs.WorkDoneProgress.type,this._token,n)}done(){t.Instances.delete(this._token),this._connection.sendProgress(xs.WorkDoneProgress.type,this._token,{kind:"end"})}};So.Instances=new Map;var qh=class extends So{constructor(e,r){super(e,r),this._source=new xs.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},xc=class{constructor(){}begin(){}report(){}done(){}},Oh=class extends xc{constructor(){super(),this._source=new xs.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function LB(t,e){if(e===void 0||e.workDoneToken===void 0)return new xc;let r=e.workDoneToken;return delete e.workDoneToken,new So(t,r)}ks.attachWorkDone=LB;var jB=t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(xs.WorkDoneProgressCancelNotification.type,r=>{let n=So.Instances.get(r.token);(n instanceof qh||n instanceof Oh)&&n.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new xc:new So(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,NB.generateUuid)();return this.connection.sendRequest(xs.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new qh(this.connection,e))}else return Promise.resolve(new Oh)}};ks.ProgressFeature=jB;var Jw;(function(t){t.type=new xs.ProgressType})(Jw||(Jw={}));var Qw=class{constructor(e,r){this._connection=e,this._token=r}report(e){this._connection.sendProgress(Jw.type,this._token,e)}};function $B(t,e){if(e===void 0||e.partialResultToken===void 0)return;let r=e.partialResultToken;return delete e.partialResultToken,new Qw(t,r)}ks.attachPartialResult=$B});var Qk=_(Mh=>{"use strict";Object.defineProperty(Mh,"__esModule",{value:!0});Mh.ConfigurationFeature=void 0;var WB=ne(),HB=Th(),UB=t=>class extends t{getConfiguration(e){return e?HB.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let r={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(WB.ConfigurationRequest.type,r).then(n=>Array.isArray(n)?Array.isArray(e)?n:n[0]:Array.isArray(e)?[]:null)}};Mh.ConfigurationFeature=UB});var Zk=_(kh=>{"use strict";Object.defineProperty(kh,"__esModule",{value:!0});kh.WorkspaceFoldersFeature=void 0;var xh=ne(),zB=t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let r=e.workspace;r&&r.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new xh.Emitter,this.connection.onNotification(xh.DidChangeWorkspaceFoldersNotification.type,n=>{this._onDidChangeWorkspaceFolders.fire(n.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let r=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=r===!0||typeof r=="string"}getWorkspaceFolders(){return this.connection.sendRequest(xh.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(xh.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};kh.WorkspaceFoldersFeature=zB});var eF=_(Fh=>{"use strict";Object.defineProperty(Fh,"__esModule",{value:!0});Fh.CallHierarchyFeature=void 0;var Zw=ne(),KB=t=>class extends t{get callHierarchy(){return{onPrepare:e=>this.connection.onRequest(Zw.CallHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),onIncomingCalls:e=>{let r=Zw.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},onOutgoingCalls:e=>{let r=Zw.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))}}}};Fh.CallHierarchyFeature=KB});var t0=_(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.SemanticTokensBuilder=Fs.SemanticTokensDiff=Fs.SemanticTokensFeature=void 0;var Ih=ne(),BB=t=>class extends t{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(Ih.SemanticTokensRefreshRequest.type),on:e=>{let r=Ih.SemanticTokensRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},onDelta:e=>{let r=Ih.SemanticTokensDeltaRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},onRange:e=>{let r=Ih.SemanticTokensRangeRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))}}}};Fs.SemanticTokensFeature=BB;var Ah=class{constructor(e,r){this.originalSequence=e,this.modifiedSequence=r}computeDiff(){let e=this.originalSequence.length,r=this.modifiedSequence.length,n=0;for(;n<r&&n<e&&this.originalSequence[n]===this.modifiedSequence[n];)n++;if(n<r&&n<e){let i=e-1,s=r-1;for(;i>=n&&s>=n&&this.originalSequence[i]===this.modifiedSequence[s];)i--,s--;(i<n||s<n)&&(i++,s++);let o=i-n+1,a=this.modifiedSequence.slice(n,s+1);return a.length===1&&a[0]===this.originalSequence[i]?[{start:n,deleteCount:o-1}]:[{start:n,deleteCount:o,data:a}]}else return n<r?[{start:n,deleteCount:0,data:this.modifiedSequence.slice(n)}]:n<e?[{start:n,deleteCount:e-n}]:[]}};Fs.SemanticTokensDiff=Ah;var e0=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,r,n,i,s){let o=e,a=r;this._dataLen>0&&(o-=this._prevLine,o===0&&(a-=this._prevChar)),this._data[this._dataLen++]=o,this._data[this._dataLen++]=a,this._data[this._dataLen++]=n,this._data[this._dataLen++]=i,this._data[this._dataLen++]=s,this._prevLine=e,this._prevChar=r}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new Ah(this._prevData,this._data).computeDiff()}:this.build()}};Fs.SemanticTokensBuilder=e0});var tF=_(Nh=>{"use strict";Object.defineProperty(Nh,"__esModule",{value:!0});Nh.ShowDocumentFeature=void 0;var VB=ne(),GB=t=>class extends t{showDocument(e){return this.connection.sendRequest(VB.ShowDocumentRequest.type,e)}};Nh.ShowDocumentFeature=GB});var rF=_(Lh=>{"use strict";Object.defineProperty(Lh,"__esModule",{value:!0});Lh.FileOperationsFeature=void 0;var Ia=ne(),YB=t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(Ia.DidCreateFilesNotification.type,r=>{e(r)})}onDidRenameFiles(e){return this.connection.onNotification(Ia.DidRenameFilesNotification.type,r=>{e(r)})}onDidDeleteFiles(e){return this.connection.onNotification(Ia.DidDeleteFilesNotification.type,r=>{e(r)})}onWillCreateFiles(e){return this.connection.onRequest(Ia.WillCreateFilesRequest.type,(r,n)=>e(r,n))}onWillRenameFiles(e){return this.connection.onRequest(Ia.WillRenameFilesRequest.type,(r,n)=>e(r,n))}onWillDeleteFiles(e){return this.connection.onRequest(Ia.WillDeleteFilesRequest.type,(r,n)=>e(r,n))}};Lh.FileOperationsFeature=YB});var nF=_(jh=>{"use strict";Object.defineProperty(jh,"__esModule",{value:!0});jh.LinkedEditingRangeFeature=void 0;var XB=ne(),JB=t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(XB.LinkedEditingRangeRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0))}};jh.LinkedEditingRangeFeature=JB});var iF=_($h=>{"use strict";Object.defineProperty($h,"__esModule",{value:!0});$h.TypeHierarchyFeature=void 0;var r0=ne(),QB=t=>class extends t{get typeHierarchy(){return{onPrepare:e=>this.connection.onRequest(r0.TypeHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),onSupertypes:e=>{let r=r0.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},onSubtypes:e=>{let r=r0.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))}}}};$h.TypeHierarchyFeature=QB});var oF=_(Wh=>{"use strict";Object.defineProperty(Wh,"__esModule",{value:!0});Wh.InlineValueFeature=void 0;var sF=ne(),ZB=t=>class extends t{get inlineValue(){return{refresh:()=>this.connection.sendRequest(sF.InlineValueRefreshRequest.type),on:e=>this.connection.onRequest(sF.InlineValueRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r)))}}};Wh.InlineValueFeature=ZB});var uF=_(Hh=>{"use strict";Object.defineProperty(Hh,"__esModule",{value:!0});Hh.FoldingRangeFeature=void 0;var aF=ne(),e8=t=>class extends t{get foldingRange(){return{refresh:()=>this.connection.sendRequest(aF.FoldingRangeRefreshRequest.type),on:e=>{let r=aF.FoldingRangeRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))}}}};Hh.FoldingRangeFeature=e8});var cF=_(Uh=>{"use strict";Object.defineProperty(Uh,"__esModule",{value:!0});Uh.InlayHintFeature=void 0;var n0=ne(),t8=t=>class extends t{get inlayHint(){return{refresh:()=>this.connection.sendRequest(n0.InlayHintRefreshRequest.type),on:e=>this.connection.onRequest(n0.InlayHintRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),resolve:e=>this.connection.onRequest(n0.InlayHintResolveRequest.type,(r,n)=>e(r,n))}}};Uh.InlayHintFeature=t8});var lF=_(zh=>{"use strict";Object.defineProperty(zh,"__esModule",{value:!0});zh.DiagnosticFeature=void 0;var kc=ne(),r8=t=>class extends t{get diagnostics(){return{refresh:()=>this.connection.sendRequest(kc.DiagnosticRefreshRequest.type),on:e=>this.connection.onRequest(kc.DocumentDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(kc.DocumentDiagnosticRequest.partialResult,r))),onWorkspace:e=>this.connection.onRequest(kc.WorkspaceDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(kc.WorkspaceDiagnosticRequest.partialResult,r)))}}};zh.DiagnosticFeature=r8});var s0=_(Kh=>{"use strict";Object.defineProperty(Kh,"__esModule",{value:!0});Kh.TextDocuments=void 0;var Ro=ne(),i0=class{constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new Ro.Emitter,this._onDidOpen=new Ro.Emitter,this._onDidClose=new Ro.Emitter,this._onDidSave=new Ro.Emitter,this._onWillSave=new Ro.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=Ro.TextDocumentSyncKind.Incremental;let r=[];return r.push(e.onDidOpenTextDocument(n=>{let i=n.textDocument,s=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,s);let o=Object.freeze({document:s});this._onDidOpen.fire(o),this._onDidChangeContent.fire(o)})),r.push(e.onDidChangeTextDocument(n=>{let i=n.textDocument,s=n.contentChanges;if(s.length===0)return;let{version:o}=i;if(o==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let a=this._syncedDocuments.get(i.uri);a!==void 0&&(a=this._configuration.update(a,s,o),this._syncedDocuments.set(i.uri,a),this._onDidChangeContent.fire(Object.freeze({document:a})))})),r.push(e.onDidCloseTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(n.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),r.push(e.onWillSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:n.reason}))})),r.push(e.onWillSaveTextDocumentWaitUntil((n,i)=>{let s=this._syncedDocuments.get(n.textDocument.uri);return s!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:s,reason:n.reason}),i):[]})),r.push(e.onDidSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),Ro.Disposable.create(()=>{r.forEach(n=>n.dispose())})}};Kh.TextDocuments=i0});var a0=_(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});Aa.NotebookDocuments=Aa.NotebookSyncFeature=void 0;var Tn=ne(),dF=s0(),n8=t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:e=>this.connection.onNotification(Tn.DidOpenNotebookDocumentNotification.type,r=>{e(r)}),onDidChangeNotebookDocument:e=>this.connection.onNotification(Tn.DidChangeNotebookDocumentNotification.type,r=>{e(r)}),onDidSaveNotebookDocument:e=>this.connection.onNotification(Tn.DidSaveNotebookDocumentNotification.type,r=>{e(r)}),onDidCloseNotebookDocument:e=>this.connection.onNotification(Tn.DidCloseNotebookDocumentNotification.type,r=>{e(r)})}}};Aa.NotebookSyncFeature=n8;var Bh=class t{onDidOpenTextDocument(e){return this.openHandler=e,Tn.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,Tn.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,Tn.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return t.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return t.NULL_DISPOSE}onDidSaveTextDocument(){return t.NULL_DISPOSE}};Bh.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var o0=class{constructor(e){e instanceof dF.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new dF.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new Tn.Emitter,this._onDidChange=new Tn.Emitter,this._onDidSave=new Tn.Emitter,this._onDidClose=new Tn.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let r=this.notebookCellMap.get(e);return r&&r[0]}findNotebookDocumentForCell(e){let r=typeof e=="string"?e:e.document,n=this.notebookCellMap.get(r);return n&&n[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let r=new Bh,n=[];return n.push(this.cellTextDocuments.listen(r)),n.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let s of i.cellTextDocuments)r.openTextDocument({textDocument:s});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),n.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let s=this.notebookDocuments.get(i.notebookDocument.uri);if(s===void 0)return;s.version=i.notebookDocument.version;let o=s.metadata,a=!1,u=i.change;u.metadata!==void 0&&(a=!0,s.metadata=u.metadata);let c=[],l=[],f=[],d=[];if(u.cells!==void 0){let D=u.cells;if(D.structure!==void 0){let S=D.structure.array;if(s.cells.splice(S.start,S.deleteCount,...S.cells!==void 0?S.cells:[]),D.structure.didOpen!==void 0)for(let w of D.structure.didOpen)r.openTextDocument({textDocument:w}),c.push(w.uri);if(D.structure.didClose)for(let w of D.structure.didClose)r.closeTextDocument({textDocument:w}),l.push(w.uri)}if(D.data!==void 0){let S=new Map(D.data.map(w=>[w.document,w]));for(let w=0;w<=s.cells.length;w++){let O=S.get(s.cells[w].document);if(O!==void 0){let j=s.cells.splice(w,1,O);if(f.push({old:j[0],new:O}),S.delete(O.document),S.size===0)break}}}if(D.textContent!==void 0)for(let S of D.textContent)r.changeTextDocument({textDocument:S.document,contentChanges:S.changes}),d.push(S.document.uri)}this.updateCellMap(s);let p={notebookDocument:s};a&&(p.metadata={old:o,new:s.metadata});let g=[];for(let D of c)g.push(this.getNotebookCell(D));let b=[];for(let D of l)b.push(this.getNotebookCell(D));let C=[];for(let D of d)C.push(this.getNotebookCell(D));(g.length>0||b.length>0||f.length>0||C.length>0)&&(p.cells={added:g,removed:b,changed:{data:f,textContent:C}}),(p.metadata!==void 0||p.cells!==void 0)&&this._onDidChange.fire(p)})),n.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let s=this.notebookDocuments.get(i.notebookDocument.uri);s!==void 0&&this._onDidSave.fire(s)})),n.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let s=this.notebookDocuments.get(i.notebookDocument.uri);if(s!==void 0){this._onDidClose.fire(s);for(let o of i.cellTextDocuments)r.closeTextDocument({textDocument:o});this.notebookDocuments.delete(i.notebookDocument.uri);for(let o of s.cells)this.notebookCellMap.delete(o.document)}})),Tn.Disposable.create(()=>{n.forEach(i=>i.dispose())})}updateCellMap(e){for(let r of e.cells)this.notebookCellMap.set(r.document,[r,e])}};Aa.NotebookDocuments=o0});var fF=_(Vh=>{"use strict";Object.defineProperty(Vh,"__esModule",{value:!0});Vh.MonikerFeature=void 0;var i8=ne(),s8=t=>class extends t{get moniker(){return{on:e=>{let r=i8.MonikerRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))}}}};Vh.MonikerFeature=s8});var h0=_(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.createConnection=Ke.combineFeatures=Ke.combineNotebooksFeatures=Ke.combineLanguagesFeatures=Ke.combineWorkspaceFeatures=Ke.combineWindowFeatures=Ke.combineClientFeatures=Ke.combineTracerFeatures=Ke.combineTelemetryFeatures=Ke.combineConsoleFeatures=Ke._NotebooksImpl=Ke._LanguagesImpl=Ke.BulkUnregistration=Ke.BulkRegistration=Ke.ErrorMessageTracker=void 0;var te=ne(),qn=Th(),c0=Xw(),be=Jk(),o8=Qk(),a8=Zk(),u8=eF(),c8=t0(),l8=tF(),d8=rF(),f8=nF(),h8=iF(),g8=oF(),p8=uF(),m8=cF(),y8=lF(),v8=a0(),_8=fF();function u0(t){if(t!==null)return t}var l0=class{constructor(){this._messages=Object.create(null)}add(e){let r=this._messages[e];r||(r=0),r++,this._messages[e]=r}sendErrors(e){Object.keys(this._messages).forEach(r=>{e.window.showErrorMessage(r)})}};Ke.ErrorMessageTracker=l0;var Gh=class{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(te.MessageType.Error,e)}warn(e){this.send(te.MessageType.Warning,e)}info(e){this.send(te.MessageType.Info,e)}log(e){this.send(te.MessageType.Log,e)}debug(e){this.send(te.MessageType.Debug,e)}send(e,r){this._rawConnection&&this._rawConnection.sendNotification(te.LogMessageNotification.type,{type:e,message:r}).catch(()=>{(0,te.RAL)().console.error("Sending log message failed")})}},d0=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...r){let n={type:te.MessageType.Error,message:e,actions:r};return this.connection.sendRequest(te.ShowMessageRequest.type,n).then(u0)}showWarningMessage(e,...r){let n={type:te.MessageType.Warning,message:e,actions:r};return this.connection.sendRequest(te.ShowMessageRequest.type,n).then(u0)}showInformationMessage(e,...r){let n={type:te.MessageType.Info,message:e,actions:r};return this.connection.sendRequest(te.ShowMessageRequest.type,n).then(u0)}},hF=(0,l8.ShowDocumentFeature)((0,be.ProgressFeature)(d0)),gF;(function(t){function e(){return new Yh}t.create=e})(gF||(Ke.BulkRegistration=gF={}));var Yh=class{constructor(){this._registrations=[],this._registered=new Set}add(e,r){let n=qn.string(e)?e:e.method;if(this._registered.has(n))throw new Error(`${n} is already added to this registration`);let i=c0.generateUuid();this._registrations.push({id:i,method:n,registerOptions:r||{}}),this._registered.add(n)}asRegistrationParams(){return{registrations:this._registrations}}},pF;(function(t){function e(){return new Fc(void 0,[])}t.create=e})(pF||(Ke.BulkUnregistration=pF={}));var Fc=class{constructor(e,r){this._connection=e,this._unregistrations=new Map,r.forEach(n=>{this._unregistrations.set(n.method,n)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let n of this._unregistrations.values())e.push(n);let r={unregisterations:e};this._connection.sendRequest(te.UnregistrationRequest.type,r).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let r=qn.string(e)?e:e.method,n=this._unregistrations.get(r);if(!n)return!1;let i={unregisterations:[n]};return this._connection.sendRequest(te.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(r)},s=>{this._connection.console.info(`Un-registering request handler for ${n.id} failed.`)}),!0}},Xh=class{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,r,n){return e instanceof Yh?this.registerMany(e):e instanceof Fc?this.registerSingle1(e,r,n):this.registerSingle2(e,r)}registerSingle1(e,r,n){let i=qn.string(r)?r:r.method,s=c0.generateUuid(),o={registrations:[{id:s,method:i,registerOptions:n||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(te.RegistrationRequest.type,o).then(a=>(e.add({id:s,method:i}),e),a=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(a)))}registerSingle2(e,r){let n=qn.string(e)?e:e.method,i=c0.generateUuid(),s={registrations:[{id:i,method:n,registerOptions:r||{}}]};return this.connection.sendRequest(te.RegistrationRequest.type,s).then(o=>te.Disposable.create(()=>{this.unregisterSingle(i,n).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),o=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(o)))}unregisterSingle(e,r){let n={unregisterations:[{id:e,method:r}]};return this.connection.sendRequest(te.UnregistrationRequest.type,n).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let r=e.asRegistrationParams();return this.connection.sendRequest(te.RegistrationRequest.type,r).then(()=>new Fc(this._connection,r.registrations.map(n=>({id:n.id,method:n.method}))),n=>(this.connection.console.info("Bulk registration failed."),Promise.reject(n)))}},f0=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function r(i){return i&&!!i.edit}let n=r(e)?e:{edit:e};return this.connection.sendRequest(te.ApplyWorkspaceEditRequest.type,n)}},mF=(0,d8.FileOperationsFeature)((0,a8.WorkspaceFoldersFeature)((0,o8.ConfigurationFeature)(f0))),Jh=class{constructor(){this._trace=te.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,r){this._trace!==te.Trace.Off&&this.connection.sendNotification(te.LogTraceNotification.type,{message:e,verbose:this._trace===te.Trace.Verbose?r:void 0}).catch(()=>{})}},Qh=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(te.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},Zh=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,be.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,be.attachPartialResult)(this.connection,r)}};Ke._LanguagesImpl=Zh;var yF=(0,p8.FoldingRangeFeature)((0,_8.MonikerFeature)((0,y8.DiagnosticFeature)((0,m8.InlayHintFeature)((0,g8.InlineValueFeature)((0,h8.TypeHierarchyFeature)((0,f8.LinkedEditingRangeFeature)((0,c8.SemanticTokensFeature)((0,u8.CallHierarchyFeature)(Zh))))))))),eg=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,be.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,be.attachPartialResult)(this.connection,r)}};Ke._NotebooksImpl=eg;var vF=(0,v8.NotebookSyncFeature)(eg);function _F(t,e){return function(r){return e(t(r))}}Ke.combineConsoleFeatures=_F;function bF(t,e){return function(r){return e(t(r))}}Ke.combineTelemetryFeatures=bF;function wF(t,e){return function(r){return e(t(r))}}Ke.combineTracerFeatures=wF;function SF(t,e){return function(r){return e(t(r))}}Ke.combineClientFeatures=SF;function RF(t,e){return function(r){return e(t(r))}}Ke.combineWindowFeatures=RF;function CF(t,e){return function(r){return e(t(r))}}Ke.combineWorkspaceFeatures=CF;function DF(t,e){return function(r){return e(t(r))}}Ke.combineLanguagesFeatures=DF;function EF(t,e){return function(r){return e(t(r))}}Ke.combineNotebooksFeatures=EF;function b8(t,e){function r(i,s,o){return i&&s?o(i,s):i||s}return{__brand:"features",console:r(t.console,e.console,_F),tracer:r(t.tracer,e.tracer,wF),telemetry:r(t.telemetry,e.telemetry,bF),client:r(t.client,e.client,SF),window:r(t.window,e.window,RF),workspace:r(t.workspace,e.workspace,CF),languages:r(t.languages,e.languages,DF),notebooks:r(t.notebooks,e.notebooks,EF)}}Ke.combineFeatures=b8;function w8(t,e,r){let n=r&&r.console?new(r.console(Gh)):new Gh,i=t(n);n.rawAttach(i);let s=r&&r.tracer?new(r.tracer(Jh)):new Jh,o=r&&r.telemetry?new(r.telemetry(Qh)):new Qh,a=r&&r.client?new(r.client(Xh)):new Xh,u=r&&r.window?new(r.window(hF)):new hF,c=r&&r.workspace?new(r.workspace(mF)):new mF,l=r&&r.languages?new(r.languages(yF)):new yF,f=r&&r.notebooks?new(r.notebooks(vF)):new vF,d=[n,s,o,a,u,c,l,f];function p(S){return S instanceof Promise?S:qn.thenable(S)?new Promise((w,O)=>{S.then(j=>w(j),j=>O(j))}):Promise.resolve(S)}let g,b,C,D={listen:()=>i.listen(),sendRequest:(S,...w)=>i.sendRequest(qn.string(S)?S:S.method,...w),onRequest:(S,w)=>i.onRequest(S,w),sendNotification:(S,w)=>{let O=qn.string(S)?S:S.method;return i.sendNotification(O,w)},onNotification:(S,w)=>i.onNotification(S,w),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:S=>(b=S,{dispose:()=>{b=void 0}}),onInitialized:S=>i.onNotification(te.InitializedNotification.type,S),onShutdown:S=>(g=S,{dispose:()=>{g=void 0}}),onExit:S=>(C=S,{dispose:()=>{C=void 0}}),get console(){return n},get telemetry(){return o},get tracer(){return s},get client(){return a},get window(){return u},get workspace(){return c},get languages(){return l},get notebooks(){return f},onDidChangeConfiguration:S=>i.onNotification(te.DidChangeConfigurationNotification.type,S),onDidChangeWatchedFiles:S=>i.onNotification(te.DidChangeWatchedFilesNotification.type,S),__textDocumentSync:void 0,onDidOpenTextDocument:S=>i.onNotification(te.DidOpenTextDocumentNotification.type,S),onDidChangeTextDocument:S=>i.onNotification(te.DidChangeTextDocumentNotification.type,S),onDidCloseTextDocument:S=>i.onNotification(te.DidCloseTextDocumentNotification.type,S),onWillSaveTextDocument:S=>i.onNotification(te.WillSaveTextDocumentNotification.type,S),onWillSaveTextDocumentWaitUntil:S=>i.onRequest(te.WillSaveTextDocumentWaitUntilRequest.type,S),onDidSaveTextDocument:S=>i.onNotification(te.DidSaveTextDocumentNotification.type,S),sendDiagnostics:S=>i.sendNotification(te.PublishDiagnosticsNotification.type,S),onHover:S=>i.onRequest(te.HoverRequest.type,(w,O)=>S(w,O,(0,be.attachWorkDone)(i,w),void 0)),onCompletion:S=>i.onRequest(te.CompletionRequest.type,(w,O)=>S(w,O,(0,be.attachWorkDone)(i,w),(0,be.attachPartialResult)(i,w))),onCompletionResolve:S=>i.onRequest(te.CompletionResolveRequest.type,S),onSignatureHelp:S=>i.onRequest(te.SignatureHelpRequest.type,(w,O)=>S(w,O,(0,be.attachWorkDone)(i,w),void 0)),onDeclaration:S=>i.onRequest(te.DeclarationRequest.type,(w,O)=>S(w,O,(0,be.attachWorkDone)(i,w),(0,be.attachPartialResult)(i,w))),onDefinition:S=>i.onRequest(te.DefinitionRequest.type,(w,O)=>S(w,O,(0,be.attachWorkDone)(i,w),(0,be.attachPartialResult)(i,w))),onTypeDefinition:S=>i.onRequest(te.TypeDefinitionRequest.type,(w,O)=>S(w,O,(0,be.attachWorkDone)(i,w),(0,be.attachPartialResult)(i,w))),onImplementation:S=>i.onRequest(te.ImplementationRequest.type,(w,O)=>S(w,O,(0,be.attachWorkDone)(i,w),(0,be.attachPartialResult)(i,w))),onReferences:S=>i.onRequest(te.ReferencesRequest.type,(w,O)=>S(w,O,(0,be.attachWorkDone)(i,w),(0,be.attachPartialResult)(i,w))),onDocumentHighlight:S=>i.onRequest(te.DocumentHighlightRequest.type,(w,O)=>S(w,O,(0,be.attachWorkDone)(i,w),(0,be.attachPartialResult)(i,w))),onDocumentSymbol:S=>i.onRequest(te.DocumentSymbolRequest.type,(w,O)=>S(w,O,(0,be.attachWorkDone)(i,w),(0,be.attachPartialResult)(i,w))),onWorkspaceSymbol:S=>i.onRequest(te.WorkspaceSymbolRequest.type,(w,O)=>S(w,O,(0,be.attachWorkDone)(i,w),(0,be.attachPartialResult)(i,w))),onWorkspaceSymbolResolve:S=>i.onRequest(te.WorkspaceSymbolResolveRequest.type,S),onCodeAction:S=>i.onRequest(te.CodeActionRequest.type,(w,O)=>S(w,O,(0,be.attachWorkDone)(i,w),(0,be.attachPartialResult)(i,w))),onCodeActionResolve:S=>i.onRequest(te.CodeActionResolveRequest.type,(w,O)=>S(w,O)),onCodeLens:S=>i.onRequest(te.CodeLensRequest.type,(w,O)=>S(w,O,(0,be.attachWorkDone)(i,w),(0,be.attachPartialResult)(i,w))),onCodeLensResolve:S=>i.onRequest(te.CodeLensResolveRequest.type,(w,O)=>S(w,O)),onDocumentFormatting:S=>i.onRequest(te.DocumentFormattingRequest.type,(w,O)=>S(w,O,(0,be.attachWorkDone)(i,w),void 0)),onDocumentRangeFormatting:S=>i.onRequest(te.DocumentRangeFormattingRequest.type,(w,O)=>S(w,O,(0,be.attachWorkDone)(i,w),void 0)),onDocumentOnTypeFormatting:S=>i.onRequest(te.DocumentOnTypeFormattingRequest.type,(w,O)=>S(w,O)),onRenameRequest:S=>i.onRequest(te.RenameRequest.type,(w,O)=>S(w,O,(0,be.attachWorkDone)(i,w),void 0)),onPrepareRename:S=>i.onRequest(te.PrepareRenameRequest.type,(w,O)=>S(w,O)),onDocumentLinks:S=>i.onRequest(te.DocumentLinkRequest.type,(w,O)=>S(w,O,(0,be.attachWorkDone)(i,w),(0,be.attachPartialResult)(i,w))),onDocumentLinkResolve:S=>i.onRequest(te.DocumentLinkResolveRequest.type,(w,O)=>S(w,O)),onDocumentColor:S=>i.onRequest(te.DocumentColorRequest.type,(w,O)=>S(w,O,(0,be.attachWorkDone)(i,w),(0,be.attachPartialResult)(i,w))),onColorPresentation:S=>i.onRequest(te.ColorPresentationRequest.type,(w,O)=>S(w,O,(0,be.attachWorkDone)(i,w),(0,be.attachPartialResult)(i,w))),onFoldingRanges:S=>i.onRequest(te.FoldingRangeRequest.type,(w,O)=>S(w,O,(0,be.attachWorkDone)(i,w),(0,be.attachPartialResult)(i,w))),onSelectionRanges:S=>i.onRequest(te.SelectionRangeRequest.type,(w,O)=>S(w,O,(0,be.attachWorkDone)(i,w),(0,be.attachPartialResult)(i,w))),onExecuteCommand:S=>i.onRequest(te.ExecuteCommandRequest.type,(w,O)=>S(w,O,(0,be.attachWorkDone)(i,w),void 0)),dispose:()=>i.dispose()};for(let S of d)S.attach(D);return i.onRequest(te.InitializeRequest.type,S=>{e.initialize(S),qn.string(S.trace)&&(s.trace=te.Trace.fromString(S.trace));for(let w of d)w.initialize(S.capabilities);if(b){let w=b(S,new te.CancellationTokenSource().token,(0,be.attachWorkDone)(i,S),void 0);return p(w).then(O=>{if(O instanceof te.ResponseError)return O;let j=O;j||(j={capabilities:{}});let z=j.capabilities;z||(z={},j.capabilities=z),z.textDocumentSync===void 0||z.textDocumentSync===null?z.textDocumentSync=qn.number(D.__textDocumentSync)?D.__textDocumentSync:te.TextDocumentSyncKind.None:!qn.number(z.textDocumentSync)&&!qn.number(z.textDocumentSync.change)&&(z.textDocumentSync.change=qn.number(D.__textDocumentSync)?D.__textDocumentSync:te.TextDocumentSyncKind.None);for(let W of d)W.fillServerCapabilities(z);return j})}else{let w={capabilities:{textDocumentSync:te.TextDocumentSyncKind.None}};for(let O of d)O.fillServerCapabilities(w.capabilities);return w}}),i.onRequest(te.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,g)return g(new te.CancellationTokenSource().token)}),i.onNotification(te.ExitNotification.type,()=>{try{C&&C()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification(te.SetTraceNotification.type,S=>{s.trace=te.Trace.fromString(S.value)}),D}Ke.createConnection=w8});var PF=_(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.resolveModulePath=Gr.FileSystem=Gr.resolveGlobalYarnPath=Gr.resolveGlobalNodePath=Gr.resolve=Gr.uriToFilePath=void 0;var S8=require("url"),Yn=require("path"),g0=require("fs"),v0=require("child_process");function R8(t){let e=S8.parse(t);if(e.protocol!=="file:"||!e.path)return;let r=e.path.split("/");for(var n=0,i=r.length;n<i;n++)r[n]=decodeURIComponent(r[n]);if(process.platform==="win32"&&r.length>1){let s=r[0],o=r[1];s.length===0&&o.length>1&&o[1]===":"&&r.shift()}return Yn.normalize(r.join("/"))}Gr.uriToFilePath=R8;function p0(){return process.platform==="win32"}function tg(t,e,r,n){let i="NODE_PATH",s=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((o,a)=>{let u=process.env,c=Object.create(null);Object.keys(u).forEach(l=>c[l]=u[l]),e&&g0.existsSync(e)&&(c[i]?c[i]=e+Yn.delimiter+c[i]:c[i]=e,n&&n(`NODE_PATH value is: ${c[i]}`)),c.ELECTRON_RUN_AS_NODE="1";try{let l=(0,v0.fork)("",[],{cwd:r,env:c,execArgv:["-e",s]});if(l.pid===void 0){a(new Error(`Starting process to resolve node module  ${t} failed`));return}l.on("error",d=>{a(d)}),l.on("message",d=>{d.c==="r"&&(l.send({c:"e"}),d.s?o(d.r):a(new Error(`Failed to resolve module: ${t}`)))});let f={c:"rs",a:t};l.send(f)}catch(l){a(l)}})}Gr.resolve=tg;function m0(t){let e="npm",r=Object.create(null);Object.keys(process.env).forEach(s=>r[s]=process.env[s]),r.NO_UPDATE_NOTIFIER="true";let n={encoding:"utf8",env:r};p0()&&(e="npm.cmd",n.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let s=(0,v0.spawnSync)(e,["config","get","prefix"],n).stdout;if(!s){t&&t("'npm config get prefix' didn't return a value.");return}let o=s.trim();return t&&t(`'npm config get prefix' value is: ${o}`),o.length>0?p0()?Yn.join(o,"node_modules"):Yn.join(o,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}Gr.resolveGlobalNodePath=m0;function C8(t){let e="yarn",r={encoding:"utf8"};p0()&&(e="yarn.cmd",r.shell=!0);let n=()=>{};try{process.on("SIGPIPE",n);let i=(0,v0.spawnSync)(e,["global","dir","--json"],r),s=i.stdout;if(!s){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let o=s.trim().split(/\r?\n/);for(let a of o)try{let u=JSON.parse(a);if(u.type==="log")return Yn.join(u.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",n)}}Gr.resolveGlobalYarnPath=C8;var y0;(function(t){let e;function r(){return e!==void 0||(process.platform==="win32"?e=!1:e=!g0.existsSync(__filename.toUpperCase())||!g0.existsSync(__filename.toLowerCase())),e}t.isCaseSensitive=r;function n(i,s){return r()?Yn.normalize(s).indexOf(Yn.normalize(i))===0:Yn.normalize(s).toLowerCase().indexOf(Yn.normalize(i).toLowerCase())===0}t.isParent=n})(y0||(Gr.FileSystem=y0={}));function D8(t,e,r,n){return r?(Yn.isAbsolute(r)||(r=Yn.join(t,r)),tg(e,r,r,n).then(i=>y0.isParent(r,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>tg(e,m0(n),t,n))):tg(e,m0(n),t,n)}Gr.resolveModulePath=D8});var TF=_(rg=>{"use strict";Object.defineProperty(rg,"__esModule",{value:!0});rg.InlineCompletionFeature=void 0;var E8=ne(),P8=t=>class extends t{get inlineCompletion(){return{on:e=>this.connection.onRequest(E8.InlineCompletionRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r)))}}};rg.InlineCompletionFeature=P8});var MF=_(dr=>{"use strict";var T8=dr&&dr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),OF=dr&&dr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&T8(e,t,r)};Object.defineProperty(dr,"__esModule",{value:!0});dr.ProposedFeatures=dr.NotebookDocuments=dr.TextDocuments=dr.SemanticTokensBuilder=void 0;var q8=t0();Object.defineProperty(dr,"SemanticTokensBuilder",{enumerable:!0,get:function(){return q8.SemanticTokensBuilder}});var O8=TF();OF(ne(),dr);var M8=s0();Object.defineProperty(dr,"TextDocuments",{enumerable:!0,get:function(){return M8.TextDocuments}});var x8=a0();Object.defineProperty(dr,"NotebookDocuments",{enumerable:!0,get:function(){return x8.NotebookDocuments}});OF(h0(),dr);var qF;(function(t){t.all={__brand:"features",languages:O8.InlineCompletionFeature}})(qF||(dr.ProposedFeatures=qF={}))});var NF=_(On=>{"use strict";var k8=On&&On.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),IF=On&&On.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&k8(e,t,r)};Object.defineProperty(On,"__esModule",{value:!0});On.createConnection=On.Files=void 0;var xF=require("node:util"),_0=Th(),F8=h0(),Ic=PF(),Co=Fu();IF(Fu(),On);IF(MF(),On);var kF;(function(t){t.uriToFilePath=Ic.uriToFilePath,t.resolveGlobalNodePath=Ic.resolveGlobalNodePath,t.resolveGlobalYarnPath=Ic.resolveGlobalYarnPath,t.resolve=Ic.resolve,t.resolveModulePath=Ic.resolveModulePath})(kF||(On.Files=kF={}));var FF;function ng(){if(FF!==void 0)try{FF.end()}catch{}}var Na=!1,AF;function I8(){let t="--clientProcessId";function e(r){try{let n=parseInt(r);isNaN(n)||(AF=setInterval(()=>{try{process.kill(n,0)}catch{ng(),process.exit(Na?0:1)}},3e3))}catch{}}for(let r=2;r<process.argv.length;r++){let n=process.argv[r];if(n===t&&r+1<process.argv.length){e(process.argv[r+1]);return}else{let i=n.split("=");i[0]===t&&e(i[1])}}}I8();var A8={initialize:t=>{let e=t.processId;_0.number(e)&&AF===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(Na?0:1)}},3e3)},get shutdownReceived(){return Na},set shutdownReceived(t){Na=t},exit:t=>{ng(),process.exit(t)}};function N8(t,e,r,n){let i,s,o,a;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=r,r=n),Co.ConnectionStrategy.is(t)||Co.ConnectionOptions.is(t)?a=t:(s=t,o=e,a=r),L8(s,o,a,i)}On.createConnection=N8;function L8(t,e,r,n){let i=!1;if(!t&&!e&&process.argv.length>2){let u,c,l=process.argv.slice(2);for(let f=0;f<l.length;f++){let d=l[f];if(d==="--node-ipc"){t=new Co.IPCMessageReader(process),e=new Co.IPCMessageWriter(process);break}else if(d==="--stdio"){i=!0,t=process.stdin,e=process.stdout;break}else if(d==="--socket"){u=parseInt(l[f+1]);break}else if(d==="--pipe"){c=l[f+1];break}else{var s=d.split("=");if(s[0]==="--socket"){u=parseInt(s[1]);break}else if(s[0]==="--pipe"){c=s[1];break}}}if(u){let f=(0,Co.createServerSocketTransport)(u);t=f[0],e=f[1]}else if(c){let f=(0,Co.createServerPipeTransport)(c);t=f[0],e=f[1]}}var o="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+o);if(!e)throw new Error("Connection output stream is not set. "+o);if(_0.func(t.read)&&_0.func(t.on)){let u=t;u.on("end",()=>{ng(),process.exit(Na?0:1)}),u.on("close",()=>{ng(),process.exit(Na?0:1)})}let a=u=>{let c=(0,Co.createProtocolConnection)(t,e,u,r);return i&&j8(u),c};return(0,F8.createConnection)(a,A8,n)}function j8(t){function e(n){return n.map(i=>typeof i=="string"?i:(0,xF.inspect)(i)).join(" ")}let r=new Map;console.assert=function(i,...s){if(!i)if(s.length===0)t.error("Assertion failed");else{let[o,...a]=s;t.error(`Assertion failed: ${o} ${e(a)}`)}},console.count=function(i="default"){let s=String(i),o=r.get(s)??0;o+=1,r.set(s,o),t.log(`${s}: ${s}`)},console.countReset=function(i){i===void 0?r.clear():r.delete(String(i))},console.debug=function(...i){t.log(e(i))},console.dir=function(i,s){t.log((0,xF.inspect)(i,s))},console.log=function(...i){t.log(e(i))},console.error=function(...i){t.error(e(i))},console.trace=function(...i){let s=new Error().stack.replace(/(.+\n){2}/,""),o="Trace";i.length!==0&&(o+=`: ${e(i)}`),t.log(`${o}
${s}`)},console.warn=function(...i){t.warn(e(i))}}});var b0=_((tee,LF)=>{"use strict";LF.exports=NF()});var YF=_((ree,GF)=>{var hn=-1,Sr=1,Wt=0;function Ac(t,e,r,n,i){if(t===e)return t?[[Wt,t]]:[];if(r!=null){var s=G8(t,e,r);if(s)return s}var o=S0(t,e),a=t.substring(0,o);t=t.substring(o),e=e.substring(o),o=ig(t,e);var u=t.substring(t.length-o);t=t.substring(0,t.length-o),e=e.substring(0,e.length-o);var c=$8(t,e);return a&&c.unshift([Wt,a]),u&&c.push([Wt,u]),R0(c,i),n&&U8(c),c}function $8(t,e){var r;if(!t)return[[Sr,e]];if(!e)return[[hn,t]];var n=t.length>e.length?t:e,i=t.length>e.length?e:t,s=n.indexOf(i);if(s!==-1)return r=[[Sr,n.substring(0,s)],[Wt,i],[Sr,n.substring(s+i.length)]],t.length>e.length&&(r[0][0]=r[2][0]=hn),r;if(i.length===1)return[[hn,t],[Sr,e]];var o=H8(t,e);if(o){var a=o[0],u=o[1],c=o[2],l=o[3],f=o[4],d=Ac(a,c),p=Ac(u,l);return d.concat([[Wt,f]],p)}return W8(t,e)}function W8(t,e){for(var r=t.length,n=e.length,i=Math.ceil((r+n)/2),s=i,o=2*i,a=new Array(o),u=new Array(o),c=0;c<o;c++)a[c]=-1,u[c]=-1;a[s+1]=0,u[s+1]=0;for(var l=r-n,f=l%2!==0,d=0,p=0,g=0,b=0,C=0;C<i;C++){for(var D=-C+d;D<=C-p;D+=2){var S=s+D,w;D===-C||D!==C&&a[S-1]<a[S+1]?w=a[S+1]:w=a[S-1]+1;for(var O=w-D;w<r&&O<n&&t.charAt(w)===e.charAt(O);)w++,O++;if(a[S]=w,w>r)p+=2;else if(O>n)d+=2;else if(f){var j=s+l-D;if(j>=0&&j<o&&u[j]!==-1){var z=r-u[j];if(w>=z)return jF(t,e,w,O)}}}for(var W=-C+g;W<=C-b;W+=2){var j=s+W,z;W===-C||W!==C&&u[j-1]<u[j+1]?z=u[j+1]:z=u[j-1]+1;for(var G=z-W;z<r&&G<n&&t.charAt(r-z-1)===e.charAt(n-G-1);)z++,G++;if(u[j]=z,z>r)b+=2;else if(G>n)g+=2;else if(!f){var S=s+l-W;if(S>=0&&S<o&&a[S]!==-1){var w=a[S],O=s+w-S;if(z=r-z,w>=z)return jF(t,e,w,O)}}}}return[[hn,t],[Sr,e]]}function jF(t,e,r,n){var i=t.substring(0,r),s=e.substring(0,n),o=t.substring(r),a=e.substring(n),u=Ac(i,s),c=Ac(o,a);return u.concat(c)}function S0(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var r=0,n=Math.min(t.length,e.length),i=n,s=0;r<i;)t.substring(s,i)==e.substring(s,i)?(r=i,s=r):n=i,i=Math.floor((n-r)/2+r);return zF(t.charCodeAt(i-1))&&i--,i}function $F(t,e){var r=t.length,n=e.length;if(r==0||n==0)return 0;r>n?t=t.substring(r-n):r<n&&(e=e.substring(0,r));var i=Math.min(r,n);if(t==e)return i;for(var s=0,o=1;;){var a=t.substring(i-o),u=e.indexOf(a);if(u==-1)return s;o+=u,(u==0||t.substring(i-o)==e.substring(0,o))&&(s=o,o++)}}function ig(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1))return 0;for(var r=0,n=Math.min(t.length,e.length),i=n,s=0;r<i;)t.substring(t.length-i,t.length-s)==e.substring(e.length-i,e.length-s)?(r=i,s=r):n=i,i=Math.floor((n-r)/2+r);return KF(t.charCodeAt(t.length-i))&&i--,i}function H8(t,e){var r=t.length>e.length?t:e,n=t.length>e.length?e:t;if(r.length<4||n.length*2<r.length)return null;function i(p,g,b){for(var C=p.substring(b,b+Math.floor(p.length/4)),D=-1,S="",w,O,j,z;(D=g.indexOf(C,D+1))!==-1;){var W=S0(p.substring(b),g.substring(D)),G=ig(p.substring(0,b),g.substring(0,D));S.length<G+W&&(S=g.substring(D-G,D)+g.substring(D,D+W),w=p.substring(0,b-G),O=p.substring(b+W),j=g.substring(0,D-G),z=g.substring(D+W))}return S.length*2>=p.length?[w,O,j,z,S]:null}var s=i(r,n,Math.ceil(r.length/4)),o=i(r,n,Math.ceil(r.length/2)),a;if(!s&&!o)return null;o?s?a=s[4].length>o[4].length?s:o:a=o:a=s;var u,c,l,f;t.length>e.length?(u=a[0],c=a[1],l=a[2],f=a[3]):(l=a[0],f=a[1],u=a[2],c=a[3]);var d=a[4];return[u,c,l,f,d]}function U8(t){for(var e=!1,r=[],n=0,i=null,s=0,o=0,a=0,u=0,c=0;s<t.length;)t[s][0]==Wt?(r[n++]=s,o=u,a=c,u=0,c=0,i=t[s][1]):(t[s][0]==Sr?u+=t[s][1].length:c+=t[s][1].length,i&&i.length<=Math.max(o,a)&&i.length<=Math.max(u,c)&&(t.splice(r[n-1],0,[hn,i]),t[r[n-1]+1][0]=Sr,n--,n--,s=n>0?r[n-1]:-1,o=0,a=0,u=0,c=0,i=null,e=!0)),s++;for(e&&R0(t),B8(t),s=1;s<t.length;){if(t[s-1][0]==hn&&t[s][0]==Sr){var l=t[s-1][1],f=t[s][1],d=$F(l,f),p=$F(f,l);d>=p?(d>=l.length/2||d>=f.length/2)&&(t.splice(s,0,[Wt,f.substring(0,d)]),t[s-1][1]=l.substring(0,l.length-d),t[s+1][1]=f.substring(d),s++):(p>=l.length/2||p>=f.length/2)&&(t.splice(s,0,[Wt,l.substring(0,p)]),t[s-1][0]=Sr,t[s-1][1]=f.substring(0,f.length-p),t[s+1][0]=hn,t[s+1][1]=l.substring(p),s++),s++}s++}}var WF=/[^a-zA-Z0-9]/,HF=/\s/,UF=/[\r\n]/,z8=/\n\r?\n$/,K8=/^\r?\n\r?\n/;function B8(t){function e(p,g){if(!p||!g)return 6;var b=p.charAt(p.length-1),C=g.charAt(0),D=b.match(WF),S=C.match(WF),w=D&&b.match(HF),O=S&&C.match(HF),j=w&&b.match(UF),z=O&&C.match(UF),W=j&&p.match(z8),G=z&&g.match(K8);return W||G?5:j||z?4:D&&!w&&O?3:w||O?2:D||S?1:0}for(var r=1;r<t.length-1;){if(t[r-1][0]==Wt&&t[r+1][0]==Wt){var n=t[r-1][1],i=t[r][1],s=t[r+1][1],o=ig(n,i);if(o){var a=i.substring(i.length-o);n=n.substring(0,n.length-o),i=a+i.substring(0,i.length-o),s=a+s}for(var u=n,c=i,l=s,f=e(n,i)+e(i,s);i.charAt(0)===s.charAt(0);){n+=i.charAt(0),i=i.substring(1)+s.charAt(0),s=s.substring(1);var d=e(n,i)+e(i,s);d>=f&&(f=d,u=n,c=i,l=s)}t[r-1][1]!=u&&(u?t[r-1][1]=u:(t.splice(r-1,1),r--),t[r][1]=c,l?t[r+1][1]=l:(t.splice(r+1,1),r--))}r++}}function R0(t,e){t.push([Wt,""]);for(var r=0,n=0,i=0,s="",o="",a;r<t.length;){if(r<t.length-1&&!t[r][1]){t.splice(r,1);continue}switch(t[r][0]){case Sr:i++,o+=t[r][1],r++;break;case hn:n++,s+=t[r][1],r++;break;case Wt:var u=r-i-n-1;if(e){if(u>=0&&VF(t[u][1])){var c=t[u][1].slice(-1);if(t[u][1]=t[u][1].slice(0,-1),s=c+s,o=c+o,!t[u][1]){t.splice(u,1),r--;var l=u-1;t[l]&&t[l][0]===Sr&&(i++,o=t[l][1]+o,l--),t[l]&&t[l][0]===hn&&(n++,s=t[l][1]+s,l--),u=l}}if(BF(t[r][1])){var c=t[r][1].charAt(0);t[r][1]=t[r][1].slice(1),s+=c,o+=c}}if(r<t.length-1&&!t[r][1]){t.splice(r,1);break}if(s.length>0||o.length>0){s.length>0&&o.length>0&&(a=S0(o,s),a!==0&&(u>=0?t[u][1]+=o.substring(0,a):(t.splice(0,0,[Wt,o.substring(0,a)]),r++),o=o.substring(a),s=s.substring(a)),a=ig(o,s),a!==0&&(t[r][1]=o.substring(o.length-a)+t[r][1],o=o.substring(0,o.length-a),s=s.substring(0,s.length-a)));var f=i+n;s.length===0&&o.length===0?(t.splice(r-f,f),r=r-f):s.length===0?(t.splice(r-f,f,[Sr,o]),r=r-f+1):o.length===0?(t.splice(r-f,f,[hn,s]),r=r-f+1):(t.splice(r-f,f,[hn,s],[Sr,o]),r=r-f+2)}r!==0&&t[r-1][0]===Wt?(t[r-1][1]+=t[r][1],t.splice(r,1)):r++,i=0,n=0,s="",o="";break}}t[t.length-1][1]===""&&t.pop();var d=!1;for(r=1;r<t.length-1;)t[r-1][0]===Wt&&t[r+1][0]===Wt&&(t[r][1].substring(t[r][1].length-t[r-1][1].length)===t[r-1][1]?(t[r][1]=t[r-1][1]+t[r][1].substring(0,t[r][1].length-t[r-1][1].length),t[r+1][1]=t[r-1][1]+t[r+1][1],t.splice(r-1,1),d=!0):t[r][1].substring(0,t[r+1][1].length)==t[r+1][1]&&(t[r-1][1]+=t[r+1][1],t[r][1]=t[r][1].substring(t[r+1][1].length)+t[r+1][1],t.splice(r+1,1),d=!0)),r++;d&&R0(t,e)}function zF(t){return t>=55296&&t<=56319}function KF(t){return t>=56320&&t<=57343}function BF(t){return KF(t.charCodeAt(0))}function VF(t){return zF(t.charCodeAt(t.length-1))}function V8(t){for(var e=[],r=0;r<t.length;r++)t[r][1].length>0&&e.push(t[r]);return e}function w0(t,e,r,n){return VF(t)||BF(n)?null:V8([[Wt,t],[hn,e],[Sr,r],[Wt,n]])}function G8(t,e,r){var n=typeof r=="number"?{index:r,length:0}:r.oldRange,i=typeof r=="number"?null:r.newRange,s=t.length,o=e.length;if(n.length===0&&(i===null||i.length===0)){var a=n.index,u=t.slice(0,a),c=t.slice(a),l=i?i.index:null;e:{var f=a+o-s;if(l!==null&&l!==f||f<0||f>o)break e;var d=e.slice(0,f),p=e.slice(f);if(p!==c)break e;var g=Math.min(a,f),b=u.slice(0,g),C=d.slice(0,g);if(b!==C)break e;var D=u.slice(g),S=d.slice(g);return w0(b,D,S,c)}e:{if(l!==null&&l!==a)break e;var w=a,d=e.slice(0,w),p=e.slice(w);if(d!==u)break e;var O=Math.min(s-w,o-w),j=c.slice(c.length-O),z=p.slice(p.length-O);if(j!==z)break e;var D=c.slice(0,c.length-O),S=p.slice(0,p.length-O);return w0(u,D,S,j)}}if(n.length>0&&i&&i.length===0)e:{var b=t.slice(0,n.index),j=t.slice(n.index+n.length),g=b.length,O=j.length;if(o<g+O)break e;var C=e.slice(0,g),z=e.slice(o-O);if(b!==C||j!==z)break e;var D=t.slice(g,s-O),S=e.slice(g,o-O);return w0(b,D,S,j)}return null}function sg(t,e,r,n){return Ac(t,e,r,n,!0)}sg.INSERT=Sr;sg.DELETE=hn;sg.EQUAL=Wt;GF.exports=sg});var D0=_(Nc=>{"use strict";var Y8=Nc&&Nc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nc,"__esModule",{value:!0});Nc.createTextEdits=X8;var og=Y8(YF()),C0=oi();function X8(t,e){let r=(0,og.default)(t.getText(),e),n=[],i=0;for(let[s,o]of r){let a=i;switch(s){case og.default.EQUAL:i+=o.length;break;case og.default.DELETE:i+=o.length,n.push(C0.TextEdit.del(C0.Range.create(t.positionAt(a),t.positionAt(i))));break;case og.default.INSERT:n.push(C0.TextEdit.insert(t.positionAt(a),o));break}}return n}});var XF=_(E0=>{"use strict";Object.defineProperty(E0,"__esModule",{value:!0});E0.getEditInfo=J8;function J8(t,e,r){if(!r||t.version!==r.version)return;let n=r.getWarning?.(e);if(!n)return;let i=n.fix;if(i)return{label:`Fix this ${n.rule} problem`,edit:{newText:i.text,range:{start:t.positionAt(i.range[0]),end:t.positionAt(i.range[1])}}}}});var QF=_(P0=>{"use strict";Object.defineProperty(P0,"__esModule",{value:!0});P0.getDisableType=Q8;var JF=oi();function Q8(t,e){let r=t.offsetAt(JF.Position.create(e.line,0)),n=t.offsetAt(JF.Position.create(e.line+1,0)),i=t.getText().slice(r,n),s=i.slice(0,e.character),o=i.slice(e.character),a=s.match(/\/\*\s*(stylelint-disable(?:(?:-next)?-line)?)\s[a-z\-/\s,]*$/i)?.[1]?.toLowerCase();return a&&/^[a-z\-/\s,]*\*\//i.test(o)?a:void 0}});var ZF=_(T0=>{"use strict";Object.defineProperty(T0,"__esModule",{value:!0});T0.getFixes=eV;var Z8=D0();async function eV(t,e,r={},n={}){let i=await t.lintDocument(e,{...r,fix:!0},n);return typeof i.output=="string"?(0,Z8.createTextEdits)(e,i.output):[]}});var eI=_(Lc=>{"use strict";var tV=Lc&&Lc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Lc,"__esModule",{value:!0});Lc.getWorkspaceFolder=nV;var rV=tV(Eh()),q0=Fa();async function nV(t,e){let{scheme:r,fsPath:n}=q0.URI.parse(e.uri);if(r==="untitled"){let i=(await t.workspace.getWorkspaceFolders())?.[0]?.uri;return i?q0.URI.parse(i).fsPath:void 0}if(n){let i=await t.workspace.getWorkspaceFolders();if(i)for(let{uri:s}of i){let o=q0.URI.parse(s).fsPath;if((0,rV.default)(n,o))return o}}}});var La=_(Xn=>{"use strict";var iV=Xn&&Xn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),jc=Xn&&Xn.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&iV(e,t,r)};Object.defineProperty(Xn,"__esModule",{value:!0});jc(D0(),Xn);jc(XF(),Xn);jc(QF(),Xn);jc(ZF(),Xn);jc(eI(),Xn)});var tI=_(ag=>{"use strict";Object.defineProperty(ag,"__esModule",{value:!0});ag.getFirstReturnValue=sV;ag.getFirstResolvedValue=oV;function sV(...t){for(let e of t){let r=e();if(r!==void 0)return r}}async function oV(...t){for(let e of t){let r=await e();if(r!==void 0)return r}}});var rI=_(ug=>{"use strict";Object.defineProperty(ug,"__esModule",{value:!0});ug.lazyCall=aV;ug.lazyCallAsync=uV;function aV(t){let e=!1,r;return()=>(e||(r=t(),e=!0),r)}function uV(t){let e=!1,r;return async()=>(e||(r=await t(),e=!0),r)}});var iI=_(Is=>{"use strict";var cV=Is&&Is.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),nI=Is&&Is.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&cV(e,t,r)};Object.defineProperty(Is,"__esModule",{value:!0});nI(tI(),Is);nI(rI(),Is)});var fI=_(bi=>{"use strict";var O0=bi&&bi.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Xe=bi&&bi.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},k0=bi&&bi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Jn,$i,tr,dg,cg,sI,oI,aI,uI,lI,dI;Object.defineProperty(bi,"__esModule",{value:!0});bi.StylelintResolver=void 0;var lV=k0(require("fs/promises")),dV=require("module"),lg=k0(require("path")),fV=k0(require("process")),hV=b0(),gV=Fa(),pV=La(),cI=zw(),mV=Yw(),M0=iI(),x0=class{constructor(e,r){Jn.add(this),$i.set(this,void 0),tr.set(this,void 0),dg.set(this,void 0),O0(this,$i,e,"f"),O0(this,tr,r,"f"),O0(this,dg,new mV.GlobalPathResolver(r),"f")}async resolve({packageManager:e,stylelintPath:r},n){let i=(0,M0.lazyCallAsync)(async()=>Xe(this,$i,"f")&&await(0,pV.getWorkspaceFolder)(Xe(this,$i,"f"),n)),s=await(0,M0.getFirstResolvedValue)(()=>Xe(this,Jn,"m",lI).call(this,r,i),()=>Xe(this,Jn,"m",dI).call(this,n,i,e));if(!s){Xe(this,tr,"f")?.warn("Failed to load Stylelint either globally or from the current workspace.");return}return s}};bi.StylelintResolver=x0;$i=new WeakMap,tr=new WeakMap,dg=new WeakMap,Jn=new WeakSet,cg=function(e,r){Xe(this,tr,"f")&&Xe(this,tr,"f")?.error(e,r&&{error:r}),Xe(this,$i,"f")&&Xe(this,$i,"f").window.showErrorMessage(`Stylelint: ${e}`)},sI=async function(e){let r=[".pnp.cjs",".pnp.js"];for(let n of r){let i=lg.default.join(e,n);try{if((await lV.default.stat(i)).isFile())return i}catch(s){Xe(this,tr,"f")?.debug("Did not find PnP loader at tested path",{path:i,error:s})}}Xe(this,tr,"f")?.debug("Could not find a PnP loader",{path:e})},oI=async function(e){if(!e)return;let r=await(0,cI.findPackageRoot)(e,"yarn.lock");if(!r){Xe(this,tr,"f")?.debug("Could not find a Yarn lockfile",{cwd:e});return}let n=await Xe(this,Jn,"m",sI).call(this,r);if(n){if(!fV.default.versions.pnp)try{require(n).setup()}catch(i){Xe(this,tr,"f")?.warn("Could not setup PnP",{path:n,error:i});return}try{let i=(0,dV.createRequire)(n),s=i.resolve("stylelint"),o=await(0,cI.findPackageRoot)(s);if(!o){Xe(this,tr,"f")?.warn("Failed to find the Stylelint package root",{path:s});return}let u={stylelint:i("stylelint"),resolvedPath:o};return Xe(this,tr,"f")?.debug("Resolved Stylelint using PnP",{path:n}),u}catch(i){Xe(this,tr,"f")?.warn("Could not load Stylelint using PnP",{path:r,error:i});return}}},aI=async function(e,r,n){try{let i=await hV.Files.resolve("stylelint",r,e,n),s={stylelint:require(i),resolvedPath:i};return Xe(this,tr,"f")?.debug("Resolved Stylelint from node_modules",{path:i}),s}catch(i){Xe(this,tr,"f")?.warn("Could not load Stylelint from node_modules",{error:i});return}},uI=async function(e,r){if(!Xe(this,$i,"f")||lg.default.isAbsolute(e))return e;let n=await r();return n?lg.default.join(n,e):e},lI=async function(e,r){if(!e)return;let n=`Failed to load Stylelint from "stylelintPath": ${e}.`;try{let i=await Xe(this,Jn,"m",uI).call(this,e,r),s=require(i);if(s&&typeof s.lint=="function")return{stylelint:s,resolvedPath:i}}catch(i){throw Xe(this,Jn,"m",cg).call(this,n,i),i}Xe(this,Jn,"m",cg).call(this,n)},dI=async function(e,r,n){let i=Xe(this,$i,"f");try{let s=n?await Xe(this,dg,"f").resolve(n):void 0,o=gV.URI.parse(e.uri),a=o.scheme==="file"?lg.default.dirname(o.fsPath):await r(),u=await(0,M0.getFirstResolvedValue)(async()=>await Xe(this,Jn,"m",oI).call(this,a),async()=>await Xe(this,Jn,"m",aI).call(this,a,s,(c,l)=>{Xe(this,tr,"f")?.debug(c.replace(/\n/g,"  "),{verbose:l}),i?.tracer.log(c,l)}));if(!u)return;if(typeof u.stylelint?.lint!="function"){Xe(this,Jn,"m",cg).call(this,"stylelint.lint is not a function.");return}return u}catch(s){Xe(this,tr,"f")?.debug("Failed to resolve Stylelint from workspace or globally-installed packages.",{error:s})}}});var gI=_(hI=>{"use strict";Object.defineProperty(hI,"__esModule",{value:!0})});var $c=_(wi=>{"use strict";var yV=wi&&wi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),fg=wi&&wi.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&yV(e,t,r)};Object.defineProperty(wi,"__esModule",{value:!0});fg(zw(),wi);fg(Yw(),wi);fg(fI(),wi);fg(gI(),wi)});var F0=_(Hc=>{"use strict";var pI=Hc&&Hc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hc,"__esModule",{value:!0});Hc.buildStylelintOptions=wV;var Wc=pI(require("path")),vV=pI(Eh()),_V=Fa(),bV=$c();async function wV(t,e,r={},{config:n,configFile:i,configBasedir:s,customSyntax:o,ignoreDisables:a,reportDescriptionlessDisables:u,reportNeedlessDisables:c,reportInvalidScopeDisables:l}={}){let f={...r,config:n??r.config,configFile:i?e?i.replace(/\$\{workspaceFolder\}/gu,e):i:r.configFile,configBasedir:s?Wc.default.isAbsolute(s)?s:Wc.default.join(e??"",s):r.configBasedir,customSyntax:o?e?o.replace(/\$\{workspaceFolder\}/gu,e):o:r.customSyntax,ignoreDisables:a??r.ignoreDisables,reportDescriptionlessDisables:u??r.reportDescriptionlessDisables,reportNeedlessDisables:c??r.reportNeedlessDisables,reportInvalidScopeDisables:l??r.reportInvalidScopeDisables},d=_V.URI.parse(t).fsPath;return d&&(e&&(0,vV.default)(d,e)&&(f.ignorePath=Wc.default.join(e,".stylelintignore")),f.ignorePath===void 0&&(f.ignorePath=Wc.default.join(await(0,bV.findPackageRoot)(d)||Wc.default.parse(d).root,".stylelintignore"))),f}});var mI=_(I0=>{"use strict";Object.defineProperty(I0,"__esModule",{value:!0});I0.intersect=SV;function SV(t,e){if(!t)return e;if(!e)return t;let[r,n]=t.size<e.size?[t,e]:[e,t],i=new Set;for(let s of r)n.has(s)&&i.add(s);return i}});var Uc=_(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});ja.InvalidOptionError=ja.DisableReportRuleNames=void 0;var yI;(function(t){t.Needless="--report-needless-disables",t.InvalidScope="--report-invalid-scope-disables",t.Descriptionless="--report-descriptionless-disables",t.Illegal="reportDisables"})(yI||(ja.DisableReportRuleNames=yI={}));var A0=class extends Error{constructor(e){let r=e.map(n=>n.text);super(r.join(`
`)),this.reasons=r}};ja.InvalidOptionError=A0});var L0=_(N0=>{"use strict";Object.defineProperty(N0,"__esModule",{value:!0});N0.getDisableDiagnosticRule=RV;var hg=Uc();function RV(t){switch(t.code){case hg.DisableReportRuleNames.Needless:return t.message.match(/^Needless disable for "(.+)"$/)?.[1];case hg.DisableReportRuleNames.InvalidScope:return t.message.match(/^Rule "(.+)" isn't enabled$/)?.[1];case hg.DisableReportRuleNames.Descriptionless:return t.message.match(/^Disable for "(.+)" is missing a description$/)?.[1];case hg.DisableReportRuleNames.Illegal:return t.message.match(/^Rule "(.+)" may not be disabled$/)?.[1];default:return}}});var _I=_($a=>{"use strict";var Qn=$a&&$a.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},gg,zc,Kc,Bc,j0;Object.defineProperty($a,"__esModule",{value:!0});$a.DisableMetadataLookupTable=void 0;var vI=mI(),CV=L0(),$0=class{constructor(e){gg.add(this),zc.set(this,new Map),Kc.set(this,new Map),Bc.set(this,new Map);for(let r of e){let n=(0,CV.getDisableDiagnosticRule)(r);if(!n)continue;let i=r.code,s=Qn(this,zc,"f").get(i);s?s.add(r):Qn(this,zc,"f").set(i,new Set([r]));let o=Qn(this,Kc,"f").get(n);o?o.add(r):Qn(this,Kc,"f").set(n,new Set([r]));let a=Qn(this,gg,"m",j0).call(this,r.range),u=Qn(this,Bc,"f").get(a);u?u.add(r):Qn(this,Bc,"f").set(a,new Set([r]))}}find({type:e,rule:r,range:n}){let i=e?Qn(this,zc,"f").get(e):void 0,s=r?Qn(this,Kc,"f").get(r):void 0,o=n?Qn(this,Bc,"f").get(Qn(this,gg,"m",j0).call(this,n)):void 0;return(0,vI.intersect)((0,vI.intersect)(i,s),o)??new Set}};$a.DisableMetadataLookupTable=$0;zc=new WeakMap,Kc=new WeakMap,Bc=new WeakMap,gg=new WeakSet,j0=function({start:e,end:r}){return`${e.line}:${e.character}:${r.line}:${r.character}`}});var bI=_(W0=>{"use strict";Object.defineProperty(W0,"__esModule",{value:!0});W0.formattingOptionsToRules=DV;function DV({insertSpaces:t,tabSize:e,insertFinalNewline:r,trimTrailingWhitespace:n}){let i={indentation:[t?e:"tab"]};return r!==void 0&&(i["no-missing-end-of-source-newline"]=r||null),n!==void 0&&(i["no-eol-whitespace"]=n||null),i}});var wI=_(H0=>{"use strict";Object.defineProperty(H0,"__esModule",{value:!0});H0.isDisableReportRule=EV;var pg=Uc();function EV(t){switch(t){case pg.DisableReportRuleNames.Descriptionless:case pg.DisableReportRuleNames.Illegal:case pg.DisableReportRuleNames.InvalidScope:case pg.DisableReportRuleNames.Needless:return!0;default:return!1}}});var z0=_(U0=>{"use strict";Object.defineProperty(U0,"__esModule",{value:!0});U0.warningToDiagnostic=PV;var Wa=oi();function PV(t,e){let r=Wa.Position.create(t.line-1,t.column-1),n=typeof t.endLine=="number"&&typeof t.endColumn=="number"?Wa.Position.create(t.endLine-1,t.endColumn-1):Wa.Position.create(t.line-1,t.column),i=e?.[t.rule]?.url,s=Wa.Diagnostic.create(Wa.Range.create(r,n),t.text,Wa.DiagnosticSeverity[t.severity==="warning"?"Warning":"Error"],t.rule,"Stylelint");return i&&(s.codeDescription={href:i}),s}});var K0=_(Wi=>{"use strict";var TV=Wi&&Wi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),qV=Wi&&Wi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),OV=Wi&&Wi.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[n.length]=i);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),i=0;i<n.length;i++)n[i]!=="default"&&TV(r,e,n[i]);return qV(r,e),r}}();Object.defineProperty(Wi,"__esModule",{value:!0});Wi.processLinterResult=FV;var MV=OV(require("crypto")),xV=z0(),kV=Uc();function SI(t){let e=t.range,r="";if(t.message){let n=MV.createHash("sha256");n.update(t.message),r=n.digest("base64")}return`[${e.start.line},${e.start.character},${e.end.line},${e.end.character}]-${t.code}-${r}`}function FV(t,e){let{results:r}=e;if(r.length===0)return{diagnostics:[]};let[{invalidOptionWarnings:n,warnings:i,ignored:s}]=r;if(s)return{diagnostics:[]};if(n.length!==0)throw new kV.InvalidOptionError(n);let{ruleMetadata:o}=e;o||(o=new Proxy({},{get:(f,d)=>t.rules?.[d]?.meta}));let a=[],u=new Map;for(let f of i){let d=(0,xV.warningToDiagnostic)(f,o);a.push(d),u.set(SI(d),f)}let c=f=>{let d=SI(f);return u.get(d)??null},l="report"in e&&e.report||e.output;return l?{output:l,diagnostics:a,getWarning:c}:{diagnostics:a,getWarning:c}}});var CI=_(Si=>{"use strict";var B0=Si&&Si.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Ha=Si&&Si.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},IV=Si&&Si.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Vc,Ua,mg;Object.defineProperty(Si,"__esModule",{value:!0});Si.StylelintRunner=void 0;var AV=IV(require("os")),NV=Fa(),LV=$c(),jV=La(),RI=K0(),$V=F0(),V0=class{constructor(e,r,n){Vc.set(this,void 0),Ua.set(this,void 0),mg.set(this,void 0),B0(this,Vc,e,"f"),B0(this,Ua,r,"f"),B0(this,mg,n??new LV.StylelintResolver(e,r),"f")}async lintDocument(e,r={},n={}){let i=Ha(this,Vc,"f")&&await(0,jV.getWorkspaceFolder)(Ha(this,Vc,"f"),e),s=await Ha(this,mg,"f").resolve(n,e);if(!s)return Ha(this,Ua,"f")?.info("No Stylelint found with which to lint document",{uri:e.uri,options:n}),{diagnostics:[]};let{fsPath:o}=NV.URI.parse(e.uri),a=AV.default.platform()==="win32"?o.replace(/^[a-z]:/,c=>c.toUpperCase()):o,u={...await(0,$V.buildStylelintOptions)(e.uri,i,r,n),code:e.getText(),formatter:()=>"",computeEditInfo:!0};a?u.codeFilename=a:r?.config?.rules||(u.config={rules:{}}),Ha(this,Ua,"f")?.isDebugEnabled()&&Ha(this,Ua,"f")?.debug("Running Stylelint",{options:{...u,code:"..."}});try{return(0,RI.processLinterResult)(s.stylelint,await s.stylelint.lint(u))}catch(c){if(c instanceof Error&&(c.message.startsWith("No configuration provided for")||c.message.includes("No rules found within configuration")))return(0,RI.processLinterResult)(s.stylelint,await s.stylelint.lint({...u,config:{rules:{}}}));throw c}}};Si.StylelintRunner=V0;Vc=new WeakMap,Ua=new WeakMap,mg=new WeakMap});var Gc=_(Rr=>{"use strict";var WV=Rr&&Rr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Hi=Rr&&Rr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&WV(e,t,r)};Object.defineProperty(Rr,"__esModule",{value:!0});Hi(F0(),Rr);Hi(_I(),Rr);Hi(bI(),Rr);Hi(L0(),Rr);Hi(wI(),Rr);Hi(K0(),Rr);Hi(CI(),Rr);Hi(Uc(),Rr);Hi(z0(),Rr)});var xI=_(Xr=>{"use strict";var HV=Xr&&Xr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),UV=Xr&&Xr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),zV=Xr&&Xr.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[n.length]=i);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),i=0;i<n.length;i++)n[i]!=="default"&&HV(r,e,n[i]);return UV(r,e),r}}(),DI=Xr&&Xr.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Pe=Xr&&Xr.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},As,Yr,Mt,za,OI,EI,PI,TI,qI,MI;Object.defineProperty(Xr,"__esModule",{value:!0});Xr.CodeActionModule=void 0;var At=zV(ne()),Ui=Ma(),G0=Dh(),KV=Gc(),yg=class{constructor({context:e,logger:r}){As.add(this),Yr.set(this,void 0),Mt.set(this,void 0),za.set(this,[]),DI(this,Yr,e,"f"),DI(this,Mt,r,"f")}dispose(){Pe(this,za,"f").forEach(e=>e.dispose()),Pe(this,za,"f").length=0,Pe(this,Yr,"f").connection.onCodeAction(()=>{})}onInitialize(){return{capabilities:{codeActionProvider:{codeActionKinds:[At.CodeActionKind.QuickFix,Ui.CodeActionKind.StylelintSourceFixAll]},executeCommandProvider:{commands:[Ui.CommandId.OpenRuleDoc]}}}}onDidRegisterHandlers(){Pe(this,Mt,"f")?.debug("Registering onCodeAction handler"),Pe(this,Yr,"f").connection.onCodeAction(async({context:e,textDocument:{uri:r}})=>{Pe(this,Mt,"f")?.debug("Received onCodeAction",{context:e,uri:r});let n=Pe(this,Yr,"f").documents.get(r);if(!n)return Pe(this,Mt,"f")?.debug("Unknown document, ignoring",{uri:r}),[];if(!await Pe(this,As,"m",OI).call(this,n))return Pe(this,Mt,"f")?.debug("Document should not be validated, ignoring",{uri:r,language:n.languageId}),[];let i=await Pe(this,As,"m",MI).call(this,n,e);return Pe(this,Mt,"f")?.debug("Returning code actions",{actions:i}),i}),Pe(this,Mt,"f")?.debug("onCodeAction handler registered"),Pe(this,za,"f").push(Pe(this,Yr,"f").commands.on(Ui.CommandId.OpenRuleDoc,async({arguments:e})=>{let r=e?.[0];if(!r)return Pe(this,Mt,"f")?.debug("No URL provided, ignoring command request"),{};let{uri:n}=r;return Pe(this,Mt,"f")?.debug("Opening rule documentation",{uri:n}),(await Pe(this,Yr,"f").connection.window.showDocument({uri:n,external:!0})).success?{}:(Pe(this,Mt,"f")?.warn("Failed to open rule documentation",{uri:n}),new At.ResponseError(At.ErrorCodes.InternalError,"Failed to open rule documentation"))})),Pe(this,za,"f").push(Pe(this,Yr,"f").notifications.on(At.InitializedNotification.type,()=>Pe(this,Yr,"f").connection.sendNotification(Ui.Notification.DidRegisterCodeActionRequestHandler)))}};Xr.CodeActionModule=yg;Yr=new WeakMap,Mt=new WeakMap,za=new WeakMap,As=new WeakSet,OI=async function(e){return(await Pe(this,Yr,"f").getOptions(e.uri)).validate.includes(e.languageId)},EI=async function(e){let r=await Pe(this,Yr,"f").getFixes(e),n={uri:e.uri,version:e.version};return r.length>0?At.CodeAction.create("Fix all Stylelint auto-fixable problems",{documentChanges:[At.TextDocumentEdit.create(n,r)]},Ui.CodeActionKind.StylelintSourceFixAll):void 0},PI=function(e,r){let n={uri:e.uri,version:e.version},i=[];for(let s of r.diagnostics){let o=Pe(this,Yr,"f").getEditInfo(e,s);if(o){let a=At.CodeAction.create(o.label,{documentChanges:[At.TextDocumentEdit.create(n,[o.edit])]},At.CodeActionKind.QuickFix);i.push(a)}}return i},TI=function(e){let r=At.Command.create("Fix all Stylelint auto-fixable problems",Ui.CommandId.ApplyAutoFix,{uri:e.uri,version:e.version});return At.CodeAction.create("Fix all Stylelint auto-fixable problems",r,At.CodeActionKind.Source)},qI=function({code:e,codeDescription:r}){let n=r?.href;if(!n)return;let i=At.Command.create(`Open documentation for ${e}`,Ui.CommandId.OpenRuleDoc,{uri:n});return At.CodeAction.create(`Show documentation for ${e}`,i,At.CodeActionKind.QuickFix)},MI=async function(e,r){let n=r.only&&new Set(r.only);Pe(this,Mt,"f")?.debug("Creating code actions",{only:r.only});let i=[];if(n?.has(At.CodeActionKind.SourceFixAll)||n?.has(Ui.CodeActionKind.StylelintSourceFixAll)){Pe(this,Mt,"f")?.debug('Creating "source-fix-all" code action');let o=await Pe(this,As,"m",EI).call(this,e);o&&i.push(o)}else Pe(this,Mt,"f")?.debug("No source-fix-all actions requested, skipping source-fix-all action creation");if(n?.has(At.CodeActionKind.Source)?(Pe(this,Mt,"f")?.debug('Creating "source" code action'),i.push(Pe(this,As,"m",TI).call(this,e))):Pe(this,Mt,"f")?.debug("No source actions requested, skipping source action creation"),n&&!n.has(At.CodeActionKind.QuickFix)&&!n.has(At.CodeActionKind.SourceFixAll)&&!n.has(Ui.CodeActionKind.StylelintSourceFixAll)&&!n.has(At.CodeActionKind.Source))return Pe(this,Mt,"f")?.debug("No quick fix actions requested, skipping quick fix action creation"),i;let s=new G0.RuleCodeActionsCollection;for(let o of r.diagnostics){let{source:a,code:u}=o;if(!(a!=="Stylelint"||typeof u!="string")){if(!(0,KV.isDisableReportRule)(u)){let c=await Pe(this,Yr,"f").getOptions(e.uri),{location:l}=c.codeAction.disableRuleComment;Pe(this,Mt,"f")?.debug("Creating disable rule for line code action",{rule:u,location:l}),s.get(u).disableLine=(0,G0.createDisableRuleLineCodeAction)(e,o,l),s.get(u).disableFile||(Pe(this,Mt,"f")?.debug("Creating disable rule for file code action",{rule:u}),s.get(u).disableFile=(0,G0.createDisableRuleFileCodeAction)(e,o))}s.get(u).documentation||(Pe(this,Mt,"f")?.debug("Creating documentation code action",{rule:u}),s.get(u).documentation=Pe(this,As,"m",qI).call(this,o))}}return[...Pe(this,As,"m",PI).call(this,e,r),...s,...i]};yg.id="code-action"});var LI=_(Ls=>{"use strict";var kI=Ls&&Ls.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Cr=Ls&&Ls.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},vg,Ns,Zn,FI,NI;Object.defineProperty(Ls,"__esModule",{value:!0});Ls.CompletionModule=void 0;var II=oi(),BV=La(),Ka=Dh(),AI=Gc(),_g=class{constructor({context:e,logger:r}){vg.add(this),Ns.set(this,void 0),Zn.set(this,void 0),kI(this,Ns,e,"f"),kI(this,Zn,r,"f")}dispose(){Cr(this,Ns,"f").connection.onCompletion(()=>{})}onInitialize(){return{capabilities:{completionProvider:{}}}}onDidRegisterHandlers(){Cr(this,Zn,"f")?.debug("Registering onCompletion handler"),Cr(this,Ns,"f").connection.onCompletion(Cr(this,vg,"m",NI).bind(this)),Cr(this,Zn,"f")?.debug("onCompletion handler registered")}};Ls.CompletionModule=_g;Ns=new WeakMap,Zn=new WeakMap,vg=new WeakSet,FI=async function(e){let r=await Cr(this,Ns,"f").getOptions(e.uri);return r.validate.includes(e.languageId)&&r.snippet.includes(e.languageId)},NI=async function({textDocument:e,position:r}){let{uri:n}=e;Cr(this,Zn,"f")?.debug("Received onCompletion",{uri:n,position:r});let i=Cr(this,Ns,"f").documents.get(n);if(!i||!await Cr(this,vg,"m",FI).call(this,i))return Cr(this,Zn,"f")?.isDebugEnabled()&&(i?Cr(this,Zn,"f").debug("Snippets or validation not enabled for language, ignoring",{uri:n,language:i.languageId}):Cr(this,Zn,"f").debug("Unknown document, ignoring",{uri:n})),[];let o=Cr(this,Ns,"f").getModule("validator")?.getDiagnostics(n);if(!o||o.length===0){let d=[(0,Ka.createDisableCompletionItem)("stylelint-disable-line"),(0,Ka.createDisableCompletionItem)("stylelint-disable-next-line"),(0,Ka.createDisableCompletionItem)("stylelint-disable")];return Cr(this,Zn,"f")?.debug("No diagnostics for document, returning generic completion items",{uri:n,items:d}),d}let a=new Set,u=new Set,c=new AI.DisableMetadataLookupTable(o);for(let{code:d,range:p}of o)!d||typeof d!="string"||d==="CssSyntaxError"||c.find({type:AI.DisableReportRuleNames.Needless,rule:d,range:p}).size>0||(p.start.line===r.line?a.add(d):p.start.line===r.line+1&&u.add(d));let l=[],f=(0,BV.getDisableType)(i,r);if(f==="stylelint-disable-line")for(let d of a)l.push({label:d,kind:II.CompletionItemKind.Snippet,detail:`disable ${d} rule. (Stylelint)`});else if(f==="stylelint-disable"||f==="stylelint-disable-next-line")for(let d of u)l.push({label:d,kind:II.CompletionItemKind.Snippet,detail:`disable ${d} rule. (Stylelint)`});else l.push((0,Ka.createDisableCompletionItem)("stylelint-disable-line",a.size===1?a.values().next().value:void 0)),l.push((0,Ka.createDisableCompletionItem)("stylelint-disable-next-line",u.size===1?u.values().next().value:void 0)),l.push((0,Ka.createDisableCompletionItem)("stylelint-disable"));return Cr(this,Zn,"f")?.debug("Returning completion items",{uri:n,results:l}),l};_g.id="completion"});var $I=_(Jr=>{"use strict";var VV=Jr&&Jr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),GV=Jr&&Jr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),YV=Jr&&Jr.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[n.length]=i);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),i=0;i<n.length;i++)n[i]!=="default"&&VV(r,e,n[i]);return GV(r,e),r}}(),Y0=Jr&&Jr.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},ue=Jr&&Jr.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},ei,fr,Qe,Yc,js,Ri,X0,bg,jI,wg;Object.defineProperty(Jr,"__esModule",{value:!0});Jr.FormatterModule=void 0;var J0=YV(ne()),XV=Gc(),JV=Ma(),QV=Fa(),Sg=class{constructor({context:e,logger:r}){ei.add(this),fr.set(this,void 0),Qe.set(this,void 0),Yc.set(this,!1),js.set(this,new Map),Ri.set(this,[]),Y0(this,fr,e,"f"),Y0(this,Qe,r,"f")}dispose(){ue(this,fr,"f").connection.onDocumentFormatting(()=>{}),ue(this,Ri,"f").forEach(e=>e.dispose()),ue(this,Ri,"f").length=0,ue(this,ei,"m",wg).call(this)}onInitialize({capabilities:e}){return Y0(this,Yc,!!e.textDocument?.formatting?.dynamicRegistration,"f"),{capabilities:{documentFormattingProvider:!ue(this,Yc,"f")}}}onDidRegisterHandlers(){ue(this,Qe,"f")?.debug("Registering connection.onDocumentFormatting handler"),ue(this,fr,"f").connection.onDocumentFormatting(async({textDocument:e,options:r})=>{if(ue(this,Qe,"f")?.debug("Received onDocumentFormatting",{textDocument:e,options:r}),!e)return ue(this,Qe,"f")?.debug("No text document provided, ignoring"),null;let{uri:n}=e,i=ue(this,fr,"f").documents.get(n);if(!i||!await ue(this,ei,"m",X0).call(this,i))return ue(this,Qe,"f")?.isDebugEnabled()&&(i?ue(this,Qe,"f").debug("Document should not be formatted, ignoring",{uri:n,language:i.languageId}):ue(this,Qe,"f").debug("Unknown document, ignoring",{uri:n})),null;let s={config:{rules:(0,XV.formattingOptionsToRules)(r)}};ue(this,Qe,"f")?.debug("Formatting document",{uri:n,linterOptions:s});let o=ue(this,fr,"f").getFixes(i,s);return ue(this,Qe,"f")?.debug("Returning fixes",{uri:n,fixes:o}),o}),ue(this,Qe,"f")?.debug("connection.onDocumentFormatting handler registered"),ue(this,Qe,"f")?.debug("Registering documents.onDidOpen handler"),ue(this,Ri,"f").push(ue(this,fr,"f").documents.onDidOpen(({document:e})=>ue(this,ei,"m",bg).call(this,e))),ue(this,Qe,"f")?.debug("documents.onDidOpen handler registered"),ue(this,Qe,"f")?.debug("Registering documents.onDidChangeContent handler"),ue(this,Ri,"f").push(ue(this,fr,"f").documents.onDidChangeContent(({document:e})=>ue(this,ei,"m",bg).call(this,e))),ue(this,Qe,"f")?.debug("documents.onDidChangeContent handler registered"),ue(this,Qe,"f")?.debug("Registering documents.onDidSave handler"),ue(this,Ri,"f").push(ue(this,fr,"f").documents.onDidSave(({document:e})=>ue(this,ei,"m",bg).call(this,e))),ue(this,Qe,"f")?.debug("documents.onDidSave handler registered"),ue(this,Qe,"f")?.debug("Registering documents.onDidClose handler"),ue(this,Ri,"f").push(ue(this,fr,"f").documents.onDidClose(({document:e})=>ue(this,ei,"m",jI).call(this,e.uri))),ue(this,Qe,"f")?.debug("documents.onDidClose handler registered"),ue(this,Qe,"f")?.debug("Registering DidChangeConfigurationNotification"),ue(this,Ri,"f").push(ue(this,fr,"f").notifications.on(J0.DidChangeConfigurationNotification.type,()=>ue(this,ei,"m",wg).call(this))),ue(this,Qe,"f")?.debug("DidChangeConfigurationNotification registered"),ue(this,Qe,"f")?.debug("Registering DidChangeWorkspaceFoldersNotification"),ue(this,Ri,"f").push(ue(this,fr,"f").notifications.on(J0.DidChangeWorkspaceFoldersNotification.type,()=>ue(this,ei,"m",wg).call(this))),ue(this,Qe,"f")?.debug("DidChangeWorkspaceFoldersNotification registered")}};Jr.FormatterModule=Sg;fr=new WeakMap,Qe=new WeakMap,Yc=new WeakMap,js=new WeakMap,Ri=new WeakMap,ei=new WeakSet,X0=async function(e){return(await ue(this,fr,"f").getOptions(e.uri)).validate.includes(e.languageId)},bg=async function(e){if(!ue(this,Yc,"f")||!await ue(this,ei,"m",X0).call(this,e)||ue(this,js,"f").has(e.uri))return;let{scheme:r,fsPath:n}=QV.URI.parse(e.uri),i=(r==="file"?n.replace(/\\/g,"/"):n).replace(/[[\]{}]/g,"?"),o={documentSelector:[{scheme:r,pattern:i}]};ue(this,js,"f").set(e.uri,ue(this,fr,"f").connection.client.register(J0.DocumentFormattingRequest.type,o)),ue(this,Qe,"f")?.debug("Registering formatter for document",{uri:e.uri,options:o}),await ue(this,fr,"f").connection.sendNotification(JV.Notification.DidRegisterDocumentFormattingEditProvider,{uri:e.uri,options:o})},jI=function(e){let r=ue(this,js,"f").get(e);r&&(ue(this,Qe,"f")?.debug("Deregistering formatter for document",{uri:e}),r.then(n=>n.dispose()).catch(n=>{ue(this,Qe,"f")?.error("Error deregistering formatter for document",{uri:e,error:n})}),ue(this,js,"f").delete(e))},wg=function(){for(let[e,r]of ue(this,js,"f"))ue(this,Qe,"f")?.debug("Deregistering formatter for document",{uri:e}),r.then(n=>n.dispose()).catch(n=>{ue(this,Qe,"f")?.error("Error deregistering formatter for document",{uri:e,error:n})});ue(this,js,"f").clear()};Sg.id="formatter"});var HI=_((qee,WI)=>{"use strict";var ZV=us(),eG=(t,e)=>{let r=ZV(t,e);return r?r.version:null};WI.exports=eG});var zI=_((Oee,UI)=>{"use strict";var tG=us(),rG=(t,e)=>{let r=tG(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};UI.exports=rG});var VI=_((Mee,BI)=>{"use strict";var KI=lr(),nG=(t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new KI(t instanceof KI?t.version:t,r).inc(e,n,i).version}catch{return null}};BI.exports=nG});var XI=_((xee,YI)=>{"use strict";var GI=us(),iG=(t,e)=>{let r=GI(t,null,!0),n=GI(e,null,!0),i=r.compare(n);if(i===0)return null;let s=i>0,o=s?r:n,a=s?n:r,u=!!o.prerelease.length;if(!!a.prerelease.length&&!u){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let l=u?"pre":"";return r.major!==n.major?l+"major":r.minor!==n.minor?l+"minor":r.patch!==n.patch?l+"patch":"prerelease"};YI.exports=iG});var QI=_((kee,JI)=>{"use strict";var sG=lr(),oG=(t,e)=>new sG(t,e).major;JI.exports=oG});var eA=_((Fee,ZI)=>{"use strict";var aG=lr(),uG=(t,e)=>new aG(t,e).minor;ZI.exports=uG});var rA=_((Iee,tA)=>{"use strict";var cG=lr(),lG=(t,e)=>new cG(t,e).patch;tA.exports=lG});var iA=_((Aee,nA)=>{"use strict";var dG=us(),fG=(t,e)=>{let r=dG(t,e);return r&&r.prerelease.length?r.prerelease:null};nA.exports=fG});var oA=_((Nee,sA)=>{"use strict";var hG=wn(),gG=(t,e,r)=>hG(e,t,r);sA.exports=gG});var uA=_((Lee,aA)=>{"use strict";var pG=wn(),mG=(t,e)=>pG(t,e,!0);aA.exports=mG});var Rg=_((jee,lA)=>{"use strict";var cA=lr(),yG=(t,e,r)=>{let n=new cA(t,r),i=new cA(e,r);return n.compare(i)||n.compareBuild(i)};lA.exports=yG});var fA=_(($ee,dA)=>{"use strict";var vG=Rg(),_G=(t,e)=>t.sort((r,n)=>vG(r,n,e));dA.exports=_G});var gA=_((Wee,hA)=>{"use strict";var bG=Rg(),wG=(t,e)=>t.sort((r,n)=>bG(n,r,e));hA.exports=wG});var mA=_((Hee,pA)=>{"use strict";var SG=lr(),RG=us(),{safeRe:Cg,t:Dg}=oa(),CG=(t,e)=>{if(t instanceof SG)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?Cg[Dg.COERCEFULL]:Cg[Dg.COERCE]);else{let u=e.includePrerelease?Cg[Dg.COERCERTLFULL]:Cg[Dg.COERCERTL],c;for(;(c=u.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||c.index+c[0].length!==r.index+r[0].length)&&(r=c),u.lastIndex=c.index+c[1].length+c[2].length;u.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",s=r[4]||"0",o=e.includePrerelease&&r[5]?`-${r[5]}`:"",a=e.includePrerelease&&r[6]?`+${r[6]}`:"";return RG(`${n}.${i}.${s}${o}${a}`,e)};pA.exports=CG});var vA=_((Uee,yA)=>{"use strict";var DG=Sn(),EG=(t,e)=>new DG(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));yA.exports=EG});var bA=_((zee,_A)=>{"use strict";var PG=lr(),TG=Sn(),qG=(t,e,r)=>{let n=null,i=null,s=null;try{s=new TG(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new PG(n,r))}),n};_A.exports=qG});var SA=_((Kee,wA)=>{"use strict";var OG=lr(),MG=Sn(),xG=(t,e,r)=>{let n=null,i=null,s=null;try{s=new MG(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new OG(n,r))}),n};wA.exports=xG});var DA=_((Bee,CA)=>{"use strict";var Q0=lr(),kG=Sn(),RA=Nu(),FG=(t,e)=>{t=new kG(t,e);let r=new Q0("0.0.0");if(t.test(r)||(r=new Q0("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],s=null;i.forEach(o=>{let a=new Q0(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||RA(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!r||RA(r,s))&&(r=s)}return r&&t.test(r)?r:null};CA.exports=FG});var PA=_((Vee,EA)=>{"use strict";var IG=Sn(),AG=(t,e)=>{try{return new IG(t,e).range||"*"}catch{return null}};EA.exports=AG});var Eg=_((Gee,MA)=>{"use strict";var NG=lr(),OA=ju(),{ANY:LG}=OA,jG=Sn(),$G=ua(),TA=Nu(),qA=Kd(),WG=Bd(),HG=zd(),UG=(t,e,r,n)=>{t=new NG(t,n),e=new jG(e,n);let i,s,o,a,u;switch(r){case">":i=TA,s=WG,o=qA,a=">",u=">=";break;case"<":i=qA,s=HG,o=TA,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if($G(t,e,n))return!1;for(let c=0;c<e.set.length;++c){let l=e.set[c],f=null,d=null;if(l.forEach(p=>{p.semver===LG&&(p=new OA(">=0.0.0")),f=f||p,d=d||p,i(p.semver,f.semver,n)?f=p:o(p.semver,d.semver,n)&&(d=p)}),f.operator===a||f.operator===u||(!d.operator||d.operator===a)&&s(t,d.semver))return!1;if(d.operator===u&&o(t,d.semver))return!1}return!0};MA.exports=UG});var kA=_((Yee,xA)=>{"use strict";var zG=Eg(),KG=(t,e,r)=>zG(t,e,">",r);xA.exports=KG});var IA=_((Xee,FA)=>{"use strict";var BG=Eg(),VG=(t,e,r)=>BG(t,e,"<",r);FA.exports=VG});var LA=_((Jee,NA)=>{"use strict";var AA=Sn(),GG=(t,e,r)=>(t=new AA(t,r),e=new AA(e,r),t.intersects(e,r));NA.exports=GG});var $A=_((Qee,jA)=>{"use strict";var YG=ua(),XG=wn();jA.exports=(t,e,r)=>{let n=[],i=null,s=null,o=t.sort((l,f)=>XG(l,f,r));for(let l of o)YG(l,e,r)?(s=l,i||(i=l)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);let a=[];for(let[l,f]of n)l===f?a.push(l):!f&&l===o[0]?a.push("*"):f?l===o[0]?a.push(`<=${f}`):a.push(`${l} - ${f}`):a.push(`>=${l}`);let u=a.join(" || "),c=typeof e.raw=="string"?e.raw:String(e);return u.length<c.length?u:e}});var BA=_((Zee,KA)=>{"use strict";var WA=Sn(),eS=ju(),{ANY:Z0}=eS,Xc=ua(),tS=wn(),JG=(t,e,r={})=>{if(t===e)return!0;t=new WA(t,r),e=new WA(e,r);let n=!1;e:for(let i of t.set){for(let s of e.set){let o=ZG(i,s,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},QG=[new eS(">=0.0.0-0")],HA=[new eS(">=0.0.0")],ZG=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Z0){if(e.length===1&&e[0].semver===Z0)return!0;r.includePrerelease?t=QG:t=HA}if(e.length===1&&e[0].semver===Z0){if(r.includePrerelease)return!0;e=HA}let n=new Set,i,s;for(let p of t)p.operator===">"||p.operator===">="?i=UA(i,p,r):p.operator==="<"||p.operator==="<="?s=zA(s,p,r):n.add(p.semver);if(n.size>1)return null;let o;if(i&&s){if(o=tS(i.semver,s.semver,r),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let p of n){if(i&&!Xc(p,String(i),r)||s&&!Xc(p,String(s),r))return null;for(let g of e)if(!Xc(p,String(g),r))return!1;return!0}let a,u,c,l,f=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,d=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;f&&f.prerelease.length===1&&s.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let p of e){if(l=l||p.operator===">"||p.operator===">=",c=c||p.operator==="<"||p.operator==="<=",i){if(d&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===d.major&&p.semver.minor===d.minor&&p.semver.patch===d.patch&&(d=!1),p.operator===">"||p.operator===">="){if(a=UA(i,p,r),a===p&&a!==i)return!1}else if(i.operator===">="&&!Xc(i.semver,String(p),r))return!1}if(s){if(f&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===f.major&&p.semver.minor===f.minor&&p.semver.patch===f.patch&&(f=!1),p.operator==="<"||p.operator==="<="){if(u=zA(s,p,r),u===p&&u!==s)return!1}else if(s.operator==="<="&&!Xc(s.semver,String(p),r))return!1}if(!p.operator&&(s||i)&&o!==0)return!1}return!(i&&c&&!s&&o!==0||s&&l&&!i&&o!==0||d||f)},UA=(t,e,r)=>{if(!t)return e;let n=tS(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},zA=(t,e,r)=>{if(!t)return e;let n=tS(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};KA.exports=JG});var XA=_((ete,YA)=>{"use strict";var rS=oa(),VA=Au(),e9=lr(),GA=Xv(),t9=us(),r9=HI(),n9=zI(),i9=VI(),s9=XI(),o9=QI(),a9=eA(),u9=rA(),c9=iA(),l9=wn(),d9=oA(),f9=uA(),h9=Rg(),g9=fA(),p9=gA(),m9=Nu(),y9=Kd(),v9=Zv(),_9=e_(),b9=zd(),w9=Bd(),S9=t_(),R9=mA(),C9=ju(),D9=Sn(),E9=ua(),P9=vA(),T9=bA(),q9=SA(),O9=DA(),M9=PA(),x9=Eg(),k9=kA(),F9=IA(),I9=LA(),A9=$A(),N9=BA();YA.exports={parse:t9,valid:r9,clean:n9,inc:i9,diff:s9,major:o9,minor:a9,patch:u9,prerelease:c9,compare:l9,rcompare:d9,compareLoose:f9,compareBuild:h9,sort:g9,rsort:p9,gt:m9,lt:y9,eq:v9,neq:_9,gte:b9,lte:w9,cmp:S9,coerce:R9,Comparator:C9,Range:D9,satisfies:E9,toComparators:P9,maxSatisfying:T9,minSatisfying:q9,minVersion:O9,validRange:M9,outside:x9,gtr:k9,ltr:F9,intersects:I9,simplifyRange:A9,subset:N9,SemVer:e9,re:rS.re,src:rS.src,tokens:rS.t,SEMVER_SPEC_VERSION:VA.SEMVER_SPEC_VERSION,RELEASE_TYPES:VA.RELEASE_TYPES,compareIdentifiers:GA.compareIdentifiers,rcompareIdentifiers:GA.rcompareIdentifiers}});var eN=_(Ci=>{"use strict";var nS=Ci&&Ci.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},dt=Ci&&Ci.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Mg=Ci&&Ci.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},qg,zi,Qr,Pg,Tg,Jc,JA,ZA;Object.defineProperty(Ci,"__esModule",{value:!0});Ci.OldStylelintWarningModule=void 0;var L9=Mg(require("path")),j9=Mg(require("fs/promises")),QA=Mg(XA()),$9=Mg(Eh()),W9=La(),H9=$c(),Og=class{constructor({context:e,logger:r}){qg.add(this),zi.set(this,void 0),Qr.set(this,void 0),Pg.set(this,new Set),Tg.set(this,!1),Jc.set(this,[]),nS(this,zi,e,"f"),nS(this,Qr,r,"f")}dispose(){dt(this,Jc,"f").forEach(e=>e.dispose()),dt(this,Jc,"f").length=0}onInitialize({capabilities:e}){nS(this,Tg,e.window?.showDocument?.support??!1,"f")}onDidRegisterHandlers(){dt(this,Qr,"f")?.debug("Registering onDidOpen handler"),dt(this,Jc,"f").push(dt(this,zi,"f").documents.onDidOpen(async({document:e})=>{let r=await dt(this,qg,"m",ZA).call(this,e);if(!r)return;dt(this,Qr,"f")?.warn(`Found unsupported version of Stylelint: ${r}`);let n=`Stylelint version ${r} is no longer supported. While it may continue to work for a while, you may encounter unexpected behavior. Please upgrade to version 14.0.0 or newer. See the migration guide for more information.`;if(!dt(this,Tg,"f")){dt(this,zi,"f").connection.window.showWarningMessage(n);return}(await dt(this,zi,"f").connection.window.showWarningMessage(n,{title:"Open migration guide"}))?.title==="Open migration guide"&&((await dt(this,zi,"f").connection.window.showDocument({uri:"https://github.com/stylelint/vscode-stylelint#migrating-from-vscode-stylelint-0xstylelint-13x",external:!0})).success||dt(this,Qr,"f")?.warn("Failed to open migration guide"))})),dt(this,Qr,"f")?.debug("onDidOpen handler registered")}};Ci.OldStylelintWarningModule=Og;zi=new WeakMap,Qr=new WeakMap,Pg=new WeakMap,Tg=new WeakMap,Jc=new WeakMap,qg=new WeakSet,JA=async function(e,r){let n=await dt(this,zi,"f").resolveStylelint(e);if(!n){dt(this,Qr,"f")?.debug("Stylelint not found",{uri:e.uri});return}let i=await(0,H9.findPackageRoot)(n.resolvedPath);if(!i){dt(this,Qr,"f")?.debug("Stylelint package root not found",{uri:e.uri});return}if(!(0,$9.default)(i,r)){dt(this,Qr,"f")?.debug("Stylelint package root is not inside the workspace",{uri:e.uri});return}let s=L9.default.join(i,"package.json");try{let o=await j9.default.readFile(s,"utf8");return JSON.parse(o).version}catch(o){dt(this,Qr,"f")?.debug("Stylelint package manifest could not be read",{uri:e.uri,manifestPath:s,error:o});return}},ZA=async function(e){let r=await(0,W9.getWorkspaceFolder)(dt(this,zi,"f").connection,e);if(!r){dt(this,Qr,"f")?.debug("Document not part of a workspace, ignoring",{uri:e.uri});return}if(dt(this,Pg,"f").has(r)){dt(this,Qr,"f")?.debug("Document has already been checked, ignoring",{uri:e.uri});return}dt(this,Pg,"f").add(r);let n=await dt(this,qg,"m",JA).call(this,e,r);if(n)try{let i=QA.default.coerce(n);if(!i)throw new Error(`Could not coerce version "${n}"`);return QA.default.lt(i,"14.0.0")?n:void 0}catch(i){dt(this,Qr,"f")?.debug("Stylelint version could not be parsed",{uri:e.uri,version:n,error:i});return}};Og.id="old-stylelint-warning"});var nN=_($s=>{"use strict";var tN=$s&&$s.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Ee=$s&&$s.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Di,Mn,rr,Ba,Do,rN,iS,xg,sS;Object.defineProperty($s,"__esModule",{value:!0});$s.ValidatorModule=void 0;var U9=ne(),kg=class{constructor({context:e,logger:r}){Di.add(this),Mn.set(this,void 0),rr.set(this,void 0),Ba.set(this,new Map),Do.set(this,[]),tN(this,Mn,e,"f"),tN(this,rr,r,"f")}dispose(){Ee(this,Do,"f").forEach(e=>e.dispose()),Ee(this,Do,"f").length=0}getDiagnostics(e){return Ee(this,Ba,"f").get(e)??[]}onInitialize(){Ee(this,Di,"m",xg).call(this)}onDidRegisterHandlers(){Ee(this,rr,"f")?.debug("Registering handlers"),Ee(this,Do,"f").push(Ee(this,Mn,"f").notifications.on(U9.DidChangeWatchedFilesNotification.type,async()=>await Ee(this,Di,"m",xg).call(this))),Ee(this,rr,"f")?.debug("onDidChangeWatchedFiles handler registered"),Ee(this,Do,"f").push(Ee(this,Mn,"f").documents.onDidChangeContent(async({document:e})=>await Ee(this,Di,"m",iS).call(this,e))),Ee(this,rr,"f")?.debug("onDidChangeContent handler registered"),Ee(this,Do,"f").push(Ee(this,Mn,"f").documents.onDidClose(async({document:e})=>{await Ee(this,Di,"m",sS).call(this,e)})),Ee(this,rr,"f")?.debug("onDidClose handler registered"),Ee(this,rr,"f")?.debug("Handlers registered")}async onDidChangeConfiguration(){Ee(this,rr,"f")?.debug("Received onDidChangeConfiguration"),await Ee(this,Di,"m",xg).call(this)}};$s.ValidatorModule=kg;Mn=new WeakMap,rr=new WeakMap,Ba=new WeakMap,Do=new WeakMap,Di=new WeakSet,rN=async function(e){return(await Ee(this,Mn,"f").getOptions(e.uri)).validate.includes(e.languageId)},iS=async function(e){if(!await Ee(this,Di,"m",rN).call(this,e)){Ee(this,Ba,"f").has(e.uri)?(Ee(this,rr,"f")?.debug("Document should not be validated, clearing diagnostics",{uri:e.uri,language:e.languageId}),await Ee(this,Di,"m",sS).call(this,e)):Ee(this,rr,"f")?.debug("Document should not be validated, ignoring",{uri:e.uri,language:e.languageId});return}let r=await Ee(this,Mn,"f").lintDocument(e);if(!r){Ee(this,rr,"f")?.debug("No lint result, ignoring",{uri:e.uri});return}Ee(this,rr,"f")?.debug("Sending diagnostics",{uri:e.uri,result:r});try{await Ee(this,Mn,"f").connection.sendDiagnostics({uri:e.uri,diagnostics:r.diagnostics}),Ee(this,Ba,"f").set(e.uri,r.diagnostics),Ee(this,rr,"f")?.debug("Diagnostics sent",{uri:e.uri})}catch(n){Ee(this,Mn,"f").displayError(n),Ee(this,rr,"f")?.error("Failed to send diagnostics",{uri:e.uri,error:n})}},xg=async function(){await Promise.allSettled(Ee(this,Mn,"f").documents.all().map(e=>Ee(this,Di,"m",iS).call(this,e)))},sS=async function({uri:e}){Ee(this,rr,"f")?.debug("Clearing diagnostics for document",{uri:e}),Ee(this,Ba,"f").delete(e),await Ee(this,Mn,"f").connection.sendDiagnostics({uri:e,diagnostics:[]}),Ee(this,rr,"f")?.debug("Diagnostics cleared",{uri:e})};kg.id="validator"});var iN=_(xn=>{"use strict";var z9=xn&&xn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Va=xn&&xn.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&z9(e,t,r)};Object.defineProperty(xn,"__esModule",{value:!0});Va(Sk(),xn);Va(xI(),xn);Va(LI(),xn);Va($I(),xn);Va(eN(),xn);Va(nN(),xn)});var uN={};xN(uN,{TextDocument:()=>oS});function aS(t,e){if(t.length<=1)return t;let r=t.length/2|0,n=t.slice(0,r),i=t.slice(r);aS(n,e),aS(i,e);let s=0,o=0,a=0;for(;s<n.length&&o<i.length;)e(n[s],i[o])<=0?t[a++]=n[s++]:t[a++]=i[o++];for(;s<n.length;)t[a++]=n[s++];for(;o<i.length;)t[a++]=i[o++];return t}function sN(t,e,r=0){let n=e?[r]:[];for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);oN(s)&&(s===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,n.push(r+i+1))}return n}function oN(t){return t===13||t===10}function aN(t){let e=t.start,r=t.end;return e.line>r.line||e.line===r.line&&e.character>r.character?{start:r,end:e}:t}function K9(t){let e=aN(t.range);return e!==t.range?{newText:t.newText,range:e}:t}var Fg,oS,cN=MN(()=>{"use strict";Fg=class t{constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){for(let n of e)if(t.isIncremental(n)){let i=aN(n.range),s=this.offsetAt(i.start),o=this.offsetAt(i.end);this._content=this._content.substring(0,s)+n.text+this._content.substring(o,this._content.length);let a=Math.max(i.start.line,0),u=Math.max(i.end.line,0),c=this._lineOffsets,l=sN(n.text,!1,s);if(u-a===l.length)for(let d=0,p=l.length;d<p;d++)c[d+a+1]=l[d];else l.length<1e4?c.splice(a+1,u-a,...l):this._lineOffsets=c=c.slice(0,a+1).concat(l,c.slice(u+1));let f=n.text.length-(o-s);if(f!==0)for(let d=a+1+l.length,p=c.length;d<p;d++)c[d]=c[d]+f}else if(t.isFull(n))this._content=n.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=r}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=sN(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return{line:0,character:e};for(;n<i;){let o=Math.floor((n+i)/2);r[o]>e?i=o:n=o+1}let s=n-1;return e=this.ensureBeforeEOL(e,r[s]),{line:s,character:e-r[s]}}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line];if(e.character<=0)return n;let i=e.line+1<r.length?r[e.line+1]:this._content.length,s=Math.min(n+e.character,i);return this.ensureBeforeEOL(s,n)}ensureBeforeEOL(e,r){for(;e>r&&oN(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}static isFull(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}};(function(t){function e(i,s,o,a){return new Fg(i,s,o,a)}t.create=e;function r(i,s,o){if(i instanceof Fg)return i.update(s,o),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}t.update=r;function n(i,s){let o=i.getText(),a=aS(s.map(K9),(l,f)=>{let d=l.range.start.line-f.range.start.line;return d===0?l.range.start.character-f.range.start.character:d}),u=0,c=[];for(let l of a){let f=i.offsetAt(l.range.start);if(f<u)throw new Error("Overlapping edit");f>u&&c.push(o.substring(u,f)),l.newText.length&&c.push(l.newText),u=i.offsetAt(l.range.end)}return c.push(o.substr(u)),c.join("")}t.applyEdits=n})(oS||(oS={}))});var wN=_(Hs=>{"use strict";var kn=Hs&&Hs.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},L=Hs&&Hs.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},rt,Zc,Dr,we,Po,Ja,Eo,rl,Za,Qa,Ag,Ws,Ga,Ya,To,el,Ng,Xa,tl,pN,mN,yN,vN,_N,bN,Qc,lN,dN,fN,hN;Object.defineProperty(Hs,"__esModule",{value:!0});Hs.StylelintLanguageServer=void 0;var B9=(cN(),FN(uN)),V9=b0(),Ig=ne(),gN=La(),cS=Dh(),uS=Pw(),G9=Gc(),Y9=$c(),X9=Ma(),J9=Fw(),lS={codeAction:{disableRuleComment:{location:"separateLine"}},config:null,configFile:"",configBasedir:"",customSyntax:"",ignoreDisables:!1,packageManager:"npm",reportDescriptionlessDisables:!1,reportInvalidScopeDisables:!1,reportNeedlessDisables:!1,snippet:["css","postcss"],stylelintPath:"",validate:["css","postcss"]},dS=class{constructor({connection:e,logger:r,modules:n}){rt.add(this),Zc.set(this,"New"),Dr.set(this,void 0),we.set(this,void 0),Po.set(this,void 0),Ja.set(this,void 0),Eo.set(this,void 0),rl.set(this,void 0),Za.set(this,void 0),Qa.set(this,void 0),Ag.set(this,void 0),Ws.set(this,new Map),Ga.set(this,!1),Ya.set(this,new Map),To.set(this,[]),el.set(this,new Map),kn(this,Dr,e,"f"),kn(this,we,(r??(0,J9.createLogger)(e))?.child({component:"language-server"}),"f"),kn(this,Po,new cS.NotificationManager(e,L(this,we,"f")),"f"),kn(this,Ja,new cS.CommandManager(e,L(this,we,"f")),"f"),kn(this,Eo,lS,"f"),kn(this,rl,new Y9.StylelintResolver(e,L(this,we,"f")),"f"),kn(this,Za,new G9.StylelintRunner(e,L(this,we,"f"),L(this,rl,"f")),"f"),kn(this,Qa,new V9.TextDocuments(B9.TextDocument),"f"),kn(this,Ag,{connection:L(this,Dr,"f"),notifications:L(this,Po,"f"),commands:L(this,Ja,"f"),documents:L(this,Qa,"f"),runner:L(this,Za,"f"),getOptions:L(this,rt,"m",tl).bind(this),getModule:L(this,rt,"m",_N).bind(this),getFixes:L(this,rt,"m",vN).bind(this),displayError:L(this,rt,"m",Xa).bind(this),lintDocument:L(this,rt,"m",mN).bind(this),getEditInfo:L(this,rt,"m",yN).bind(this),resolveStylelint:L(this,rt,"m",pN).bind(this)},"f");let i=new Proxy(L(this,Ag,"f"),{get(s,o){return s[o]},set(){throw new Error("Cannot set read-only property")}});if(n)for(let s of n){if(L(this,we,"f").info("Registering module",{module:s.id}),!s.id)throw new Error("Modules must have an ID");if(typeof s.id!="string")throw new Error("Module IDs must be strings");let o=new s({context:i,logger:r?.child({component:`language-server:${s.id}`})});if(L(this,Ws,"f").has(s.id))throw new Error(`Module with ID "${s.id}" already registered`);L(this,Ws,"f").set(s.id,o),L(this,we,"f").info("Module registered",{module:s.id})}}start(){L(this,rt,"m",Ng).call(this,"Started"),L(this,we,"f").info("Starting language server"),L(this,Qa,"f").listen(L(this,Dr,"f")),L(this,Dr,"f").listen(),L(this,rt,"m",bN).call(this),L(this,we,"f").info("Language server started")}dispose(){try{L(this,rt,"m",Ng).call(this,"Disposed")}catch{return}L(this,we,"f").info("Stopping language server"),L(this,Ws,"f").forEach(e=>e.dispose()),L(this,To,"f").forEach(e=>e.dispose()),L(this,To,"f").length=0,L(this,Dr,"f").onInitialize(()=>({capabilities:{}})),L(this,Dr,"f").onShutdown(()=>{}),L(this,Ws,"f").clear(),L(this,Po,"f").dispose(),L(this,Ja,"f").dispose(),L(this,Dr,"f").dispose()}};Hs.StylelintLanguageServer=dS;Zc=new WeakMap,Dr=new WeakMap,we=new WeakMap,Po=new WeakMap,Ja=new WeakMap,Eo=new WeakMap,rl=new WeakMap,Za=new WeakMap,Qa=new WeakMap,Ag=new WeakMap,Ws=new WeakMap,Ga=new WeakMap,Ya=new WeakMap,To=new WeakMap,el=new WeakMap,rt=new WeakSet,Ng=function(e){if(L(this,Zc,"f")===e)throw new Error(`Cannot transition from state ${e} to itself`);switch(L(this,Zc,"f")){case"Initialized":if(e!=="Disposed")throw new Error("Can only transition state from Initialized to Disposed");break;case"Disposed":throw new Error("Cannot transition from Disposed");default:break}kn(this,Zc,e,"f")},Xa=function(e){(0,cS.displayError)(L(this,Dr,"f"),e)},tl=async function(e){if(!L(this,Ga,"f"))return L(this,Eo,"f");let r=L(this,Ya,"f").get(e);if(r)return L(this,we,"f").debug("Returning cached options",{resource:e}),r;L(this,we,"f").debug("Requesting options from client",{resource:e});let n=await L(this,Dr,"f").workspace.getConfiguration({scopeUri:e,section:"stylelint"});L(this,we,"f").debug("Received options from client",{resource:e,options:n});let i=(0,uS.mergeOptionsWithDefaults)(n,lS);return Object.freeze(i),L(this,Ya,"f").set(e,i),L(this,we,"f").debug("Returning options",{resource:e,options:i}),i},pN=async function(e){L(this,we,"f").debug("Resolving Stylelint",{uri:e.uri});try{let r=await L(this,rt,"m",tl).call(this,e.uri),n=await L(this,rl,"f").resolve(r,e);return n?L(this,we,"f").debug("Stylelint resolved",{uri:e.uri,resolvedPath:n.resolvedPath}):L(this,we,"f").warn("Failed to resolve Stylelint",{uri:e.uri}),n}catch(r){L(this,rt,"m",Xa).call(this,r),L(this,we,"f").error("Error resolving Stylelint",{uri:e.uri,error:r});return}},mN=async function(e,r={}){L(this,we,"f").debug("Linting document",{uri:e.uri,linterOptions:r});try{let n=await L(this,rt,"m",tl).call(this,e.uri),i=await L(this,Za,"f").lintDocument(e,r,n);return L(this,el,"f").set(e.uri,{version:e.version,...i}),L(this,we,"f").debug("Lint run complete",{uri:e.uri,results:i}),i}catch(n){L(this,rt,"m",Xa).call(this,n),L(this,we,"f").error("Error running lint",{uri:e.uri,error:n});return}},yN=function(e,r){return(0,gN.getEditInfo)(e,r,L(this,el,"f").get(e.uri))},vN=async function(e,r={}){try{let n=await L(this,rt,"m",tl).call(this,e.uri),i=await(0,gN.getFixes)(L(this,Za,"f"),e,r,n);return L(this,we,"f").debug("Fixes retrieved",{uri:e.uri,edits:i}),i}catch(n){return L(this,rt,"m",Xa).call(this,n),L(this,we,"f").error("Error getting fixes",{uri:e.uri,error:n}),[]}},_N=function(e){return L(this,Ws,"f").get(e)},bN=function(){L(this,we,"f").info("Registering handlers"),L(this,Dr,"f").onInitialize(L(this,rt,"m",lN).bind(this)),L(this,we,"f").debug("connection.onInitialize handler registered"),L(this,To,"f").push(L(this,Po,"f").on(Ig.InitializedNotification.type,L(this,rt,"m",dN).bind(this))),L(this,we,"f").debug("connection.onInitialized handler registered"),L(this,Dr,"f").onShutdown(()=>this.dispose()),L(this,we,"f").debug("connection.onShutdown handler registered"),L(this,Ja,"f").register(),L(this,To,"f").push(L(this,Po,"f").on(Ig.DidChangeConfigurationNotification.type,L(this,rt,"m",hN).bind(this))),L(this,we,"f").debug("connection.onDidChangeConfiguration handler registered"),L(this,To,"f").push(L(this,Qa,"f").onDidClose(L(this,rt,"m",fN).bind(this))),L(this,we,"f").debug("documents.onDidClose handler registered"),L(this,rt,"m",Qc).call(this,"onDidRegisterHandlers"),L(this,we,"f").info("Handlers registered")},Qc=function(e,...r){L(this,we,"f").debug(`Invoking ${String(e)}`);let n=Object.create(null);for(let[i,s]of L(this,Ws,"f")){let o=s[e];if(o)try{n[i]=o.apply(s,r),L(this,we,"f").debug(`Invoked ${String(e)}`,{module:i,returnValue:n[i]})}catch(a){L(this,rt,"m",Xa).call(this,a),L(this,we,"f").error(`Error invoking ${String(e)}`,{module:i,error:a})}}return n},lN=function(e){L(this,we,"f").debug("received onInitialize",{params:e});let r={capabilities:{textDocumentSync:{openClose:!0,change:Ig.TextDocumentSyncKind.Full}}};e.capabilities.workspace?.configuration&&(L(this,we,"f").debug("Client reports workspace configuration support; using scoped configuration"),kn(this,Ga,!0,"f"));for(let[,n]of Object.entries(L(this,rt,"m",Qc).call(this,"onInitialize",e)))n&&(0,uS.mergeAssign)(r,n);return L(this,we,"f").debug("Returning initialization results",{result:r}),r},dN=async function(e){L(this,rt,"m",Ng).call(this,"Initialized"),L(this,we,"f").debug("received onInitialized",{params:e}),L(this,Ga,"f")&&(L(this,we,"f").debug("Registering DidChangeConfigurationNotification"),await L(this,Dr,"f").client.register(Ig.DidChangeConfigurationNotification.type,{section:"stylelint"}))},fN=function({document:e}){L(this,we,"f").debug("received documents.onDidClose, clearing cached options",{uri:e.uri}),L(this,Ya,"f").delete(e.uri),L(this,el,"f").delete(e.uri)},hN=async function(e){if(L(this,Ga,"f")){L(this,we,"f").debug("received onDidChangeConfiguration, clearing cached options",{params:e}),L(this,Ya,"f").clear(),L(this,rt,"m",Qc).call(this,"onDidChangeConfiguration"),await L(this,Dr,"f").sendNotification(X9.Notification.DidResetConfiguration);return}L(this,we,"f").debug("received onDidChangeConfiguration",{params:e}),kn(this,Eo,(0,uS.mergeOptionsWithDefaults)(e.settings.stylelint,lS),"f"),Object.freeze(L(this,Eo,"f")),L(this,we,"f").debug("Global options updated",{options:L(this,Eo,"f")}),L(this,rt,"m",Qc).call(this,"onDidChangeConfiguration")}});var RN=_(Er=>{"use strict";var SN=Er&&Er.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Q9=Er&&Er.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),fS=Er&&Er.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&SN(e,t,r)},Z9=Er&&Er.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[n.length]=i);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),i=0;i<n.length;i++)n[i]!=="default"&&SN(r,e,n[i]);return Q9(r,e),r}}();Object.defineProperty(Er,"__esModule",{value:!0});Er.modules=void 0;fS(Fw(),Er);Er.modules=Z9(iN());fS(wN(),Er);fS(Ma(),Er)});var DN=_(eu=>{"use strict";var e7=eu&&eu.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(eu,"__esModule",{value:!0});eu.activate=n7;eu.deactivate=i7;var t7=require("node:events"),r7=e7(require("node:path")),hS=bT(),Ki=require("vscode"),CN=m_(),Lg=RN(),ti;async function n7({subscriptions:t}){let e=r7.default.join(__dirname,"start-server.js"),r=Object.assign(new t7.EventEmitter,{codeActionReady:!1});ti=new hS.LanguageClient("Stylelint",{run:{module:e},debug:{module:e,options:{execArgv:["--nolazy","--inspect=6004"]}}},{documentSelector:[{scheme:"file"},{scheme:"untitled"}],diagnosticCollectionName:"Stylelint",synchronize:{fileEvents:[Ki.workspace.createFileSystemWatcher("**/.stylelintrc{,.js,.cjs,.mjs,.json,.yaml,.yml}"),Ki.workspace.createFileSystemWatcher("**/stylelint.config.{js,cjs,mjs}"),Ki.workspace.createFileSystemWatcher("**/.stylelintignore")]}});let n=async s=>{await Ki.window.showErrorMessage(`Stylelint: ${s instanceof Error?s.message:String(s)}`)},i=()=>{ti.onNotification(Lg.Notification.DidRegisterCodeActionRequestHandler,()=>{r.codeActionReady=!0}),ti.onNotification(Lg.Notification.DidRegisterDocumentFormattingEditProvider,s=>{r.emit(CN.ApiEvent.DidRegisterDocumentFormattingEditProvider,s)}),ti.onNotification(Lg.Notification.DidResetConfiguration,()=>{r.emit(CN.ApiEvent.DidResetConfiguration)})};try{await ti.start(),i()}catch(s){await n(s)}return t.push(Ki.commands.registerCommand("stylelint.executeAutofix",async()=>{let s=Ki.window.activeTextEditor;if(!s)return;let o={uri:s.document.uri.toString(),version:s.document.version},a={command:Lg.CommandId.ApplyAutoFix,arguments:[o]};try{await ti.sendRequest(hS.ExecuteCommandRequest.type,a)}catch{await Ki.window.showErrorMessage("Failed to apply Stylelint fixes to the document. Please consider opening an issue with steps to reproduce.")}})),t.push(Ki.commands.registerCommand("stylelint.restart",async()=>{await ti.stop();try{await ti.start(),i()}catch(s){await n(s)}})),t.push(new hS.SettingMonitor(ti,"stylelint.enable").start()),Promise.resolve(r)}async function i7(){if(ti)try{return ti.stop()}catch(t){let e=t&&t?t.message:"unknown";throw await Ki.window.showErrorMessage(`error stopping stylelint language server: ${e}`),t}}});var s7=exports&&exports.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),EN=exports&&exports.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&s7(e,t,r)};Object.defineProperty(exports,"__esModule",{value:!0});EN(DN(),exports);EN(m_(),exports);
